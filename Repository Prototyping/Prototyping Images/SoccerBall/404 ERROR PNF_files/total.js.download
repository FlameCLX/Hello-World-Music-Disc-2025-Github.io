(()=>{var bg=Object.create,Gf=Object.defineProperty,Tg=Object.getOwnPropertyDescriptor,zf=Object.getOwnPropertyNames,wg=Object.getPrototypeOf,Sg=Object.prototype.hasOwnProperty,Vf=(r,o)=>function(){return o||(0,r[zf(r)[0]])((o={exports:{}}).exports,o),o.exports},Eg=(r,o,l,u)=>{if(o&&typeof o=="object"||typeof o=="function")for(let f of zf(o))!Sg.call(r,f)&&f!==l&&Gf(r,f,{get:()=>o[f],enumerable:!(u=Tg(o,f))||u.enumerable});return r},Hf=(r,o,l)=>(l=r!=null?bg(wg(r)):{},Eg(o||!r||!r.__esModule?Gf(l,"default",{value:r,enumerable:!0}):l,r)),Ag=Vf({"pack-dist/modules/tns/index.js"(r){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var o=window,l=o.cancelAnimationFrame||o.mozCancelAnimationFrame||function(O){clearTimeout(O)};function u(){for(var O,q,B,E=arguments[0]||{},g=1,A=arguments.length;g<A;g++)if((O=arguments[g])!==null)for(q in O)B=O[q],E!==B&&B!==void 0&&(E[q]=B);return E}function f(O){return["true","false"].indexOf(O)>=0?JSON.parse(O):O}function d(O,q,B,E){if(E)try{O.setItem(q,B)}catch{}return B}function p(){var O=window.tnsId;return window.tnsId=O?O+1:1,"tns"+window.tnsId}function v(){var O=document,q=O.body;return q||(q=O.createElement("body"),q.fake=!0),q}var T=document.documentElement;function C(O){var q="";return O.fake&&(q=T.style.overflow,O.style.background="",O.style.overflow=T.style.overflow="hidden",T.appendChild(O)),q}function b(O,q){O.fake&&(O.remove(),T.style.overflow=q,T.offsetHeight)}function k(){var O=document,q=v(),B=C(q),E=O.createElement("div"),g=!1;q.appendChild(E);try{for(var A="(10px * 10)",H=["calc"+A,"-moz-calc"+A,"-webkit-calc"+A],I,J=0;J<3;J++)if(I=H[J],E.style.width=I,E.offsetWidth===100){g=I.replace(A,"");break}}catch{}return q.fake?b(q,B):E.remove(),g}function D(){var O=document,q=v(),B=C(q),E=O.createElement("div"),g=O.createElement("div"),A="",H=70,I=3,J=!1;E.className="tns-t-subp2",g.className="tns-t-ct";for(var it=0;it<H;it++)A+="<div></div>";return g.innerHTML=A,E.appendChild(g),q.appendChild(E),J=Math.abs(E.getBoundingClientRect().left-g.children[H-I].getBoundingClientRect().left)<2,q.fake?b(q,B):E.remove(),J}function P(){if(window.matchMedia||window.msMatchMedia)return!0;var O=document,q=v(),B=C(q),E=O.createElement("div"),g=O.createElement("style"),A="@media all and (min-width:1px){.tns-mq-test{position:absolute}}",H;return g.type="text/css",E.className="tns-mq-test",q.appendChild(g),q.appendChild(E),g.styleSheet?g.styleSheet.cssText=A:g.appendChild(O.createTextNode(A)),H=window.getComputedStyle?window.getComputedStyle(E).position:E.currentStyle.position,q.fake?b(q,B):E.remove(),H==="absolute"}function L(O,q){var B=document.createElement("style");return O&&B.setAttribute("media",O),q&&B.setAttribute("nonce",q),document.querySelector("head").appendChild(B),B.sheet?B.sheet:B.styleSheet}function j(O,q,B,E){"insertRule"in O?O.insertRule(q+"{"+B+"}",E):O.addRule(q,B,E)}function U(O,q){"deleteRule"in O?O.deleteRule(q):O.removeRule(q)}function N(O){var q="insertRule"in O?O.cssRules:O.rules;return q.length}function Y(O,q){return Math.atan2(O,q)*(180/Math.PI)}function Z(O,q){var B=!1,E=Math.abs(90-Math.abs(O));return E>=90-q?B="horizontal":E<=q&&(B="vertical"),B}function z(O,q,B){for(var E=0,g=O.length;E<g;E++)q.call(B,O[E],E)}var K="classList"in document.createElement("_"),G=K?function(O,q){return O.classList.contains(q)}:function(O,q){return O.className.indexOf(q)>=0},rt=K?function(O,q){G(O,q)||O.classList.add(q)}:function(O,q){G(O,q)||(O.className+=" "+q)},dt=K?function(O,q){G(O,q)&&O.classList.remove(q)}:function(O,q){G(O,q)&&(O.className=O.className.replace(q,""))};function Bt(O,q){return O.hasAttribute(q)}function Tt(O,q){return O.getAttribute(q)}function ie(O){return typeof O.item<"u"}function Kt(O,q){if(O=ie(O)||O instanceof Array?O:[O],Object.prototype.toString.call(q)==="[object Object]")for(var B=O.length;B--;)for(var E in q)O[B].setAttribute(E,q[E])}function Gt(O,q){O=ie(O)||O instanceof Array?O:[O],q=q instanceof Array?q:[q];for(var B=q.length,E=O.length;E--;)for(var g=B;g--;)O[E].removeAttribute(q[g])}function $t(O){for(var q=[],B=0,E=O.length;B<E;B++)q.push(O[B]);return q}function Ht(O,q){O.style.display!=="none"&&(O.style.display="none")}function re(O,q){O.style.display==="none"&&(O.style.display="")}function Ne(O){return window.getComputedStyle(O).display!=="none"}function se(O){if(typeof O=="string"){var q=[O],B=O.charAt(0).toUpperCase()+O.substr(1),E=["Webkit","Moz","ms","O"];E.forEach(function(I){(I!=="ms"||O==="transform")&&q.push(I+B)}),O=q}var g=document.createElement("fakeelement");O.length;for(var A=0;A<O.length;A++){var H=O[A];if(g.style[H]!==void 0)return H}return!1}function pe(O){if(!O||!window.getComputedStyle)return!1;var q=document,B=v(),E=C(B),g=q.createElement("p"),A,H=O.length>9?"-"+O.slice(0,-9).toLowerCase()+"-":"";return H+="transform",B.insertBefore(g,null),g.style[O]="translate3d(1px,1px,1px)",A=window.getComputedStyle(g).getPropertyValue(H),B.fake?b(B,E):g.remove(),A!==void 0&&A.length>0&&A!=="none"}function ue(O,q){var B=!1;return/^Webkit/.test(O)?B="webkit"+q+"End":/^O/.test(O)?B="o"+q+"End":O&&(B=q.toLowerCase()+"end"),B}var fe=!1;try{Ue=Object.defineProperty({},"passive",{get:function(){fe=!0}}),window.addEventListener("test",null,Ue)}catch{}var Ue,ye=fe?{passive:!0}:!1;function _e(O,q,B){for(var E in q){var g=["touchstart","touchmove"].indexOf(E)>=0&&!B?ye:!1;O.addEventListener(E,q[E],g)}}function Qt(O,q){for(var B in q){var E=["touchstart","touchmove"].indexOf(B)>=0?ye:!1;O.removeEventListener(B,q[B],E)}}function Pe(){return{topics:{},on:function(O,q){this.topics[O]=this.topics[O]||[],this.topics[O].push(q)},off:function(O,q){if(this.topics[O]){for(var B=0;B<this.topics[O].length;B++)if(this.topics[O][B]===q){this.topics[O].splice(B,1);break}}},emit:function(O,q){q.type=O,this.topics[O]&&this.topics[O].forEach(function(B){B(q,O)})}}}function nt(O,q,B,E,it,A,H){var I=Math.min(A,10),J=it.indexOf("%")>=0?"%":"px",it=it.replace(J,""),ht=Number(O.style[q].replace(B,"").replace(E,"").replace(J,"")),_t=(it-ht)/A*I;setTimeout(Et,I);function Et(){A-=I,ht+=_t,O.style[q]=B+ht+J+E,A>0?setTimeout(Et,I):H()}}Object.keys||(Object.keys=function(O){var q=[];for(var B in O)Object.prototype.hasOwnProperty.call(O,B)&&q.push(B);return q}),"remove"in Element.prototype||(Element.prototype.remove=function(){this.parentNode&&this.parentNode.removeChild(this)});var et=function(O){O=u({container:".slider",mode:"carousel",axis:"horizontal",items:1,gutter:0,edgePadding:0,fixedWidth:!1,autoWidth:!1,viewportMax:!1,slideBy:1,center:!1,controls:!0,controlsPosition:"top",controlsText:["prev","next"],controlsContainer:!1,prevButton:!1,nextButton:!1,nav:!0,navPosition:"top",navContainer:!1,navAsThumbnails:!1,arrowKeys:!1,speed:300,autoplay:!1,autoplayPosition:"top",autoplayTimeout:5e3,autoplayDirection:"forward",autoplayText:["start","stop"],autoplayHoverPause:!1,autoplayButton:!1,autoplayButtonOutput:!0,autoplayResetOnVisibility:!0,animateIn:"tns-fadeIn",animateOut:"tns-fadeOut",animateNormal:"tns-normal",animateDelay:!1,loop:!0,rewind:!1,autoHeight:!1,responsive:!1,lazyload:!1,lazyloadSelector:".tns-lazy-img",touch:!0,mouseDrag:!1,swipeAngle:15,nested:!1,preventActionWhenRunning:!1,preventScrollOnTouch:!1,freezable:!0,onInit:!1,useLocalStorage:!0,nonce:!1},O||{});var q=document,B=window,E={ENTER:13,SPACE:32,LEFT:37,RIGHT:39},g={},A=O.useLocalStorage;if(A){var H=navigator.userAgent,I=new Date;try{g=B.localStorage,g?(g.setItem(I,I),A=g.getItem(I)==I,g.removeItem(I)):A=!1,A||(g={})}catch{A=!1}A&&(g.tnsApp&&g.tnsApp!==H&&["tC","tPL","tMQ","tTf","t3D","tTDu","tTDe","tADu","tADe","tTE","tAE"].forEach(function(M){g.removeItem(M)}),localStorage.tnsApp=H)}var J=g.tC?f(g.tC):d(g,"tC",k(),A),it=g.tPL?f(g.tPL):d(g,"tPL",D(),A),ht=g.tMQ?f(g.tMQ):d(g,"tMQ",P(),A),_t=g.tTf?f(g.tTf):d(g,"tTf",se("transform"),A),Et=g.t3D?f(g.t3D):d(g,"t3D",pe(_t),A),kt=g.tTDu?f(g.tTDu):d(g,"tTDu",se("transitionDuration"),A),ae=g.tTDe?f(g.tTDe):d(g,"tTDe",se("transitionDelay"),A),Oe=g.tADu?f(g.tADu):d(g,"tADu",se("animationDuration"),A),Fe=g.tADe?f(g.tADe):d(g,"tADe",se("animationDelay"),A),pi=g.tTE?f(g.tTE):d(g,"tTE",ue(kt,"Transition"),A),ri=g.tAE?f(g.tAE):d(g,"tAE",ue(Oe,"Animation"),A),As=B.console&&typeof B.console.warn=="function",ir=["container","controlsContainer","prevButton","nextButton","navContainer","autoplayButton"],ur={};if(ir.forEach(function(M){if(typeof O[M]=="string"){var V=O[M],lt=q.querySelector(V);if(ur[M]=V,lt&&lt.nodeName)O[M]=lt;else{As&&console.warn("Can't find",O[M]);return}}}),O.container.children.length<1){As&&console.warn("No slides found in",O.container);return}var ze=O.responsive,fr=O.nested,Nt=O.mode==="carousel";if(ze){0 in ze&&(O=u(O,ze[0]),delete ze[0]);var os={};for(var me in ze){var rr=ze[me];rr=typeof rr=="number"?{items:rr}:rr,os[me]=rr}ze=os,os=null}function Pn(M){for(var V in M)Nt||(V==="slideBy"&&(M[V]="page"),V==="edgePadding"&&(M[V]=!1),V==="autoHeight"&&(M[V]=!1)),V==="responsive"&&Pn(M[V])}if(Nt||Pn(O),!Nt){O.axis="horizontal",O.slideBy="page",O.edgePadding=!1;var Zi=O.animateIn,tt=O.animateOut,gt=O.animateDelay,st=O.animateNormal}var pt=O.axis==="horizontal",vt=q.createElement("div"),Mt=q.createElement("div"),zt,mt=O.container,ge=mt.parentNode,xe=mt.outerHTML,Ft=mt.children,Vt=Ft.length,Hi,bi=Co(),Ti=!1;ze&&Ml(),Nt&&(mt.className+=" tns-vpfix");var qt=O.autoWidth,Ot=Jt("fixedWidth"),oe=Jt("edgePadding"),be=Jt("gutter"),Re=Al(),Ri=Jt("center"),te=qt?1:Math.floor(Jt("items")),Mn=Jt("slideBy"),pl=O.viewportMax||O.fixedWidthViewportWidth,Cs=Jt("arrowKeys"),dr=Jt("speed"),mo=O.rewind,mi=mo?!1:O.loop,ji=Jt("autoHeight"),Rr=Jt("controls"),Ps=Jt("controlsText"),Dr=Jt("nav"),Ms=Jt("touch"),Rs=Jt("mouseDrag"),wi=Jt("autoplay"),Ds=Jt("autoplayTimeout"),pr=Jt("autoplayText"),Is=Jt("autoplayHoverPause"),Os=Jt("autoplayResetOnVisibility"),Ge=L(null,Jt("nonce")),_a=O.lazyload,Xh=O.lazyloadSelector,Se,jr=[],Di=mi?Xt():0,ke=Nt?Vt+Di*2:Vt+Di,Wh=!!((Ot||qt)&&!mi),si=Ot?Ll():null,va=!Nt||!mi,ee=pt?"left":"top",ks="",Rn="",tn=function(){return Ot?function(){return Ri&&!mi?Vt-1:Math.ceil(-si/(Ot+be))}:qt?function(){for(var M=0;M<ke;M++)if(Se[M]>=-si)return M}:function(){return Ri&&Nt&&!mi?Vt-1:mi||Nt?Math.max(0,ke-Math.ceil(te)):ke-1}}(),Rt=Yh(Jt("startIndex")),Ls=Rt;Yr();var Si=0,Be=qt?null:tn(),Xi=O.preventActionWhenRunning,go=O.swipeAngle,Ir=go?"?":!0,Xr=!1,ml=O.onInit,ni=new Pe,as=" tns-slider tns-"+O.mode,Qe=mt.id||p(),Wi=Jt("disable"),Dn=!1,_o=O.freezable,Li=_o&&!qt?Pl():!1,vo=!1,yo={click:ds,keydown:rc},gl={click:Ra,keydown:Uu},xo={mouseover:Nu,mouseout:yr},en={visibilitychange:vr},In={keydown:Fr},On={touchstart:nr,touchmove:nc,touchend:Vs,touchcancel:Vs},ya={mousedown:nr,mousemove:nc,mouseup:Vs,mouseleave:Vs},kn=Lr("controls"),bo=Lr("nav"),Ln=qt?!0:O.navAsThumbnails,Fn=Lr("autoplay"),Or=Lr("touch"),_l=Lr("mouseDrag"),vl="tns-slide-active",Lu="tns-slide-cloned",xa="tns-complete",ls={load:Sa,error:Ea},Te,yl,Bn=O.preventScrollOnTouch==="force";if(kn)var hi=O.controlsContainer,xl=O.controlsContainer?O.controlsContainer.outerHTML:"",Je=O.prevButton,He=O.nextButton,bl=O.prevButton?O.prevButton.outerHTML:"",Fu=O.nextButton?O.nextButton.outerHTML:"",To,wo;if(bo)var Ei=O.navContainer,Tl=O.navContainer?O.navContainer.outerHTML:"",Fi,mr=qt?Vt:Kn(),rn=0,kr=-1,Yi=Ta(),Fs=Yi,Wr="tns-nav-active",Qi="Carousel Page ",wl=" (Current Slide)";if(Fn)var hs=O.autoplayDirection==="forward"?1:-1,ei=O.autoplayButton,So=O.autoplayButton?O.autoplayButton.outerHTML:"",sn=["<span class='tns-visually-hidden'>"," animation</span>"],Ai,We,ba,Nn,Un;if(Or||_l)var Bs={},gr={},Eo,Ns=!1,_r,Gn=pt?function(M,V){return M.x-V.x}:function(M,V){return M.y-V.y};qt||Ao(Wi||Li),_t&&(ee=_t,ks="translate",Et?(ks+=pt?"3d(":"3d(0px, ",Rn=pt?", 0px, 0px)":", 0px)"):(ks+=pt?"X(":"Y(",Rn=")")),Nt&&(mt.className=mt.className.replace("tns-vpfix","")),jn(),le(),nn();function Ao(M){M&&(Rr=Dr=Ms=Rs=Cs=wi=Is=Os=!1)}function Yr(){for(var M=Nt?Rt-Di:Rt;M<0;)M+=Vt;return M%Vt+1}function Yh(M){return M=M?Math.max(0,Math.min(mi?Vt-1:Vt-te,M)):0,Nt?M+Di:M}function It(M){for(M==null&&(M=Rt),Nt&&(M-=Di);M<0;)M+=Vt;return Math.floor(M%Vt)}function Ta(){var M=It(),V;return V=Ln?M:Ot||qt?Math.ceil((M+1)*mr/Vt-1):Math.floor(M/te),!mi&&Nt&&Rt===Be&&(V=mr-1),V}function $h(){if(qt||Ot&&!pl)return Vt-1;var M=Ot?"fixedWidth":"items",V=[];if((Ot||O[M]<Vt)&&V.push(O[M]),ze)for(var lt in ze){var ft=ze[lt][M];ft&&(Ot||ft<Vt)&&V.push(ft)}return V.length||V.push(0),Math.ceil(Ot?pl/Math.min.apply(null,V):Math.max.apply(null,V))}function Xt(){var M=$h(),V=Nt?Math.ceil((M*5-Vt)/2):M*4-Vt;return V=Math.max(M,V),Lr("edgePadding")?V+1:V}function Co(){return B.innerWidth||q.documentElement.clientWidth||q.body.clientWidth}function Sl(M){return M==="top"?"afterbegin":"beforeend"}function El(M,V){if(M!=null){if(V===void 0&&(V=0),V>10)return 0;if(M===q||M===q.documentElement)return El(M.body||M.parentNode,V+1);var lt=q.createElement("div"),ft,Ct;M.appendChild(lt),ft=lt.getBoundingClientRect(),Ct=ft.right-ft.left,lt.remove();var jt=M.parentNode;return jt&&jt!==M?Ct||El(jt,V+1):Ct||0}}function Al(){var M=oe?oe*2-be:0;return El(ge)-M}function Lr(M){if(O[M])return!0;if(ze){for(var V in ze)if(ze[V][M])return!0}return!1}function Jt(M,V){if(V==null&&(V=bi),M==="items"&&Ot)return Math.floor((Re+be)/(Ot+be))||1;var lt=O[M];if(ze)for(var ft in ze)V>=parseInt(ft)&&M in ze[ft]&&(lt=ze[ft][M]);return M==="slideBy"&&lt==="page"&&(lt=Jt("items")),!Nt&&(M==="slideBy"||M==="items")&&(lt=Math.floor(lt)),lt}function Cl(M){return J?J+"("+M*100+"% / "+ke+")":M*100/ke+"%"}function zn(M,V,lt,ft,Ct){var jt="";if(M!==void 0){var Ee=M;V&&(Ee-=V),jt=pt?"margin: 0 "+Ee+"px 0 "+M+"px;":"margin: "+M+"px 0 "+Ee+"px 0;"}else if(V&&!lt){var ui="-"+V+"px",fi=pt?ui+" 0 0":"0 "+ui+" 0";jt="margin: 0 "+fi+";"}return!Nt&&Ct&&kt&&ft&&(jt+=cs(ft)),jt}function Vn(M,V,lt){return M?(M+V)*ke+"px":J?J+"("+ke*100+"% / "+lt+")":ke*100/lt+"%"}function Hn(M,V,lt){var ft;if(M)ft=M+V+"px";else{Nt||(lt=Math.floor(lt));var Ct=Nt?ke:lt;ft=J?J+"(100% / "+Ct+")":100/Ct+"%"}return ft="width:"+ft,fr!=="inner"?ft+";":ft+" !important;"}function sr(M){var V="";if(M!==!1){var lt=pt?"padding-":"margin-",ft=pt?"right":"bottom";V=lt+ft+": "+M+"px;"}return V}function Po(M,V){var lt=M.substring(0,M.length-V).toLowerCase();return lt&&(lt="-"+lt+"-"),lt}function cs(M){return Po(kt,18)+"transition-duration:"+M/1e3+"s;"}function Ji(M){return Po(Oe,17)+"animation-duration:"+M/1e3+"s;"}function jn(){var M="tns-outer",V="tns-inner";if(Lr("gutter"),vt.className=M,Mt.className=V,vt.id=Qe+"-ow",Mt.id=Qe+"-iw",mt.id===""&&(mt.id=Qe),as+=it||qt?" tns-subpixel":" tns-no-subpixel",as+=J?" tns-calc":" tns-no-calc",qt&&(as+=" tns-autowidth"),as+=" tns-"+O.axis,mt.className+=as,Nt?(zt=q.createElement("div"),zt.id=Qe+"-mw",zt.className="tns-ovh",vt.appendChild(zt),zt.appendChild(Mt)):vt.appendChild(Mt),ji){var lt=zt||Mt;lt.className+=" tns-ah"}if(ge.insertBefore(vt,mt),Mt.appendChild(mt),z(Ft,function(wt,tr){rt(wt,"tns-item"),wt.id||(wt.id=Qe+"-item"+tr),!Nt&&st&&rt(wt,st),Kt(wt,{"aria-hidden":"true",tabindex:"-1"})}),Di){for(var ft=q.createDocumentFragment(),Ct=q.createDocumentFragment(),jt=Di;jt--;){var Ee=jt%Vt,ui=Ft[Ee].cloneNode(!0);if(rt(ui,Lu),Gt(ui,"id"),Ct.insertBefore(ui,Ct.firstChild),Nt){var fi=Ft[Vt-1-Ee].cloneNode(!0);rt(fi,Lu),Gt(fi,"id"),ft.appendChild(fi)}}mt.insertBefore(ft,mt.firstChild),mt.appendChild(Ct),Ft=mt.children}}function nn(){if(Lr("autoHeight")||qt||!pt){var M=mt.querySelectorAll("img");z(M,function(V){var lt=V.src;_a||(lt&&lt.indexOf("data:image")<0?(V.src="",_e(V,ls),rt(V,"loading"),V.src=lt):Us(V))}),ct(function(){Kr($t(M),function(){Te=!0})}),Lr("autoHeight")&&(M=us(Rt,Math.min(Rt+te-1,ke-1))),_a?qh():ct(function(){Kr($t(M),qh)})}else Nt&&Yn(),Mo(),Kh()}function qh(){if(qt&&Vt>1){var M=mi?Rt:Vt-1;(function V(){var lt=Ft[M].getBoundingClientRect().left,ft=Ft[M-1].getBoundingClientRect().right;Math.abs(lt-ft)<=1?on():setTimeout(function(){V()},16)})()}else on()}function on(){(!pt||qt)&&(Jh(),qt?(si=Ll(),_o&&(Li=Pl()),Be=tn(),Ao(Wi||Li)):ci()),Nt&&Yn(),Mo(),Kh()}function le(){if(!Nt)for(var M=Rt,V=Rt+Math.min(Vt,te);M<V;M++){var lt=Ft[M];lt.style.left=(M-Rt)*100/te+"%",rt(lt,Zi),dt(lt,st)}if(pt&&(it||qt?(j(Ge,"#"+Qe+" > .tns-item","font-size:"+B.getComputedStyle(Ft[0]).fontSize+";",N(Ge)),j(Ge,"#"+Qe,"font-size:0;",N(Ge))):Nt&&z(Ft,function(zo,Vo){zo.style.marginLeft=Cl(Vo)})),ht){if(kt){var ft=zt&&O.autoHeight?cs(O.speed):"";j(Ge,"#"+Qe+"-mw",ft,N(Ge))}ft=zn(O.edgePadding,O.gutter,O.fixedWidth,O.speed,O.autoHeight),j(Ge,"#"+Qe+"-iw",ft,N(Ge)),Nt&&(ft=pt&&!qt?"width:"+Vn(O.fixedWidth,O.gutter,O.items)+";":"",kt&&(ft+=cs(dr)),j(Ge,"#"+Qe,ft,N(Ge))),ft=pt&&!qt?Hn(O.fixedWidth,O.gutter,O.items):"",O.gutter&&(ft+=sr(O.gutter)),Nt||(kt&&(ft+=cs(dr)),Oe&&(ft+=Ji(dr))),ft&&j(Ge,"#"+Qe+" > .tns-item",ft,N(Ge))}else{Ol(),Mt.style.cssText=zn(oe,be,Ot,ji),Nt&&pt&&!qt&&(mt.style.width=Vn(Ot,be,te));var ft=pt&&!qt?Hn(Ot,be,te):"";be&&(ft+=sr(be)),ft&&j(Ge,"#"+Qe+" > .tns-item",ft,N(Ge))}if(ze&&ht)for(var Ct in ze){Ct=parseInt(Ct);var jt=ze[Ct],ft="",Ee="",ui="",fi="",wt="",tr=qt?null:Jt("items",Ct),un=Jt("fixedWidth",Ct),Hs=Jt("speed",Ct),Go=Jt("edgePadding",Ct),Ia=Jt("autoHeight",Ct),ms=Jt("gutter",Ct);kt&&zt&&Jt("autoHeight",Ct)&&"speed"in jt&&(Ee="#"+Qe+"-mw{"+cs(Hs)+"}"),("edgePadding"in jt||"gutter"in jt)&&(ui="#"+Qe+"-iw{"+zn(Go,ms,un,Hs,Ia)+"}"),Nt&&pt&&!qt&&("fixedWidth"in jt||"items"in jt||Ot&&"gutter"in jt)&&(fi="width:"+Vn(un,ms,tr)+";"),kt&&"speed"in jt&&(fi+=cs(Hs)),fi&&(fi="#"+Qe+"{"+fi+"}"),("fixedWidth"in jt||Ot&&"gutter"in jt||!Nt&&"items"in jt)&&(wt+=Hn(un,ms,tr)),"gutter"in jt&&(wt+=sr(ms)),!Nt&&"speed"in jt&&(kt&&(wt+=cs(Hs)),Oe&&(wt+=Ji(Hs))),wt&&(wt="#"+Qe+" > .tns-item{"+wt+"}"),ft=Ee+ui+fi+wt,ft&&Ge.insertRule("@media (min-width: "+Ct/16+"em) {"+ft+"}",Ge.cssRules.length)}}function Mo(){if(Ye(),vt.insertAdjacentHTML("afterbegin",'<div class="tns-liveregion tns-visually-hidden" aria-live="polite" aria-atomic="true">slide <span class="current">'+we()+"</span>  of "+Vt+"</div>"),yl=vt.querySelector(".tns-liveregion .current"),Fn){var M=wi?"stop":"start";ei?Kt(ei,{"data-action":M}):O.autoplayButtonOutput&&(vt.insertAdjacentHTML(Sl(O.autoplayPosition),'<button type="button" data-action="'+M+'">'+sn[0]+M+sn[1]+pr[0]+"</button>"),ei=vt.querySelector("[data-action]")),ei&&_e(ei,{click:hn}),wi&&(zs(),Is&&_e(mt,xo),Os&&_e(mt,en))}if(bo){if(Ei)Kt(Ei,{"aria-label":"Carousel Pagination"}),Fi=Ei.children,z(Fi,function(Ee,ui){Kt(Ee,{"data-nav":ui,tabindex:"-1","aria-label":Qi+(ui+1),"aria-controls":Qe})});else{for(var V="",lt=Ln?"":'style="display:none"',ft=0;ft<Vt;ft++)V+='<button type="button" data-nav="'+ft+'" tabindex="-1" aria-controls="'+Qe+'" '+lt+' aria-label="'+Qi+(ft+1)+'"></button>';V='<div class="tns-nav" aria-label="Carousel Pagination">'+V+"</div>",vt.insertAdjacentHTML(Sl(O.navPosition),V),Ei=vt.querySelector(".tns-nav"),Fi=Ei.children}if(Uo(),kt){var Ct=kt.substring(0,kt.length-18).toLowerCase(),jt="transition: all "+dr/1e3+"s";Ct&&(jt="-"+Ct+"-"+jt),j(Ge,"[aria-controls^="+Qe+"-item]",jt,N(Ge))}Kt(Fi[Yi],{"aria-label":Qi+(Yi+1)+wl}),Gt(Fi[Yi],"tabindex"),rt(Fi[Yi],Wr),_e(Ei,gl)}kn&&(!hi&&(!Je||!He)&&(vt.insertAdjacentHTML(Sl(O.controlsPosition),'<div class="tns-controls" aria-label="Carousel Navigation" tabindex="0"><button type="button" data-controls="prev" tabindex="-1" aria-controls="'+Qe+'">'+Ps[0]+'</button><button type="button" data-controls="next" tabindex="-1" aria-controls="'+Qe+'">'+Ps[1]+"</button></div>"),hi=vt.querySelector(".tns-controls")),(!Je||!He)&&(Je=hi.children[0],He=hi.children[1]),O.controlsContainer&&Kt(hi,{"aria-label":"Carousel Navigation",tabindex:"0"}),(O.controlsContainer||O.prevButton&&O.nextButton)&&Kt([Je,He],{"aria-controls":Qe,tabindex:"-1"}),(O.controlsContainer||O.prevButton&&O.nextButton)&&(Kt(Je,{"data-controls":"prev"}),Kt(He,{"data-controls":"next"})),To=ec(Je),wo=ec(He),Ca(),hi?_e(hi,yo):(_e(Je,yo),_e(He,yo))),Dl()}function Kh(){if(Nt&&pi){var M={};M[pi]=Zr,_e(mt,M)}Ms&&_e(mt,On,O.preventScrollOnTouch),Rs&&_e(mt,ya),Cs&&_e(q,In),fr==="inner"?ni.on("outerResized",function(){Zh(),ni.emit("innerLoaded",Ii())}):(ze||Ot||qt||ji||!pt)&&_e(B,{resize:Xn}),ji&&(fr==="outer"?ni.on("innerLoaded",qr):Wi||qr()),de(),Wi?Il():Li&&wa(),ni.on("indexChanged",Gs),fr==="inner"&&ni.emit("innerLoaded",Ii()),typeof ml=="function"&&ml(Ii()),Ti=!0}function oi(){if(Ge.disabled=!0,Ge.ownerNode&&Ge.ownerNode.remove(),Qt(B,{resize:Xn}),Cs&&Qt(q,In),hi&&Qt(hi,yo),Ei&&Qt(Ei,gl),Qt(mt,xo),Qt(mt,en),ei&&Qt(ei,{click:hn}),wi&&clearInterval(Ai),Nt&&pi){var M={};M[pi]=Zr,Qt(mt,M)}Ms&&Qt(mt,On),Rs&&Qt(mt,ya);var V=[xe,xl,bl,Fu,Tl,So];ir.forEach(function(ft,Ct){var jt=ft==="container"?vt:O[ft];if(typeof jt=="object"&&jt){var Ee=jt.previousElementSibling?jt.previousElementSibling:!1,ui=jt.parentNode;jt.outerHTML=V[Ct],O[ft]=Ee?Ee.nextElementSibling:ui.firstElementChild}}),ir=Zi=tt=gt=st=pt=vt=Mt=mt=ge=xe=Ft=Vt=Hi=bi=qt=Ot=oe=be=Re=te=Mn=pl=Cs=dr=mo=mi=ji=Ge=_a=Se=jr=Di=ke=Wh=si=va=ee=ks=Rn=tn=Rt=Ls=Si=Be=go=Ir=Xr=ml=ni=as=Qe=Wi=Dn=_o=Li=vo=yo=gl=xo=en=In=On=ya=kn=bo=Ln=Fn=Or=_l=vl=xa=ls=Te=Rr=Ps=hi=xl=Je=He=To=wo=Dr=Ei=Tl=Fi=mr=rn=kr=Yi=Fs=Wr=Qi=wl=wi=Ds=hs=pr=Is=ei=So=Os=sn=Ai=We=ba=Nn=Un=Bs=gr=Eo=Ns=_r=Gn=Ms=Rs=null;for(var lt in this)lt!=="rebuild"&&(this[lt]=null);Ti=!1}function Xn(M){ct(function(){Zh(ps(M))})}function Zh(M){if(Ti){fr==="outer"&&ni.emit("outerResized",Ii(M)),bi=Co();var V,lt=Hi,ft=!1;ze&&(Ml(),V=lt!==Hi,V&&ni.emit("newBreakpointStart",Ii(M)));var Ct,jt,Ee=te,ui=Wi,fi=Li,wt=Cs,tr=Rr,un=Dr,Hs=Ms,Go=Rs,Ia=wi,ms=Is,zo=Os,Vo=Rt;if(V){var ac=Ot,Gu=ji,Gl=Ps,zl=Ri,Ho=pr;if(!ht)var lc=be,Oa=oe}if(Cs=Jt("arrowKeys"),Rr=Jt("controls"),Dr=Jt("nav"),Ms=Jt("touch"),Ri=Jt("center"),Rs=Jt("mouseDrag"),wi=Jt("autoplay"),Is=Jt("autoplayHoverPause"),Os=Jt("autoplayResetOnVisibility"),V&&(Wi=Jt("disable"),Ot=Jt("fixedWidth"),dr=Jt("speed"),ji=Jt("autoHeight"),Ps=Jt("controlsText"),pr=Jt("autoplayText"),Ds=Jt("autoplayTimeout"),ht||(oe=Jt("edgePadding"),be=Jt("gutter"))),Ao(Wi),Re=Al(),(!pt||qt)&&!Wi&&(Jh(),pt||(ci(),ft=!0)),(Ot||qt)&&(si=Ll(),Be=tn()),(V||Ot)&&(te=Jt("items"),Mn=Jt("slideBy"),jt=te!==Ee,jt&&(!Ot&&!qt&&(Be=tn()),Rl())),V&&Wi!==ui&&(Wi?Il():Qh()),_o&&(V||Ot||qt)&&(Li=Pl(),Li!==fi&&(Li?($n(Pa(Yh(0))),wa()):(Ro(),ft=!0))),Ao(Wi||Li),wi||(Is=Os=!1),Cs!==wt&&(Cs?_e(q,In):Qt(q,In)),Rr!==tr&&(Rr?hi?re(hi):(Je&&re(Je),He&&re(He)):hi?Ht(hi):(Je&&Ht(Je),He&&Ht(He))),Dr!==un&&(Dr?(re(Ei),Uo()):Ht(Ei)),Ms!==Hs&&(Ms?_e(mt,On,O.preventScrollOnTouch):Qt(mt,On)),Rs!==Go&&(Rs?_e(mt,ya):Qt(mt,ya)),wi!==Ia&&(wi?(ei&&re(ei),!We&&!Nn&&zs()):(ei&&Ht(ei),We&&qn())),Is!==ms&&(Is?_e(mt,xo):Qt(mt,xo)),Os!==zo&&(Os?_e(q,en):Qt(q,en)),V){if((Ot!==ac||Ri!==zl)&&(ft=!0),ji!==Gu&&(ji||(Mt.style.height="")),Rr&&Ps!==Gl&&(Je.innerHTML=Ps[0],He.innerHTML=Ps[1]),ei&&pr!==Ho){var Vl=wi?1:0,Hl=ei.innerHTML,jl=Hl.length-Ho[Vl].length;Hl.substring(jl)===Ho[Vl]&&(ei.innerHTML=Hl.substring(0,jl)+pr[Vl])}}else Ri&&(Ot||qt)&&(ft=!0);if((jt||Ot&&!qt)&&(mr=Kn(),Uo()),Ct=Rt!==Vo,Ct?(ni.emit("indexChanged",Ii()),ft=!0):jt?Ct||Gs():(Ot||qt)&&(de(),Ye(),gi()),jt&&!Nt&&fs(),!Wi&&!Li){if(V&&!ht&&((oe!==Oa||be!==lc)&&(Mt.style.cssText=zn(oe,be,Ot,dr,ji)),pt)){Nt&&(mt.style.width=Vn(Ot,be,te));var hc=Hn(Ot,be,te)+sr(be);U(Ge,N(Ge)-1),j(Ge,"#"+Qe+" > .tns-item",hc,N(Ge))}ji&&qr(),ft&&(Yn(),Ls=Rt)}V&&ni.emit("newBreakpointEnd",Ii(M))}}function Pl(){if(!Ot&&!qt){var M=Ri?te-(te-1)/2:te;return Vt<=M}var V=Ot?(Ot+be)*Vt:Se[Vt],lt=oe?Re+oe*2:Re+be;return Ri&&(lt-=Ot?(Re-Ot)/2:(Re-(Se[Rt+1]-Se[Rt]-be))/2),V<=lt}function Ml(){Hi=0;for(var M in ze)M=parseInt(M),bi>=M&&(Hi=M)}var Rl=function(){return mi?Nt?function(){var M=Si,V=Be;M+=Mn,V-=Mn,oe?(M+=1,V-=1):Ot&&(Re+be)%(Ot+be)&&(V-=1),Di&&(Rt>V?Rt-=Vt:Rt<M&&(Rt+=Vt))}:function(){if(Rt>Be)for(;Rt>=Si+Vt;)Rt-=Vt;else if(Rt<Si)for(;Rt<=Be-Vt;)Rt+=Vt}:function(){Rt=Math.max(Si,Math.min(Be,Rt))}}();function Dl(){!wi&&ei&&Ht(ei),!Dr&&Ei&&Ht(Ei),Rr||(hi?Ht(hi):(Je&&Ht(Je),He&&Ht(He)))}function $r(){wi&&ei&&re(ei),Dr&&Ei&&re(Ei),Rr&&(hi?re(hi):(Je&&re(Je),He&&re(He)))}function wa(){if(!vo){if(oe&&(Mt.style.margin="0px"),Di)for(var M="tns-transparent",V=Di;V--;)Nt&&rt(Ft[V],M),rt(Ft[ke-V-1],M);Dl(),vo=!0}}function Ro(){if(vo){if(oe&&ht&&(Mt.style.margin=""),Di)for(var M="tns-transparent",V=Di;V--;)Nt&&dt(Ft[V],M),dt(Ft[ke-V-1],M);$r(),vo=!1}}function Il(){if(!Dn){if(Ge.disabled=!0,mt.className=mt.className.replace(as.substring(1),""),Gt(mt,["style"]),mi)for(var M=Di;M--;)Nt&&Ht(Ft[M]),Ht(Ft[ke-M-1]);if((!pt||!Nt)&&Gt(Mt,["style"]),!Nt)for(var V=Rt,lt=Rt+Vt;V<lt;V++){var ft=Ft[V];Gt(ft,["style"]),dt(ft,Zi),dt(ft,st)}Dl(),Dn=!0}}function Qh(){if(Dn){if(Ge.disabled=!1,mt.className+=as,Yn(),mi)for(var M=Di;M--;)Nt&&re(Ft[M]),re(Ft[ke-M-1]);if(!Nt)for(var V=Rt,lt=Rt+Vt;V<lt;V++){var ft=Ft[V],Ct=V<Rt+te?Zi:st;ft.style.left=(V-Rt)*100/te+"%",rt(ft,Ct)}$r(),Dn=!1}}function gi(){var M=we();yl.innerHTML!==M&&(yl.innerHTML=M)}function we(){var M=an(),V=M[0]+1,lt=M[1]+1;return V===lt?V+"":V+" to "+lt}function an(M){M==null&&(M=Pa());var V=Rt,lt,ft,Ct;if(Ri||oe?(qt||Ot)&&(ft=-(parseFloat(M)+oe),Ct=ft+Re+oe*2):qt&&(ft=Se[Rt],Ct=ft+Re),qt)Se.forEach(function(fi,wt){wt<ke&&((Ri||oe)&&fi<=ft+.5&&(V=wt),Ct-fi>=.5&&(lt=wt))});else{if(Ot){var jt=Ot+be;Ri||oe?(V=Math.floor(ft/jt),lt=Math.ceil(Ct/jt-1)):lt=V+Math.ceil(Re/jt)-1}else if(Ri||oe){var Ee=te-1;if(Ri?(V-=Ee/2,lt=Rt+Ee/2):lt=Rt+Ee,oe){var ui=oe*te/Re;V-=ui,lt+=ui}V=Math.floor(V),lt=Math.ceil(lt)}else lt=V+te-1;V=Math.max(V,0),lt=Math.min(lt,ke-1)}return[V,lt]}function de(){if(_a&&!Wi){var M=an();M.push(Xh),us.apply(null,M).forEach(function(V){if(!G(V,xa)){var lt={};lt[pi]=function(Ct){Ct.stopPropagation()},_e(V,lt),_e(V,ls),V.src=Tt(V,"data-src");var ft=Tt(V,"data-srcset");ft&&(V.srcset=ft),rt(V,"loading")}})}}function Sa(M){Us(Qr(M))}function Ea(M){Aa(Qr(M))}function Us(M){rt(M,"loaded"),je(M)}function Aa(M){rt(M,"failed"),je(M)}function je(M){rt(M,xa),dt(M,"loading"),Qt(M,ls)}function us(M,V,lt){var ft=[];for(lt||(lt="img");M<=V;)z(Ft[M].querySelectorAll(lt),function(Ct){ft.push(Ct)}),M++;return ft}function qr(){var M=us.apply(null,an());ct(function(){Kr(M,Do)})}function Kr(M,V){if(Te||(M.forEach(function(lt,ft){!_a&&lt.complete&&je(lt),G(lt,xa)&&M.splice(ft,1)}),!M.length))return V();ct(function(){Kr(M,V)})}function Gs(){de(),Ye(),gi(),Ca(),tc()}function Ol(){Nt&&ji&&(zt.style[kt]=dr/1e3+"s")}function kl(M,V){for(var lt=[],ft=M,Ct=Math.min(M+V,ke);ft<Ct;ft++)lt.push(Ft[ft].offsetHeight);return Math.max.apply(null,lt)}function Do(){var M=ji?kl(Rt,te):kl(Di,Vt),V=zt||Mt;V.style.height!==M&&(V.style.height=M+"px")}function Jh(){Se=[0];var M=pt?"left":"top",V=pt?"right":"bottom",lt=Ft[0].getBoundingClientRect()[M];z(Ft,function(ft,Ct){Ct&&Se.push(ft.getBoundingClientRect()[M]-lt),Ct===ke-1&&Se.push(ft.getBoundingClientRect()[V]-lt)})}function Ye(){var M=an(),V=M[0],lt=M[1];z(Ft,function(ft,Ct){Ct>=V&&Ct<=lt?Bt(ft,"aria-hidden")&&(Gt(ft,["aria-hidden","tabindex"]),rt(ft,vl)):Bt(ft,"aria-hidden")||(Kt(ft,{"aria-hidden":"true",tabindex:"-1"}),dt(ft,vl))})}function fs(){for(var M=Rt+Math.min(Vt,te),V=ke;V--;){var lt=Ft[V];V>=Rt&&V<M?(rt(lt,"tns-moving"),lt.style.left=(V-Rt)*100/te+"%",rt(lt,Zi),dt(lt,st)):lt.style.left&&(lt.style.left="",rt(lt,st),dt(lt,Zi)),dt(lt,tt)}setTimeout(function(){z(Ft,function(ft){dt(ft,"tns-moving")})},300)}function tc(){if(Dr&&(Yi=kr>=0?kr:Ta(),kr=-1,Yi!==Fs)){var M=Fi[Fs],V=Fi[Yi];Kt(M,{tabindex:"-1","aria-label":Qi+(Fs+1)}),dt(M,Wr),Kt(V,{"aria-label":Qi+(Yi+1)+wl}),Gt(V,"tabindex"),rt(V,Wr),Fs=Yi}}function Wn(M){return M.nodeName.toLowerCase()}function ec(M){return Wn(M)==="button"}function ic(M){return M.getAttribute("aria-disabled")==="true"}function Io(M,V,lt){M?V.disabled=lt:V.setAttribute("aria-disabled",lt.toString())}function Ca(){if(!(!Rr||mo||mi)){var M=To?Je.disabled:ic(Je),V=wo?He.disabled:ic(He),lt=Rt<=Si,ft=!mo&&Rt>=Be;lt&&!M&&Io(To,Je,!0),!lt&&M&&Io(To,Je,!1),ft&&!V&&Io(wo,He,!0),!ft&&V&&Io(wo,He,!1)}}function Oo(M,V){kt&&(M.style[kt]=V)}function ln(){return Ot?(Ot+be)*ke:Se[ke]}function ko(M){M==null&&(M=Rt);var V=oe?be:0;return qt?(Re-V-(Se[M+1]-Se[M]-be))/2:Ot?(Re-Ot)/2:(te-1)/2}function Ll(){var M=oe?be:0,V=Re+M-ln();return Ri&&!mi&&(V=Ot?-(Ot+be)*(ke-1)-ko():ko(ke-1)-Se[ke-1]),V>0&&(V=0),V}function Pa(M){M==null&&(M=Rt);var V;if(pt&&!qt)if(Ot)V=-(Ot+be)*M,Ri&&(V+=ko());else{var lt=_t?ke:te;Ri&&(M-=ko()),V=-M*100/lt}else!Se||typeof Se[M]>"u"?V=0:V=-Se[M],Ri&&qt&&(V+=ko());return Wh&&(V=Math.max(V,si)),V+=pt&&!qt&&!Ot?"%":"px",V}function Yn(M){Oo(mt,"0s"),$n(M)}function $n(M){M==null&&(M=Pa()),mt.style[ee]=ks+M+Rn}function Fl(M,V,lt,ft){var Ct=M+te;mi||(Ct=Math.min(Ct,ke));for(var jt=M;jt<Ct;jt++){var Ee=Ft[jt];ft||(Ee.style.left=(jt-Rt)*100/te+"%"),gt&&ae&&(Ee.style[ae]=Ee.style[Fe]=gt*(jt-M)/1e3+"s"),dt(Ee,V),rt(Ee,lt),ft&&jr.push(Ee)}}var Ma=function(){return Nt?function(){Oo(mt,""),kt||!dr?($n(),(!dr||!Ne(mt))&&Zr()):nt(mt,ee,ks,Rn,Pa(),dr,Zr),pt||ci()}:function(){jr=[];var M={};M[pi]=M[ri]=Zr,Qt(Ft[Ls],M),_e(Ft[Rt],M),Fl(Ls,Zi,tt,!0),Fl(Rt,st,Zi),(!pi||!ri||!dr||!Ne(mt))&&Zr()}}();function Bl(M,V){va&&Rl(),(Rt!==Ls||V)&&(ni.emit("indexChanged",Ii()),ni.emit("transitionStart",Ii()),ji&&qr(),We&&M&&["click","keydown"].indexOf(M.type)>=0&&qn(),Xr=!0,Ma())}function Nl(M){return M.toLowerCase().replace(/-/g,"")}function Zr(M){if(Nt||Xr){if(ni.emit("transitionEnd",Ii(M)),!Nt&&jr.length>0)for(var V=0;V<jr.length;V++){var lt=jr[V];lt.style.left="",Fe&&ae&&(lt.style[Fe]="",lt.style[ae]=""),dt(lt,tt),rt(lt,st)}if(!M||!Nt&&M.target.parentNode===mt||M.target===mt&&Nl(M.propertyName)===Nl(ee)){if(!va){var ft=Rt;Rl(),Rt!==ft&&(ni.emit("indexChanged",Ii()),Yn())}fr==="inner"&&ni.emit("innerLoaded",Ii()),Xr=!1,Ls=Rt}}}function Lo(M,V){if(!Li)if(M==="prev")ds(V,-1);else if(M==="next")ds(V,1);else{if(Xr){if(Xi)return;Zr()}var lt=It(),ft=0;if(M==="first"?ft=-lt:M==="last"?ft=Nt?Vt-te-lt:Vt-1-lt:(typeof M!="number"&&(M=parseInt(M)),isNaN(M)||(V||(M=Math.max(0,Math.min(Vt-1,M))),ft=M-lt)),!Nt&&ft&&Math.abs(ft)<te){var Ct=ft>0?1:-1;ft+=Rt+ft-Vt>=Si?Vt*Ct:Vt*2*Ct*-1}Rt+=ft,Nt&&mi&&(Rt<Si&&(Rt+=Vt),Rt>Be&&(Rt-=Vt)),It(Rt)!==It(Ls)&&Bl(V)}}function ds(M,V){if(Xr){if(Xi)return;Zr()}var lt;if(!V){M=ps(M);for(var ft=Qr(M);ft!==hi&&[Je,He].indexOf(ft)<0;)ft=ft.parentNode;var Ct=[Je,He].indexOf(ft);Ct>=0&&(lt=!0,V=Ct===0?-1:1)}if(mo){if(Rt===Si&&V===-1){Lo("last",M);return}else if(Rt===Be&&V===1){Lo("first",M);return}}V&&(Rt+=Mn*V,qt&&(Rt=Math.floor(Rt)),Bl(lt||M&&M.type==="keydown"?M:null))}function Ra(M){if(Xr){if(Xi)return;Zr()}M=ps(M);for(var V=Qr(M),lt;V!==Ei&&!Bt(V,"data-nav");)V=V.parentNode;if(Bt(V,"data-nav")){var lt=kr=Number(Tt(V,"data-nav")),ft=Ot||qt?lt*Vt/mr:lt*te,Ct=Ln?lt:Math.min(Math.ceil(ft),Vt-1);Lo(Ct,M),Yi===lt&&(We&&qn(),kr=-1)}}function Fo(){Ai=setInterval(function(){ds(null,hs)},Ds),We=!0}function Bo(){clearInterval(Ai),We=!1}function Ul(M,V){Kt(ei,{"data-action":M}),ei.innerHTML=sn[0]+M+sn[1]+V}function zs(){Fo(),ei&&Ul("stop",pr[1])}function qn(){Bo(),ei&&Ul("start",pr[0])}function Bu(){wi&&!We&&(zs(),Nn=!1)}function Da(){We&&(qn(),Nn=!0)}function hn(){We?(qn(),Nn=!0):(zs(),Nn=!1)}function vr(){q.hidden?We&&(Bo(),Un=!0):Un&&(Fo(),Un=!1)}function Nu(){We&&(Bo(),ba=!0)}function yr(){ba&&(Fo(),ba=!1)}function Fr(M){M=ps(M);var V=[E.LEFT,E.RIGHT].indexOf(M.keyCode);V>=0&&ds(M,V===0?-1:1)}function rc(M){M=ps(M);var V=[E.LEFT,E.RIGHT].indexOf(M.keyCode);V>=0&&(V===0?Je.disabled||ds(M,-1):He.disabled||ds(M,1))}function No(M){M.focus()}function Uu(M){M=ps(M);var V=q.activeElement;if(Bt(V,"data-nav")){var lt=[E.LEFT,E.RIGHT,E.ENTER,E.SPACE].indexOf(M.keyCode),ft=Number(Tt(V,"data-nav"));lt>=0&&(lt===0?ft>0&&No(Fi[ft-1]):lt===1?ft<mr-1&&No(Fi[ft+1]):(kr=ft,Lo(ft,M)))}}function ps(M){return M=M||B.event,cn(M)?M.changedTouches[0]:M}function Qr(M){return M.target||B.event.srcElement}function cn(M){return M.type.indexOf("touch")>=0}function sc(M){M.preventDefault?M.preventDefault():M.returnValue=!1}function xr(){return Z(Y(gr.y-Bs.y,gr.x-Bs.x),go)===O.axis}function nr(M){if(Xr){if(Xi)return;Zr()}wi&&We&&Bo(),Ns=!0,_r&&(l(_r),_r=null);var V=ps(M);ni.emit(cn(M)?"touchStart":"dragStart",Ii(M)),!cn(M)&&["img","a"].indexOf(Wn(Qr(M)))>=0&&sc(M),gr.x=Bs.x=V.clientX,gr.y=Bs.y=V.clientY,Nt&&(Eo=parseFloat(mt.style[ee].replace(ks,"")),Oo(mt,"0s"))}function nc(M){if(Ns){var V=ps(M);gr.x=V.clientX,gr.y=V.clientY,Nt?_r||(_r=ct(function(){oc(M)})):(Ir==="?"&&(Ir=xr()),Ir&&(Bn=!0)),(typeof M.cancelable!="boolean"||M.cancelable)&&Bn&&M.preventDefault()}}function oc(M){if(!Ir){Ns=!1;return}if(l(_r),Ns&&(_r=ct(function(){oc(M)})),Ir==="?"&&(Ir=xr()),Ir){!Bn&&cn(M)&&(Bn=!0);try{M.type&&ni.emit(cn(M)?"touchMove":"dragMove",Ii(M))}catch{}var V=Eo,lt=Gn(gr,Bs);if(!pt||Ot||qt)V+=lt,V+="px";else{var ft=_t?lt*te*100/((Re+be)*ke):lt*100/(Re+be);V+=ft,V+="%"}mt.style[ee]=ks+V+Rn}}function Vs(M){if(Ns){_r&&(l(_r),_r=null),Nt&&Oo(mt,""),Ns=!1;var V=ps(M);gr.x=V.clientX,gr.y=V.clientY;var lt=Gn(gr,Bs);if(Math.abs(lt)){if(!cn(M)){var ft=Qr(M);_e(ft,{click:function Ct(jt){sc(jt),Qt(ft,{click:Ct})}})}Nt?_r=ct(function(){if(pt&&!qt){var Ct=-lt*te/(Re+be);Ct=lt>0?Math.floor(Ct):Math.ceil(Ct),Rt+=Ct}else{var jt=-(Eo+lt);if(jt<=0)Rt=Si;else if(jt>=Se[ke-1])Rt=Be;else for(var Ee=0;Ee<ke&&jt>=Se[Ee];)Rt=Ee,jt>Se[Ee]&&lt<0&&(Rt+=1),Ee++}Bl(M,lt),ni.emit(cn(M)?"touchEnd":"dragEnd",Ii(M))}):Ir&&ds(M,lt>0?-1:1)}}O.preventScrollOnTouch==="auto"&&(Bn=!1),go&&(Ir="?"),wi&&!We&&Fo()}function ci(){var M=zt||Mt;!Se||typeof Se[Rt]>"u"||typeof Se[Rt+te]>"u"?M.style.height="0px":M.style.height=Se[Rt+te]-Se[Rt]+"px"}function Kn(){var M=Ot?(Ot+be)*Vt/Re:Vt/te;return Math.min(Math.ceil(M),Vt)}function Uo(){if(!(!Dr||Ln)&&mr!==rn){var M=rn,V=mr,lt=re;for(rn>mr&&(M=mr,V=rn,lt=Ht);M<V;)lt(Fi[M]),M++;rn=mr}}function Ii(M){return{container:mt,slideItems:Ft,navContainer:Ei,navItems:Fi,controlsContainer:hi,hasControls:kn,prevButton:Je,nextButton:He,items:te,slideBy:Mn,cloneCount:Di,slideCount:Vt,slideCountNew:ke,index:Rt,indexCached:Ls,displayIndex:Yr(),navCurrentIndex:Yi,navCurrentIndexCached:Fs,pages:mr,pagesCached:rn,sheet:Ge,isOn:Ti,event:M||{}}}return{version:"2.9.4",getInfo:Ii,events:ni,goTo:Lo,play:Bu,pause:Da,isOn:Ti,updateSliderHeight:Do,refresh:nn,destroy:oi,rebuild:function(){return et(u(O,ur))}}};r.tns=et;function ct(O){return window.requestAnimationFrame?window.requestAnimationFrame(O):setTimeout(O,16)}}}),Cg=Vf({"pack-dist/modules/litepicker/polyfills.js"(r,o){(function(l,u){if(typeof r=="object"&&typeof o=="object")o.exports=u();else if(typeof define=="function"&&define.amd)define([],u);else{var f=u();for(var d in f)(typeof r=="object"?r:l)[d]=f[d]}})(window,function(){return function(l){var u={};function f(d){if(u[d])return u[d].exports;var p=u[d]={i:d,l:!1,exports:{}};return l[d].call(p.exports,p,p.exports,f),p.l=!0,p.exports}return f.m=l,f.c=u,f.d=function(d,p,v){f.o(d,p)||Object.defineProperty(d,p,{enumerable:!0,get:v})},f.r=function(d){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(d,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(d,"__esModule",{value:!0})},f.t=function(d,p){if(1&p&&(d=f(d)),8&p||4&p&&typeof d=="object"&&d&&d.__esModule)return d;var v=Object.create(null);if(f.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:d}),2&p&&typeof d!="string")for(var T in d)f.d(v,T,function(C){return d[C]}.bind(null,T));return v},f.n=function(d){var p=d&&d.__esModule?function(){return d.default}:function(){return d};return f.d(p,"a",p),p},f.o=function(d,p){return Object.prototype.hasOwnProperty.call(d,p)},f.p="",f(f.s=0)}([function(l,u,f){"use strict";Object.defineProperty(u,"__esModule",{value:!0}),f(1),Object.entries||(Object.entries=function(d){for(var p=Object.keys(d),v=p.length,T=new Array(v);v;)T[v-=1]=[p[v],d[p[v]]];return T}),Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(d){var p=this;do{if(p.matches(d))return p;p=p.parentElement||p.parentNode}while(p!==null&&p.nodeType===1);return null}),String.prototype.includes||(String.prototype.includes=function(d,p){if(d instanceof RegExp)throw TypeError("first argument must not be a RegExp");return p===void 0&&(p=0),this.indexOf(d,p)!==-1}),[Element.prototype,Document.prototype,DocumentFragment.prototype].forEach(function(d){d.hasOwnProperty("prepend")||Object.defineProperty(d,"prepend",{configurable:!0,enumerable:!0,writable:!0,value:function(){var p=Array.prototype.slice.call(arguments),v=document.createDocumentFragment();p.forEach(function(T){var C=T instanceof Node;v.appendChild(C?T:document.createTextNode(String(T)))}),this.insertBefore(v,this.firstChild)}})})},function(l,u){(function(){"use strict";var f=document.createElement("i");if(f.style.setProperty("--x","y"),f.style.getPropertyValue("--x")!=="y"&&f.msMatchesSelector){Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector);var d,p=[],v=document,T=!1;document.addEventListener("DOMContentLoaded",function(){T=!0}),"classList"in Element.prototype||ue("classList",HTMLElement.prototype,Element.prototype),"innerHTML"in Element.prototype||ue("innerHTML",HTMLElement.prototype,Element.prototype),"runtimeStyle"in Element.prototype||ue("runtimeStyle",HTMLElement.prototype,Element.prototype),"sheet"in SVGStyleElement.prototype||Object.defineProperty(SVGStyleElement.prototype,"sheet",{get:function(){for(var I,J=document.styleSheets,it=0;I=J[it++];)if(I.ownerNode===this)return I}});var C={},b=new Set,k=!1,D=!1,P=/([\s{;])(--([A-Za-z0-9-_]*)\s*:([^;!}{]+)(!important)?)(?=\s*([;}]|$))/g,L=/([{;]\s*)([A-Za-z0-9-_]+\s*:[^;}{]*var\([^!;}{]+)(!important)?(?=\s*([;}$]|$))/g,j=/-ieVar-([^:]+):/g,U=/-ie-([^};]+)/g,N=/:(hover|active|focus|target|visited|link|:before|:after|:first-letter|:first-line)/;re("style",fe),re('link[rel="stylesheet"]',fe),re("[ie-style]",function(I){var J=Ue("{"+I.getAttribute("ie-style")).substr(1);I.style.cssText+=";"+J;var it=ye(I.style);it.getters&&Pe(I,it.getters,"%styleAttr"),it.setters&&et(I,it.setters)});var Y={hover:{on:"mouseenter",off:"mouseleave"},focus:{on:"focusin",off:"focusout"},active:{on:"CSSActivate",off:"CSSDeactivate"}},Z=null;document.addEventListener("mousedown",function(I){setTimeout(function(){if(I.target===document.activeElement){var J=document.createEvent("Event");J.initEvent("CSSActivate",!0,!0),(Z=I.target).dispatchEvent(J)}})}),document.addEventListener("mouseup",function(){if(Z){var I=document.createEvent("Event");I.initEvent("CSSDeactivate",!0,!0),Z.dispatchEvent(I),Z=null}});var z=0,K=new MutationObserver(function(I){if(!D)for(var J,it=0;J=I[it++];)J.attributeName!=="iecp-needed"&&g(J.target)});setTimeout(function(){K.observe(document,{attributes:!0,subtree:!0})});var G=location.hash;addEventListener("hashchange",function(I){var J=document.getElementById(location.hash.substr(1));if(J){var it=document.getElementById(G.substr(1));g(J),g(it)}else g(document);G=location.hash});var rt=Object.getOwnPropertyDescriptor(HTMLElement.prototype,"style"),dt=rt.get;rt.get=function(){const I=dt.call(this);return I.owningElement=this,I},Object.defineProperty(HTMLElement.prototype,"style",rt);var Bt=getComputedStyle;window.getComputedStyle=function(I){var J=Bt.apply(this,arguments);return J.computedFor=I,J};var Tt=CSSStyleDeclaration.prototype,ie=Tt.getPropertyValue;Tt.getPropertyValue=function(I){if(this.lastPropertyServedBy=!1,(I=I.trim())[0]!=="-"||I[1]!=="-")return ie.apply(this,arguments);const J=I.substr(2),it="-ie-"+J,ht="-ie-\u2757"+J;let _t=this[ht]||this[it];if(this.computedFor){if(_t===void 0||Kt[_t]){if(Kt[_t]||!$t[I]||$t[I].inherits){let ae=this.computedFor.parentNode;for(;ae.nodeType===1;){if(ae.ieCP_setters&&ae.ieCP_setters[I]){var Et=getComputedStyle(ae),kt=Et[ht]||Et[it];if(kt!==void 0){_t=H(this,kt),this.lastPropertyServedBy=ae;break}}ae=ae.parentNode}}}else _t=H(this,_t),this.lastPropertyServedBy=this.computedFor;if(_t==="initial")return""}return _t===void 0&&$t[I]&&(_t=$t[I].initialValue),_t===void 0?"":_t};var Kt={inherit:1,revert:1,unset:1},Gt=Tt.setProperty;Tt.setProperty=function(I,J,it){if(I[0]!=="-"||I[1]!=="-")return Gt.apply(this,arguments);const ht=this.owningElement;ht&&(ht.ieCP_setters||(ht.ieCP_setters={}),ht.ieCP_setters[I]=1),I="-ie-"+(it==="important"?"\u2757":"")+I.substr(2),this.cssText+="; "+I+":"+J+";",ht&&g(ht)},window.CSS||(window.CSS={});var $t={};CSS.registerProperty=function(I){$t[I.name]=I}}function Ht(I,J){try{return I.querySelectorAll(J)}catch{return[]}}function re(I,J){for(var it,ht={selector:I,callback:J,elements:new WeakMap},_t=Ht(v,ht.selector),Et=0;it=_t[Et++];)ht.elements.set(it,!0),ht.callback.call(it,it);p.push(ht),d||(d=new MutationObserver(pe)).observe(v,{childList:!0,subtree:!0}),Ne(ht)}function Ne(I,J){var it,ht=0,_t=[];try{J&&J.matches(I.selector)&&_t.push(J)}catch{}for(T&&Array.prototype.push.apply(_t,Ht(J||v,I.selector));it=_t[ht++];)I.elements.has(it)||(I.elements.set(it,!0),I.callback.call(it,it))}function se(I){for(var J,it=0;J=p[it++];)Ne(J,I)}function pe(I){for(var J,it,ht,_t,Et=0;it=I[Et++];)for(ht=it.addedNodes,J=0;_t=ht[J++];)_t.nodeType===1&&se(_t)}function ue(I,J,it){var ht=Object.getOwnPropertyDescriptor(J,I);Object.defineProperty(it,I,ht)}function fe(I){if(!I.ieCP_polyfilled&&!I.ieCP_elementSheet&&I.sheet){if(I.href)return J=I.href,it=function(kt){var ae=Ue(kt);kt!==ae&&_e(I,ae)},(ht=new XMLHttpRequest).open("GET",J),ht.overrideMimeType("text/css"),ht.onload=function(){ht.status>=200&&ht.status<400&&it(ht.responseText)},void ht.send();var J,it,ht,_t=I.innerHTML,Et=Ue(_t);_t!==Et&&_e(I,Et)}}function Ue(I){return I.replace(P,function(J,it,ht,_t,Et,kt){return it+"-ie-"+(kt?"\u2757":"")+_t+":"+Et}).replace(L,function(J,it,ht,_t){return it+"-ieVar-"+(_t?"\u2757":"")+ht+"; "+ht})}function ye(I){I["z-index"]===I&&x();const J=I.cssText;var it,ht,_t=J.match(j);if(_t){var Et=[];for(it=0;ht=_t[it++];){let Oe=ht.slice(7,-1);Oe[0]==="\u2757"&&(Oe=Oe.substr(1)),Et.push(Oe),C[Oe]||(C[Oe]=[]),C[Oe].push(I)}}var kt=J.match(U);if(kt){var ae={};for(it=0;ht=kt[it++];){let Oe=ht.substr(4).split(":"),Fe=Oe[0],pi=Oe[1];Fe[0]==="\u2757"&&(Fe=Fe.substr(1)),ae[Fe]=pi}}return{getters:Et,setters:ae}}function _e(I,J){I.sheet.cssText=J,I.ieCP_polyfilled=!0;for(var it,ht=I.sheet.rules,_t=0;it=ht[_t++];){const Et=ye(it.style);Et.getters&&Qt(it.selectorText,Et.getters),Et.setters&&nt(it.selectorText,Et.setters);const kt=it.parentRule&&it.parentRule.media&&it.parentRule.media.mediaText;kt&&(Et.getters||Et.setters)&&matchMedia(kt).addListener(function(){g(document.documentElement)})}ct()}function Qt(I,J){O(I),re(q(I),function(it){Pe(it,J,I),B(it)})}function Pe(I,J,it){var ht,_t,Et=0;const kt=it.split(",");for(I.setAttribute("iecp-needed",!0),I.ieCPSelectors||(I.ieCPSelectors={});ht=J[Et++];)for(_t=0;it=kt[_t++];){const ae=it.trim().split("::");I.ieCPSelectors[ht]||(I.ieCPSelectors[ht]=[]),I.ieCPSelectors[ht].push({selector:ae[0],pseudo:ae[1]?"::"+ae[1]:""})}}function nt(I,J){O(I),re(q(I),function(it){et(it,J)})}function et(I,J){for(var it in I.ieCP_setters||(I.ieCP_setters={}),J)I.ieCP_setters["--"+it]=1;g(I)}function ct(){for(var I in C){let _t=C[I];for(var J,it=0;J=_t[it++];)if(!J.owningElement){var ht=J["-ieVar-"+I];if(ht&&(ht=H(getComputedStyle(document.documentElement),ht))!=="")try{J[I]=ht}catch{}}}}function O(I){for(var J in I=I.split(",")[0],Y){var it=I.split(":"+J);if(it.length>1){var ht=it[1].match(/^[^\s]*/);let _t=q(it[0]+ht);const Et=Y[J];re(_t,function(kt){kt.addEventListener(Et.on,A),kt.addEventListener(Et.off,A)})}}}function q(I){return I.replace(N,"").replace(":not()","")}function B(I){b.add(I),k||(k=!0,requestAnimationFrame(function(){k=!1,D=!0,b.forEach(E),b.clear(),setTimeout(function(){D=!1})}))}function E(I){I.ieCP_unique||(I.ieCP_unique=++z,I.classList.add("iecp-u"+I.ieCP_unique));var J=getComputedStyle(I);let it="";for(var ht in I.runtimeStyle.cssText="",I.ieCPSelectors){var _t=J["-ieVar-\u2757"+ht];let Fe=_t||J["-ieVar-"+ht];if(Fe){var Et={},kt=H(J,Fe,Et);_t&&(kt+=" !important");for(var ae,Oe=0;ae=I.ieCPSelectors[ht][Oe++];)ae.selector==="%styleAttr"&&(I.style[ht]=kt),(_t||Et.allByRoot===!1)&&(ae.pseudo?it+=ae.selector+".iecp-u"+I.ieCP_unique+ae.pseudo+"{"+ht+":"+kt+`}
`:I.runtimeStyle[ht]=kt)}}(function(Fe,pi){if(!Fe.ieCP_styleEl&&pi){const ri=document.createElement("style");ri.ieCP_elementSheet=1,document.head.appendChild(ri),Fe.ieCP_styleEl=ri}Fe.ieCP_styleEl&&(Fe.ieCP_styleEl.innerHTML=pi)})(I,it)}function g(I){if(I){I===document.documentElement&&ct();var J=I.querySelectorAll("[iecp-needed]");I.hasAttribute&&I.hasAttribute("iecp-needed")&&B(I);for(var it,ht=0;it=J[ht++];)B(it)}}function A(I){g(I.target)}function H(I,J,it){return function(ht,_t){let Et,kt,ae=0,Oe=null,Fe=0,pi="",ri=0;for(;Et=ht[ri++];){if(Et==="("&&(++ae,Oe===null&&ht[ri-4]+ht[ri-3]+ht[ri-2]==="var"&&(Oe=ae,pi+=ht.substring(Fe,ri-4),Fe=ri),ht[ri-5]+ht[ri-4]+ht[ri-3]+ht[ri-2]==="calc"&&(kt=ae)),Et===")"&&Oe===ae){let As,ir=ht.substring(Fe,ri-1).trim(),ur=ir.indexOf(",");ur!==-1&&(As=ir.slice(ur+1),ir=ir.slice(0,ur)),pi+=_t(ir,As,kt),Fe=ri,Oe=null}Et===")"&&(--ae,kt===ae&&(kt=null))}return pi+=ht.substring(Fe),pi}(J,function(ht,_t,Et){var kt=I.getPropertyValue(ht);return Et&&(kt=kt.replace(/^calc\(/,"(")),it&&I.lastPropertyServedBy!==document.documentElement&&(it.allByRoot=!1),kt===""&&_t&&(kt=H(I,_t,it)),kt})}})()}])})}}),ar={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},Ko={duration:.5,overwrite:!1,delay:0},Nc,ys=1e8,Ve=1/ys,Uc=Math.PI*2,Pg=Uc/4,Mg=0,jf=Math.sqrt,Rg=Math.cos,Dg=Math.sin,qi=r=>typeof r=="string",ki=r=>typeof r=="function",is=r=>typeof r=="number",Gc=r=>typeof r>"u",$s=r=>typeof r=="object",lr=r=>r!==!1,Xf=()=>typeof window<"u",Wf=r=>ki(r)||qi(r),Yf=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Ur=Array.isArray,zc=/(?:-?\.?\d|\.)+/gi,$f=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Zo=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Vc=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,qf=/[+-]=-?[.\d]+/,Kf=/[#\-+.]*\b[a-z\d-=+%.]+/gi,Ig=/[\d.+\-=]+(?:e[-+]\d*)*/i,vi,xs,Hc,Zf,wr={},vh={},Qf,Jf=r=>(vh=Qo(r,wr))&&Ts,jc=(r,o)=>console.warn("Invalid property",r,"set to",o,"Missing plugin? gsap.registerPlugin()"),td=(r,o)=>!o&&console.warn(r),ed=(r,o)=>r&&(wr[r]=o)&&vh&&(vh[r]=o)||wr,Xa=()=>0,Xc={},mn=[],Wc={},id,Sr={},Yc={},rd=30,yh=[],$c="",qc=r=>{let o=r[0],l,u;if($s(o)||ki(o)||(r=[r]),!(l=(o._gsap||{}).harness)){for(u=yh.length;u--&&!yh[u].targetTest(o););l=yh[u]}for(u=r.length;u--;)r[u]&&(r[u]._gsap||(r[u]._gsap=new Id(r[u],l)))||r.splice(u,1);return r},io=r=>r._gsap||qc(bs(r))[0]._gsap,sd=(r,o,l)=>(l=r[o])&&ki(l)?r[o]():Gc(l)&&r.getAttribute&&r.getAttribute(o)||l,Er=(r,o)=>(r=r.split(",")).forEach(o)||r,Ce=r=>Math.round(r*1e5)/1e5||0,Og=(r,o)=>{let l=o.length,u=0;for(;r.indexOf(o[u])<0&&++u<l;);return u<l},Wa=(r,o,l)=>{let u=is(r[1]),f=(u?2:1)+(o<2?0:1),d=r[f],p;if(u&&(d.duration=r[1]),d.parent=l,o){for(p=d;l&&!("immediateRender"in p);)p=l.vars.defaults||{},l=lr(l.vars.inherit)&&l.parent;d.immediateRender=lr(p.immediateRender),o<2?d.runBackwards=1:d.startAt=r[f-1]}return d},xh=()=>{let r=mn.length,o=mn.slice(0),l,u;for(Wc={},mn.length=0,l=0;l<r;l++)u=o[l],u&&u._lazy&&(u.render(u._lazy[0],u._lazy[1],!0)._lazy=0)},nd=(r,o,l,u)=>{mn.length&&xh(),r.render(o,l,u),mn.length&&xh()},od=r=>{let o=parseFloat(r);return(o||o===0)&&(r+"").match(Kf).length<2?o:qi(r)?r.trim():r},ad=r=>r,Gr=(r,o)=>{for(let l in o)l in r||(r[l]=o[l]);return r},kg=(r,o)=>{for(let l in o)l in r||l==="duration"||l==="ease"||(r[l]=o[l])},Qo=(r,o)=>{for(let l in o)r[l]=o[l];return r},Kc=(r,o)=>{for(let l in o)l!=="__proto__"&&l!=="constructor"&&l!=="prototype"&&(r[l]=$s(o[l])?Kc(r[l]||(r[l]={}),o[l]):o[l]);return r},Zc=(r,o)=>{let l={},u;for(u in r)u in o||(l[u]=r[u]);return l},bh=r=>{let o=r.parent||vi,l=r.keyframes?kg:Gr;if(lr(r.inherit))for(;o;)l(r,o.vars.defaults),o=o.parent||o._dp;return r},Lg=(r,o)=>{let l=r.length,u=l===o.length;for(;u&&l--&&r[l]===o[l];);return l<0},Fg=(r,o,l="_first",u="_last",f)=>{let d=r[u],p;if(f)for(p=o[f];d&&d[f]>p;)d=d._prev;return d?(o._next=d._next,d._next=o):(o._next=r[l],r[l]=o),o._next?o._next._prev=o:r[u]=o,o._prev=d,o.parent=o._dp=r,o},Th=(r,o,l="_first",u="_last")=>{let f=o._prev,d=o._next;f?f._next=d:r[l]===o&&(r[l]=d),d?d._prev=f:r[u]===o&&(r[u]=f),o._next=o._prev=o.parent=null},gn=(r,o)=>{r.parent&&(!o||r.parent.autoRemoveChildren)&&r.parent.remove(r),r._act=0},ro=(r,o)=>{if(r&&(!o||o._end>r._dur||o._start<0)){let l=r;for(;l;)l._dirty=1,l=l.parent}return r},Bg=r=>{let o=r.parent;for(;o&&o.parent;)o._dirty=1,o.totalDuration(),o=o.parent;return r},ld=r=>!r||r._ts&&ld(r.parent),hd=r=>r._repeat?Jo(r._tTime,r=r.duration()+r._rDelay)*r:0,Jo=(r,o)=>{let l=Math.floor(r/=o);return r&&l===r?l-1:l},wh=(r,o)=>(r-o._start)*o._ts+(o._ts>=0?0:o._dirty?o.totalDuration():o._tDur),Qc=r=>r._end=Ce(r._start+(r._tDur/Math.abs(r._ts||r._rts||Ve)||0)),cd=(r,o)=>{let l=r._dp;return l&&l.smoothChildTiming&&r._ts&&(r._start=Ce(l._time-(r._ts>0?o/r._ts:((r._dirty?r.totalDuration():r._tDur)-o)/-r._ts)),Qc(r),l._dirty||ro(l,r)),r},Sh=(r,o)=>{let l;if((o._time||o._initted&&!o._dur)&&(l=wh(r.rawTime(),o),(!o._dur||Ya(0,o.totalDuration(),l)-o._tTime>Ve)&&o.render(l,!0)),ro(r,o)._dp&&r._initted&&r._time>=r._dur&&r._ts){if(r._dur<r.duration())for(l=r;l._dp;)l.rawTime()>=0&&l.totalTime(l._tTime),l=l._dp;r._zTime=-Ve}},qs=(r,o,l,u)=>(o.parent&&gn(o),o._start=Ce(l+o._delay),o._end=Ce(o._start+(o.totalDuration()/Math.abs(o.timeScale())||0)),Fg(r,o,"_first","_last",r._sort?"_start":0),r._recent=o,u||Sh(r,o),r),ud=(r,o)=>(wr.ScrollTrigger||jc("scrollTrigger",o))&&wr.ScrollTrigger.create(o,r),fd=(r,o,l,u)=>{if(kd(r,o),!r._initted)return 1;if(!l&&r._pt&&(r._dur&&r.vars.lazy!==!1||!r._dur&&r.vars.lazy)&&id!==zr.frame)return mn.push(r),r._lazy=[o,u],1},dd=({parent:r})=>r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||dd(r)),Ng=(r,o,l,u)=>{let f=r.ratio,d=o<0||!o&&(!r._start&&dd(r)||(r._ts<0||r._dp._ts<0)&&r.data!=="isFromStart"&&r.data!=="isStart")?0:1,p=r._rDelay,v=0,T,C,b;if(p&&r._repeat&&(v=Ya(0,r._tDur,o),C=Jo(v,p),b=Jo(r._tTime,p),r._yoyo&&C&1&&(d=1-d),C!==b&&(f=1-d,r.vars.repeatRefresh&&r._initted&&r.invalidate())),d!==f||u||r._zTime===Ve||!o&&r._zTime){if(!r._initted&&fd(r,o,u,l))return;for(b=r._zTime,r._zTime=o||(l?Ve:0),l||(l=o&&!b),r.ratio=d,r._from&&(d=1-d),r._time=0,r._tTime=v,l||Cr(r,"onStart"),T=r._pt;T;)T.r(d,T.d),T=T._next;r._startAt&&o<0&&r._startAt.render(o,!0,!0),r._onUpdate&&!l&&Cr(r,"onUpdate"),v&&r._repeat&&!l&&r.parent&&Cr(r,"onRepeat"),(o>=r._tDur||o<0)&&r.ratio===d&&(d&&gn(r,1),l||(Cr(r,d?"onComplete":"onReverseComplete",!0),r._prom&&r._prom()))}else r._zTime||(r._zTime=o)},Ug=(r,o,l)=>{let u;if(l>o)for(u=r._first;u&&u._start<=l;){if(!u._dur&&u.data==="isPause"&&u._start>o)return u;u=u._next}else for(u=r._last;u&&u._start>=l;){if(!u._dur&&u.data==="isPause"&&u._start<o)return u;u=u._prev}},ta=(r,o,l,u)=>{let f=r._repeat,d=Ce(o)||0,p=r._tTime/r._tDur;return p&&!u&&(r._time*=d/r._dur),r._dur=d,r._tDur=f?f<0?1e10:Ce(d*(f+1)+r._rDelay*f):d,p&&!u?cd(r,r._tTime=r._tDur*p):r.parent&&Qc(r),l||ro(r.parent,r),r},pd=r=>r instanceof hr?ro(r):ta(r,r._dur),Gg={_start:0,endTime:Xa},Ki=(r,o)=>{let l=r.labels,u=r._recent||Gg,f=r.duration()>=ys?u.endTime(!1):r._dur,d,p;return qi(o)&&(isNaN(o)||o in l)?(d=o.charAt(0),d==="<"||d===">"?(d==="<"?u._start:u.endTime(u._repeat>=0))+(parseFloat(o.substr(1))||0):(d=o.indexOf("="),d<0?(o in l||(l[o]=f),l[o]):(p=+(o.charAt(d-1)+o.substr(d+1)),d>1?Ki(r,o.substr(0,d-1))+p:f+p))):o==null?f:+o},_n=(r,o)=>r||r===0?o(r):o,Ya=(r,o,l)=>l<r?r:l>o?o:l,Ar=r=>{if(typeof r!="string")return"";let o=Ig.exec(r);return o?r.substr(o.index+o[0].length):""},zg=(r,o,l)=>_n(l,u=>Ya(r,o,u)),Jc=[].slice,md=(r,o)=>r&&$s(r)&&"length"in r&&(!o&&!r.length||r.length-1 in r&&$s(r[0]))&&!r.nodeType&&r!==xs,Vg=(r,o,l=[])=>r.forEach(u=>qi(u)&&!o||md(u,1)?l.push(...bs(u)):l.push(u))||l,bs=(r,o)=>qi(r)&&!o&&(Hc||!ra())?Jc.call(Zf.querySelectorAll(r),0):Ur(r)?Vg(r,o):md(r)?Jc.call(r,0):r?[r]:[],gd=r=>r.sort(()=>.5-Math.random()),_d=r=>{if(ki(r))return r;let o=$s(r)?r:{each:r},l=sa(o.ease),u=o.from||0,f=parseFloat(o.base)||0,d={},p=u>0&&u<1,v=isNaN(u)||p,T=o.axis,C=u,b=u;return qi(u)?C=b={center:.5,edges:.5,end:1}[u]||0:!p&&v&&(C=u[0],b=u[1]),(k,D,P)=>{let L=(P||o).length,j=d[L],U,N,Y,Z,z,K,G,rt,dt;if(!j){if(dt=o.grid==="auto"?0:(o.grid||[1,ys])[1],!dt){for(G=-ys;G<(G=P[dt++].getBoundingClientRect().left)&&dt<L;);dt--}for(j=d[L]=[],U=v?Math.min(dt,L)*C-.5:u%dt,N=v?L*b/dt-.5:u/dt|0,G=0,rt=ys,K=0;K<L;K++)Y=K%dt-U,Z=N-(K/dt|0),j[K]=z=T?Math.abs(T==="y"?Z:Y):jf(Y*Y+Z*Z),z>G&&(G=z),z<rt&&(rt=z);u==="random"&&gd(j),j.max=G-rt,j.min=rt,j.v=L=(parseFloat(o.amount)||parseFloat(o.each)*(dt>L?L-1:T?T==="y"?L/dt:dt:Math.max(dt,L/dt))||0)*(u==="edges"?-1:1),j.b=L<0?f-L:f,j.u=Ar(o.amount||o.each)||0,l=l&&L<0?Rd(l):l}return L=(j[k]-j.min)/j.max||0,Ce(j.b+(l?l(L):L)*j.v)+j.u}},tu=r=>{let o=r<1?Math.pow(10,(r+"").length-2):1;return l=>{let u=Math.round(parseFloat(l)/r)*r*o;return(u-u%1)/o+(is(l)?0:Ar(l))}},vd=(r,o)=>{let l=Ur(r),u,f;return!l&&$s(r)&&(u=l=r.radius||ys,r.values?(r=bs(r.values),(f=!is(r[0]))&&(u*=u)):r=tu(r.increment)),_n(o,l?ki(r)?d=>(f=r(d),Math.abs(f-d)<=u?f:d):d=>{let p=parseFloat(f?d.x:d),v=parseFloat(f?d.y:0),T=ys,C=0,b=r.length,k,D;for(;b--;)f?(k=r[b].x-p,D=r[b].y-v,k=k*k+D*D):k=Math.abs(r[b]-p),k<T&&(T=k,C=b);return C=!u||T<=u?r[C]:d,f||C===d||is(d)?C:C+Ar(d)}:tu(r))},yd=(r,o,l,u)=>_n(Ur(r)?!o:l===!0?!!(l=0):!u,()=>Ur(r)?r[~~(Math.random()*r.length)]:(l=l||1e-5)&&(u=l<1?10**((l+"").length-2):1)&&Math.floor(Math.round((r-l/2+Math.random()*(o-r+l*.99))/l)*l*u)/u),Hg=(...r)=>o=>r.reduce((l,u)=>u(l),o),jg=(r,o)=>l=>r(parseFloat(l))+(o||Ar(l)),Xg=(r,o,l)=>wd(r,o,0,1,l),xd=(r,o,l)=>_n(l,u=>r[~~o(u)]),bd=function(r,o,l){let u=o-r;return Ur(r)?xd(r,bd(0,r.length),o):_n(l,f=>(u+(f-r)%u)%u+r)},Td=(r,o,l)=>{let u=o-r,f=u*2;return Ur(r)?xd(r,Td(0,r.length-1),o):_n(l,d=>(d=(f+(d-r)%f)%f||0,r+(d>u?f-d:d)))},Eh=r=>{let o=0,l="",u,f,d,p;for(;~(u=r.indexOf("random(",o));)d=r.indexOf(")",u),p=r.charAt(u+7)==="[",f=r.substr(u+7,d-u-7).match(p?Kf:zc),l+=r.substr(o,u-o)+yd(p?f:+f[0],p?0:+f[1],+f[2]||1e-5),o=d+1;return l+r.substr(o,r.length-o)},wd=(r,o,l,u,f)=>{let d=o-r,p=u-l;return _n(f,v=>l+((v-r)/d*p||0))},Sd=(r,o,l,u)=>{let f=isNaN(r+o)?0:d=>(1-d)*r+d*o;if(!f){let d=qi(r),p={},v,T,C,b,k;if(l===!0&&(u=1)&&(l=null),d)r={p:r},o={p:o};else if(Ur(r)&&!Ur(o)){for(C=[],b=r.length,k=b-2,T=1;T<b;T++)C.push(Sd(r[T-1],r[T]));b--,f=D=>{D*=b;let P=Math.min(k,~~D);return C[P](D-P)},l=o}else u||(r=Qo(Ur(r)?[]:{},r));if(!C){for(v in o)iu.call(p,r,v,"get",o[v]);f=D=>nu(D,p)||(d?r.p:r)}}return _n(l,f)},Ed=(r,o,l)=>{let u=r.labels,f=ys,d,p,v;for(d in u)p=u[d]-o,p<0==!!l&&p&&f>(p=Math.abs(p))&&(v=d,f=p);return v},Cr=(r,o,l)=>{let u=r.vars,f=u[o],d,p;if(f)return d=u[o+"Params"],p=u.callbackScope||r,l&&mn.length&&xh(),d?f.apply(p,d):f.call(p)},$a=r=>(gn(r),r.progress()<1&&Cr(r,"onInterrupt"),r),ea,Wg=r=>{r=!r.name&&r.default||r;let o=r.name,l=ki(r),u=o&&!l&&r.init?function(){this._props=[]}:r,f={init:Xa,render:nu,add:iu,kill:a_,modifier:o_,rawVars:0},d={targetTest:0,get:0,getSetter:su,aliases:{},register:0};if(ra(),r!==u){if(Sr[o])return;Gr(u,Gr(Zc(r,f),d)),Qo(u.prototype,Qo(f,Zc(r,d))),Sr[u.prop=o]=u,r.targetTest&&(yh.push(u),Xc[o]=1),o=(o==="css"?"CSS":o.charAt(0).toUpperCase()+o.substr(1))+"Plugin"}ed(o,u),r.register&&r.register(Ts,u,cr)},qe=255,qa={aqua:[0,qe,qe],lime:[0,qe,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,qe],navy:[0,0,128],white:[qe,qe,qe],olive:[128,128,0],yellow:[qe,qe,0],orange:[qe,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[qe,0,0],pink:[qe,192,203],cyan:[0,qe,qe],transparent:[qe,qe,qe,0]},eu=(r,o,l)=>(r=r<0?r+1:r>1?r-1:r,(r*6<1?o+(l-o)*r*6:r<.5?l:r*3<2?o+(l-o)*(2/3-r)*6:o)*qe+.5|0),Ad=(r,o,l)=>{let u=r?is(r)?[r>>16,r>>8&qe,r&qe]:0:qa.black,f,d,p,v,T,C,b,k,D,P;if(!u){if(r.substr(-1)===","&&(r=r.substr(0,r.length-1)),qa[r])u=qa[r];else if(r.charAt(0)==="#"){if(r.length<6&&(f=r.charAt(1),d=r.charAt(2),p=r.charAt(3),r="#"+f+f+d+d+p+p+(r.length===5?r.charAt(4)+r.charAt(4):"")),r.length===9)return u=parseInt(r.substr(1,6),16),[u>>16,u>>8&qe,u&qe,parseInt(r.substr(7),16)/255];r=parseInt(r.substr(1),16),u=[r>>16,r>>8&qe,r&qe]}else if(r.substr(0,3)==="hsl"){if(u=P=r.match(zc),!o)v=+u[0]%360/360,T=+u[1]/100,C=+u[2]/100,d=C<=.5?C*(T+1):C+T-C*T,f=C*2-d,u.length>3&&(u[3]*=1),u[0]=eu(v+1/3,f,d),u[1]=eu(v,f,d),u[2]=eu(v-1/3,f,d);else if(~r.indexOf("="))return u=r.match($f),l&&u.length<4&&(u[3]=1),u}else u=r.match(zc)||qa.transparent;u=u.map(Number)}return o&&!P&&(f=u[0]/qe,d=u[1]/qe,p=u[2]/qe,b=Math.max(f,d,p),k=Math.min(f,d,p),C=(b+k)/2,b===k?v=T=0:(D=b-k,T=C>.5?D/(2-b-k):D/(b+k),v=b===f?(d-p)/D+(d<p?6:0):b===d?(p-f)/D+2:(f-d)/D+4,v*=60),u[0]=~~(v+.5),u[1]=~~(T*100+.5),u[2]=~~(C*100+.5)),l&&u.length<4&&(u[3]=1),u},Cd=r=>{let o=[],l=[],u=-1;return r.split(ia).forEach(f=>{let d=f.match(Zo)||[];o.push(...d),l.push(u+=d.length+1)}),o.c=l,o},Pd=(r,o,l)=>{let u="",f=(r+u).match(ia),d=o?"hsla(":"rgba(",p=0,v,T,C,b;if(!f)return r;if(f=f.map(k=>(k=Ad(k,o,1))&&d+(o?k[0]+","+k[1]+"%,"+k[2]+"%,"+k[3]:k.join(","))+")"),l&&(C=Cd(r),v=l.c,v.join(u)!==C.c.join(u)))for(T=r.replace(ia,"1").split(Zo),b=T.length-1;p<b;p++)u+=T[p]+(~v.indexOf(p)?f.shift()||d+"0,0,0,0)":(C.length?C:f.length?f:l).shift());if(!T)for(T=r.split(ia),b=T.length-1;p<b;p++)u+=T[p]+f[p];return u+T[b]},ia=function(){let r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",o;for(o in qa)r+="|"+o+"\\b";return new RegExp(r+")","gi")}(),Yg=/hsl[a]?\(/,Md=r=>{let o=r.join(" "),l;if(ia.lastIndex=0,ia.test(o))return l=Yg.test(o),r[1]=Pd(r[1],l),r[0]=Pd(r[0],l,Cd(r[1])),!0},Ah,zr=function(){let r=Date.now,o=500,l=33,u=r(),f=u,d=1e3/240,p=d,v=[],T,C,b,k,D,P,L=j=>{let U=r()-f,N=j===!0,Y,Z,z,K;if(U>o&&(u+=U-l),f+=U,z=f-u,Y=z-p,(Y>0||N)&&(K=++k.frame,D=z-k.time*1e3,k.time=z=z/1e3,p+=Y+(Y>=d?4:d-Y),Z=1),N||(T=C(L)),Z)for(P=0;P<v.length;P++)v[P](z,D,K,j)};return k={time:0,frame:0,tick(){L(!0)},deltaRatio(j){return D/(1e3/(j||60))},wake(){Qf&&(!Hc&&Xf()&&(xs=Hc=window,Zf=xs.document||{},wr.gsap=Ts,(xs.gsapVersions||(xs.gsapVersions=[])).push(Ts.version),Jf(vh||xs.GreenSockGlobals||!xs.gsap&&xs||{}),b=xs.requestAnimationFrame),T&&k.sleep(),C=b||(j=>setTimeout(j,p-k.time*1e3+1|0)),Ah=1,L(2))},sleep(){(b?xs.cancelAnimationFrame:clearTimeout)(T),Ah=0,C=Xa},lagSmoothing(j,U){o=j||1/Ve,l=Math.min(U,o,0)},fps(j){d=1e3/(j||240),p=k.time*1e3+d},add(j){v.indexOf(j)<0&&v.push(j),ra()},remove(j){let U;~(U=v.indexOf(j))&&v.splice(U,1)&&P>=U&&P--},_listeners:v},k}(),ra=()=>!Ah&&zr.wake(),Gi={},$g=/^[\d.\-M][\d.\-,\s]/,qg=/["']/g,Kg=r=>{let o={},l=r.substr(1,r.length-3).split(":"),u=l[0],f=1,d=l.length,p,v,T;for(;f<d;f++)v=l[f],p=f!==d-1?v.lastIndexOf(","):v.length,T=v.substr(0,p),o[u]=isNaN(T)?T.replace(qg,"").trim():+T,u=v.substr(p+1).trim();return o},Zg=r=>{let o=r.indexOf("(")+1,l=r.indexOf(")"),u=r.indexOf("(",o);return r.substring(o,~u&&u<l?r.indexOf(")",l+1):l)},Qg=r=>{let o=(r+"").split("("),l=Gi[o[0]];return l&&o.length>1&&l.config?l.config.apply(null,~r.indexOf("{")?[Kg(o[1])]:Zg(r).split(",").map(od)):Gi._CE&&$g.test(r)?Gi._CE("",r):l},Rd=r=>o=>1-r(1-o),Ch=(r,o)=>{let l=r._first,u;for(;l;)l instanceof hr?Ch(l,o):l.vars.yoyoEase&&(!l._yoyo||!l._repeat)&&l._yoyo!==o&&(l.timeline?Ch(l.timeline,o):(u=l._ease,l._ease=l._yEase,l._yEase=u,l._yoyo=o)),l=l._next},sa=(r,o)=>r&&(ki(r)?r:Gi[r]||Qg(r))||o,so=(r,o,l=f=>1-o(1-f),u=f=>f<.5?o(f*2)/2:1-o((1-f)*2)/2)=>{let f={easeIn:o,easeOut:l,easeInOut:u},d;return Er(r,p=>{Gi[p]=wr[p]=f,Gi[d=p.toLowerCase()]=l;for(let v in f)Gi[d+(v==="easeIn"?".in":v==="easeOut"?".out":".inOut")]=Gi[p+"."+v]=f[v]}),f},Dd=r=>o=>o<.5?(1-r(1-o*2))/2:.5+r((o-.5)*2)/2,Ph=(r,o,l)=>{let u=o>=1?o:1,f=(l||(r?.3:.45))/(o<1?o:1),d=f/Uc*(Math.asin(1/u)||0),p=T=>T===1?1:u*2**(-10*T)*Dg((T-d)*f)+1,v=r==="out"?p:r==="in"?T=>1-p(1-T):Dd(p);return f=Uc/f,v.config=(T,C)=>Ph(r,T,C),v},Mh=(r,o=1.70158)=>{let l=f=>f?--f*f*((o+1)*f+o)+1:0,u=r==="out"?l:r==="in"?f=>1-l(1-f):Dd(l);return u.config=f=>Mh(r,f),u};Er("Linear,Quad,Cubic,Quart,Quint,Strong",(r,o)=>{let l=o<5?o+1:o;so(r+",Power"+(l-1),o?u=>u**l:u=>u,u=>1-(1-u)**l,u=>u<.5?(u*2)**l/2:1-((1-u)*2)**l/2)}),Gi.Linear.easeNone=Gi.none=Gi.Linear.easeIn,so("Elastic",Ph("in"),Ph("out"),Ph()),((r,o)=>{let l=1/o,u=2*l,f=2.5*l,d=p=>p<l?r*p*p:p<u?r*(p-1.5/o)**2+.75:p<f?r*(p-=2.25/o)*p+.9375:r*(p-2.625/o)**2+.984375;so("Bounce",p=>1-d(1-p),d)})(7.5625,2.75),so("Expo",r=>r?2**(10*(r-1)):0),so("Circ",r=>-(jf(1-r*r)-1)),so("Sine",r=>r===1?1:-Rg(r*Pg)+1),so("Back",Mh("in"),Mh("out"),Mh()),Gi.SteppedEase=Gi.steps=wr.SteppedEase={config(r=1,o){let l=1/r,u=r+(o?0:1),f=o?1:0,d=1-Ve;return p=>((u*Ya(0,d,p)|0)+f)*l}},Ko.ease=Gi["quad.out"],Er("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",r=>$c+=r+","+r+"Params,");var Id=class{constructor(r,o){this.id=Mg++,r._gsap=this,this.target=r,this.harness=o,this.get=o?o.get:sd,this.set=o?o.getSetter:su}},Ka=class{constructor(r,o){let l=r.parent||vi;this.vars=r,this._delay=+r.delay||0,(this._repeat=r.repeat===1/0?-2:r.repeat||0)&&(this._rDelay=r.repeatDelay||0,this._yoyo=!!r.yoyo||!!r.yoyoEase),this._ts=1,ta(this,+r.duration,1,1),this.data=r.data,Ah||zr.wake(),l&&qs(l,this,o||o===0?o:l._time,1),r.reversed&&this.reverse(),r.paused&&this.paused(!0)}delay(r){return r||r===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+r-this._delay),this._delay=r,this):this._delay}duration(r){return arguments.length?this.totalDuration(this._repeat>0?r+(r+this._rDelay)*this._repeat:r):this.totalDuration()&&this._dur}totalDuration(r){return arguments.length?(this._dirty=0,ta(this,this._repeat<0?r:(r-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur}totalTime(r,o){if(ra(),!arguments.length)return this._tTime;let l=this._dp;if(l&&l.smoothChildTiming&&this._ts){for(cd(this,r),!l._dp||l.parent||Sh(l,this);l.parent;)l.parent._time!==l._start+(l._ts>=0?l._tTime/l._ts:(l.totalDuration()-l._tTime)/-l._ts)&&l.totalTime(l._tTime,!0),l=l.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&r<this._tDur||this._ts<0&&r>0||!this._tDur&&!r)&&qs(this._dp,this,this._start-this._delay)}return(this._tTime!==r||!this._dur&&!o||this._initted&&Math.abs(this._zTime)===Ve||!r&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=r),nd(this,r,o)),this}time(r,o){return arguments.length?this.totalTime(Math.min(this.totalDuration(),r+hd(this))%this._dur||(r?this._dur:0),o):this._time}totalProgress(r,o){return arguments.length?this.totalTime(this.totalDuration()*r,o):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio}progress(r,o){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-r:r)+hd(this),o):this.duration()?Math.min(1,this._time/this._dur):this.ratio}iteration(r,o){let l=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(r-1)*l,o):this._repeat?Jo(this._tTime,l)+1:1}timeScale(r){if(!arguments.length)return this._rts===-Ve?0:this._rts;if(this._rts===r)return this;let o=this.parent&&this._ts?wh(this.parent._time,this):this._tTime;return this._rts=+r||0,this._ts=this._ps||r===-Ve?0:this._rts,Bg(this.totalTime(Ya(-this._delay,this._tDur,o),!0))}paused(r){return arguments.length?(this._ps!==r&&(this._ps=r,r?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ra(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&(this._tTime-=Ve)&&Math.abs(this._zTime)!==Ve))),this):this._ps}startTime(r){if(arguments.length){this._start=r;let o=this.parent||this._dp;return o&&(o._sort||!this.parent)&&qs(o,this,r-this._delay),this}return this._start}endTime(r){return this._start+(lr(r)?this.totalDuration():this.duration())/Math.abs(this._ts)}rawTime(r){let o=this.parent||this._dp;return o?r&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?wh(o.rawTime(r),this):this._tTime:this._tTime}globalTime(r){let o=this,l=arguments.length?r:o.rawTime();for(;o;)l=o._start+l/(o._ts||1),o=o._dp;return l}repeat(r){return arguments.length?(this._repeat=r===1/0?-2:r,pd(this)):this._repeat===-2?1/0:this._repeat}repeatDelay(r){return arguments.length?(this._rDelay=r,pd(this)):this._rDelay}yoyo(r){return arguments.length?(this._yoyo=r,this):this._yoyo}seek(r,o){return this.totalTime(Ki(this,r),lr(o))}restart(r,o){return this.play().totalTime(r?-this._delay:0,lr(o))}play(r,o){return r!=null&&this.seek(r,o),this.reversed(!1).paused(!1)}reverse(r,o){return r!=null&&this.seek(r||this.totalDuration(),o),this.reversed(!0).paused(!1)}pause(r,o){return r!=null&&this.seek(r,o),this.paused(!0)}resume(){return this.paused(!1)}reversed(r){return arguments.length?(!!r!==this.reversed()&&this.timeScale(-this._rts||(r?-Ve:0)),this):this._rts<0}invalidate(){return this._initted=this._act=0,this._zTime=-Ve,this}isActive(){let r=this.parent||this._dp,o=this._start,l;return!!(!r||this._ts&&this._initted&&r.isActive()&&(l=r.rawTime(!0))>=o&&l<this.endTime(!0)-Ve)}eventCallback(r,o,l){let u=this.vars;return arguments.length>1?(o?(u[r]=o,l&&(u[r+"Params"]=l),r==="onUpdate"&&(this._onUpdate=o)):delete u[r],this):u[r]}then(r){let o=this;return new Promise(l=>{let u=ki(r)?r:ad,f=()=>{let d=o.then;o.then=null,ki(u)&&(u=u(o))&&(u.then||u===o)&&(o.then=d),l(u),o.then=d};o._initted&&o.totalProgress()===1&&o._ts>=0||!o._tTime&&o._ts<0?f():o._prom=f})}kill(){$a(this)}};Gr(Ka.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-Ve,_prom:0,_ps:!1,_rts:1});var hr=class extends Ka{constructor(r={},o){super(r,o),this.labels={},this.smoothChildTiming=!!r.smoothChildTiming,this.autoRemoveChildren=!!r.autoRemoveChildren,this._sort=lr(r.sortChildren),this.parent&&Sh(this.parent,this),r.scrollTrigger&&ud(this,r.scrollTrigger)}to(r,o,l){return new ii(r,Wa(arguments,0,this),Ki(this,is(o)?arguments[3]:l)),this}from(r,o,l){return new ii(r,Wa(arguments,1,this),Ki(this,is(o)?arguments[3]:l)),this}fromTo(r,o,l,u){return new ii(r,Wa(arguments,2,this),Ki(this,is(o)?arguments[4]:u)),this}set(r,o,l){return o.duration=0,o.parent=this,bh(o).repeatDelay||(o.repeat=0),o.immediateRender=!!o.immediateRender,new ii(r,o,Ki(this,l),1),this}call(r,o,l){return qs(this,ii.delayedCall(0,r,o),Ki(this,l))}staggerTo(r,o,l,u,f,d,p){return l.duration=o,l.stagger=l.stagger||u,l.onComplete=d,l.onCompleteParams=p,l.parent=this,new ii(r,l,Ki(this,f)),this}staggerFrom(r,o,l,u,f,d,p){return l.runBackwards=1,bh(l).immediateRender=lr(l.immediateRender),this.staggerTo(r,o,l,u,f,d,p)}staggerFromTo(r,o,l,u,f,d,p,v){return u.startAt=l,bh(u).immediateRender=lr(u.immediateRender),this.staggerTo(r,o,u,f,d,p,v)}render(r,o,l){let u=this._time,f=this._dirty?this.totalDuration():this._tDur,d=this._dur,p=this!==vi&&r>f-Ve&&r>=0?f:r<Ve?0:r,v=this._zTime<0!=r<0&&(this._initted||!d),T,C,b,k,D,P,L,j,U,N,Y,Z;if(p!==this._tTime||l||v){if(u!==this._time&&d&&(p+=this._time-u,r+=this._time-u),T=p,U=this._start,j=this._ts,P=!j,v&&(d||(u=this._zTime),(r||!o)&&(this._zTime=r)),this._repeat){if(Y=this._yoyo,D=d+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(D*100+r,o,l);if(T=Ce(p%D),p===f?(k=this._repeat,T=d):(k=~~(p/D),k&&k===p/D&&(T=d,k--),T>d&&(T=d)),N=Jo(this._tTime,D),!u&&this._tTime&&N!==k&&(N=k),Y&&k&1&&(T=d-T,Z=1),k!==N&&!this._lock){let z=Y&&N&1,K=z===(Y&&k&1);if(k<N&&(z=!z),u=z?0:d,this._lock=1,this.render(u||(Z?0:Ce(k*D)),o,!d)._lock=0,!o&&this.parent&&Cr(this,"onRepeat"),this.vars.repeatRefresh&&!Z&&(this.invalidate()._lock=1),u!==this._time||P!==!this._ts)return this;if(d=this._dur,f=this._tDur,K&&(this._lock=2,u=z?d:-1e-4,this.render(u,!0),this.vars.repeatRefresh&&!Z&&this.invalidate()),this._lock=0,!this._ts&&!P)return this;Ch(this,Z)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(L=Ug(this,Ce(u),Ce(T)),L&&(p-=T-(T=L._start))),this._tTime=p,this._time=T,this._act=!j,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=r,u=0),!u&&(T||!d&&r>=0)&&!o&&Cr(this,"onStart"),T>=u&&r>=0)for(C=this._first;C;){if(b=C._next,(C._act||T>=C._start)&&C._ts&&L!==C){if(C.parent!==this)return this.render(r,o,l);if(C.render(C._ts>0?(T-C._start)*C._ts:(C._dirty?C.totalDuration():C._tDur)+(T-C._start)*C._ts,o,l),T!==this._time||!this._ts&&!P){L=0,b&&(p+=this._zTime=-Ve);break}}C=b}else{C=this._last;let z=r<0?r:T;for(;C;){if(b=C._prev,(C._act||z<=C._end)&&C._ts&&L!==C){if(C.parent!==this)return this.render(r,o,l);if(C.render(C._ts>0?(z-C._start)*C._ts:(C._dirty?C.totalDuration():C._tDur)+(z-C._start)*C._ts,o,l),T!==this._time||!this._ts&&!P){L=0,b&&(p+=this._zTime=z?-Ve:Ve);break}}C=b}}if(L&&!o&&(this.pause(),L.render(T>=u?0:-Ve)._zTime=T>=u?1:-1,this._ts))return this._start=U,Qc(this),this.render(r,o,l);this._onUpdate&&!o&&Cr(this,"onUpdate",!0),(p===f&&f>=this.totalDuration()||!p&&u)&&(U===this._start||Math.abs(j)!==Math.abs(this._ts))&&(this._lock||((r||!d)&&(p===f&&this._ts>0||!p&&this._ts<0)&&gn(this,1),!o&&!(r<0&&!u)&&(p||u)&&(Cr(this,p===f?"onComplete":"onReverseComplete",!0),this._prom&&!(p<f&&this.timeScale()>0)&&this._prom())))}return this}add(r,o){if(is(o)||(o=Ki(this,o)),!(r instanceof Ka)){if(Ur(r))return r.forEach(l=>this.add(l,o)),this;if(qi(r))return this.addLabel(r,o);if(ki(r))r=ii.delayedCall(0,r);else return this}return this!==r?qs(this,r,o):this}getChildren(r=!0,o=!0,l=!0,u=-ys){let f=[],d=this._first;for(;d;)d._start>=u&&(d instanceof ii?o&&f.push(d):(l&&f.push(d),r&&f.push(...d.getChildren(!0,o,l)))),d=d._next;return f}getById(r){let o=this.getChildren(1,1,1),l=o.length;for(;l--;)if(o[l].vars.id===r)return o[l]}remove(r){return qi(r)?this.removeLabel(r):ki(r)?this.killTweensOf(r):(Th(this,r),r===this._recent&&(this._recent=this._last),ro(this))}totalTime(r,o){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=Ce(zr.time-(this._ts>0?r/this._ts:(this.totalDuration()-r)/-this._ts))),super.totalTime(r,o),this._forcing=0,this):this._tTime}addLabel(r,o){return this.labels[r]=Ki(this,o),this}removeLabel(r){return delete this.labels[r],this}addPause(r,o,l){let u=ii.delayedCall(0,o||Xa,l);return u.data="isPause",this._hasPause=1,qs(this,u,Ki(this,r))}removePause(r){let o=this._first;for(r=Ki(this,r);o;)o._start===r&&o.data==="isPause"&&gn(o),o=o._next}killTweensOf(r,o,l){let u=this.getTweensOf(r,l),f=u.length;for(;f--;)vn!==u[f]&&u[f].kill(r,o);return this}getTweensOf(r,o){let l=[],u=bs(r),f=this._first,d=is(o),p;for(;f;)f instanceof ii?Og(f._targets,u)&&(d?(!vn||f._initted&&f._ts)&&f.globalTime(0)<=o&&f.globalTime(f.totalDuration())>o:!o||f.isActive())&&l.push(f):(p=f.getTweensOf(u,o)).length&&l.push(...p),f=f._next;return l}tweenTo(r,o){o=o||{};let l=this,u=Ki(l,r),{startAt:f,onStart:d,onStartParams:p,immediateRender:v}=o,T=ii.to(l,Gr({ease:"none",lazy:!1,immediateRender:!1,time:u,overwrite:"auto",duration:o.duration||Math.abs((u-(f&&"time"in f?f.time:l._time))/l.timeScale())||Ve,onStart:()=>{l.pause();let C=o.duration||Math.abs((u-l._time)/l.timeScale());T._dur!==C&&ta(T,C,0,1).render(T._time,!0,!0),d&&d.apply(T,p||[])}},o));return v?T.render(0):T}tweenFromTo(r,o,l){return this.tweenTo(o,Gr({startAt:{time:Ki(this,r)}},l))}recent(){return this._recent}nextLabel(r=this._time){return Ed(this,Ki(this,r))}previousLabel(r=this._time){return Ed(this,Ki(this,r),1)}currentLabel(r){return arguments.length?this.seek(r,!0):this.previousLabel(this._time+Ve)}shiftChildren(r,o,l=0){let u=this._first,f=this.labels,d;for(;u;)u._start>=l&&(u._start+=r,u._end+=r),u=u._next;if(o)for(d in f)f[d]>=l&&(f[d]+=r);return ro(this)}invalidate(){let r=this._first;for(this._lock=0;r;)r.invalidate(),r=r._next;return super.invalidate()}clear(r=!0){let o=this._first,l;for(;o;)l=o._next,this.remove(o),o=l;return this._dp&&(this._time=this._tTime=this._pTime=0),r&&(this.labels={}),ro(this)}totalDuration(r){let o=0,l=this,u=l._last,f=ys,d,p,v;if(arguments.length)return l.timeScale((l._repeat<0?l.duration():l.totalDuration())/(l.reversed()?-r:r));if(l._dirty){for(v=l.parent;u;)d=u._prev,u._dirty&&u.totalDuration(),p=u._start,p>f&&l._sort&&u._ts&&!l._lock?(l._lock=1,qs(l,u,p-u._delay,1)._lock=0):f=p,p<0&&u._ts&&(o-=p,(!v&&!l._dp||v&&v.smoothChildTiming)&&(l._start+=p/l._ts,l._time-=p,l._tTime-=p),l.shiftChildren(-p,!1,-1/0),f=0),u._end>o&&u._ts&&(o=u._end),u=d;ta(l,l===vi&&l._time>o?l._time:o,1,1),l._dirty=0}return l._tDur}static updateRoot(r){if(vi._ts&&(nd(vi,wh(r,vi)),id=zr.frame),zr.frame>=rd){rd+=ar.autoSleep||120;let o=vi._first;if((!o||!o._ts)&&ar.autoSleep&&zr._listeners.length<2){for(;o&&!o._ts;)o=o._next;o||zr.sleep()}}}};Gr(hr.prototype,{_lock:0,_hasPause:0,_forcing:0});var Jg=function(r,o,l,u,f,d,p){let v=new cr(this._pt,r,o,0,1,Nd,null,f),T=0,C=0,b,k,D,P,L,j,U,N;for(v.b=l,v.e=u,l+="",u+="",(U=~u.indexOf("random("))&&(u=Eh(u)),d&&(N=[l,u],d(N,r,o),l=N[0],u=N[1]),k=l.match(Vc)||[];b=Vc.exec(u);)P=b[0],L=u.substring(T,b.index),D?D=(D+1)%5:L.substr(-5)==="rgba("&&(D=1),P!==k[C++]&&(j=parseFloat(k[C-1])||0,v._pt={_next:v._pt,p:L||C===1?L:",",s:j,c:P.charAt(1)==="="?parseFloat(P.substr(2))*(P.charAt(0)==="-"?-1:1):parseFloat(P)-j,m:D&&D<4?Math.round:0},T=Vc.lastIndex);return v.c=T<u.length?u.substring(T,u.length):"",v.fp=p,(qf.test(u)||U)&&(v.e=0),this._pt=v,v},iu=function(r,o,l,u,f,d,p,v,T){ki(u)&&(u=u(f||0,r,d));let C=r[o],b=l!=="get"?l:ki(C)?T?r[o.indexOf("set")||!ki(r["get"+o.substr(3)])?o:"get"+o.substr(3)](T):r[o]():C,k=ki(C)?T?r_:Fd:ru,D;if(qi(u)&&(~u.indexOf("random(")&&(u=Eh(u)),u.charAt(1)==="="&&(u=parseFloat(b)+parseFloat(u.substr(2))*(u.charAt(0)==="-"?-1:1)+(Ar(b)||0))),b!==u)return isNaN(b*u)?(!C&&!(o in r)&&jc(o,u),Jg.call(this,r,o,b,u,k,v||ar.stringFilter,T)):(D=new cr(this._pt,r,o,+b||0,u-(b||0),typeof C=="boolean"?n_:Bd,0,k),T&&(D.fp=T),p&&D.modifier(p,this,r),this._pt=D)},t_=(r,o,l,u,f)=>{if(ki(r)&&(r=Za(r,f,o,l,u)),!$s(r)||r.style&&r.nodeType||Ur(r)||Yf(r))return qi(r)?Za(r,f,o,l,u):r;let d={},p;for(p in r)d[p]=Za(r[p],f,o,l,u);return d},Od=(r,o,l,u,f,d)=>{let p,v,T,C;if(Sr[r]&&(p=new Sr[r]).init(f,p.rawVars?o[r]:t_(o[r],u,f,d,l),l,u,d)!==!1&&(l._pt=v=new cr(l._pt,f,r,0,1,p.render,p,0,p.priority),l!==ea))for(T=l._ptLookup[l._targets.indexOf(f)],C=p._props.length;C--;)T[p._props[C]]=v;return p},vn,kd=(r,o)=>{let l=r.vars,{ease:u,startAt:f,immediateRender:d,lazy:p,onUpdate:v,onUpdateParams:T,callbackScope:C,runBackwards:b,yoyoEase:k,keyframes:D,autoRevert:P}=l,L=r._dur,j=r._startAt,U=r._targets,N=r.parent,Y=N&&N.data==="nested"?N.parent._targets:U,Z=r._overwrite==="auto"&&!Nc,z=r.timeline,K,G,rt,dt,Bt,Tt,ie,Kt,Gt,$t,Ht,re,Ne;if(z&&(!D||!u)&&(u="none"),r._ease=sa(u,Ko.ease),r._yEase=k?Rd(sa(k===!0?u:k,Ko.ease)):0,k&&r._yoyo&&!r._repeat&&(k=r._yEase,r._yEase=r._ease,r._ease=k),!z){if(Kt=U[0]?io(U[0]).harness:0,re=Kt&&l[Kt.prop],K=Zc(l,Xc),j&&j.render(-1,!0).kill(),f){if(gn(r._startAt=ii.set(U,Gr({data:"isStart",overwrite:!1,parent:N,immediateRender:!0,lazy:lr(p),startAt:null,delay:0,onUpdate:v,onUpdateParams:T,callbackScope:C,stagger:0},f))),d){if(o>0)P||(r._startAt=0);else if(L&&!(o<0&&j)){o&&(r._zTime=o);return}}}else if(b&&L){if(j)!P&&(r._startAt=0);else if(o&&(d=!1),rt=Gr({overwrite:!1,data:"isFromStart",lazy:d&&lr(p),immediateRender:d,stagger:0,parent:N},K),re&&(rt[Kt.prop]=re),gn(r._startAt=ii.set(U,rt)),!d)kd(r._startAt,Ve);else if(!o)return}for(r._pt=0,p=L&&lr(p)||p&&!L,G=0;G<U.length;G++){if(Bt=U[G],ie=Bt._gsap||qc(U)[G]._gsap,r._ptLookup[G]=$t={},Wc[ie.id]&&mn.length&&xh(),Ht=Y===U?G:Y.indexOf(Bt),Kt&&(Gt=new Kt).init(Bt,re||K,r,Ht,Y)!==!1&&(r._pt=dt=new cr(r._pt,Bt,Gt.name,0,1,Gt.render,Gt,0,Gt.priority),Gt._props.forEach(se=>{$t[se]=dt}),Gt.priority&&(Tt=1)),!Kt||re)for(rt in K)Sr[rt]&&(Gt=Od(rt,K,r,Ht,Bt,Y))?Gt.priority&&(Tt=1):$t[rt]=dt=iu.call(r,Bt,rt,"get",K[rt],Ht,Y,0,l.stringFilter);r._op&&r._op[G]&&r.kill(Bt,r._op[G]),Z&&r._pt&&(vn=r,vi.killTweensOf(Bt,$t,r.globalTime(0)),Ne=!r.parent,vn=0),r._pt&&p&&(Wc[ie.id]=1)}Tt&&Ud(r),r._onInit&&r._onInit(r)}r._from=!z&&!!l.runBackwards,r._onUpdate=v,r._initted=(!r._op||r._pt)&&!Ne},e_=(r,o)=>{let l=r[0]?io(r[0]).harness:0,u=l&&l.aliases,f,d,p,v;if(!u)return o;f=Qo({},o);for(d in u)if(d in f)for(v=u[d].split(","),p=v.length;p--;)f[v[p]]=f[d];return f},Za=(r,o,l,u,f)=>ki(r)?r.call(o,l,u,f):qi(r)&&~r.indexOf("random(")?Eh(r):r,Ld=$c+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",i_=(Ld+",id,stagger,delay,duration,paused,scrollTrigger").split(","),ii=class extends Ka{constructor(r,o,l,u){typeof o=="number"&&(l.duration=o,o=l,l=null),super(u?o:bh(o),l);let{duration:f,delay:d,immediateRender:p,stagger:v,overwrite:T,keyframes:C,defaults:b,scrollTrigger:k,yoyoEase:D}=this.vars,P=this.parent,L=(Ur(r)||Yf(r)?is(r[0]):"length"in o)?[r]:bs(r),j,U,N,Y,Z,z,K,G;if(this._targets=L.length?qc(L):td("GSAP target "+r+" not found. https://greensock.com",!ar.nullTargetWarn)||[],this._ptLookup=[],this._overwrite=T,C||v||Wf(f)||Wf(d)){if(o=this.vars,j=this.timeline=new hr({data:"nested",defaults:b||{}}),j.kill(),j.parent=j._dp=this,j._start=0,C)Gr(j.vars.defaults,{ease:"none"}),C.forEach(rt=>j.to(L,rt,">"));else{if(Y=L.length,K=v?_d(v):Xa,$s(v))for(Z in v)~Ld.indexOf(Z)&&(G||(G={}),G[Z]=v[Z]);for(U=0;U<Y;U++){N={};for(Z in o)i_.indexOf(Z)<0&&(N[Z]=o[Z]);N.stagger=0,D&&(N.yoyoEase=D),G&&Qo(N,G),z=L[U],N.duration=+Za(f,this,U,z,L),N.delay=(+Za(d,this,U,z,L)||0)-this._delay,!v&&Y===1&&N.delay&&(this._delay=d=N.delay,this._start+=d,N.delay=0),j.to(z,N,K(U,z,L))}j.duration()?f=d=0:this.timeline=0}f||this.duration(f=j.duration())}else this.timeline=0;T===!0&&!Nc&&(vn=this,vi.killTweensOf(L),vn=0),P&&Sh(P,this),(p||!f&&!C&&this._start===Ce(P._time)&&lr(p)&&ld(this)&&P.data!=="nested")&&(this._tTime=-Ve,this.render(Math.max(0,-d))),k&&ud(this,k)}render(r,o,l){let u=this._time,f=this._tDur,d=this._dur,p=r>f-Ve&&r>=0?f:r<Ve?0:r,v,T,C,b,k,D,P,L,j;if(!d)Ng(this,r,o,l);else if(p!==this._tTime||!r||l||!this._initted&&this._tTime||this._startAt&&this._zTime<0!=r<0){if(v=p,L=this.timeline,this._repeat){if(b=d+this._rDelay,this._repeat<-1&&r<0)return this.totalTime(b*100+r,o,l);if(v=Ce(p%b),p===f?(C=this._repeat,v=d):(C=~~(p/b),C&&C===p/b&&(v=d,C--),v>d&&(v=d)),D=this._yoyo&&C&1,D&&(j=this._yEase,v=d-v),k=Jo(this._tTime,b),v===u&&!l&&this._initted)return this;C!==k&&(L&&this._yEase&&Ch(L,D),this.vars.repeatRefresh&&!D&&!this._lock&&(this._lock=l=1,this.render(Ce(b*C),!0).invalidate()._lock=0))}if(!this._initted){if(fd(this,r<0?r:v,l,o))return this._tTime=0,this;if(d!==this._dur)return this.render(r,o,l)}for(this._tTime=p,this._time=v,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=P=(j||this._ease)(v/d),this._from&&(this.ratio=P=1-P),v&&!u&&!o&&Cr(this,"onStart"),T=this._pt;T;)T.r(P,T.d),T=T._next;L&&L.render(r<0?r:!v&&D?-Ve:L._dur*P,o,l)||this._startAt&&(this._zTime=r),this._onUpdate&&!o&&(r<0&&this._startAt&&this._startAt.render(r,!0,l),Cr(this,"onUpdate")),this._repeat&&C!==k&&this.vars.onRepeat&&!o&&this.parent&&Cr(this,"onRepeat"),(p===this._tDur||!p)&&this._tTime===p&&(r<0&&this._startAt&&!this._onUpdate&&this._startAt.render(r,!0,!0),(r||!d)&&(p===this._tDur&&this._ts>0||!p&&this._ts<0)&&gn(this,1),!o&&!(r<0&&!u)&&(p||u)&&(Cr(this,p===f?"onComplete":"onReverseComplete",!0),this._prom&&!(p<f&&this.timeScale()>0)&&this._prom()))}return this}targets(){return this._targets}invalidate(){return this._pt=this._op=this._startAt=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),super.invalidate()}kill(r,o="all"){if(!r&&(!o||o==="all"))return this._lazy=this._pt=0,this.parent?$a(this):this;if(this.timeline){let P=this.timeline.totalDuration();return this.timeline.killTweensOf(r,o,vn&&vn.vars.overwrite!==!0)._first||$a(this),this.parent&&P!==this.timeline.totalDuration()&&ta(this,this._dur*this.timeline._tDur/P,0,1),this}let l=this._targets,u=r?bs(r):l,f=this._ptLookup,d=this._pt,p,v,T,C,b,k,D;if((!o||o==="all")&&Lg(l,u))return o==="all"&&(this._pt=0),$a(this);for(p=this._op=this._op||[],o!=="all"&&(qi(o)&&(b={},Er(o,P=>b[P]=1),o=b),o=e_(l,o)),D=l.length;D--;)if(~u.indexOf(l[D])){v=f[D],o==="all"?(p[D]=o,C=v,T={}):(T=p[D]=p[D]||{},C=o);for(b in C)k=v&&v[b],k&&((!("kill"in k.d)||k.d.kill(b)===!0)&&Th(this,k,"_pt"),delete v[b]),T!=="all"&&(T[b]=1)}return this._initted&&!this._pt&&d&&$a(this),this}static to(r,o){return new ii(r,o,arguments[2])}static from(r,o){return new ii(r,Wa(arguments,1))}static delayedCall(r,o,l,u){return new ii(o,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:r,onComplete:o,onReverseComplete:o,onCompleteParams:l,onReverseCompleteParams:l,callbackScope:u})}static fromTo(r,o,l){return new ii(r,Wa(arguments,2))}static set(r,o){return o.duration=0,o.repeatDelay||(o.repeat=0),new ii(r,o)}static killTweensOf(r,o,l){return vi.killTweensOf(r,o,l)}};Gr(ii.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Er("staggerTo,staggerFrom,staggerFromTo",r=>{ii[r]=function(){let o=new hr,l=Jc.call(arguments,0);return l.splice(r==="staggerFromTo"?5:4,0,0),o[r].apply(o,l)}});var ru=(r,o,l)=>r[o]=l,Fd=(r,o,l)=>r[o](l),r_=(r,o,l,u)=>r[o](u.fp,l),s_=(r,o,l)=>r.setAttribute(o,l),su=(r,o)=>ki(r[o])?Fd:Gc(r[o])&&r.setAttribute?s_:ru,Bd=(r,o)=>o.set(o.t,o.p,Math.round((o.s+o.c*r)*1e4)/1e4,o),n_=(r,o)=>o.set(o.t,o.p,!!(o.s+o.c*r),o),Nd=function(r,o){let l=o._pt,u="";if(!r&&o.b)u=o.b;else if(r===1&&o.e)u=o.e;else{for(;l;)u=l.p+(l.m?l.m(l.s+l.c*r):Math.round((l.s+l.c*r)*1e4)/1e4)+u,l=l._next;u+=o.c}o.set(o.t,o.p,u,o)},nu=function(r,o){let l=o._pt;for(;l;)l.r(r,l.d),l=l._next},o_=function(r,o,l,u){let f=this._pt,d;for(;f;)d=f._next,f.p===u&&f.modifier(r,o,l),f=d},a_=function(r){let o=this._pt,l,u;for(;o;)u=o._next,o.p===r&&!o.op||o.op===r?Th(this,o,"_pt"):o.dep||(l=1),o=u;return!l},l_=(r,o,l,u)=>{u.mSet(r,o,u.m.call(u.tween,l,u.mt),u)},Ud=r=>{let o=r._pt,l,u,f,d;for(;o;){for(l=o._next,u=f;u&&u.pr>o.pr;)u=u._next;(o._prev=u?u._prev:d)?o._prev._next=o:f=o,(o._next=u)?u._prev=o:d=o,o=l}r._pt=f},cr=class{constructor(r,o,l,u,f,d,p,v,T){this.t=o,this.s=u,this.c=f,this.p=l,this.r=d||Bd,this.d=p||this,this.set=v||ru,this.pr=T||0,this._next=r,r&&(r._prev=this)}modifier(r,o,l){this.mSet=this.mSet||this.set,this.set=l_,this.m=r,this.mt=l,this.tween=o}};Er($c+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",r=>Xc[r]=1),wr.TweenMax=wr.TweenLite=ii,wr.TimelineLite=wr.TimelineMax=hr,vi=new hr({sortChildren:!1,defaults:Ko,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),ar.stringFilter=Md;var Rh={registerPlugin(...r){r.forEach(o=>Wg(o))},timeline(r){return new hr(r)},getTweensOf(r,o){return vi.getTweensOf(r,o)},getProperty(r,o,l,u){qi(r)&&(r=bs(r)[0]);let f=io(r||{}).get,d=l?ad:od;return l==="native"&&(l=""),r&&(o?d((Sr[o]&&Sr[o].get||f)(r,o,l,u)):(p,v,T)=>d((Sr[p]&&Sr[p].get||f)(r,p,v,T)))},quickSetter(r,o,l){if(r=bs(r),r.length>1){let v=r.map(C=>Ts.quickSetter(C,o,l)),T=v.length;return C=>{let b=T;for(;b--;)v[b](C)}}r=r[0]||{};let u=Sr[o],f=io(r),d=f.harness&&(f.harness.aliases||{})[o]||o,p=u?v=>{let T=new u;ea._pt=0,T.init(r,l?v+l:v,ea,0,[r]),T.render(1,T),ea._pt&&nu(1,ea)}:f.set(r,d);return u?p:v=>p(r,d,l?v+l:v,f,1)},isTweening(r){return vi.getTweensOf(r,!0).length>0},defaults(r){return r&&r.ease&&(r.ease=sa(r.ease,Ko.ease)),Kc(Ko,r||{})},config(r){return Kc(ar,r||{})},registerEffect({name:r,effect:o,plugins:l,defaults:u,extendTimeline:f}){(l||"").split(",").forEach(d=>d&&!Sr[d]&&!wr[d]&&td(r+" effect requires "+d+" plugin.")),Yc[r]=(d,p,v)=>o(bs(d),Gr(p||{},u),v),f&&(hr.prototype[r]=function(d,p,v){return this.add(Yc[r](d,$s(p)?p:(v=p)&&{},this),v)})},registerEase(r,o){Gi[r]=sa(o)},parseEase(r,o){return arguments.length?sa(r,o):Gi},getById(r){return vi.getById(r)},exportRoot(r={},o){let l=new hr(r),u,f;for(l.smoothChildTiming=lr(r.smoothChildTiming),vi.remove(l),l._dp=0,l._time=l._tTime=vi._time,u=vi._first;u;)f=u._next,(o||!(!u._dur&&u instanceof ii&&u.vars.onComplete===u._targets[0]))&&qs(l,u,u._start-u._delay),u=f;return qs(vi,l,0),l},utils:{wrap:bd,wrapYoyo:Td,distribute:_d,random:yd,snap:vd,normalize:Xg,getUnit:Ar,clamp:zg,splitColor:Ad,toArray:bs,mapRange:wd,pipe:Hg,unitize:jg,interpolate:Sd,shuffle:gd},install:Jf,effects:Yc,ticker:zr,updateRoot:hr.updateRoot,plugins:Sr,globalTimeline:vi,core:{PropTween:cr,globals:ed,Tween:ii,Timeline:hr,Animation:Ka,getCache:io,_removeLinkedListItem:Th,suppressOverwrites:r=>Nc=r}};Er("to,from,fromTo,delayedCall,set,killTweensOf",r=>Rh[r]=ii[r]),zr.add(hr.updateRoot),ea=Rh.to({},{duration:0});var h_=(r,o)=>{let l=r._pt;for(;l&&l.p!==o&&l.op!==o&&l.fp!==o;)l=l._next;return l},c_=(r,o)=>{let l=r._targets,u,f,d;for(u in o)for(f=l.length;f--;)d=r._ptLookup[f][u],d&&(d=d.d)&&(d._pt&&(d=h_(d,u)),d&&d.modifier&&d.modifier(o[u],r,l[f],u))},ou=(r,o)=>({name:r,rawVars:1,init(l,u,f){f._onInit=d=>{let p,v;if(qi(u)&&(p={},Er(u,T=>p[T]=1),u=p),o){p={};for(v in u)p[v]=o(u[v]);u=p}c_(d,u)}}}),Ts=Rh.registerPlugin({name:"attr",init(r,o,l,u,f){let d,p;for(d in o)p=this.add(r,"setAttribute",(r.getAttribute(d)||0)+"",o[d],u,f,0,0,d),p&&(p.op=d),this._props.push(d)}},{name:"endArray",init(r,o){let l=o.length;for(;l--;)this.add(r,l,r[l]||0,o[l])}},ou("roundProps",tu),ou("modifiers"),ou("snap",vd))||Rh;ii.version=hr.version=Ts.version="3.6.0",Qf=1,Xf()&&ra();var{Power0:Wy,Power1:Yy,Power2:$y,Power3:qy,Power4:Gd,Linear:u_,Quad:Ky,Cubic:Zy,Quart:Qy,Quint:Jy,Strong:tx,Elastic:ex,Back:ix,SteppedEase:rx,Bounce:sx,Sine:nx,Expo:ox,Circ:ax}=Gi,zd,ws,na,au,no,Qa,Vd,f_=()=>typeof window<"u",yn={},oo=180/Math.PI,oa=Math.PI/180,aa=Math.atan2,Hd=1e8,jd=/([A-Z])/g,d_=/(?:left|right|width|margin|padding|x)/i,p_=/[\s,\(]\S/,xn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Xd=(r,o)=>o.set(o.t,o.p,Math.round((o.s+o.c*r)*1e4)/1e4+o.u,o),m_=(r,o)=>o.set(o.t,o.p,r===1?o.e:Math.round((o.s+o.c*r)*1e4)/1e4+o.u,o),g_=(r,o)=>o.set(o.t,o.p,r?Math.round((o.s+o.c*r)*1e4)/1e4+o.u:o.b,o),__=(r,o)=>{let l=o.s+o.c*r;o.set(o.t,o.p,~~(l+(l<0?-.5:.5))+o.u,o)},Wd=(r,o)=>o.set(o.t,o.p,r?o.e:o.b,o),Yd=(r,o)=>o.set(o.t,o.p,r!==1?o.b:o.e,o),v_=(r,o,l)=>r.style[o]=l,y_=(r,o,l)=>r.style.setProperty(o,l),x_=(r,o,l)=>r._gsap[o]=l,b_=(r,o,l)=>r._gsap.scaleX=r._gsap.scaleY=l,T_=(r,o,l,u,f)=>{let d=r._gsap;d.scaleX=d.scaleY=l,d.renderTransform(f,d)},w_=(r,o,l,u,f)=>{let d=r._gsap;d[o]=l,d.renderTransform(f,d)},Pr="transform",bn=Pr+"Origin",$d,lu=(r,o)=>{let l=ws.createElementNS?ws.createElementNS((o||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),r):ws.createElement(r);return l.style?l:ws.createElement(r)},Ss=(r,o,l)=>{let u=getComputedStyle(r);return u[o]||u.getPropertyValue(o.replace(jd,"-$1").toLowerCase())||u.getPropertyValue(o)||!l&&Ss(r,la(o)||o,1)||""},qd="O,Moz,ms,Ms,Webkit".split(","),la=(r,o,l)=>{let u=o||no,f=u.style,d=5;if(r in f&&!l)return r;for(r=r.charAt(0).toUpperCase()+r.substr(1);d--&&!(qd[d]+r in f););return d<0?null:(d===3?"ms":d>=0?qd[d]:"")+r},hu=()=>{f_()&&window.document&&(zd=window,ws=zd.document,na=ws.documentElement,no=lu("div")||{style:{}},Qa=lu("div"),Pr=la(Pr),bn=Pr+"Origin",no.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",$d=!!la("perspective"),au=1)},Dh=function(r){let o=lu("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),l=this.parentNode,u=this.nextSibling,f=this.style.cssText,d;if(na.appendChild(o),o.appendChild(this),this.style.display="block",r)try{d=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=Dh}catch{}else this._gsapBBox&&(d=this._gsapBBox());return l&&(u?l.insertBefore(this,u):l.appendChild(this)),na.removeChild(o),this.style.cssText=f,d},Kd=(r,o)=>{let l=o.length;for(;l--;)if(r.hasAttribute(o[l]))return r.getAttribute(o[l])},Zd=r=>{let o;try{o=r.getBBox()}catch{o=Dh.call(r,!0)}return o&&(o.width||o.height)||r.getBBox===Dh||(o=Dh.call(r,!0)),o&&!o.width&&!o.x&&!o.y?{x:+Kd(r,["x","cx","x1"])||0,y:+Kd(r,["y","cy","y1"])||0,width:0,height:0}:o},Qd=r=>!!(r.getCTM&&(!r.parentNode||r.ownerSVGElement)&&Zd(r)),Ih=(r,o)=>{if(o){let l=r.style;o in yn&&o!==bn&&(o=Pr),l.removeProperty?((o.substr(0,2)==="ms"||o.substr(0,6)==="webkit")&&(o="-"+o),l.removeProperty(o.replace(jd,"-$1").toLowerCase())):l.removeAttribute(o)}},Tn=(r,o,l,u,f,d)=>{let p=new cr(r._pt,o,l,0,1,d?Yd:Wd);return r._pt=p,p.b=u,p.e=f,r._props.push(l),p},Jd={deg:1,rad:1,turn:1},Ks=(r,o,l,u)=>{let f=parseFloat(l)||0,d=(l+"").trim().substr((f+"").length)||"px",p=no.style,v=d_.test(o),T=r.tagName.toLowerCase()==="svg",C=(T?"client":"offset")+(v?"Width":"Height"),b=100,k=u==="px",D=u==="%",P,L,j,U;return u===d||!f||Jd[u]||Jd[d]?f:(d!=="px"&&!k&&(f=Ks(r,o,l,"px")),U=r.getCTM&&Qd(r),(D||d==="%")&&(yn[o]||~o.indexOf("adius"))?(P=U?r.getBBox()[v?"width":"height"]:r[C],Ce(D?f/P*b:f/100*P)):(p[v?"width":"height"]=b+(k?d:u),L=~o.indexOf("adius")||u==="em"&&r.appendChild&&!T?r:r.parentNode,U&&(L=(r.ownerSVGElement||{}).parentNode),(!L||L===ws||!L.appendChild)&&(L=ws.body),j=L._gsap,j&&D&&j.width&&v&&j.time===zr.time?Ce(f/j.width*b):((D||d==="%")&&(p.position=Ss(r,"position")),L===r&&(p.position="static"),L.appendChild(no),P=no[C],L.removeChild(no),p.position="absolute",v&&D&&(j=io(L),j.time=zr.time,j.width=L[C]),Ce(k?P*f/b:P&&f?b/P*f:0))))},ha=(r,o,l,u)=>{let f;return au||hu(),o in xn&&o!=="transform"&&(o=xn[o],~o.indexOf(",")&&(o=o.split(",")[0])),yn[o]&&o!=="transform"?(f=kh(r,u),f=o!=="transformOrigin"?f[o]:Lh(Ss(r,bn))+" "+f.zOrigin+"px"):(f=r.style[o],(!f||f==="auto"||u||~(f+"").indexOf("calc("))&&(f=Oh[o]&&Oh[o](r,o,l)||Ss(r,o)||sd(r,o)||(o==="opacity"?1:0))),l&&!~(f+"").trim().indexOf(" ")?Ks(r,o,f,l)+l:f},S_=function(r,o,l,u){if(!l||l==="none"){let z=la(o,r,1),K=z&&Ss(r,z,1);K&&K!==l?(o=z,l=K):o==="borderColor"&&(l=Ss(r,"borderTopColor"))}let f=new cr(this._pt,r.style,o,0,1,Nd),d=0,p=0,v,T,C,b,k,D,P,L,j,U,N,Y,Z;if(f.b=l,f.e=u,l+="",u+="",u==="auto"&&(r.style[o]=u,u=Ss(r,o)||u,r.style[o]=l),v=[l,u],Md(v),l=v[0],u=v[1],C=l.match(Zo)||[],Z=u.match(Zo)||[],Z.length){for(;T=Zo.exec(u);)P=T[0],j=u.substring(d,T.index),k?k=(k+1)%5:(j.substr(-5)==="rgba("||j.substr(-5)==="hsla(")&&(k=1),P!==(D=C[p++]||"")&&(b=parseFloat(D)||0,N=D.substr((b+"").length),Y=P.charAt(1)==="="?+(P.charAt(0)+"1"):0,Y&&(P=P.substr(2)),L=parseFloat(P),U=P.substr((L+"").length),d=Zo.lastIndex-U.length,U||(U=U||ar.units[o]||N,d===u.length&&(u+=U,f.e+=U)),N!==U&&(b=Ks(r,o,D,U)||0),f._pt={_next:f._pt,p:j||p===1?j:",",s:b,c:Y?Y*L:L-b,m:k&&k<4||o==="zIndex"?Math.round:0});f.c=d<u.length?u.substring(d,u.length):""}else f.r=o==="display"&&u==="none"?Yd:Wd;return qf.test(u)&&(f.e=0),this._pt=f,f},tp={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},E_=r=>{let o=r.split(" "),l=o[0],u=o[1]||"50%";return(l==="top"||l==="bottom"||u==="left"||u==="right")&&(r=l,l=u,u=r),o[0]=tp[l]||l,o[1]=tp[u]||u,o.join(" ")},A_=(r,o)=>{if(o.tween&&o.tween._time===o.tween._dur){let l=o.t,u=l.style,f=o.u,d=l._gsap,p,v,T;if(f==="all"||f===!0)u.cssText="",v=1;else for(f=f.split(","),T=f.length;--T>-1;)p=f[T],yn[p]&&(v=1,p=p==="transformOrigin"?bn:Pr),Ih(l,p);v&&(Ih(l,Pr),d&&(d.svg&&l.removeAttribute("transform"),kh(l,1),d.uncache=1))}},Oh={clearProps(r,o,l,u,f){if(f.data!=="isFromStart"){let d=r._pt=new cr(r._pt,o,l,0,0,A_);return d.u=u,d.pr=-10,d.tween=f,r._props.push(l),1}}},Ja=[1,0,0,1,0,0],ep={},ip=r=>r==="matrix(1, 0, 0, 1, 0, 0)"||r==="none"||!r,rp=r=>{let o=Ss(r,Pr);return ip(o)?Ja:o.substr(7).match($f).map(Ce)},cu=(r,o)=>{let l=r._gsap||io(r),u=r.style,f=rp(r),d,p,v,T;return l.svg&&r.getAttribute("transform")?(v=r.transform.baseVal.consolidate().matrix,f=[v.a,v.b,v.c,v.d,v.e,v.f],f.join(",")==="1,0,0,1,0,0"?Ja:f):(f===Ja&&!r.offsetParent&&r!==na&&!l.svg&&(v=u.display,u.display="block",d=r.parentNode,(!d||!r.offsetParent)&&(T=1,p=r.nextSibling,na.appendChild(r)),f=rp(r),v?u.display=v:Ih(r,"display"),T&&(p?d.insertBefore(r,p):d?d.appendChild(r):na.removeChild(r))),o&&f.length>6?[f[0],f[1],f[4],f[5],f[12],f[13]]:f)},uu=(r,o,l,u,f,d)=>{let p=r._gsap,v=f||cu(r,!0),T=p.xOrigin||0,C=p.yOrigin||0,b=p.xOffset||0,k=p.yOffset||0,D=v[0],P=v[1],L=v[2],j=v[3],U=v[4],N=v[5],Y=o.split(" "),Z=parseFloat(Y[0])||0,z=parseFloat(Y[1])||0,K,G,rt,dt;l?v!==Ja&&(G=D*j-P*L)&&(rt=Z*(j/G)+z*(-L/G)+(L*N-j*U)/G,dt=Z*(-P/G)+z*(D/G)-(D*N-P*U)/G,Z=rt,z=dt):(K=Zd(r),Z=K.x+(~Y[0].indexOf("%")?Z/100*K.width:Z),z=K.y+(~(Y[1]||Y[0]).indexOf("%")?z/100*K.height:z)),u||u!==!1&&p.smooth?(U=Z-T,N=z-C,p.xOffset=b+(U*D+N*L)-U,p.yOffset=k+(U*P+N*j)-N):p.xOffset=p.yOffset=0,p.xOrigin=Z,p.yOrigin=z,p.smooth=!!u,p.origin=o,p.originIsAbsolute=!!l,r.style[bn]="0px 0px",d&&(Tn(d,p,"xOrigin",T,Z),Tn(d,p,"yOrigin",C,z),Tn(d,p,"xOffset",b,p.xOffset),Tn(d,p,"yOffset",k,p.yOffset)),r.setAttribute("data-svg-origin",Z+" "+z)},kh=(r,o)=>{let l=r._gsap||new Id(r);if("x"in l&&!o&&!l.uncache)return l;let u=r.style,f=l.scaleX<0,d="px",p="deg",v=Ss(r,bn)||"0",T,C,b,k,D,P,L,j,U,N,Y,Z,z,K,G,rt,dt,Bt,Tt,ie,Kt,Gt,$t,Ht,re,Ne,se,pe,ue,fe,Ue,ye;return T=C=b=P=L=j=U=N=Y=0,k=D=1,l.svg=!!(r.getCTM&&Qd(r)),K=cu(r,l.svg),l.svg&&(Ht=!l.uncache&&r.getAttribute("data-svg-origin"),uu(r,Ht||v,!!Ht||l.originIsAbsolute,l.smooth!==!1,K)),Z=l.xOrigin||0,z=l.yOrigin||0,K!==Ja&&(Bt=K[0],Tt=K[1],ie=K[2],Kt=K[3],T=Gt=K[4],C=$t=K[5],K.length===6?(k=Math.sqrt(Bt*Bt+Tt*Tt),D=Math.sqrt(Kt*Kt+ie*ie),P=Bt||Tt?aa(Tt,Bt)*oo:0,U=ie||Kt?aa(ie,Kt)*oo+P:0,U&&(D*=Math.cos(U*oa)),l.svg&&(T-=Z-(Z*Bt+z*ie),C-=z-(Z*Tt+z*Kt))):(ye=K[6],fe=K[7],se=K[8],pe=K[9],ue=K[10],Ue=K[11],T=K[12],C=K[13],b=K[14],G=aa(ye,ue),L=G*oo,G&&(rt=Math.cos(-G),dt=Math.sin(-G),Ht=Gt*rt+se*dt,re=$t*rt+pe*dt,Ne=ye*rt+ue*dt,se=Gt*-dt+se*rt,pe=$t*-dt+pe*rt,ue=ye*-dt+ue*rt,Ue=fe*-dt+Ue*rt,Gt=Ht,$t=re,ye=Ne),G=aa(-ie,ue),j=G*oo,G&&(rt=Math.cos(-G),dt=Math.sin(-G),Ht=Bt*rt-se*dt,re=Tt*rt-pe*dt,Ne=ie*rt-ue*dt,Ue=Kt*dt+Ue*rt,Bt=Ht,Tt=re,ie=Ne),G=aa(Tt,Bt),P=G*oo,G&&(rt=Math.cos(G),dt=Math.sin(G),Ht=Bt*rt+Tt*dt,re=Gt*rt+$t*dt,Tt=Tt*rt-Bt*dt,$t=$t*rt-Gt*dt,Bt=Ht,Gt=re),L&&Math.abs(L)+Math.abs(P)>359.9&&(L=P=0,j=180-j),k=Ce(Math.sqrt(Bt*Bt+Tt*Tt+ie*ie)),D=Ce(Math.sqrt($t*$t+ye*ye)),G=aa(Gt,$t),U=Math.abs(G)>2e-4?G*oo:0,Y=Ue?1/(Ue<0?-Ue:Ue):0),l.svg&&(Ht=r.getAttribute("transform"),l.forceCSS=r.setAttribute("transform","")||!ip(Ss(r,Pr)),Ht&&r.setAttribute("transform",Ht))),Math.abs(U)>90&&Math.abs(U)<270&&(f?(k*=-1,U+=P<=0?180:-180,P+=P<=0?180:-180):(D*=-1,U+=U<=0?180:-180)),l.x=T-((l.xPercent=T&&(l.xPercent||(Math.round(r.offsetWidth/2)===Math.round(-T)?-50:0)))?r.offsetWidth*l.xPercent/100:0)+d,l.y=C-((l.yPercent=C&&(l.yPercent||(Math.round(r.offsetHeight/2)===Math.round(-C)?-50:0)))?r.offsetHeight*l.yPercent/100:0)+d,l.z=b+d,l.scaleX=Ce(k),l.scaleY=Ce(D),l.rotation=Ce(P)+p,l.rotationX=Ce(L)+p,l.rotationY=Ce(j)+p,l.skewX=U+p,l.skewY=N+p,l.transformPerspective=Y+d,(l.zOrigin=parseFloat(v.split(" ")[2])||0)&&(u[bn]=Lh(v)),l.xOffset=l.yOffset=0,l.force3D=ar.force3D,l.renderTransform=l.svg?P_:$d?sp:C_,l.uncache=0,l},Lh=r=>(r=r.split(" "))[0]+" "+r[1],fu=(r,o,l)=>{let u=Ar(o);return Ce(parseFloat(o)+parseFloat(Ks(r,"x",l+"px",u)))+u},C_=(r,o)=>{o.z="0px",o.rotationY=o.rotationX="0deg",o.force3D=0,sp(r,o)},ao="0deg",tl="0px",lo=") ",sp=function(r,o){let{xPercent:l,yPercent:u,x:f,y:d,z:p,rotation:v,rotationY:T,rotationX:C,skewX:b,skewY:k,scaleX:D,scaleY:P,transformPerspective:L,force3D:j,target:U,zOrigin:N}=o||this,Y="",Z=j==="auto"&&r&&r!==1||j===!0;if(N&&(C!==ao||T!==ao)){let z=parseFloat(T)*oa,K=Math.sin(z),G=Math.cos(z),rt;z=parseFloat(C)*oa,rt=Math.cos(z),f=fu(U,f,K*rt*-N),d=fu(U,d,-Math.sin(z)*-N),p=fu(U,p,G*rt*-N+N)}L!==tl&&(Y+="perspective("+L+lo),(l||u)&&(Y+="translate("+l+"%, "+u+"%) "),(Z||f!==tl||d!==tl||p!==tl)&&(Y+=p!==tl||Z?"translate3d("+f+", "+d+", "+p+") ":"translate("+f+", "+d+lo),v!==ao&&(Y+="rotate("+v+lo),T!==ao&&(Y+="rotateY("+T+lo),C!==ao&&(Y+="rotateX("+C+lo),(b!==ao||k!==ao)&&(Y+="skew("+b+", "+k+lo),(D!==1||P!==1)&&(Y+="scale("+D+", "+P+lo),U.style[Pr]=Y||"translate(0, 0)"},P_=function(r,o){let{xPercent:l,yPercent:u,x:f,y:d,rotation:p,skewX:v,skewY:T,scaleX:C,scaleY:b,target:k,xOrigin:D,yOrigin:P,xOffset:L,yOffset:j,forceCSS:U}=o||this,N=parseFloat(f),Y=parseFloat(d),Z,z,K,G,rt;p=parseFloat(p),v=parseFloat(v),T=parseFloat(T),T&&(T=parseFloat(T),v+=T,p+=T),p||v?(p*=oa,v*=oa,Z=Math.cos(p)*C,z=Math.sin(p)*C,K=Math.sin(p-v)*-b,G=Math.cos(p-v)*b,v&&(T*=oa,rt=Math.tan(v-T),rt=Math.sqrt(1+rt*rt),K*=rt,G*=rt,T&&(rt=Math.tan(T),rt=Math.sqrt(1+rt*rt),Z*=rt,z*=rt)),Z=Ce(Z),z=Ce(z),K=Ce(K),G=Ce(G)):(Z=C,G=b,z=K=0),(N&&!~(f+"").indexOf("px")||Y&&!~(d+"").indexOf("px"))&&(N=Ks(k,"x",f,"px"),Y=Ks(k,"y",d,"px")),(D||P||L||j)&&(N=Ce(N+D-(D*Z+P*K)+L),Y=Ce(Y+P-(D*z+P*G)+j)),(l||u)&&(rt=k.getBBox(),N=Ce(N+l/100*rt.width),Y=Ce(Y+u/100*rt.height)),rt="matrix("+Z+","+z+","+K+","+G+","+N+","+Y+")",k.setAttribute("transform",rt),U&&(k.style[Pr]=rt)},M_=function(r,o,l,u,f,d){let p=360,v=qi(f),T=parseFloat(f)*(v&&~f.indexOf("rad")?oo:1),C=d?T*d:T-u,b=u+C+"deg",k,D;return v&&(k=f.split("_")[1],k==="short"&&(C%=p,C!==C%(p/2)&&(C+=C<0?p:-p)),k==="cw"&&C<0?C=(C+p*Hd)%p-~~(C/p)*p:k==="ccw"&&C>0&&(C=(C-p*Hd)%p-~~(C/p)*p)),r._pt=D=new cr(r._pt,o,l,u,C,m_),D.e=b,D.u="deg",r._props.push(l),D},R_=(r,o,l)=>{let u=Qa.style,f=l._gsap,d="perspective,force3D,transformOrigin,svgOrigin",p,v,T,C,b,k,D,P;u.cssText=getComputedStyle(l).cssText+";position:absolute;display:block;",u[Pr]=o,ws.body.appendChild(Qa),p=kh(Qa,1);for(v in yn)T=f[v],C=p[v],T!==C&&d.indexOf(v)<0&&(D=Ar(T),P=Ar(C),b=D!==P?Ks(l,v,T,P):parseFloat(T),k=parseFloat(C),r._pt=new cr(r._pt,f,v,b,k-b,Xd),r._pt.u=P||0,r._props.push(v));ws.body.removeChild(Qa)};Er("padding,margin,Width,Radius",(r,o)=>{let l="Top",u="Right",f="Bottom",d="Left",p=(o<3?[l,u,f,d]:[l+d,l+u,f+u,f+d]).map(v=>o<2?r+v:"border"+v+r);Oh[o>1?"border"+r:r]=function(v,T,C,b,k){let D,P;if(arguments.length<4)return D=p.map(L=>ha(v,L,C)),P=D.join(" "),P.split(D[0]).length===5?D[0]:P;D=(b+"").split(" "),P={},p.forEach((L,j)=>P[L]=D[j]=D[j]||D[(j-1)/2|0]),v.init(T,P,k)}});var np={name:"css",register:hu,targetTest(r){return r.style&&r.nodeType},init(r,o,l,u,f){let d=this._props,p=r.style,v=l.vars.startAt,T,C,b,k,D,P,L,j,U,N,Y,Z,z,K,G;au||hu();for(L in o)if(L!=="autoRound"&&(C=o[L],!(Sr[L]&&Od(L,o,l,u,r,f)))){if(D=typeof C,P=Oh[L],D==="function"&&(C=C.call(l,u,r,f),D=typeof C),D==="string"&&~C.indexOf("random(")&&(C=Eh(C)),P)P(this,r,L,C,l)&&(G=1);else if(L.substr(0,2)==="--")T=(getComputedStyle(r).getPropertyValue(L)+"").trim(),C+="",j=Ar(T),U=Ar(C),U?j!==U&&(T=Ks(r,L,T,U)+U):j&&(C+=j),this.add(p,"setProperty",T,C,u,f,0,0,L);else if(D!=="undefined"){if(v&&L in v?(T=typeof v[L]=="function"?v[L].call(l,u,r,f):v[L],L in ar.units&&!Ar(T)&&(T+=ar.units[L]),(T+"").charAt(1)==="="&&(T=ha(r,L))):T=ha(r,L),k=parseFloat(T),N=D==="string"&&C.charAt(1)==="="?+(C.charAt(0)+"1"):0,N&&(C=C.substr(2)),b=parseFloat(C),L in xn&&(L==="autoAlpha"&&(k===1&&ha(r,"visibility")==="hidden"&&b&&(k=0),Tn(this,p,"visibility",k?"inherit":"hidden",b?"inherit":"hidden",!b)),L!=="scale"&&L!=="transform"&&(L=xn[L],~L.indexOf(",")&&(L=L.split(",")[0]))),Y=L in yn,Y){if(Z||(z=r._gsap,z.renderTransform&&!o.parseTransform||kh(r,o.parseTransform),K=o.smoothOrigin!==!1&&z.smooth,Z=this._pt=new cr(this._pt,p,Pr,0,1,z.renderTransform,z,0,-1),Z.dep=1),L==="scale")this._pt=new cr(this._pt,z,"scaleY",z.scaleY,N?N*b:b-z.scaleY),d.push("scaleY",L),L+="X";else if(L==="transformOrigin"){C=E_(C),z.svg?uu(r,C,0,K,0,this):(U=parseFloat(C.split(" ")[2])||0,U!==z.zOrigin&&Tn(this,z,"zOrigin",z.zOrigin,U),Tn(this,p,L,Lh(T),Lh(C)));continue}else if(L==="svgOrigin"){uu(r,C,1,K,0,this);continue}else if(L in ep){M_(this,z,L,k,C,N);continue}else if(L==="smoothOrigin"){Tn(this,z,"smooth",z.smooth,C);continue}else if(L==="force3D"){z[L]=C;continue}else if(L==="transform"){R_(this,C,r);continue}}else L in p||(L=la(L)||L);if(Y||(b||b===0)&&(k||k===0)&&!p_.test(C)&&L in p)j=(T+"").substr((k+"").length),b||(b=0),U=Ar(C)||(L in ar.units?ar.units[L]:j),j!==U&&(k=Ks(r,L,T,U)),this._pt=new cr(this._pt,Y?z:p,L,k,N?N*b:b-k,!Y&&(U==="px"||L==="zIndex")&&o.autoRound!==!1?__:Xd),this._pt.u=U||0,j!==U&&(this._pt.b=T,this._pt.r=g_);else if(L in p)S_.call(this,r,L,T,C);else if(L in r)this.add(r,L,r[L],C,u,f);else{jc(L,C);continue}d.push(L)}}G&&Ud(this)},get:ha,aliases:xn,getSetter(r,o,l){let u=xn[o];return u&&u.indexOf(",")<0&&(o=u),o in yn&&o!==bn&&(r._gsap.x||ha(r,"x"))?l&&Vd===l?o==="scale"?b_:x_:(Vd=l||{})&&(o==="scale"?T_:w_):r.style&&!Gc(r.style[o])?v_:~o.indexOf("-")?y_:su(r,o)},core:{_removeProperty:Ih,_getMatrix:cu}};Ts.utils.checkPrefix=la,function(r,o,l,u){let f=Er(r+","+o+","+l,d=>{yn[d]=1});Er(o,d=>{ar.units[d]="deg",ep[d]=1}),xn[f[13]]=r+","+o,Er(u,d=>{let p=d.split(":");xn[p[1]]=f[p[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY"),Er("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",r=>{ar.units[r]="px"}),Ts.registerPlugin(np);var Ut=Ts.registerPlugin(np)||Ts,lx=Ut.core.Tween,op=window.Array,hx=window.Node,D_=window.Object,ap=window.document,cx=op.isArray;function I_(r,o,l){return op.prototype.slice.call(r,o,l)}var lp=D_.assign;typeof lp!="function"&&(hp=function(r,o){if(o)for(var l in o)o.hasOwnProperty(l)&&(r[l]=o[l]);return r},lp=function(){return I_(arguments).reduce(hp)});var hp;function O_(r){try{JSON.parse(r)}catch{return!1}return!0}function cp(r){return r=r.reduce((o,l)=>o.includes(l)?o:[...o,l],[]),r}function up(){var r=!1;return function(o){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(o.substr(0,4)))&&(r=!0)}(navigator.userAgent||navigator.vendor||window.opera),r}function k_(r,o){let l=ap.createElement("img");l.onload=function(){o&&o(!0)},l.onerror=function(){o&&o(!1)},l.src=r}function ca(r,o,l,u){let f=-1;return r.forEach((d,p)=>{u?String(d.dataset[o])==String(l)&&(f=p):String(d[o])==String(l)&&(f=p)}),f}function L_(r){let o="";const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",u=l.length;for(var f=0;f<r;f++)o+=l.charAt(Math.floor(Math.random()*u));return o}function F_(r,o){const l=new Map;return r.forEach(u=>{const f=o(u),d=l.get(f);d?d.push(u):l.set(f,[u])}),l}function Ke(r){var o=r.style.transform.split(/\w+\(|\);?/),l=o[1].split(/,\s?/g).map(function(u){return parseInt(u)});return{x:l[0],y:l[1],z:l[2]}}function du(r){let o=!1;const l=(u,f)=>{f.offsetHeight>u.offsetHeight?(o=!0,f.innerText=f.innerText.slice(0,-1),l(u,f)):o&&(f.innerText=f.innerText.slice(0,-3)+"...")};ap.querySelectorAll(r).forEach((u,f)=>{u.querySelector("span").innerText=u.querySelector("span").innerText.trim(),u.querySelector("span").offsetHeight>u.offsetHeight&&l(u,u.querySelector("span"))})}var Es=class{constructor(r){this.observers={},this.events=["click","hover"],this.nodes=document.querySelectorAll(r)||[],this._bindDefault()}_bindDefault(){this.nodes.forEach((r,o)=>{for(const l of this.events)l=="hover"?up()?(r.addEventListener("touchstart",u=>{this.emit("hover",{hover:!0,node:r,index:o})}),r.addEventListener("touchend",u=>{this.emit("hover",{hover:!1,node:r,index:o})})):(r.addEventListener("mouseenter",u=>{this.emit("hover",{hover:!0,node:r,index:o})}),r.addEventListener("mouseleave",u=>{this.emit("hover",{hover:!1,node:r,index:o})})):r.addEventListener(l,u=>{this.emit(l,{event:u,node:r,index:o})})})}subscribe(r,o){!this.observers[r]&&(this.observers[r]=[]),this.observers[r].push(o)}unsubscribe(r,o){let l=this.observers[r]?this.observers[r].indexOf(o):-1;l>-1&&this.observers[r].splice(l,1)}emit(r,o){this.observers[r]&&this.observers[r].forEach(l=>{l(o||null)})}},fp=(r,o)=>o?`
		<a class="button ${o?"static":""}" data-offer-id="${r||""}">
			<span>Book Now!</span>
		</a>
		`:`
		<div class="button">
			<span>Book Now!</span>
		</div>
		`,B_=()=>`
    <div id="arrowPrev" data-fun="prev" class="arrow visible">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6.57 10.91"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M6.24,4.67,1.91.33A1.12,1.12,0,0,0,.33,1.91L3.88,5.45.33,9a1.1,1.1,0,0,0,0,1.57,1.11,1.11,0,0,0,.79.33,1.12,1.12,0,0,0,.79-.33L6.24,6.25a1.13,1.13,0,0,0,.33-.8A1.08,1.08,0,0,0,6.24,4.67Z"/></g></g></svg>
    </div>
    <div id="arrowNext" data-fun="next" class="arrow visible">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 6.57 10.91"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M6.24,4.67,1.91.33A1.12,1.12,0,0,0,.33,1.91L3.88,5.45.33,9a1.1,1.1,0,0,0,0,1.57,1.11,1.11,0,0,0,.79.33,1.12,1.12,0,0,0,.79-.33L6.24,6.25a1.13,1.13,0,0,0,.33-.8A1.08,1.08,0,0,0,6.24,4.67Z"/></g></g></svg>
    </div>
  `,N_=class{constructor({container:r,text:o,orientation:l,speed:u,delay:f}){this.container=r,this.text=o,this.speed=u||50,this.containers=[],this.texts=[],this.orientation=l||"horizontal",this.timeLines=[],this.status="stopped",this.delay=f||0,this.startDelayTimeout=null,this.stopDelayTimeout=null}init(){document.querySelectorAll(this.container).forEach((r,o)=>{this.orientation==="horizontal"&&(r.style.whiteSpace="nowrap"),this.checkTextLength(r)}),this.containers.forEach((r,o)=>{const l=this.texts[o],u=this.orientation==="vertical"?r.offsetHeight:r.offsetWidth,f=this.orientation==="vertical"?l.offsetHeight:l.offsetWidth,d=f/this.speed,p=Ut.timeline({repeat:-1,delay:this.delay,paused:!0});p.to(l,{duration:d,[this.orientation==="vertical"?"y":"x"]:-(f/2),ease:u_.easeNone,repeat:-1}),this.timeLines.push(p)})}start(r=0){return this.status==="stopped"&&(this.status="running",r>0?(this.startDelayTimeout&&clearTimeout(this.startDelayTimeout),this.startDelayTimeout=setTimeout(()=>{this.timeLines.forEach(o=>{o.play()})},r)):this.timeLines.forEach(o=>{o.play()})),this}stop(r=0){return this.status==="running"&&(this.status="stopped",r>0?(this.stopDelayTimeout&&clearTimeout(this.stopDelayTimeout),this.stopDelayTimeout=setTimeout(()=>{this.timeLines.forEach(o=>{o.seek(0).pause()})},r)):this.timeLines.forEach(o=>{o.seek(0).pause()})),this}checkTextLength(r){const o=r.querySelector(this.text);if(this.orientation==="vertical"){const l=r.offsetHeight;r.querySelector(this.text).offsetHeight>l&&(this.containers.push(r),this.texts.push(o),this.duplicateText(o))}else{const l=r.offsetWidth;r.querySelector(this.text).offsetWidth>l&&(this.containers.push(r),this.texts.push(o),this.duplicateText(o))}}duplicateText(r){this.orientation==="vertical"?r.innerHTML+="<br>"+r.innerHTML:r.innerHTML+="&nbsp;&nbsp;"+r.innerHTML}},pu=N_,dp=class{constructor(r){this.startDate=new Date(r.startDate),this.endDate=new Date(r.endDate),this.startTime=this.startDate.getTime(),this.endTime=this.endDate.getTime(),this.selector=r.selector,this.mask=r.mask,this.timer=null}tick(){const r=new Date,o=this.endTime-r.getTime();if(this.startTime&&this.startTime>r.getTime()){this.beforeStart();return}else if(this.endTime<r.getTime()){this.atTheEnd();return}else{const l=Math.floor(o/864e5),u=Math.floor(o%(1e3*60*60*24)/(1e3*60*60)),f=Math.floor(o%(1e3*60*60)/(1e3*60)),d=Math.floor(o%(1e3*60)/1e3),p=l<10?`0${l}`:l,v=u<10?`0${u}`:u,T=f<10?`0${f}`:f,C=d<10?`0${d}`:d,b=this.mask.replace("{dd}",p).replace("{hh}",v).replace("{mm}",T).replace("{ss}",C);document.querySelector(this.selector)&&(document.getElementById("days").innerHTML=p,document.getElementById("hrs").innerHTML=v,document.getElementById("min").innerHTML=T)}}beforeStart(){this.stop()}atTheEnd(){this.selector.remove(),this.stop()}start(){this.timer=setInterval(()=>{this.tick()},1e3),this.tick()}stop(){clearInterval(this.timer)}};function U_(r){r.forEach(o=>{o.addEventListener("click",()=>G_(o))})}function G_(r){document.createElement("img").setAttribute("src",r.dataset.trackingUrl)}var z_=new Es(".banner");document.querySelector("body").classList.add("b160x600");var yi={observer:z_,hover:!1,enlargerOpened:!1,myOffers:[],slider:null,offerInfo:!0,videoIsPlay:!1,cube:null,counter:null,offerCounters:{},images:[],multiImages:[],rollTimeout:null,dotsObserver:null,jumpingTimeout:null,jumpingObserver:null,enlargerObserver:null,zipperObserver:null,videoObserver:null,currentInfoContainer:0,scratchComplete:null,height:"600",width:"160",dim:"160x600",rollTexts:{offersContainerRollText:null,offerInfoRollText:null,cubeRollText:null,enlargerRollText:null},settings:{offers:Number(6),jumpingInterval:Number("2000"),logos:String("logo.png").split(","),screenColumns:Number(1),screenRows:Number(1),offersPerScreen:Number(1),video:!1,videoType:"video_first",audio:!1,arrows:!0,enlarger:!1,compare:!1,carousel:!1,categories:!1,dots:!1,dotsNavOnHover:!1,cube:!1,cubeType:"offers",sliderAxis:"horizontal",sliderAnimation:"fade",singleOfferChange:!1,noOffers:!1,clickholderDynamic:!1,priceFormat:"$1,111",fakeFeed:!1,scratch:!1,scratchCover:"scratch_overlayer.png",scratchCoverColor:"rgba(131,0,0,1)",scratchCoverPercentage:"95",scratchCoverCanvasBG:"",scratchMask:"initMask.png",scratchMaskOutline:!1,scratchMaskOutlineColor:"#000",scratchMaskOutlineWidth:"2",scratchBrushOutline:!1,scratchBrushOutlineColor:"#000",scratchBrushOutlineWidth:"2",scratchBrushImage:"brush.png",scratchBrushSize:"20",scratchAudio:!1,scratchAudioSrc:"scratch_audio.wav",scratchAudioPopup:"true",scratchAudioPopupText:"Turn on sound for&nbsp;full experience",rollTexts:{offersContainerRollText:!1,offerInfoRollText:!0,cubeRollText:!1,enlargerRollText:!0},counter:!0,counterStart:"2025-10-15T00:01:00.000-04:00",counterEnd:"2025-10-22T23:59:59.000-04:00",counterMask:"{dd}{mm}{ss}",search:!1},loadImage:function(r){this.images.push({...r,ready:!1}),k_(r.url,o=>{r.node.style.backgroundImage=o?`url("${r.url}")`:`url("${window.velocityData.paths.static}images/noimage.png")`,!o&&(r.node.style.backgroundSize="contain"),this.images.find(l=>l.url==r.url).ready=!0,this.imagesCheck()})},imagesCheck(){this.images.filter(r=>!r.ready).length===0&&(this.observer.emit("imagesReady"),document.querySelector(".banner").dataset.phase="init",document.querySelector(".banner").classList.add("banner--ready"),setTimeout(()=>{document.querySelector(".banner").dataset.phase="ready"},500))},loadContent:function(){window.onload=function(){document.querySelector(".banner").dataset.phase="init",document.querySelector(".banner").classList.add("banner--ready"),yi.observer.emit("contentLoaded"),window.velocityData.inApp&&U_([...Array.from(document.querySelectorAll(".offer--url")),...Array.from(document.querySelectorAll(".logo__link")),...Array.from(document.querySelectorAll(".clickholder")),...Array.from(document.querySelectorAll(".offers-bg-link")),...Array.from(document.querySelectorAll(".promoboard")),...Array.from(document.querySelectorAll(".button"))]),yi.settings.rollTexts.offersContainerRollText?(yi.rollTexts.offersContainerRollText=new pu({container:".screen .offer .name",text:".text-table-cell",orientation:"horizontal"}),yi.rollTexts.offersContainerRollText.init(),yi.rollTexts.offersContainerRollText.start()):du(".offers-container .name"),yi.settings.rollTexts.offerInfoRollText?(yi.rollTexts.offerInfoRollText=new pu({container:".offer-info .offer .name",text:".text-table-cell",orientation:"vertical"}),yi.rollTexts.offerInfoRollText.init(),yi.rollTexts.offerInfoRollText.start()):du(".offer-info .name"),yi.settings.counter&&(yi.counter=new dp({startDate:yi.settings.counterStart,endDate:yi.settings.counterEnd,selector:"#timer",mask:yi.settings.counterMask}),yi.counter.start())}}};yi.observer.subscribe("hover",r=>yi.hover=r.hover),yi.loadContent(),document.querySelector(".banner .clickholder").dataset.offerId=yi.settings.clickholderDynamic&&velocityData.offers[0].identifier||"",document.querySelector(".banner").innerHTML+=fp(velocityData.offers[0].identifier||"",!0),document.querySelector(".banner").innerHTML+=B_();var X=yi,mu=Hf(Ag()),V_=r=>`
  <div class="offer__name name">
      <p class="text-table">
          <span class="text-table-cell">
            ${r}
          </span>
      </p>
  </div>
  `,pp=/\.(gif|jpe?g|tiff?|png|webp|bmp)$/i,mp=window.velocityData.paths.main+"images/",H_=(r,o)=>{const u=Number(o)||0,f=pp.test(r.image)?`<img src="${mp}${r.image}">`:r.image,d=pp.test(r.background)?`<img src="${mp}${r.background}">`:r.background;if(!u||u<2)return;let p="",v="";if(r.type==="stars_only"){const T=Math.floor(u),C=Math.ceil((u-T)*10)/10<.5?0:.5;for(let b=0;b<T;b++)p+=`<div class="star">${f}</div>`;C>0&&(p+=`<div class="star star--half">${f}</div>`)}else if(r.type==="stars_bg"){const T=Math.floor(u),C=Math.ceil((u-T)*10)/10<.5?0:.5,b=5-T;for(let k=0;k<T;k++)p+=`<div class="star">${f}</div>`;C>0&&(p+=`<div class="star star--half">${f}</div>`);for(let k=0;k<5;k++)v+=`<div class="star-bg">${d}</div>`}else r.type==="stars_digit"&&(p=`<div class="star">${f}</div> <span>${u}</span>`);return`<div class="stars ${r.type==="stars_bg"?"bg":""}">
            <div class="stars__inner stars-active">
              ${p}
            </div>
            ${r.type==="stars_bg"?`<div class="stars__inner stars-bg">${v}</div>`:""}
          </div>`};function gp(r,o){if(!(typeof o!="number"&&(o=parseFloat(o),o!==o))){var l=[],u,f,d=/\d+/g,p=r.match(d),v=p.length,T=r.split(d),C=T.length,b=/^0+$/.exec(p[v-1]),k=C>(b?3:2);for(o=o.toFixed(b?b[0].length:0).replace(".",""),u=o.length;u>0;)f=u,u-=(p[v>1?--v:k&&1]||o).length,l.unshift(o.slice(u>0?u:0,f),T[C>1?--C:1]);return T[0]+l.join("")}}var j_={generate(r,o,l,u){return`
      <div class="price-wrapper ${u.isBlink&&o&&u.oldPrice?"blink":""} ${o&&u.oldPrice?"oldprice-set":""}">
        ${r?'<div class="price-wrapper__price price">'+gp(X.settings.priceFormat,r)+"</div>":""}
        ${o&&u.oldPrice?'<div class="price-wrapper__price oldprice">'+gp(X.settings.priceFormat,o)+"</div>":""}
        ${u.isDiscount&&l?'<div class="discount">'+l+"</div>":""}
      </div>
    `}},X_=(r,o)=>{if(!r||!o)return"";const u=o.replaceAll(" ","").split(",");let f="";return u.forEach(d=>{r[d]&&(f+=`
      <div class="custom-property custom-property--${d}">
        <span>${r[d]}</span>
      </div>
      `)}),f},Fh=(r,o)=>{const{identifier:l}=velocityData.offers[Number(r.index)],u=L_(15);return o.counter.enabled&&r.customProperties[o.counter.customProperty]&&(X.offerCounters[u]=new dp({startDate:null,endDate:r.customProperties[o.counter.customProperty],selector:`#offer-${u} .timer`,mask:o.counter.mask}),X.offerCounters[u].start()),`
    <a id="offer-${u}" class="offer offer-${r.index} ${r.index==0?"offer--active":""} offer--url" data-id="${r.index}" data-offer-id="${l}">
      <div class="offer__border"></div>
      ${o.image?'<div class="offer__image image"></div>':""}
      ${o.altimage?'<div class="offer__altimage altimage"></div>':""}
      ${o.name?V_(r.name):""}
      ${o.price.price?j_.generate(r.price,r.prevPrice,r.discount,o.price.options):""}
      ${o.discount&&r.discount?`<div class="offer__discount-ribbon">${r.discount}</div>`:""}
      ${o.counter.enabled&&r.customProperties[o.counter.customProperty]?'<div class="offer__counter"><div class="timer"></div></div>':""}
      ${o.button?fp(l):""}
      ${o.customProperties.customProperties?X_(r.customProperties,o.customProperties.customPropertiesList):""}
      ${o.stars.enabled&&r.customProperties[o.stars.starsSource]?H_(o.stars,r.customProperties[o.stars.starsSource]):""}
    </a>
  `},W_=[{name:"Hello offer 1",price:100,prevPrice:150},{name:"Hello offer 2",price:100,prevPrice:150},{name:"Hello offer 3",price:100,prevPrice:150},{name:"Hello offer 4",price:100,prevPrice:150},{name:"Hello offer 5",price:100,prevPrice:150},{name:"Hello offer 6",price:100,prevPrice:150}],_p=[];W_.map((r,o)=>{_p.push({identifier:`offer-${o}`,prevPrice:r.prevPrice,images:[{name:null,thumbs:[{width:800,url:`${velocityData.fakeFeedImages[o]}`,height:800}]}],customProperties:{},price:r.price,fullName:r.name,category:{identifier:"",name:""},choosingPhase:null,url:`${velocityData.clickHolder.url}`,thumbs:[{width:800,url:`${velocityData.fakeFeedImages[o]}`,height:800}]})});var vp=class{constructor({start:r,delay:o,elems:l,startFn:u,stoptFn:f}){this.index=r||0,this.delay=Number(o)||2e3,this.elems=l||[],this.startFn=u||null,this.stoptFn=f||null,this.activeElems=this.elems,this.enlarger=!1}getState(){return{prev:{node:this.activeElems[this.index-1]||this.activeElems[this.activeElems.length-1],index:this.activeElems[this.index-1]?this.index-1:this.activeElems.length-1},current:{node:this.activeElems[this.index],index:this.index},next:{node:this.activeElems[this.index+1]||this.activeElems[0],index:this.activeElems[this.index+1]?this.index+1:0}}}goTo(r){return this.index=r,this}setRange(r){return this.index=0,this.activeElems=r||this.elems,this}start(r,o){return this.activeElems.length<2?this:(r&&(this.callback=r),clearInterval(this.interval),this.interval=setInterval(()=>{this.startFn&&this.startFn(this.getState()),this.callback&&this.callback(this.getState()),this.activeElems[this.index+=1]||(this.index=0)},this.delay),o&&(this.startFn&&this.startFn(this.getState()),this.callback&&this.callback(this.getState()),this.activeElems[this.index+=1]||(this.index=0)),this)}stop(r){return clearInterval(this.interval),this.stopFn&&this.stopFn(this.getState()),r&&r(this.getState()),this}};X.videoObserver=new Es;var zi={isPlay:!0,container:document.querySelector(".video-container"),movie:document.querySelector(".video-container video"),audioButton:document.querySelector(".audio-button"),noAudio:document.querySelector(".no-audio"),videoTimeout:null,mode:0,type:X.settings.videoType,audio:X.settings.audio,videoRestart(){this.videoTimeout&&clearTimeout(this.videoTimeout),this.videoTimeout=setTimeout(function(){X.hover||(zi.container.classList.add("active"),zi.movie.currentTime=0,zi.movie.play(),this.isPlay=!0,X.videoObserver.emit("videoStatus",this.isPlay))},8e3)},actions(){X.videoObserver.emit("videoStatus",this.isPlay),this.movie.addEventListener("ended",r=>{this.type=="video_only"||this.type=="video_parallel"?this.movie.play():(zi.container.classList.remove("active"),this.isPlay=!1,X.videoObserver.emit("videoStatus",this.isPlay),this.videoRestart())}),this.audioButton.addEventListener("click",function(r){zi.movie.muted=!zi.movie.muted,zi.noAudio.style.opacity=Number(zi.movie.muted),r.preventDefault()}),!(this.type=="video_only"||this.type=="video_parallel")&&X.observer.subscribe("hover",r=>{this.type=="video_first"?X.hover?(this.videoTimeout&&clearTimeout(this.videoTimeout),zi.container.classList.remove("active"),this.isPlay=!1,X.videoObserver.emit("videoStatus",this.isPlay),zi.movie.pause()):this.videoRestart():this.type=="video_first_playAfterMouseLeave"&&(X.hover?(zi.container.classList.remove("active"),zi.movie.pause(),this.isPlay=!1,X.videoObserver.emit("videoStatus",this.isPlay)):(zi.container.classList.add("active"),zi.movie.play(),this.isPlay=!0,X.videoObserver.emit("videoStatus",this.isPlay)))})},init(){X.observer.subscribe("contentLoaded",r=>{X.videoObserver.emit("videoStatus",this.isPlay)}),this.container.dataset.offerId="board",this.movie.muted=!0,this.audio&&(this.audioButton.style.display="block"),up()&&(this.audioButton.style.opacity="0.8"),this.movie.play(),this.actions()}};window.velocityData.renderVideo&&zi.init(),X.jumpingObserver=new Es;var Y_=class{constructor(){this.observer=X.jumpingObserver,this.currentNode=null,this.jumpingFrame=null,this.currentFrame=null,this.OFFER=null,this.cachedIndex=0,this.checkLastOffer=!1,this.checkFirstOffer=!1,this.dotHover=!1}singleOfferChange(){document.querySelectorAll(".arrow").forEach(o=>{o.addEventListener("click",()=>{const l=o.dataset.fun,u=this.jumpingframe.getState().next.index,f=this.jumpingframe.getState().prev.index,d=X.slider.getInfo().slideCount;this.handleOfferHover(l==="next"?u:f),d!=="1"&&(l==="next"?this.checkLastOffer&&X.slider.goTo("next"):this.checkFirstOffer&&X.slider.goTo("prev"))})})}checkFirstLastOffer(){this.checkLastOffer=this.currentNode?.nextSibling?.nextElementSibling===null||this.currentNode?.nextSibling?.nextElementSibling===void 0,this.checkFirstOffer=this.currentNode?.previousElementSibling&&!this.currentNode.previousElementSibling.classList.contains("offer")}setjumpingObserverAction(){X.jumpingObserver.subscribe("jumpingframe",r=>{if(clearTimeout(X.jumpingTimeout),this.OFFER.all.filter(o=>o.classList.contains("offer--active")).forEach(o=>o.classList.remove("offer--active")),r.current.node&&r.current.node.classList.add("offer--active"),this.checkFirstLastOffer(),this.currentNode=r.current.node,this.currentFrame=r.current.node.dataset.id,X.jumpingTimeout=setTimeout(()=>{(!r.current.node.nextSibling||!r.current.node.nextSibling.nextElementSibling&&!X.hover)&&X.slider.goTo("next")},X.settings.jumpingInterval-50),X.settings.clickholderDynamic){const o=velocityData.offers[Number(r.current.node.dataset.id)];document.querySelector(".banner .clickholder").dataset.offerId=o.identifier||"",document.querySelectorAll(".offers-bg-link").forEach(l=>{l.dataset.offerId=o.identifier||""}),velocityData.inApp&&(document.querySelector(".banner .clickholder").dataset.offerId="",document.querySelectorAll(".offers-bg-link").forEach(l=>{l.dataset.offerId=""}))}{const o=velocityData.offers[Number(r.current.node.dataset.id)];document.querySelector(".button.static").dataset.offerId=o.identifier||""}X.settings.offersPerScreen>1&&X.jumpingObserver.emit("jumpingChange",this.jumpingframe.getState())})}offerHoverAction(){this.OFFER.observer.subscribe("hover",r=>{r.hover&&X.settings.offersPerScreen>1&&this.handleOfferHover(r.index)})}handleOfferHover(r){this.jumpingframe.goTo(ca(this.jumpingframe.activeElems,"id",r,!0)).stop(),X.jumpingObserver.emit("jumpingframe",this.jumpingframe.getState())}bannerHoverAction(){X.observer.subscribe("hover",r=>{X.hover?(X.jumpingTimeout&&clearTimeout(X.jumpingTimeout),this.jumpingframe.getState().current.index===0?this.jumpingframe.goTo(ca(this.jumpingframe.activeElems,"id",velocityData.offers.length-1,!0)).stop():this.jumpingframe.goTo(ca(this.jumpingframe.activeElems,"id",this.jumpingframe.getState().current.index-1,!0)).stop()):(this.jumpingframe.goTo(ca(this.jumpingframe.activeElems,"id",this.jumpingframe.getState().current.index,!0)),this.jumpingframe.start(null,!0))})}onVideoAction(){X.videoObserver&&X.videoObserver.subscribe("videoStatus",r=>{r?(clearTimeout(X.jumpingTimeout),this.jumpingframe.stop()):(clearTimeout(X.jumpingTimeout),this.jumpingframe.start(null,!0))})}onZipperAction(){X.zipperObserver&&X.slider.getInfo().slideCount===1&&X.zipperObserver.subscribe("zipperOpen",r=>{if(r.open&&r.range.length>1){this.OFFER.all.forEach(l=>l.style.pointerEvents="none");const o=r.range.map(l=>this.OFFER.all[l]);o.forEach(l=>l.style.pointerEvents="all"),this.jumpingframe.setRange(o)}else this.OFFER.all.forEach(o=>o.style.pointerEvents="all"),this.jumpingframe.setRange(this.OFFER.all)})}onSlideChangeAction(){document.querySelector(".offers-container--inner").ontransitionstart=r=>{(r.target.classList.contains("tns-slider")||r.target.classList.contains("tns-item"))&&this.handleSlideChange()}}handleSlideChange(){X.settings.offersPerScreen===1&&X.jumpingObserver.emit("jumpingChange",this.jumpingframe.getState()),X.rollTexts.offersContainerRollText&&X.rollTexts.offersContainerRollText.stop().start(500),X.hover?X.settings.singleOfferChange?this.dotHover?this.jumpingframe.goTo(X.slider.getInfo().displayIndex*X.settings.offersPerScreen-(X.settings.offersPerScreen-1)-1).start(null,!0):X.slider.getInfo().index>X.slider.getInfo().indexCached?this.jumpingframe.goTo(X.slider.getInfo().displayIndex*X.settings.offersPerScreen-(X.settings.offersPerScreen-1)-1):this.jumpingframe.goTo(X.slider.getInfo().displayIndex*X.settings.offersPerScreen-1):this.handleOfferHover(X.slider.getInfo().displayIndex*X.settings.offersPerScreen-(X.settings.offersPerScreen-1)-1):this.jumpingframe.goTo(X.slider.getInfo().displayIndex*X.settings.offersPerScreen-(X.settings.offersPerScreen-1)-1).start(null,!0)}visibilityObserver(){const r=document.querySelector("body"),o=u=>{u.map(f=>{f.isIntersecting?X.settings.video&&(zi.type=="video_parallel"||zi.type=="video_only")?this.jumpingframe&&this.jumpingframe.start():X.settings.video||this.jumpingframe&&this.jumpingframe.start(null,!0):this.jumpingframe&&this.jumpingframe.stop()})};new IntersectionObserver(o).observe(r),document.addEventListener("visibilitychange",()=>{document.hidden?this.jumpingframe&&this.jumpingframe.stop():this.jumpingframe.getState().current.index===0?this.jumpingframe.goTo(ca(this.jumpingframe.activeElems,"id",velocityData.offers.length-1,!0)).stop().start():this.jumpingframe.goTo(ca(this.jumpingframe.activeElems,"id",this.jumpingframe.getState().current.index-1,!0)).stop().start()})}slideChangeOnDotsHover(){document.querySelectorAll(".dot").forEach((r,o)=>{r.addEventListener("mouseenter",()=>{o+1!==X.slider.getInfo().displayIndex&&(X.slider.goTo(o),this.jumpingframe.start(null,!0).stop())})})}init(){this.currentNode=document.querySelector(".offers-container .offer-0"),this.OFFER={observer:new Es(".screen:not(.tns-slide-cloned) .offer"),all:[...document.querySelectorAll(".screen:not(.tns-slide-cloned) .offer")]},this.jumpingframe=new vp({delay:X.settings.jumpingInterval,elems:this.OFFER.all,startFn:r=>X.jumpingObserver.emit("jumpingframe",r),stopFn:r=>null}),X.dotsObserver=new Es(".dots"),X.dotsObserver.subscribe("hover",r=>{r.hover?this.dotHover=!0:this.dotHover=!1}),this.visibilityObserver(),!X.settings.compare&&!X.settings.carousel&&!X.settings.categories&&(this.offerHoverAction(),this.setjumpingObserverAction(),this.bannerHoverAction(),this.onVideoAction(),this.onZipperAction(),X.settings.dotsNavOnHover&&this.slideChangeOnDotsHover(),X.settings.singleOfferChange&&this.singleOfferChange(),this.onSlideChangeAction())}},gu=new Y_,$_=class{constructor(){this.offers=X.settings.fakeFeed?_p:velocityData.offers,this.categories=[],this.categorisedOffers=[],this.isPrevPrice=!1}makeOffersArray(){X.settings.fakeFeed&&(window.velocityData.offers=this.offers),this.offers.forEach((r,o)=>{X.settings.offers>=o+1&&(r.prevPrice&&(this.isPrevPrice=!0),X.myOffers.push({category:r.category.name,id:r.id,index:o,name:r.fullName,images:r.images,url:r.url,price:r.price,prevPrice:r.prevPrice,discount:r.prevPrice?"-"+Math.round(100-r.price/r.prevPrice*100)+"%":null,customProperties:r.customProperties}))})}makeCategories(){let r=[];X.myOffers.forEach(o=>{r.push(o.category)}),this.categories=cp(r),this.categories.forEach(o=>{let l=F_(X.myOffers,u=>u.category);this.categorisedOffers.push(l.get(o))})}makeScreens(r,o){if(X.settings.categories){for(let l=0;l<this.categorisedOffers.length;l++){const u=document.createElement("div"),f=document.createElement("div");u.classList.add("screen","screen-"+l),f.classList.add("category-wrapper","category-wrapper-"+l),u.appendChild(f),document.querySelector(".offers-container--inner").appendChild(u)}this.categorisedOffers.forEach((l,u)=>{for(let f=0;f<l.length/o;f++){const d=document.createElement("div"),p=document.createElement("div");d.classList.add("screen","screen-"+f),p.classList.add("offers-wrapper","offers-wrapper-"+f),d.appendChild(p),document.querySelector(".category-wrapper-"+u).appendChild(d)}})}else for(let l=0;l<r/o;l++){const u=document.createElement("div"),f=document.createElement("div"),d=document.createElement("a");d.target="_blank";const p=velocityData.offers[Number(X.myOffers[0].index)];d.dataset.offerId=X.settings.clickholderDynamic&&p&&p.identifier||"",d.classList.add("offers-bg-link"),u.classList.add("screen","screen-"+l),f.classList.add("offers-wrapper","offers-wrapper-"+l),f.appendChild(d),u.appendChild(f),document.querySelector(".offers-container--inner").appendChild(u)}}makeOffers(r,o){if(X.settings.categories)this.categorisedOffers.forEach((l,u)=>{let f=0;l.forEach((d,p)=>{p!=0&&p%o==0&&f++,document.querySelector(".category-wrapper-"+u+" .screen-"+f+" .offers-wrapper").innerHTML+=Fh(d,{image:!0,altimage:!1,name:!0,price:{price:!0,oldPrice:!0,options:{isBlink:!1,isDiscount:!1}},button:!0,stars:{enabled:!1,starsSource:"stars",image:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>",background:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>",type:"stars_only"},customProperties:{customProperties:!1,customPropertiesList:"cp1, cp2"},counter:{enabled:!1,mask:"{dd}:{hh}:{mm}:{ss}",customProperty:"end_date"}})})});else{let l=0;r.forEach((u,f)=>{f!=0&&f%o==0&&l++,document.querySelectorAll(".offers-wrapper")[l].innerHTML+=Fh(u,{image:!0,altimage:!1,name:!0,price:{price:!0,options:{isBlink:!1,isDiscount:!1,oldPrice:!0}},discount:!0,button:!0,stars:{enabled:!1,starsSource:"stars",image:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>",background:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>",type:"stars_only"},customProperties:{customProperties:!1,customPropertiesList:"cp1, cp2"},counter:{enabled:!1,mask:"{dd}:{hh}:{mm}:{ss}",customProperty:"end_date"}})})}}makeSliders(){let r=X.myOffers.length/X.settings.offersPerScreen;X.settings.categories?(X.slider=(0,mu.tns)({container:document.querySelector(".offers-container--inner"),items:1,slideBy:"page",mouseDrag:!1,swipeAngle:!1,speed:550,loop:!0,axis:"horizontal",controls:!1,autoplayButtonOutput:!1,nav:!1,autoplay:!1}),document.querySelectorAll(".category-wrapper").forEach(l=>{const u=(0,mu.tns)({container:l,controls:!0,autoplayButtonOutput:!1,nav:!1,autoplay:!1,controlsText:['<i class="fas fa-chevron-left"></i>','<i class="fas fa-chevron-right"></i>']})})):X.slider=(0,mu.tns)({container:document.querySelector(".offers-container--inner"),items:1,slideBy:1,center:"center",mouseDrag:!0,swipeAngle:!1,speed:550,rewind:!(r>2),loop:!0,mode:X.settings.sliderAnimation=="fade"?"gallery":"carousel",axis:"horizontal",controls:!1,autoplayButtonOutput:!1,nav:X.settings.dots,navContainer:X.settings.dots?".dots":null,autoplayResetOnVisibility:!1})}makeDots(){let r=X.myOffers.length/X.settings.offersPerScreen,o=document.createElement("div");o.classList.add("dots"),document.querySelector(".banner").appendChild(o);for(let l=0;l<r;l++)document.querySelector(".dots").innerHTML+='<div class="dot"></dot>'}init(){this.makeOffersArray(),X.settings.categories&&this.makeCategories(),this.makeScreens(X.settings.categories?this.categorisedOffers.length:X.settings.offers,X.settings.offersPerScreen),this.makeOffers(X.myOffers,X.settings.offersPerScreen),X.settings.dots&&this.makeDots(),X.observer.subscribe("contentLoaded",()=>{this.makeSliders(),X.compare||gu.init()})}},q_=new $_;(!X.settings.noOffers||X.settings.noOffers&&X.settings.fakeFeed)&&q_.init();var _u=class{constructor(){this.cropping="contain",this.compareType={contain:function(r,o){return r.width<=o.width||r.height<=o.height},cover:function(r,o){return r.width<=o.width&&r.height<=o.height}}}getThumb(r,o,l=this.cropping,u=0){let f=[];!u&&(u=0),!l&&(l=this.cropping);for(var d=o[u].thumbs.length-1;d>=0;d--)this.compareType[l](r,o[u].thumbs[d])?f.push(o[u].thumbs[d]):f.push(o[u].thumbs[0]);return f[0]}};function K_(r){const o=r.querySelector('[class*="__text"]');let l=1;for(r.style.width=`${r.offsetWidth}px`,r.style.height=`${r.offsetHeight}px`,o.style.position="absolute",o.style.top="50%",o.style.left="50%",o.style.transform="translate(-50%, -50%)";o.offsetWidth>r.offsetWidth-4||o.offsetHeight>r.offsetHeight-4;)o.style.fontSize=`calc(100% - ${l}px)`,l++}var wn,ho,vu,ua,el,Bh,yp,Sn="transform",yu=Sn+"Origin",xp,bp=r=>{let o=r.ownerDocument||r;for(!(Sn in r.style)&&("msTransform"in r.style)&&(Sn="msTransform",yu=Sn+"Origin");o.parentNode&&(o=o.parentNode););if(ho=window,yp=new co,o){wn=o,vu=o.documentElement,ua=o.body;let l=o.createElement("div"),u=o.createElement("div");ua.appendChild(l),l.appendChild(u),l.style.position="static",l.style[Sn]="translate3d(0,0,1px)",xp=u.offsetParent!==l,ua.removeChild(l)}return o},Z_=r=>{let o,l;for(;r&&r!==ua;)l=r._gsap,l&&l.uncache&&l.get(r,"x"),l&&!l.scaleX&&!l.scaleY&&l.renderTransform&&(l.scaleX=l.scaleY=1e-4,l.renderTransform(1,l),o?o.push(l):o=[l]),r=r.parentNode;return o},Tp=[],wp=[],Q_=()=>ho.pageYOffset||wn.scrollTop||vu.scrollTop||ua.scrollTop||0,J_=()=>ho.pageXOffset||wn.scrollLeft||vu.scrollLeft||ua.scrollLeft||0,xu=r=>r.ownerSVGElement||((r.tagName+"").toLowerCase()==="svg"?r:null),Sp=r=>{if(ho.getComputedStyle(r).position==="fixed")return!0;if(r=r.parentNode,r&&r.nodeType===1)return Sp(r)},il=(r,o)=>{if(r.parentNode&&(wn||bp(r))){let l=xu(r),u=l?l.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",f=l?o?"rect":"g":"div",d=o!==2?0:100,p=o===3?100:0,v="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",T=wn.createElementNS?wn.createElementNS(u.replace(/^https/,"http"),f):wn.createElement(f);return o&&(l?(Bh||(Bh=il(r)),T.setAttribute("width",.01),T.setAttribute("height",.01),T.setAttribute("transform","translate("+d+","+p+")"),Bh.appendChild(T)):(el||(el=il(r),el.style.cssText=v),T.style.cssText=v+"width:0.1px;height:0.1px;top:"+p+"px;left:"+d+"px",el.appendChild(T))),T}throw"Need document and parent."},t0=r=>{let o=new co,l=0;for(;l<r.numberOfItems;l++)o.multiply(r.getItem(l).matrix);return o},e0=(r,o)=>{let l=xu(r),u=r===l,f=l?Tp:wp,d=r.parentNode,p,v,T,C,b,k;if(r===ho)return r;if(f.length||f.push(il(r,1),il(r,2),il(r,3)),p=l?Bh:el,l)T=u?{x:0,y:0}:r.getBBox(),v=r.transform?r.transform.baseVal:{},v.numberOfItems?(v=v.numberOfItems>1?t0(v):v.getItem(0).matrix,C=v.a*T.x+v.c*T.y,b=v.b*T.x+v.d*T.y):(v=yp,C=T.x,b=T.y),o&&r.tagName.toLowerCase()==="g"&&(C=b=0),p.setAttribute("transform","matrix("+v.a+","+v.b+","+v.c+","+v.d+","+(v.e+C)+","+(v.f+b)+")"),(u?l:d).appendChild(p);else{if(C=b=0,xp)for(v=r.offsetParent,T=r;T&&(T=T.parentNode)&&T!==v&&T.parentNode;)(ho.getComputedStyle(T)[Sn]+"").length>4&&(C=T.offsetLeft,b=T.offsetTop,T=0);if(k=ho.getComputedStyle(r),k.position!=="absolute")for(v=r.offsetParent;d!==v;)C+=d.scrollLeft||0,b+=d.scrollTop||0,d=d.parentNode;T=p.style,T.top=r.offsetTop-b+"px",T.left=r.offsetLeft-C+"px",T[Sn]=k[Sn],T[yu]=k[yu],T.position=k.position==="fixed"?"fixed":"absolute",r.parentNode.appendChild(p)}return p},bu=(r,o,l,u,f,d,p)=>(r.a=o,r.b=l,r.c=u,r.d=f,r.e=d,r.f=p,r),co=class{constructor(r=1,o=0,l=0,u=1,f=0,d=0){bu(this,r,o,l,u,f,d)}inverse(){let{a:r,b:o,c:l,d:u,e:f,f:d}=this,p=r*u-o*l||1e-10;return bu(this,u/p,-o/p,-l/p,r/p,(l*d-u*f)/p,-(r*d-o*f)/p)}multiply(r){let{a:o,b:l,c:u,d:f,e:d,f:p}=this,v=r.a,T=r.c,C=r.b,b=r.d,k=r.e,D=r.f;return bu(this,v*o+C*u,v*l+C*f,T*o+b*u,T*l+b*f,d+k*o+D*u,p+k*l+D*f)}clone(){return new co(this.a,this.b,this.c,this.d,this.e,this.f)}equals(r){let{a:o,b:l,c:u,d:f,e:d,f:p}=this;return o===r.a&&l===r.b&&u===r.c&&f===r.d&&d===r.e&&p===r.f}apply(r,o={}){let{x:l,y:u}=r,{a:f,b:d,c:p,d:v,e:T,f:C}=this;return o.x=l*f+u*p+T||0,o.y=l*d+u*v+C||0,o}};function Nh(r,o,l,u){if(!r||!r.parentNode||(wn||bp(r)).documentElement===r)return new co;let f=Z_(r),d=xu(r),p=d?Tp:wp,v=e0(r,l),T=p[0].getBoundingClientRect(),C=p[1].getBoundingClientRect(),b=p[2].getBoundingClientRect(),k=v.parentNode,D=!u&&Sp(r),P=new co((C.left-T.left)/100,(C.top-T.top)/100,(b.left-T.left)/100,(b.top-T.top)/100,T.left+(D?0:J_()),T.top+(D?0:Q_()));if(k.removeChild(v),f)for(T=f.length;T--;)C=f[T],C.scaleX=C.scaleY=0,C.renderTransform(1,C);return o?P.inverse():P}var Me,Ze,Mr,rs,Zs,Tu,Qs,Ep,rl,En,Ap,wu,sl,Uh,Su,nl,ss,ol,Gh,Cp=()=>typeof window<"u",Pp=()=>Me||Cp()&&(Me=window.gsap)&&Me.registerPlugin&&Me,An=r=>typeof r=="function",al=r=>typeof r=="object",ns=r=>typeof r>"u",zh=()=>!1,ll="transform",Eu="transformOrigin",fa=r=>Math.round(r*1e4)/1e4,hl=Array.isArray,Vh=(r,o)=>{let l=Mr.createElementNS?Mr.createElementNS((o||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),r):Mr.createElement(r);return l.style?l:Mr.createElement(r)},Mp=180/Math.PI,uo=1e20,i0=new co,Cn=Date.now||(()=>new Date().getTime()),fo=[],da={},r0=0,s0=/^(?:a|input|textarea|button|select)$/i,Rp=0,pa={},Js={},Dp=(r,o)=>{let l={},u;for(u in r)l[u]=o?r[u]*o:r[u];return l},n0=(r,o)=>{for(let l in o)l in r||(r[l]=o[l]);return r},Au=(r,o)=>{let l=r.length,u;for(;l--;)o?r[l].style.touchAction=o:r[l].style.removeProperty("touch-action"),u=r[l].children,u&&u.length&&Au(u,o)},Ip=()=>fo.forEach(r=>r()),o0=r=>{fo.push(r),fo.length===1&&Me.ticker.add(Ip)},Op=()=>!fo.length&&Me.ticker.remove(Ip),kp=r=>{let o=fo.length;for(;o--;)fo[o]===r&&fo.splice(o,1);Me.to(Op,{overwrite:!0,delay:15,duration:0,onComplete:Op,data:"_draggable"})},a0=(r,o)=>{for(let l in o)l in r||(r[l]=o[l]);return r},Mi=(r,o,l,u)=>{if(r.addEventListener){let f=sl[o];u=u||(Ap?{passive:!1}:null),r.addEventListener(f||o,l,u),f&&o!==f&&r.addEventListener(o,l,u)}},xi=(r,o,l)=>{if(r.removeEventListener){let u=sl[o];r.removeEventListener(u||o,l),u&&o!==u&&r.removeEventListener(o,l)}},Vr=r=>{r.preventDefault&&r.preventDefault(),r.preventManipulation&&r.preventManipulation()},l0=(r,o)=>{let l=r.length;for(;l--;)if(r[l].identifier===o)return!0},Lp=r=>{Su=r.touches&&Uh<r.touches.length,xi(r.target,"touchend",Lp)},Fp=r=>{Su=r.touches&&Uh<r.touches.length,Mi(r.target,"touchend",Lp)},cl=r=>Ze.pageYOffset||r.scrollTop||r.documentElement.scrollTop||r.body.scrollTop||0,ul=r=>Ze.pageXOffset||r.scrollLeft||r.documentElement.scrollLeft||r.body.scrollLeft||0,Cu=(r,o)=>{Mi(r,"scroll",o),ma(r.parentNode)||Cu(r.parentNode,o)},Pu=(r,o)=>{xi(r,"scroll",o),ma(r.parentNode)||Pu(r.parentNode,o)},ma=r=>!r||r===rs||r.nodeType===9||r===Mr.body||r===Ze||!r.nodeType||!r.parentNode,Bp=(r,o)=>{let l=o==="x"?"Width":"Height",u="scroll"+l,f="client"+l;return Math.max(0,ma(r)?Math.max(rs[u],Zs[u])-(Ze["inner"+l]||rs[f]||Zs[f]):r[u]-r[f])},Hh=(r,o)=>{let l=Bp(r,"x"),u=Bp(r,"y");ma(r)?r=Js:Hh(r.parentNode,o),r._gsMaxScrollX=l,r._gsMaxScrollY=u,o||(r._gsScrollX=r.scrollLeft||0,r._gsScrollY=r.scrollTop||0)},Mu=(r,o,l)=>{let u=r.style;u&&(ns(u[o])&&(o=rl(o,r)||o),l==null?u.removeProperty&&u.removeProperty(o.replace(/([A-Z])/g,"-$1").toLowerCase()):u[o]=l)},fl=r=>Ze.getComputedStyle(r instanceof Element?r:r.host||(r.parentNode||{}).host||r),po={},ga=r=>{if(r===Ze)return po.left=po.top=0,po.width=po.right=rs.clientWidth||r.innerWidth||Zs.clientWidth||0,po.height=po.bottom=(r.innerHeight||0)-20<rs.clientHeight?rs.clientHeight:r.innerHeight||Zs.clientHeight||0,po;let o=r.ownerDocument||Mr,l=ns(r.pageX)?!r.nodeType&&!ns(r.left)&&!ns(r.top)?r:En(r)[0].getBoundingClientRect():{left:r.pageX-ul(o),top:r.pageY-cl(o),right:r.pageX-ul(o)+1,bottom:r.pageY-cl(o)+1};return ns(l.right)&&!ns(l.width)?(l.right=l.left+l.width,l.bottom=l.top+l.height):ns(l.width)&&(l={width:l.right-l.left,height:l.bottom-l.top,right:l.right,left:l.left,bottom:l.bottom,top:l.top}),l},di=(r,o,l)=>{let u=r.vars,f=u[l],d=r._listeners[o],p;return An(f)&&(p=f.apply(u.callbackScope||r,u[l+"Params"]||[r.pointerEvent])),d&&r.dispatchEvent(o)===!1&&(p=!1),p},Np=(r,o)=>{let l=En(r)[0],u,f,d;return!l.nodeType&&l!==Ze?ns(r.left)?(f=r.min||r.minX||r.minRotation||0,u=r.min||r.minY||0,{left:f,top:u,width:(r.max||r.maxX||r.maxRotation||0)-f,height:(r.max||r.maxY||0)-u}):(d={x:0,y:0},{left:r.left-d.x,top:r.top-d.y,width:r.width,height:r.height}):h0(l,o)},Hr={},h0=(r,o)=>{o=En(o)[0];let l=r.getBBox&&r.ownerSVGElement,u=r.ownerDocument||Mr,f,d,p,v,T,C,b,k,D,P,L,j,U,N;if(r===Ze)p=cl(u),f=ul(u),d=f+(u.documentElement.clientWidth||r.innerWidth||u.body.clientWidth||0),v=p+((r.innerHeight||0)-20<u.documentElement.clientHeight?u.documentElement.clientHeight:r.innerHeight||u.body.clientHeight||0);else{if(o===Ze||ns(o))return r.getBoundingClientRect();f=p=0,l?(P=r.getBBox(),L=P.width,j=P.height):(r.viewBox&&(P=r.viewBox.baseVal)&&(f=P.x||0,p=P.y||0,L=P.width,j=P.height),L||(U=fl(r),P=U.boxSizing==="border-box",L=(parseFloat(U.width)||r.clientWidth||0)+(P?0:parseFloat(U.borderLeftWidth)+parseFloat(U.borderRightWidth)),j=(parseFloat(U.height)||r.clientHeight||0)+(P?0:parseFloat(U.borderTopWidth)+parseFloat(U.borderBottomWidth)))),d=L,v=j}return r===o?{left:f,top:p,width:d-f,height:v-p}:(T=Nh(o,!0).multiply(Nh(r)),C=T.apply({x:f,y:p}),b=T.apply({x:d,y:p}),k=T.apply({x:d,y:v}),D=T.apply({x:f,y:v}),f=Math.min(C.x,b.x,k.x,D.x),p=Math.min(C.y,b.y,k.y,D.y),N=o.parentNode||{},{left:f+(N.scrollLeft||0),top:p+(N.scrollTop||0),width:Math.max(C.x,b.x,k.x,D.x)-f,height:Math.max(C.y,b.y,k.y,D.y)-p})},Ru=(r,o,l,u,f,d)=>{let p={},v,T,C;if(o)if(f!==1&&o instanceof Array){if(p.end=v=[],C=o.length,al(o[0]))for(T=0;T<C;T++)v[T]=Dp(o[T],f);else for(T=0;T<C;T++)v[T]=o[T]*f;l+=1.1,u-=1.1}else An(o)?p.end=b=>{let k=o.call(r,b),D,P;if(f!==1)if(al(k)){D={};for(P in k)D[P]=k[P]*f;k=D}else k*=f;return k}:p.end=o;return(l||l===0)&&(p.max=l),(u||u===0)&&(p.min=u),d&&(p.velocity=0),p},Up=r=>{let o;return!r||!r.getAttribute||r===Zs?!1:(o=r.getAttribute("data-clickable"))==="true"||o!=="false"&&(r.onclick||s0.test(r.nodeName+"")||r.getAttribute("contentEditable")==="true")?!0:Up(r.parentNode)},jh=(r,o)=>{let l=r.length,u;for(;l--;)u=r[l],u.ondragstart=u.onselectstart=o?null:zh,Me.set(u,{lazy:!0,userSelect:o?"text":"none"})},Gp=r=>{if(fl(r).position==="fixed")return!0;if(r=r.parentNode,r&&r.nodeType===1)return Gp(r)},zp,Du,c0=function(r,o){r=Me.utils.toArray(r)[0],o=o||{};let l=document.createElement("div"),u=l.style,f=r.firstChild,d=0,p=0,v=r.scrollTop,T=r.scrollLeft,C=r.scrollWidth,b=r.scrollHeight,k=0,D=0,P=0,L,j,U,N,Y,Z;zp&&o.force3D!==!1?(Y="translate3d(",Z="px,0px)"):ll&&(Y="translate(",Z="px)"),this.scrollTop=function(z,K){if(!arguments.length)return-this.top();this.top(-z,K)},this.scrollLeft=function(z,K){if(!arguments.length)return-this.left();this.left(-z,K)},this.left=function(z,K){if(!arguments.length)return-(r.scrollLeft+p);let G=r.scrollLeft-T,rt=p;if((G>2||G<-2)&&!K){T=r.scrollLeft,Me.killTweensOf(this,{left:1,scrollLeft:1}),this.left(-T),o.onKill&&o.onKill();return}z=-z,z<0?(p=z-.5|0,z=0):z>D?(p=z-D|0,z=D):p=0,(p||rt)&&(this._skip||(u[ll]=Y+-p+"px,"+-d+Z),p+k>=0&&(u.paddingRight=p+k+"px")),r.scrollLeft=z|0,T=r.scrollLeft},this.top=function(z,K){if(!arguments.length)return-(r.scrollTop+d);let G=r.scrollTop-v,rt=d;if((G>2||G<-2)&&!K){v=r.scrollTop,Me.killTweensOf(this,{top:1,scrollTop:1}),this.top(-v),o.onKill&&o.onKill();return}z=-z,z<0?(d=z-.5|0,z=0):z>P?(d=z-P|0,z=P):d=0,(d||rt)&&(this._skip||(u[ll]=Y+-p+"px,"+-d+Z)),r.scrollTop=z|0,v=r.scrollTop},this.maxScrollTop=()=>P,this.maxScrollLeft=()=>D,this.disable=function(){for(f=l.firstChild;f;)N=f.nextSibling,r.appendChild(f),f=N;r===l.parentNode&&r.removeChild(l)},this.enable=function(){if(f=r.firstChild,f!==l){for(;f;)N=f.nextSibling,l.appendChild(f),f=N;r.appendChild(l),this.calibrate()}},this.calibrate=function(z){let K=r.clientWidth===L,G,rt,dt;v=r.scrollTop,T=r.scrollLeft,!(K&&r.clientHeight===j&&l.offsetHeight===U&&C===r.scrollWidth&&b===r.scrollHeight&&!z)&&((d||p)&&(rt=this.left(),dt=this.top(),this.left(-r.scrollLeft),this.top(-r.scrollTop)),G=fl(r),(!K||z)&&(u.display="block",u.width="auto",u.paddingRight="0px",k=Math.max(0,r.scrollWidth-r.clientWidth),k&&(k+=parseFloat(G.paddingLeft)+(Du?parseFloat(G.paddingRight):0))),u.display="inline-block",u.position="relative",u.overflow="visible",u.verticalAlign="top",u.boxSizing="content-box",u.width="100%",u.paddingRight=k+"px",Du&&(u.paddingBottom=G.paddingBottom),L=r.clientWidth,j=r.clientHeight,C=r.scrollWidth,b=r.scrollHeight,D=r.scrollWidth-L,P=r.scrollHeight-j,U=l.offsetHeight,u.display="block",(rt||dt)&&(this.left(rt),this.top(dt)))},this.content=l,this.element=r,this._skip=!1,this.enable()},Iu=r=>{if(Cp()&&document.body){let o=window&&window.navigator;Ze=window,Mr=document,rs=Mr.documentElement,Zs=Mr.body,Tu=Vh("div"),Gh=!!window.PointerEvent,Qs=Vh("div"),Qs.style.cssText="visibility:hidden;height:1px;top:-1px;pointer-events:none;position:relative;clear:both;cursor:grab",ol=Qs.style.cursor==="grab"?"grab":"move",nl=o&&o.userAgent.toLowerCase().indexOf("android")!==-1,wu="ontouchstart"in rs&&"orientation"in Ze||o&&(o.MaxTouchPoints>0||o.msMaxTouchPoints>0),Du=function(){let l=Vh("div"),u=Vh("div"),f=u.style,d=Zs,p;return f.display="inline-block",f.position="relative",l.style.cssText=u.innerHTML="width:90px;height:40px;padding:10px;overflow:auto;visibility:hidden",l.appendChild(u),d.appendChild(l),p=u.offsetHeight+18>l.scrollHeight,d.removeChild(l),p}(),sl=function(l){let u=l.split(","),f=("onpointerdown"in Tu?"pointerdown,pointermove,pointerup,pointercancel":"onmspointerdown"in Tu?"MSPointerDown,MSPointerMove,MSPointerUp,MSPointerCancel":l).split(","),d={},p=4;for(;--p>-1;)d[u[p]]=f[p],d[f[p]]=u[p];try{rs.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){Ap=1}}))}catch{}return d}("touchstart,touchmove,touchend,touchcancel"),Mi(Mr,"touchcancel",zh),Mi(Ze,"touchmove",zh),Zs&&Zs.addEventListener("touchstart",zh),Mi(Mr,"contextmenu",function(){for(let l in da)da[l].isPressed&&da[l].endDrag()}),Me=Ep=Pp()}Me?(ss=Me.plugins.inertia,rl=Me.utils.checkPrefix,ll=rl(ll),Eu=rl(Eu),En=Me.utils.toArray,zp=!!rl("perspective")):r&&console.warn("Please gsap.registerPlugin(Draggable)")},u0=class{constructor(r){this._listeners={},this.target=r||this}addEventListener(r,o){let l=this._listeners[r]||(this._listeners[r]=[]);~l.indexOf(o)||l.push(o)}removeEventListener(r,o){let l=this._listeners[r],u=l&&l.indexOf(o)||-1;u>-1&&l.splice(u,1)}dispatchEvent(r){let o;return(this._listeners[r]||[]).forEach(l=>l.call(this,{type:r,target:this.target})===!1&&(o=!1)),o}},Vi=class extends u0{constructor(r,o){super(),Me||Iu(1),r=En(r)[0],ss||(ss=Me.plugins.inertia),this.vars=o=Dp(o||{}),this.target=r,this.x=this.y=this.rotation=0,this.dragResistance=parseFloat(o.dragResistance)||0,this.edgeResistance=isNaN(o.edgeResistance)?1:parseFloat(o.edgeResistance)||0,this.lockAxis=o.lockAxis,this.autoScroll=o.autoScroll||0,this.lockedAxis=null,this.allowEventDefault=!!o.allowEventDefault,Me.getProperty(r,"x");let l=(o.type||"x,y").toLowerCase(),u=~l.indexOf("x")||~l.indexOf("y"),f=l.indexOf("rotation")!==-1,d=f?"rotation":u?"x":"left",p=u?"y":"top",v=!!(~l.indexOf("x")||~l.indexOf("left")||l==="scroll"),T=!!(~l.indexOf("y")||~l.indexOf("top")||l==="scroll"),C=o.minimumMovement||2,b=this,k=En(o.trigger||o.handle||r),D={},P=0,L=!1,j=o.autoScrollMarginTop||40,U=o.autoScrollMarginRight||40,N=o.autoScrollMarginBottom||40,Y=o.autoScrollMarginLeft||40,Z=o.clickableTest||Up,z=0,K=r._gsap||Me.core.getCache(r),G=Gp(r),rt=(tt,gt)=>parseFloat(K.get(r,tt,gt)),dt=r.ownerDocument||Mr,Bt,Tt,ie,Kt,Gt,$t,Ht,re,Ne,se,pe,ue,fe,Ue,ye,_e,Qt,Pe,nt,et,ct,O,q,B,E,g,A,H,I,J,it,ht=tt=>(Vr(tt),tt.stopImmediatePropagation&&tt.stopImmediatePropagation(),!1),_t=tt=>{if(b.autoScroll&&b.isDragging&&(L||Qt)){let gt=r,st=b.autoScroll*15,pt,vt,Mt,zt,mt,ge,xe,Ft;for(L=!1,Js.scrollTop=Ze.pageYOffset!=null?Ze.pageYOffset:dt.documentElement.scrollTop!=null?dt.documentElement.scrollTop:dt.body.scrollTop,Js.scrollLeft=Ze.pageXOffset!=null?Ze.pageXOffset:dt.documentElement.scrollLeft!=null?dt.documentElement.scrollLeft:dt.body.scrollLeft,zt=b.pointerX-Js.scrollLeft,mt=b.pointerY-Js.scrollTop;gt&&!vt;)vt=ma(gt.parentNode),pt=vt?Js:gt.parentNode,Mt=vt?{bottom:Math.max(rs.clientHeight,Ze.innerHeight||0),right:Math.max(rs.clientWidth,Ze.innerWidth||0),left:0,top:0}:pt.getBoundingClientRect(),ge=xe=0,T&&(Ft=pt._gsMaxScrollY-pt.scrollTop,Ft<0?xe=Ft:mt>Mt.bottom-N&&Ft?(L=!0,xe=Math.min(Ft,st*(1-Math.max(0,Mt.bottom-mt)/N)|0)):mt<Mt.top+j&&pt.scrollTop&&(L=!0,xe=-Math.min(pt.scrollTop,st*(1-Math.max(0,mt-Mt.top)/j)|0)),xe&&(pt.scrollTop+=xe)),v&&(Ft=pt._gsMaxScrollX-pt.scrollLeft,Ft<0?ge=Ft:zt>Mt.right-U&&Ft?(L=!0,ge=Math.min(Ft,st*(1-Math.max(0,Mt.right-zt)/U)|0)):zt<Mt.left+Y&&pt.scrollLeft&&(L=!0,ge=-Math.min(pt.scrollLeft,st*(1-Math.max(0,zt-Mt.left)/Y)|0)),ge&&(pt.scrollLeft+=ge)),vt&&(ge||xe)&&(Ze.scrollTo(pt.scrollLeft,pt.scrollTop),os(b.pointerX+ge,b.pointerY+xe)),gt=pt}if(Qt){let{x:gt,y:st}=b;f?(b.deltaX=gt-parseFloat(K.rotation),b.rotation=gt,K.rotation=gt+"deg",K.renderTransform(1,K)):Tt?(T&&(b.deltaY=st-Tt.top(),Tt.top(st)),v&&(b.deltaX=gt-Tt.left(),Tt.left(gt))):u?(T&&(b.deltaY=st-parseFloat(K.y),K.y=st+"px"),v&&(b.deltaX=gt-parseFloat(K.x),K.x=gt+"px"),K.renderTransform(1,K)):(T&&(b.deltaY=st-parseFloat(r.style.top||0),r.style.top=st+"px"),v&&(b.deltaY=gt-parseFloat(r.style.left||0),r.style.left=gt+"px")),re&&!tt&&!H&&(H=!0,di(b,"drag","onDrag")===!1&&(v&&(b.x-=b.deltaX),T&&(b.y-=b.deltaY),_t(!0)),H=!1)}Qt=!1},Et=(tt,gt)=>{let{x:st,y:pt}=b,vt,Mt;r._gsap||(K=Me.core.getCache(r)),K.uncache&&Me.getProperty(r,"x"),u?(b.x=parseFloat(K.x),b.y=parseFloat(K.y)):f?b.x=b.rotation=parseFloat(K.rotation):Tt?(b.y=Tt.top(),b.x=Tt.left()):(b.y=parseInt(r.style.top||(Mt=fl(r))&&Mt.top,10)||0,b.x=parseInt(r.style.left||(Mt||{}).left,10)||0),(nt||et||ct)&&!gt&&(b.isDragging||b.isThrowing)&&(ct&&(pa.x=b.x,pa.y=b.y,vt=ct(pa),vt.x!==b.x&&(b.x=vt.x,Qt=!0),vt.y!==b.y&&(b.y=vt.y,Qt=!0)),nt&&(vt=nt(b.x),vt!==b.x&&(b.x=vt,f&&(b.rotation=vt),Qt=!0)),et&&(vt=et(b.y),vt!==b.y&&(b.y=vt),Qt=!0)),Qt&&_t(!0),tt||(b.deltaX=b.x-st,b.deltaY=b.y-pt,di(b,"throwupdate","onThrowUpdate"))},kt=(tt,gt,st,pt)=>(gt==null&&(gt=-uo),st==null&&(st=uo),An(tt)?vt=>{let Mt=b.isPressed?1-b.edgeResistance:1;return tt.call(b,vt>st?st+(vt-st)*Mt:vt<gt?gt+(vt-gt)*Mt:vt)*pt}:hl(tt)?vt=>{let Mt=tt.length,zt=0,mt=uo,ge,xe;for(;--Mt>-1;)ge=tt[Mt],xe=ge-vt,xe<0&&(xe=-xe),xe<mt&&ge>=gt&&ge<=st&&(zt=Mt,mt=xe);return tt[zt]}:isNaN(tt)?vt=>vt:()=>tt*pt),ae=(tt,gt,st,pt,vt,Mt,zt)=>(Mt=Mt&&Mt<uo?Mt*Mt:uo,An(tt)?mt=>{let ge=b.isPressed?1-b.edgeResistance:1,xe=mt.x,Ft=mt.y,Vt,Hi,bi;return mt.x=xe=xe>st?st+(xe-st)*ge:xe<gt?gt+(xe-gt)*ge:xe,mt.y=Ft=Ft>vt?vt+(Ft-vt)*ge:Ft<pt?pt+(Ft-pt)*ge:Ft,Vt=tt.call(b,mt),Vt!==mt&&(mt.x=Vt.x,mt.y=Vt.y),zt!==1&&(mt.x*=zt,mt.y*=zt),Mt<uo&&(Hi=mt.x-xe,bi=mt.y-Ft,Hi*Hi+bi*bi>Mt&&(mt.x=xe,mt.y=Ft)),mt}:hl(tt)?mt=>{let ge=tt.length,xe=0,Ft=uo,Vt,Hi,bi,Ti;for(;--ge>-1;)bi=tt[ge],Vt=bi.x-mt.x,Hi=bi.y-mt.y,Ti=Vt*Vt+Hi*Hi,Ti<Ft&&(xe=ge,Ft=Ti);return Ft<=Mt?tt[xe]:mt}:mt=>mt),Oe=()=>{let tt,gt,st,pt;Ht=!1,Tt?(Tt.calibrate(),b.minX=pe=-Tt.maxScrollLeft(),b.minY=fe=-Tt.maxScrollTop(),b.maxX=se=b.maxY=ue=0,Ht=!0):o.bounds&&(tt=Np(o.bounds,r.parentNode),f?(b.minX=pe=tt.left,b.maxX=se=tt.left+tt.width,b.minY=fe=b.maxY=ue=0):!ns(o.bounds.maxX)||!ns(o.bounds.maxY)?(tt=o.bounds,b.minX=pe=tt.minX,b.minY=fe=tt.minY,b.maxX=se=tt.maxX,b.maxY=ue=tt.maxY):(gt=Np(r,r.parentNode),b.minX=pe=Math.round(rt(d,"px")+tt.left-gt.left-.5),b.minY=fe=Math.round(rt(p,"px")+tt.top-gt.top-.5),b.maxX=se=Math.round(pe+(tt.width-gt.width)),b.maxY=ue=Math.round(fe+(tt.height-gt.height))),pe>se&&(b.minX=se,b.maxX=se=pe,pe=b.minX),fe>ue&&(b.minY=ue,b.maxY=ue=fe,fe=b.minY),f&&(b.minRotation=pe,b.maxRotation=se),Ht=!0),o.liveSnap&&(st=o.liveSnap===!0?o.snap||{}:o.liveSnap,pt=hl(st)||An(st),f?(nt=kt(pt?st:st.rotation,pe,se,1),et=null):st.points?ct=ae(pt?st:st.points,pe,se,fe,ue,st.radius,Tt?-1:1):(v&&(nt=kt(pt?st:st.x||st.left||st.scrollLeft,pe,se,Tt?-1:1)),T&&(et=kt(pt?st:st.y||st.top||st.scrollTop,fe,ue,Tt?-1:1))))},Fe=()=>{b.isThrowing=!1,di(b,"throwcomplete","onThrowComplete")},pi=()=>{b.isThrowing=!1},ri=(tt,gt)=>{let st,pt,vt,Mt;tt&&ss?(tt===!0&&(st=o.snap||o.liveSnap||{},pt=hl(st)||An(st),tt={resistance:(o.throwResistance||o.resistance||1e3)/(f?10:1)},f?tt.rotation=Ru(b,pt?st:st.rotation,se,pe,1,gt):(v&&(tt[d]=Ru(b,pt?st:st.points||st.x||st.left,se,pe,Tt?-1:1,gt||b.lockedAxis==="x")),T&&(tt[p]=Ru(b,pt?st:st.points||st.y||st.top,ue,fe,Tt?-1:1,gt||b.lockedAxis==="y")),(st.points||hl(st)&&al(st[0]))&&(tt.linkedProps=d+","+p,tt.radius=st.radius))),b.isThrowing=!0,Mt=isNaN(o.overshootTolerance)?o.edgeResistance===1?0:1-b.edgeResistance+.2:o.overshootTolerance,tt.duration||(tt.duration={max:Math.max(o.minDuration||0,"maxDuration"in o?o.maxDuration:2),min:isNaN(o.minDuration)?Mt===0||al(tt)&&tt.resistance>1e3?0:.5:o.minDuration,overshoot:Mt}),b.tween=vt=Me.to(Tt||r,{inertia:tt,data:"_draggable",onComplete:Fe,onInterrupt:pi,onUpdate:o.fastMode?di:Et,onUpdateParams:o.fastMode?[b,"onthrowupdate","onThrowUpdate"]:st&&st.radius?[!1,!0]:[]}),o.fastMode||(Tt&&(Tt._skip=!0),vt.render(1e9,!0,!0),Et(!0,!0),b.endX=b.x,b.endY=b.y,f&&(b.endRotation=b.x),vt.play(0),Et(!0,!0),Tt&&(Tt._skip=!1))):Ht&&b.applyBounds()},As=tt=>{let gt=B,st;B=Nh(r.parentNode,!0),tt&&b.isPressed&&!B.equals(gt||new co)&&(st=gt.inverse().apply({x:ie,y:Kt}),B.apply(st,st),ie=st.x,Kt=st.y),B.equals(i0)&&(B=null)},ir=()=>{let tt=1-b.edgeResistance,gt=G?ul(dt):0,st=G?cl(dt):0,pt,vt,Mt;As(!1),Hr.x=b.pointerX-gt,Hr.y=b.pointerY-st,B&&B.apply(Hr,Hr),ie=Hr.x,Kt=Hr.y,Qt&&(os(b.pointerX,b.pointerY),_t(!0)),Tt?(Oe(),$t=Tt.top(),Gt=Tt.left()):(ur()?(Et(!0,!0),Oe()):b.applyBounds(),f?(pt=r.ownerSVGElement?[K.xOrigin-r.getBBox().x,K.yOrigin-r.getBBox().y]:(fl(r)[Eu]||"0 0").split(" "),_e=b.rotationOrigin=Nh(r).apply({x:parseFloat(pt[0])||0,y:parseFloat(pt[1])||0}),Et(!0,!0),vt=b.pointerX-_e.x-gt,Mt=_e.y-b.pointerY+st,Gt=b.x,$t=b.y=Math.atan2(Mt,vt)*Mp):($t=rt(p,"px"),Gt=rt(d,"px"))),Ht&&tt&&(Gt>se?Gt=se+(Gt-se)/tt:Gt<pe&&(Gt=pe-(pe-Gt)/tt),f||($t>ue?$t=ue+($t-ue)/tt:$t<fe&&($t=fe-(fe-$t)/tt))),b.startX=Gt,b.startY=$t},ur=()=>b.tween&&b.tween.isActive(),ze=()=>{Qs.parentNode&&!ur()&&!b.isDragging&&Qs.parentNode.removeChild(Qs)},fr=(tt,gt)=>{let st;if(!Bt||b.isPressed||!tt||(tt.type==="mousedown"||tt.type==="pointerdown")&&!gt&&Cn()-z<30&&sl[b.pointerEvent.type]){it&&tt&&Bt&&Vr(tt);return}if(E=ur(),b.pointerEvent=tt,sl[tt.type]?(q=~tt.type.indexOf("touch")?tt.currentTarget||tt.target:dt,Mi(q,"touchend",me),Mi(q,"touchmove",Nt),Mi(q,"touchcancel",me),Mi(dt,"touchstart",Fp)):(q=null,Mi(dt,"mousemove",Nt)),A=null,(!Gh||!q)&&(Mi(dt,"mouseup",me),tt&&tt.target&&Mi(tt.target,"mouseup",me)),O=Z.call(b,tt.target)&&o.dragClickables===!1&&!gt,O){Mi(tt.target,"change",me),di(b,"pressInit","onPressInit"),di(b,"press","onPress"),jh(k,!0),it=!1;return}if(g=!q||v===T||b.vars.allowNativeTouchScrolling===!1||b.vars.allowContextMenu&&tt&&(tt.ctrlKey||tt.which>2)?!1:v?"y":"x",it=!g&&!b.allowEventDefault,it&&(Vr(tt),Mi(Ze,"touchforcechange",Vr)),tt.changedTouches?(tt=Ue=tt.changedTouches[0],ye=tt.identifier):tt.pointerId?ye=tt.pointerId:Ue=ye=null,Uh++,o0(_t),Kt=b.pointerY=tt.pageY,ie=b.pointerX=tt.pageX,di(b,"pressInit","onPressInit"),(g||b.autoScroll)&&Hh(r.parentNode),r.parentNode&&b.autoScroll&&!Tt&&!f&&r.parentNode._gsMaxScrollX&&!Qs.parentNode&&!r.getBBox&&(Qs.style.width=r.parentNode.scrollWidth+"px",r.parentNode.appendChild(Qs)),ir(),b.tween&&b.tween.kill(),b.isThrowing=!1,Me.killTweensOf(Tt||r,D,!0),Tt&&Me.killTweensOf(r,{scrollTo:1},!0),b.tween=b.lockedAxis=null,(o.zIndexBoost||!f&&!Tt&&o.zIndexBoost!==!1)&&(r.style.zIndex=Vi.zIndex++),b.isPressed=!0,re=!!(o.onDrag||b._listeners.drag),Ne=!!(o.onMove||b._listeners.move),!f&&(o.cursor!==!1||o.activeCursor))for(st=k.length;--st>-1;)Me.set(k[st],{cursor:o.activeCursor||o.cursor||(ol==="grab"?"grabbing":ol)});di(b,"press","onPress")},Nt=tt=>{let gt=tt,st,pt,vt,Mt,zt,mt;if(!Bt||Su||!b.isPressed||!tt){it&&tt&&Bt&&Vr(tt);return}if(b.pointerEvent=tt,st=tt.changedTouches,st){if(tt=st[0],tt!==Ue&&tt.identifier!==ye){for(Mt=st.length;--Mt>-1&&(tt=st[Mt]).identifier!==ye&&tt.target!==r;);if(Mt<0)return}}else if(tt.pointerId&&ye&&tt.pointerId!==ye)return;if(q&&g&&!A&&(Hr.x=tt.pageX,Hr.y=tt.pageY,B&&B.apply(Hr,Hr),pt=Hr.x,vt=Hr.y,zt=Math.abs(pt-ie),mt=Math.abs(vt-Kt),(zt!==mt&&(zt>C||mt>C)||nl&&g===A)&&(A=zt>mt&&v?"x":"y",g&&A!==g&&Mi(Ze,"touchforcechange",Vr),b.vars.lockAxisOnTouchScroll!==!1&&v&&T&&(b.lockedAxis=A==="x"?"y":"x",An(b.vars.onLockAxis)&&b.vars.onLockAxis.call(b,gt)),nl&&g===A))){me(gt);return}!b.allowEventDefault&&(!g||A&&g!==A)&&gt.cancelable!==!1?(Vr(gt),it=!0):it&&(it=!1),b.autoScroll&&(L=!0),os(tt.pageX,tt.pageY,Ne)},os=(tt,gt,st)=>{let pt=1-b.dragResistance,vt=1-b.edgeResistance,Mt=b.pointerX,zt=b.pointerY,mt=$t,ge=b.x,xe=b.y,Ft=b.endX,Vt=b.endY,Hi=b.endRotation,bi=Qt,Ti,qt,Ot,oe,be,Re;b.pointerX=tt,b.pointerY=gt,G&&(tt-=ul(dt),gt-=cl(dt)),f?(oe=Math.atan2(_e.y-gt,tt-_e.x)*Mp,be=b.y-oe,be>180?($t-=360,b.y=oe):be<-180&&($t+=360,b.y=oe),b.x!==Gt||Math.abs($t-oe)>C?(b.y=oe,Ot=Gt+($t-oe)*pt):Ot=Gt):(B&&(Re=tt*B.a+gt*B.c+B.e,gt=tt*B.b+gt*B.d+B.f,tt=Re),qt=gt-Kt,Ti=tt-ie,qt<C&&qt>-C&&(qt=0),Ti<C&&Ti>-C&&(Ti=0),(b.lockAxis||b.lockedAxis)&&(Ti||qt)&&(Re=b.lockedAxis,Re||(b.lockedAxis=Re=v&&Math.abs(Ti)>Math.abs(qt)?"y":T?"x":null,Re&&An(b.vars.onLockAxis)&&b.vars.onLockAxis.call(b,b.pointerEvent)),Re==="y"?qt=0:Re==="x"&&(Ti=0)),Ot=fa(Gt+Ti*pt),oe=fa($t+qt*pt)),(nt||et||ct)&&(b.x!==Ot||b.y!==oe&&!f)?(ct&&(pa.x=Ot,pa.y=oe,Re=ct(pa),Ot=fa(Re.x),oe=fa(Re.y)),nt&&(Ot=fa(nt(Ot))),et&&(oe=fa(et(oe)))):Ht&&(Ot>se?Ot=se+Math.round((Ot-se)*vt):Ot<pe&&(Ot=pe+Math.round((Ot-pe)*vt)),f||(oe>ue?oe=Math.round(ue+(oe-ue)*vt):oe<fe&&(oe=Math.round(fe+(oe-fe)*vt)))),(b.x!==Ot||b.y!==oe&&!f)&&(f?(b.endRotation=b.x=b.endX=Ot,Qt=!0):(T&&(b.y=b.endY=oe,Qt=!0),v&&(b.x=b.endX=Ot,Qt=!0)),!st||di(b,"move","onMove")!==!1?!b.isDragging&&b.isPressed&&(b.isDragging=!0,di(b,"dragstart","onDragStart")):(b.pointerX=Mt,b.pointerY=zt,$t=mt,b.x=ge,b.y=xe,b.endX=Ft,b.endY=Vt,b.endRotation=Hi,Qt=bi))},me=(tt,gt)=>{if(!Bt||!b.isPressed||tt&&ye!=null&&!gt&&(tt.pointerId&&tt.pointerId!==ye&&tt.target!==r||tt.changedTouches&&!l0(tt.changedTouches,ye))){it&&tt&&Bt&&Vr(tt);return}b.isPressed=!1;let st=tt,pt=b.isDragging,vt=b.vars.allowContextMenu&&tt&&(tt.ctrlKey||tt.which>2),Mt=Me.delayedCall(.001,ze),zt,mt,ge,xe,Ft;if(q?(xi(q,"touchend",me),xi(q,"touchmove",Nt),xi(q,"touchcancel",me),xi(dt,"touchstart",Fp)):xi(dt,"mousemove",Nt),xi(Ze,"touchforcechange",Vr),(!Gh||!q)&&(xi(dt,"mouseup",me),tt&&tt.target&&xi(tt.target,"mouseup",me)),Qt=!1,O&&!vt){tt&&(xi(tt.target,"change",me),b.pointerEvent=st),jh(k,!1),di(b,"release","onRelease"),di(b,"click","onClick"),O=!1;return}if(kp(_t),!f)for(mt=k.length;--mt>-1;)Mu(k[mt],"cursor",o.cursor||(o.cursor!==!1?ol:null));if(pt&&(P=Rp=Cn(),b.isDragging=!1),Uh--,tt){if(zt=tt.changedTouches,zt&&(tt=zt[0],tt!==Ue&&tt.identifier!==ye)){for(mt=zt.length;--mt>-1&&(tt=zt[mt]).identifier!==ye&&tt.target!==r;);if(mt<0)return}b.pointerEvent=st,b.pointerX=tt.pageX,b.pointerY=tt.pageY}return vt&&st?(Vr(st),it=!0,di(b,"release","onRelease")):st&&!pt?(it=!1,E&&(o.snap||o.bounds)&&ri(o.inertia||o.throwProps),di(b,"release","onRelease"),(!nl||st.type!=="touchmove")&&st.type.indexOf("cancel")===-1&&(di(b,"click","onClick"),Cn()-z<300&&di(b,"doubleclick","onDoubleClick"),xe=st.target||r,z=Cn(),Ft=()=>{z!==I&&b.enabled()&&!b.isPressed&&!st.defaultPrevented&&(xe.click?xe.click():dt.createEvent&&(ge=dt.createEvent("MouseEvents"),ge.initMouseEvent("click",!0,!0,Ze,1,b.pointerEvent.screenX,b.pointerEvent.screenY,b.pointerX,b.pointerY,!1,!1,!1,!1,0,null),xe.dispatchEvent(ge)))},!nl&&!st.defaultPrevented&&Me.delayedCall(.05,Ft))):(ri(o.inertia||o.throwProps),!b.allowEventDefault&&st&&(o.dragClickables!==!1||!Z.call(b,st.target))&&pt&&(!g||A&&g===A)&&st.cancelable!==!1?(it=!0,Vr(st)):it=!1,di(b,"release","onRelease")),ur()&&Mt.duration(b.tween.duration()),pt&&di(b,"dragend","onDragEnd"),!0},rr=tt=>{if(tt&&b.isDragging&&!Tt){let gt=tt.target||r.parentNode,st=gt.scrollLeft-gt._gsScrollX,pt=gt.scrollTop-gt._gsScrollY;(st||pt)&&(B?(ie-=st*B.a+pt*B.c,Kt-=pt*B.d+st*B.b):(ie-=st,Kt-=pt),gt._gsScrollX+=st,gt._gsScrollY+=pt,os(b.pointerX,b.pointerY))}},Pn=tt=>{let gt=Cn(),st=gt-z<40,pt=gt-P<40,vt=st&&I===z,Mt=b.pointerEvent&&b.pointerEvent.defaultPrevented,zt=st&&J===z,mt=tt.isTrusted||tt.isTrusted==null&&st&&vt;if((vt||pt&&b.vars.suppressClickOnDrag!==!1)&&tt.stopImmediatePropagation&&tt.stopImmediatePropagation(),st&&!(b.pointerEvent&&b.pointerEvent.defaultPrevented)&&(!vt||mt&&!zt)){mt&&vt&&(J=z),I=z;return}(b.isPressed||pt||st)&&(!mt||!tt.detail||!st||Mt)&&Vr(tt),!st&&!pt&&(tt&&tt.target&&(b.pointerEvent=tt),di(b,"click","onClick"))},Zi=tt=>B?{x:tt.x*B.a+tt.y*B.c+B.e,y:tt.x*B.b+tt.y*B.d+B.f}:{x:tt.x,y:tt.y};Pe=Vi.get(r),Pe&&Pe.kill(),this.startDrag=(tt,gt)=>{let st,pt,vt,Mt;fr(tt||b.pointerEvent,!0),gt&&!b.hitTest(tt||b.pointerEvent)&&(st=ga(tt||b.pointerEvent),pt=ga(r),vt=Zi({x:st.left+st.width/2,y:st.top+st.height/2}),Mt=Zi({x:pt.left+pt.width/2,y:pt.top+pt.height/2}),ie-=vt.x-Mt.x,Kt-=vt.y-Mt.y),b.isDragging||(b.isDragging=!0,di(b,"dragstart","onDragStart"))},this.drag=Nt,this.endDrag=tt=>me(tt||b.pointerEvent,!0),this.timeSinceDrag=()=>b.isDragging?0:(Cn()-P)/1e3,this.timeSinceClick=()=>(Cn()-z)/1e3,this.hitTest=(tt,gt)=>Vi.hitTest(b.target,tt,gt),this.getDirection=(tt,gt)=>{let st=tt==="velocity"&&ss?tt:al(tt)&&!f?"element":"start",pt,vt,Mt,zt,mt,ge;return st==="element"&&(mt=ga(b.target),ge=ga(tt)),pt=st==="start"?b.x-Gt:st==="velocity"?ss.getVelocity(r,d):mt.left+mt.width/2-(ge.left+ge.width/2),f?pt<0?"counter-clockwise":"clockwise":(gt=gt||2,vt=st==="start"?b.y-$t:st==="velocity"?ss.getVelocity(r,p):mt.top+mt.height/2-(ge.top+ge.height/2),Mt=Math.abs(pt/vt),zt=Mt<1/gt?"":pt<0?"left":"right",Mt<gt&&(zt!==""&&(zt+="-"),zt+=vt<0?"up":"down"),zt)},this.applyBounds=(tt,gt)=>{let st,pt,vt,Mt,zt,mt;if(tt&&o.bounds!==tt)return o.bounds=tt,b.update(!0,gt);if(Et(!0),Oe(),Ht&&!ur()){if(st=b.x,pt=b.y,st>se?st=se:st<pe&&(st=pe),pt>ue?pt=ue:pt<fe&&(pt=fe),(b.x!==st||b.y!==pt)&&(vt=!0,b.x=b.endX=st,f?b.endRotation=st:b.y=b.endY=pt,Qt=!0,_t(!0),b.autoScroll&&!b.isDragging))for(Hh(r.parentNode),Mt=r,Js.scrollTop=Ze.pageYOffset!=null?Ze.pageYOffset:dt.documentElement.scrollTop!=null?dt.documentElement.scrollTop:dt.body.scrollTop,Js.scrollLeft=Ze.pageXOffset!=null?Ze.pageXOffset:dt.documentElement.scrollLeft!=null?dt.documentElement.scrollLeft:dt.body.scrollLeft;Mt&&!mt;)mt=ma(Mt.parentNode),zt=mt?Js:Mt.parentNode,T&&zt.scrollTop>zt._gsMaxScrollY&&(zt.scrollTop=zt._gsMaxScrollY),v&&zt.scrollLeft>zt._gsMaxScrollX&&(zt.scrollLeft=zt._gsMaxScrollX),Mt=zt;b.isThrowing&&(vt||b.endX>se||b.endX<pe||b.endY>ue||b.endY<fe)&&ri(o.inertia||o.throwProps,vt)}return b},this.update=(tt,gt,st)=>{let{x:pt,y:vt}=b;return As(!gt),tt?b.applyBounds():(Qt&&st&&_t(!0),Et(!0)),gt&&(os(b.pointerX,b.pointerY),Qt&&_t(!0)),b.isPressed&&!gt&&(v&&Math.abs(pt-b.x)>.01||T&&Math.abs(vt-b.y)>.01&&!f)&&ir(),b.autoScroll&&(Hh(r.parentNode,b.isDragging),L=b.isDragging,_t(!0),Pu(r,rr),Cu(r,rr)),b},this.enable=tt=>{let gt={lazy:!0},st,pt,vt;if(!f&&o.cursor!==!1&&(gt.cursor=o.cursor||ol),Me.utils.checkPrefix("touchCallout")&&(gt.touchCallout="none"),tt!=="soft"){for(Au(k,v===T?"none":o.allowNativeTouchScrolling&&r.scrollHeight===r.clientHeight==(r.scrollWidth===r.clientHeight)||o.allowEventDefault?"manipulation":v?"pan-y":"pan-x"),pt=k.length;--pt>-1;)vt=k[pt],Gh||Mi(vt,"mousedown",fr),Mi(vt,"touchstart",fr),Mi(vt,"click",Pn,!0),Me.set(vt,gt),vt.getBBox&&vt.ownerSVGElement&&Me.set(vt.ownerSVGElement,{touchAction:v===T?"none":o.allowNativeTouchScrolling||o.allowEventDefault?"manipulation":v?"pan-y":"pan-x"}),o.allowContextMenu||Mi(vt,"contextmenu",ht);jh(k,!1)}return Cu(r,rr),Bt=!0,ss&&tt!=="soft"&&ss.track(Tt||r,u?"x,y":f?"rotation":"top,left"),r._gsDragID=st="d"+r0++,da[st]=b,Tt&&(Tt.enable(),Tt.element._gsDragID=st),(o.bounds||f)&&ir(),o.bounds&&b.applyBounds(),b},this.disable=tt=>{let gt=b.isDragging,st,pt;if(!f)for(st=k.length;--st>-1;)Mu(k[st],"cursor",null);if(tt!=="soft"){for(Au(k,null),st=k.length;--st>-1;)pt=k[st],Mu(pt,"touchCallout",null),xi(pt,"mousedown",fr),xi(pt,"touchstart",fr),xi(pt,"click",Pn),xi(pt,"contextmenu",ht);jh(k,!0),q&&(xi(q,"touchcancel",me),xi(q,"touchend",me),xi(q,"touchmove",Nt)),xi(dt,"mouseup",me),xi(dt,"mousemove",Nt)}return Pu(r,rr),Bt=!1,ss&&tt!=="soft"&&ss.untrack(Tt||r,u?"x,y":f?"rotation":"top,left"),Tt&&Tt.disable(),kp(_t),b.isDragging=b.isPressed=O=!1,gt&&di(b,"dragend","onDragEnd"),b},this.enabled=function(tt,gt){return arguments.length?tt?b.enable(gt):b.disable(gt):Bt},this.kill=function(){return b.isThrowing=!1,b.tween&&b.tween.kill(),b.disable(),Me.set(k,{clearProps:"userSelect"}),delete da[r._gsDragID],b},~l.indexOf("scroll")&&(Tt=this.scrollProxy=new c0(r,n0({onKill:function(){b.isPressed&&me(null)}},o)),r.style.overflowY=T&&!wu?"auto":"hidden",r.style.overflowX=v&&!wu?"auto":"hidden",r=Tt.content),f?D.rotation=1:(v&&(D[d]=1),T&&(D[p]=1)),K.force3D="force3D"in o?o.force3D:!0,this.enable()}static register(r){Me=r,Iu()}static create(r,o){return Ep||Iu(!0),En(r).map(l=>new Vi(l,o))}static get(r){return da[(En(r)[0]||{})._gsDragID]}static timeSinceDrag(){return(Cn()-Rp)/1e3}static hitTest(r,o,l){if(r===o)return!1;let u=ga(r),f=ga(o),{top:d,left:p,right:v,bottom:T,width:C,height:b}=u,k=f.left>v||f.right<p||f.top>T||f.bottom<d,D,P,L;return k||!l?!k:(L=(l+"").indexOf("%")!==-1,l=parseFloat(l)||0,D={left:Math.max(p,f.left),top:Math.max(d,f.top)},D.width=Math.min(v,f.right)-D.left,D.height=Math.min(T,f.bottom)-D.top,D.width<0||D.height<0?!1:L?(l*=.01,P=D.width*D.height,P>=C*b*l||P>=f.width*f.height*l):D.width>l&&D.height>l)}};a0(Vi.prototype,{pointerX:0,pointerY:0,startX:0,startY:0,deltaX:0,deltaY:0,isDragging:!1,isPressed:!1}),Vi.zIndex=1e3,Vi.version="3.6.0",Pp()&&Me.registerPlugin(Vi),Ut.registerPlugin(Vi);var Vp={create(){const r=document.createElement("div");r.id="cursor",r.classList.add("compare-cursor","compare-cursor-x"),document.querySelector(".offers-wrapper").classList.add("compare-x"),document.querySelector(".offers-wrapper").appendChild(r)},snap(){Ke(document.querySelector("#cursor")).x<=40&&Ut.to("#cursor",{x:0,duration:.5,ease:Gd.easeInOut,onUpdate:function(){document.querySelector(".offer-1").style.width=Ke(document.querySelector("#cursor")).x+"px"}}),Ke(document.querySelector("#cursor")).x>=document.querySelector(".offers-wrapper").offsetWidth-40&&Ut.to("#cursor",{x:document.querySelector(".offers-wrapper").offsetWidth,duration:.5,ease:Gd.easeInOut,onUpdate:function(){document.querySelector(".offer-1").style.width=Ke(document.querySelector("#cursor")).x+"px"}})},makeDraggable(){const r=document.querySelector(".offer-info .offer-0"),o=document.querySelector(".offer-info .offer-1"),l=document.querySelector("#cursor"),u=document.querySelector(".offer-0"),f=document.querySelector(".offer-1");let d=0;Ut.set(l,{y:0}),Ut.set(f,{width:0}),Vi.create(l,{type:"x",bounds:".offers-wrapper",con:document.querySelectorAll(".offer-info .offer"),onDrag:function(){Ke(l).x<=document.querySelector(".offers-wrapper").offsetWidth/2-l.offsetWidth?(d!=0&&{ENABLED:"true",OFFER_SETTINGS:{IMAGE:"true",IMAGE_SIZE:"cover",MULTIIMAGE:"false",NAME:"true",NAME_LINES:"2",PRICE:"true",OLDPRICE:"true",BLINK_PRICE:"false",DISCOUNT:"true",DISCOUNT_IN_PRICE:"false",BUTTON:"true",ROLLTEXT:{ENABLED:"true",ORIENTATION:"vertical"},STARS:{ENABLED:"true",TYPE:"stars_only",SOURCE:"stars",IMAGE:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>",BACKGROUND:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>"},CUSTOM_PROPS:"false",CUSTOM_PROPS_LIST:"cp1, cp2",COUNTER:{ENABLED:"false",MASK:"{dd}:{hh}:{mm}:{ss}",CUSTOM_PROPERTY:"end_date"}},POSITION:{POSITION:"$bottom: 0, $left: 4px",WIDTH:"152px",HEIGHT:"318px"}}&&(Ut.to(r,{x:0,opacity:1,scale:1}),Ut.to(o,{x:-20,opacity:0,scale:.9})),d=0,document.querySelector(".button.static").dataset.offerId=velocityData.offers[d].identifier||""):(d!=1&&{ENABLED:"true",OFFER_SETTINGS:{IMAGE:"true",IMAGE_SIZE:"cover",MULTIIMAGE:"false",NAME:"true",NAME_LINES:"2",PRICE:"true",OLDPRICE:"true",BLINK_PRICE:"false",DISCOUNT:"true",DISCOUNT_IN_PRICE:"false",BUTTON:"true",ROLLTEXT:{ENABLED:"true",ORIENTATION:"vertical"},STARS:{ENABLED:"true",TYPE:"stars_only",SOURCE:"stars",IMAGE:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>",BACKGROUND:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>"},CUSTOM_PROPS:"false",CUSTOM_PROPS_LIST:"cp1, cp2",COUNTER:{ENABLED:"false",MASK:"{dd}:{hh}:{mm}:{ss}",CUSTOM_PROPERTY:"end_date"}},POSITION:{POSITION:"$bottom: 0, $left: 4px",WIDTH:"152px",HEIGHT:"318px"}}&&(Ut.to(r,{x:20,opacity:0,scale:.9}),Ut.to(o,{x:0,opacity:1,scale:1})),d=1,document.querySelector(".button.static").dataset.offerId=velocityData.offers[d].identifier||""),f.style.width=Ke(l).x+"px"},onDragEnd:function(){f.style.width=Ke(l).x+"px",Vp.snap()}})},init(){this.create(),document.querySelector(".offers-wrapper").classList.add("compare"),this.makeDraggable()}},f0=Vp;Ut.registerPlugin(Vi),X.zipperObserver=new Es;var d0=class{constructor(r,o,l,u,f,d,p){this.dir=r,this.offset=o,this.min=l,this.snap=u,this.margin=f,this.jumpingRange=d,this.openOnLoad=p,this.opened=!1}changeOpacity(r,o){Math.floor(100*r/o)>this.snap&&(document.querySelector(".zipper-video")&&(document.querySelector(".zipper-video").style.opacity=Math.floor(100*r/o)/100),document.querySelector(".zipper-image")&&(document.querySelector(".zipper-image").style.opacity=Math.floor(100*r/o)/100))}onDrag(r){this.dir=="top"?zipper.style.height=Ke(r).y+r.offsetWidth/2-this.margin+"px":this.dir=="left"?zipper.style.width=Ke(r).x+r.offsetWidth/2-this.margin+"px":this.dir=="right"?zipper.style.width=160-Ke(r).x-r.offsetWidth/2-this.margin+"px":this.dir=="bottom"&&(zipper.style.height=600-Ke(r).y-r.offsetWidth/2-this.margin+"px")}onDragEnd(r,o,l,u){this.dir=="top"?this.offset-r.offsetWidth-u<=this.snap?(X.zipperObserver.emit("zipperOpen",{open:!0,range:this.jumpingRange}),this.opened=!0,Ut.to(r,{y:this.offset-r.offsetWidth/2+this.margin,onUpdate:()=>zipper.style.height=Ke(r).y+r.offsetWidth/2-this.margin+"px"})):(X.zipperObserver.emit("zipperOpen",{open:!1,range:this.jumpingRange}),this.opened=!1,Ut.to(r,{y:this.min-r.offsetWidth/2+this.margin,onUpdate:()=>zipper.style.height=Ke(r).y+r.offsetWidth/2-this.margin+"px"})):this.dir=="left"?this.offset-r.offsetWidth-l<=this.snap?(X.zipperObserver.emit("zipperOpen",{open:!0,range:this.jumpingRange}),this.opened=!0,Ut.to(r,{x:this.offset-r.offsetWidth/2+this.margin,onUpdate:()=>zipper.style.width=Ke(r).x+r.offsetWidth/2-this.margin+"px"})):(X.zipperObserver.emit("zipperOpen",{open:!1,range:this.jumpingRange}),this.opened=!1,Ut.to(r,{x:this.min-r.offsetWidth/2+this.margin,onUpdate:()=>zipper.style.width=Ke(r).x+r.offsetWidth/2-this.margin+"px"})):this.dir=="bottom"?this.offset-r.offsetWidth-(600-(u+r.offsetWidth/2))+r.offsetWidth<=this.snap?(X.zipperObserver.emit("zipperOpen",{open:!0,range:this.jumpingRange}),this.opened=!0,Ut.to(r,{y:600-this.offset-r.offsetWidth/2-this.margin,onUpdate:()=>zipper.style.height=600-Ke(r).y-r.offsetWidth/2-this.margin+"px"})):(X.zipperObserver.emit("zipperOpen",{open:!1,range:this.jumpingRange}),this.opened=!1,Ut.to(r,{y:600-this.min-r.offsetWidth/2-this.margin,onUpdate:()=>zipper.style.height=600-Ke(r).y-r.offsetWidth/2-this.margin+"px"})):this.dir=="right"&&(this.offset-r.offsetWidth-(160-(l+r.offsetWidth/2))+r.offsetWidth<=this.snap?(X.zipperObserver.emit("zipperOpen",{open:!0,range:this.jumpingRange}),this.opened=!0,Ut.to(r,{x:160-this.offset-r.offsetWidth/2-this.margin,onUpdate:()=>zipper.style.width=160-Ke(r).x-r.offsetWidth/2-this.margin+"px"})):(X.zipperObserver.emit("zipperOpen",{open:!1,range:this.jumpingRange}),this.opened=!1,Ut.to(r,{x:160-this.min-r.offsetWidth/2-this.margin,onUpdate:()=>zipper.style.width=160-Ke(r).x-r.offsetWidth/2-this.margin+"px"})))}clickOpen(r){this.dir=="top"?this.opened==!1?(X.zipperObserver.emit("zipperOpen",{open:!0,range:this.jumpingRange}),this.opened=!0,Ut.to(r,{y:this.offset-r.offsetWidth/2+this.margin,onUpdate:()=>zipper.style.height=Ke(r).y+r.offsetWidth/2-this.margin+"px"})):(X.zipperObserver.emit("zipperOpen",{open:!1,range:this.jumpingRange}),this.opened=!1,Ut.to(r,{y:this.min-r.offsetWidth/2+this.margin,onUpdate:()=>zipper.style.height=Ke(r).y+r.offsetWidth/2-this.margin+"px"})):this.dir=="left"?this.opened==!1?(X.zipperObserver.emit("zipperOpen",{open:!0,range:this.jumpingRange}),this.opened=!0,Ut.to(r,{x:this.offset-r.offsetWidth/2+this.margin,onUpdate:()=>zipper.style.width=Ke(r).x+r.offsetWidth/2-this.margin+"px"})):(X.zipperObserver.emit("zipperOpen",{open:!1,range:this.jumpingRange}),this.opened=!1,Ut.to(r,{x:this.min-r.offsetWidth/2+this.margin,onUpdate:()=>zipper.style.width=Ke(r).x+r.offsetWidth/2-this.margin+"px"})):this.dir=="bottom"?this.opened==!1?(X.zipperObserver.emit("zipperOpen",{open:!0,range:this.jumpingRange}),this.opened=!0,Ut.to(r,{y:600-this.offset-r.offsetWidth/2-this.margin,onUpdate:()=>zipper.style.height=600-Ke(r).y-r.offsetWidth/2-this.margin+"px"})):(X.zipperObserver.emit("zipperOpen",{open:!1,range:this.jumpingRange}),this.opened=!1,Ut.to(r,{y:600-this.min-r.offsetWidth/2-this.margin,onUpdate:()=>zipper.style.height=600-Ke(r).y-r.offsetWidth/2-this.margin+"px"})):this.dir=="right"&&(this.opened==!1?(X.zipperObserver.emit("zipperOpen",{open:!0,range:this.jumpingRange}),this.opened=!0,Ut.to(r,{x:160-this.offset-r.offsetWidth/2-this.margin,onUpdate:()=>zipper.style.width=160-Ke(r).x-r.offsetWidth/2-this.margin+"px"})):(X.zipperObserver.emit("zipperOpen",{open:!1,range:this.jumpingRange}),this.opened=!1,Ut.to(r,{x:160-this.min-r.offsetWidth/2-this.margin,onUpdate:()=>zipper.style.width=160-Ke(r).x-r.offsetWidth/2-this.margin+"px"})))}init(){const r=document.querySelector("#zipperBtn"),o=document.querySelector("#zipper"),l=document.querySelector(".zipper-image");this.dir=="top"?(Ut.set(o,{width:"100%",height:this.min,left:0,top:this.margin}),Ut.set(r,{x:o.offsetWidth/2-r.offsetWidth/2,y:o.offsetHeight-r.offsetWidth/2+this.margin})):this.dir=="bottom"?(Ut.set(o,{width:"100%",height:this.min,bottom:this.margin,left:0}),Ut.set(r,{y:600-o.offsetHeight-(this.margin+r.offsetWidth/2),x:o.offsetWidth/2-r.offsetWidth/2,rotate:-180})):this.dir=="left"?(Ut.set(o,{width:this.min,height:"100%",left:this.margin,top:0}),Ut.set(r,{y:o.offsetHeight/2-r.offsetWidth/2,x:this.min-r.offsetWidth/2,rotate:-90})):this.dir=="right"&&(Ut.set(o,{width:this.min,height:"100%",right:this.margin,top:0}),Ut.set(r,{y:o.offsetHeight/2-r.offsetWidth/2,x:160-o.offsetWidth-(this.margin+r.offsetWidth/2),rotate:90})),this.dir=="top"||this.dir=="left"?Vi.create(r,{type:this.dir=="top"?"y":"x",bounds:{min:this.min-r.offsetWidth/2+this.margin,max:this.offset+r.offsetWidth/2+this.margin},onDrag:()=>this.onDrag(r),onDragEnd:()=>{this.onDragEnd(r,l,Vi.get(r).x,Vi.get(r).y)}}):Vi.create(r,{type:this.dir=="bottom"?"y":"x",bounds:{min:this.dir=="bottom"?600-this.offset-r.offsetWidth/2-this.margin:160-this.offset-r.offsetWidth/2-this.margin,max:this.dir=="bottom"?600-(o.offsetHeight-r.offsetWidth/2)-this.margin:160-(o.offsetWidth-r.offsetWidth/2)-this.margin},onDrag:()=>this.onDrag(r),onDragEnd:()=>{this.onDragEnd(r,l,Vi.get(r).x,Vi.get(r).y)}}),r.addEventListener("click",()=>{this.clickOpen(r)}),this.openOnLoad&&this.clickOpen(r)}};X.enlargerObserver=new Es;var p0=class{constructor(){this.container=document.querySelector(".enlarger"),this.offers=document.querySelector(".enlarger__offers"),this.enlargerOffer=document.querySelectorAll(".enlarger__offers .offer"),this.offer={observer:new Es(".screen:not(.tns-slide-cloned) .offer"),all:[...document.querySelectorAll(".screen:not(.tns-slide-cloned) .offer")]},this.closeButton=document.querySelector(".enlarger-close"),this.openTimeout=null,this.autoEnlarger=!1,this.enlargerShow=2e3-2e3}makeOffers(){X.myOffers.forEach((r,o)=>{this.offers.innerHTML+=Fh(r,{image:!0,altimage:!1,name:!0,price:{price:!0,options:{isBlink:!1,isDiscount:!1,oldPrice:!0}},discount:!0,button:!0,stars:{enabled:!1,starsSource:"stars",image:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>",background:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>",type:"stars_bg"},customProperties:{customProperties:!1,customPropertiesList:"cp1, cp2"},counter:{enabled:!1,mask:"{dd}:{hh}:{mm}:{ss}",customProperty:"end_date"}})})}close(){document.querySelector(".enlarger-close").classList.remove("active"),X.settings.rollTexts.enlargerRollText&&X.rollTexts.enlargerRollText.stop(500),document.querySelectorAll(".enlarger__offers .offer").forEach(r=>{r.style.zIndex="1"}),Ut.to(document.querySelectorAll(".enlarger__offers .offer"),{opacity:0,scale:.9,duration:.2,delay:.5,onComplete:()=>{X.enlargerOpened&&X.enlargerObserver.emit("enlargerOpen",{open:!1}),X.enlargerOpened=!1,Ut.set(this.container,{left:"100%"})}})}activate(r){this.openTimeout&&clearTimeout(this.openTimeout),X.enlargerOpened&&this.close(),this.openTimeout=setTimeout(()=>{document.querySelector(".enlarger-close").classList.add("active"),X.enlargerOpened=!0,this.container.classList.add("active"),Ut.set(this.container,{left:"0"}),Ut.set(document.querySelectorAll(".enlarger__offers .offer")[r],{left:0}),Ut.to(document.querySelectorAll(".enlarger__offers .offer")[r],{opacity:1,scale:1,duration:.2,zIndex:5,onComplete:()=>{X.enlargerObserver.emit("enlargerOpen",{open:!0})}}),X.settings.rollTexts.enlargerRollText&&X.rollTexts.enlargerRollText.start(500)},1e3),X.observer.subscribe("hover",o=>{X.hover||this.close()})}init(){this.makeOffers();for(const r of this.offer.all)r.innerHTML+='<div class="offer__loader"><div></div></div>';Ut.set(document.querySelectorAll(".enlarger__offers .offer"),{opacity:0,scale:.9}),Ut.set(this.container,{left:"100%"}),this.autoEnlarger&&X.jumpingObserver.subscribe("jumpingframe",r=>{!X.hover&&!X.enlargerOpened&&(X.enlargerOpened=!0,this.offer.all[r.current.index].querySelector(".offer__loader div").classList.add("active"),this.activate(r.current.index),this.closeTimeout=setTimeout(()=>{for(const o of this.offer.all)o.querySelector(".offer__loader div").classList.remove("active");this.close()},this.enlargerShow))}),this.offer.observer.subscribe("hover",r=>{if(r.hover&&X.hover)this.offer.all[r.index].querySelector(".offer__loader div").classList.add("active"),this.activate(r.index);else{this.openTimeout&&clearTimeout(this.openTimeout);for(const o of this.offer.all)o.querySelector(".offer__loader div").classList.remove("active")}}),document.querySelector(".enlarger-close").addEventListener("click",()=>{this.close()}),X.settings.rollTexts.enlargerRollText?(X.rollTexts.enlargerRollText=new pu({container:".enlarger .offer .name",text:".text-table-cell",orientation:"vertical"}),X.rollTexts.enlargerRollText.init(),X.rollTexts.enlargerRollText.stop()):du(".enlarger .name")}},Le=function(r){"use strict";var o=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(o||{}),l=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(l||{}),u=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(u||{}),f=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(f||{}),d=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(d||{}),p=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(p||{}),v=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(v||{}),T=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(T||{}),C=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(C||{}),b=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(b||{}),k=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(k||{}),D=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(D||{}),P=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(P||{}),L=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(L||{}),j=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(j||{}),U=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(U||{}),N=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(N||{}),Y=(e=>(e[e.RED=1]="RED",e[e.GREEN=2]="GREEN",e[e.BLUE=4]="BLUE",e[e.ALPHA=8]="ALPHA",e))(Y||{}),Z=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(Z||{}),z=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(z||{});const K={createCanvas:(e,t)=>{const i=document.createElement("canvas");return i.width=e,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},G={ADAPTER:K,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var rt=/iPhone/i,dt=/iPod/i,Bt=/iPad/i,Tt=/\biOS-universal(?:.+)Mac\b/i,ie=/\bAndroid(?:.+)Mobile\b/i,Kt=/Android/i,Gt=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,$t=/Silk/i,Ht=/Windows Phone/i,re=/\bWindows(?:.+)ARM\b/i,Ne=/BlackBerry/i,se=/BB10/i,pe=/Opera Mini/i,ue=/\b(CriOS|Chrome)(?:.+)Mobile/i,fe=/Mobile(?:.+)Firefox\b/i,Ue=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function ye(e){return function(t){return t.test(e)}}function _e(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var i=t.userAgent,s=i.split("[FBAN");typeof s[1]<"u"&&(i=s[0]),s=i.split("Twitter"),typeof s[1]<"u"&&(i=s[0]);var n=ye(i),a={apple:{phone:n(rt)&&!n(Ht),ipod:n(dt),tablet:!n(rt)&&(n(Bt)||Ue(t))&&!n(Ht),universal:n(Tt),device:(n(rt)||n(dt)||n(Bt)||n(Tt)||Ue(t))&&!n(Ht)},amazon:{phone:n(Gt),tablet:!n(Gt)&&n($t),device:n(Gt)||n($t)},android:{phone:!n(Ht)&&n(Gt)||!n(Ht)&&n(ie),tablet:!n(Ht)&&!n(Gt)&&!n(ie)&&(n($t)||n(Kt)),device:!n(Ht)&&(n(Gt)||n($t)||n(ie)||n(Kt))||n(/\bokhttp\b/i)},windows:{phone:n(Ht),tablet:n(re),device:n(Ht)||n(re)},other:{blackberry:n(Ne),blackberry10:n(se),opera:n(pe),firefox:n(fe),chrome:n(ue),device:n(Ne)||n(se)||n(pe)||n(fe)||n(ue)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}const Pe=(_e.default??_e)(globalThis.navigator);G.RETINA_PREFIX=/@([0-9\.]+)x/,G.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var nt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function et(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ct(e,t,i){return i={path:t,exports:{},require:function(s,n){return E(s,n??i.path)}},e(i,i.exports),i.exports}function O(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function q(e){return e&&Object.prototype.hasOwnProperty.call(e,"default")&&Object.keys(e).length===1?e.default:e}function B(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(i){var s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:function(){return e[i]}})}),t}function E(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var g=ct(function(e){"use strict";var t=Object.prototype.hasOwnProperty,i="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(i=!1));function n(m,_,y){this.fn=m,this.context=_,this.once=y||!1}function a(m,_,y,w,S){if(typeof y!="function")throw new TypeError("The listener must be a function");var R=new n(y,w||m,S),F=i?i+_:_;return m._events[F]?m._events[F].fn?m._events[F]=[m._events[F],R]:m._events[F].push(R):(m._events[F]=R,m._eventsCount++),m}function h(m,_){--m._eventsCount===0?m._events=new s:delete m._events[_]}function c(){this._events=new s,this._eventsCount=0}c.prototype.eventNames=function(){var _=[],y,w;if(this._eventsCount===0)return _;for(w in y=this._events)t.call(y,w)&&_.push(i?w.slice(1):w);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(y)):_},c.prototype.listeners=function(_){var y=i?i+_:_,w=this._events[y];if(!w)return[];if(w.fn)return[w.fn];for(var S=0,R=w.length,F=new Array(R);S<R;S++)F[S]=w[S].fn;return F},c.prototype.listenerCount=function(_){var y=i?i+_:_,w=this._events[y];return w?w.fn?1:w.length:0},c.prototype.emit=function(_,y,w,S,R,F){var $=i?i+_:_;if(!this._events[$])return!1;var W=this._events[$],ot=arguments.length,ut,Q;if(W.fn){switch(W.once&&this.removeListener(_,W.fn,void 0,!0),ot){case 1:return W.fn.call(W.context),!0;case 2:return W.fn.call(W.context,y),!0;case 3:return W.fn.call(W.context,y,w),!0;case 4:return W.fn.call(W.context,y,w,S),!0;case 5:return W.fn.call(W.context,y,w,S,R),!0;case 6:return W.fn.call(W.context,y,w,S,R,F),!0}for(Q=1,ut=new Array(ot-1);Q<ot;Q++)ut[Q-1]=arguments[Q];W.fn.apply(W.context,ut)}else{var at=W.length,At;for(Q=0;Q<at;Q++)switch(W[Q].once&&this.removeListener(_,W[Q].fn,void 0,!0),ot){case 1:W[Q].fn.call(W[Q].context);break;case 2:W[Q].fn.call(W[Q].context,y);break;case 3:W[Q].fn.call(W[Q].context,y,w);break;case 4:W[Q].fn.call(W[Q].context,y,w,S);break;default:if(!ut)for(At=1,ut=new Array(ot-1);At<ot;At++)ut[At-1]=arguments[At];W[Q].fn.apply(W[Q].context,ut)}}return!0},c.prototype.on=function(_,y,w){return a(this,_,y,w,!1)},c.prototype.once=function(_,y,w){return a(this,_,y,w,!0)},c.prototype.removeListener=function(_,y,w,S){var R=i?i+_:_;if(!this._events[R])return this;if(!y)return h(this,R),this;var F=this._events[R];if(F.fn)F.fn===y&&(!S||F.once)&&(!w||F.context===w)&&h(this,R);else{for(var $=0,W=[],ot=F.length;$<ot;$++)(F[$].fn!==y||S&&!F[$].once||w&&F[$].context!==w)&&W.push(F[$]);W.length?this._events[R]=W.length===1?W[0]:W:h(this,R)}return this},c.prototype.removeAllListeners=function(_){var y;return _?(y=i?i+_:_,this._events[y]&&h(this,y)):(this._events=new s,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=i,c.EventEmitter=c,e.exports=c}),A=I,H=I;function I(e,t,i){i=i||2;var s=t&&t.length,n=s?t[0]*i:e.length,a=J(e,0,n,i,!0),h=[];if(!a||a.next===a.prev)return h;var c,m,_,y,w,S,R;if(s&&(a=Oe(e,t,a,i)),e.length>80*i){c=_=e[0],m=y=e[1];for(var F=i;F<n;F+=i)w=e[F],S=e[F+1],w<c&&(c=w),S<m&&(m=S),w>_&&(_=w),S>y&&(y=S);R=Math.max(_-c,y-m),R=R!==0?32767/R:0}return ht(a,h,i,c,m,R,0),h}function J(e,t,i,s,n){var a,h;if(n===ge(e,t,i,s)>0)for(a=t;a<i;a+=s)h=Mt(a,e[a],e[a+1],h);else for(a=i-s;a>=t;a-=s)h=Mt(a,e[a],e[a+1],h);return h&&rr(h,h.next)&&(zt(h),h=h.next),h}function it(e,t){if(!e)return e;t||(t=e);var i=e,s;do if(s=!1,!i.steiner&&(rr(i,i.next)||me(i.prev,i,i.next)===0)){if(zt(i),i=t=i.prev,i===i.next)break;s=!0}else i=i.next;while(s||i!==t);return t}function ht(e,t,i,s,n,a,h){if(e){!h&&a&&ir(e,s,n,a);for(var c=e,m,_;e.prev!==e.next;){if(m=e.prev,_=e.next,a?Et(e,s,n,a):_t(e)){t.push(m.i/i|0),t.push(e.i/i|0),t.push(_.i/i|0),zt(e),e=_.next,c=_.next;continue}if(e=_,e===c){h?h===1?(e=kt(it(e),t,i),ht(e,t,i,s,n,a,2)):h===2&&ae(e,t,i,s,n,a):ht(it(e),t,i,s,n,a,1);break}}}}function _t(e){var t=e.prev,i=e,s=e.next;if(me(t,i,s)>=0)return!1;for(var n=t.x,a=i.x,h=s.x,c=t.y,m=i.y,_=s.y,y=n<a?n<h?n:h:a<h?a:h,w=c<m?c<_?c:_:m<_?m:_,S=n>a?n>h?n:h:a>h?a:h,R=c>m?c>_?c:_:m>_?m:_,F=s.next;F!==t;){if(F.x>=y&&F.x<=S&&F.y>=w&&F.y<=R&&Nt(n,c,a,m,h,_,F.x,F.y)&&me(F.prev,F,F.next)>=0)return!1;F=F.next}return!0}function Et(e,t,i,s){var n=e.prev,a=e,h=e.next;if(me(n,a,h)>=0)return!1;for(var c=n.x,m=a.x,_=h.x,y=n.y,w=a.y,S=h.y,R=c<m?c<_?c:_:m<_?m:_,F=y<w?y<S?y:S:w<S?w:S,$=c>m?c>_?c:_:m>_?m:_,W=y>w?y>S?y:S:w>S?w:S,ot=ze(R,F,t,i,s),ut=ze($,W,t,i,s),Q=e.prevZ,at=e.nextZ;Q&&Q.z>=ot&&at&&at.z<=ut;){if(Q.x>=R&&Q.x<=$&&Q.y>=F&&Q.y<=W&&Q!==n&&Q!==h&&Nt(c,y,m,w,_,S,Q.x,Q.y)&&me(Q.prev,Q,Q.next)>=0||(Q=Q.prevZ,at.x>=R&&at.x<=$&&at.y>=F&&at.y<=W&&at!==n&&at!==h&&Nt(c,y,m,w,_,S,at.x,at.y)&&me(at.prev,at,at.next)>=0))return!1;at=at.nextZ}for(;Q&&Q.z>=ot;){if(Q.x>=R&&Q.x<=$&&Q.y>=F&&Q.y<=W&&Q!==n&&Q!==h&&Nt(c,y,m,w,_,S,Q.x,Q.y)&&me(Q.prev,Q,Q.next)>=0)return!1;Q=Q.prevZ}for(;at&&at.z<=ut;){if(at.x>=R&&at.x<=$&&at.y>=F&&at.y<=W&&at!==n&&at!==h&&Nt(c,y,m,w,_,S,at.x,at.y)&&me(at.prev,at,at.next)>=0)return!1;at=at.nextZ}return!0}function kt(e,t,i){var s=e;do{var n=s.prev,a=s.next.next;!rr(n,a)&&Pn(n,s,s.next,a)&&st(n,a)&&st(a,n)&&(t.push(n.i/i|0),t.push(s.i/i|0),t.push(a.i/i|0),zt(s),zt(s.next),s=e=a),s=s.next}while(s!==e);return it(s)}function ae(e,t,i,s,n,a){var h=e;do{for(var c=h.next.next;c!==h.prev;){if(h.i!==c.i&&os(h,c)){var m=vt(h,c);h=it(h,h.next),m=it(m,m.next),ht(h,t,i,s,n,a,0),ht(m,t,i,s,n,a,0);return}c=c.next}h=h.next}while(h!==e)}function Oe(e,t,i,s){var n=[],a,h,c,m,_;for(a=0,h=t.length;a<h;a++)c=t[a]*s,m=a<h-1?t[a+1]*s:e.length,_=J(e,c,m,s,!1),_===_.next&&(_.steiner=!0),n.push(fr(_));for(n.sort(Fe),a=0;a<n.length;a++)i=pi(n[a],i);return i}function Fe(e,t){return e.x-t.x}function pi(e,t){var i=ri(e,t);if(!i)return t;var s=vt(i,e);return it(s,s.next),it(i,i.next)}function ri(e,t){var i=t,s=e.x,n=e.y,a=-1/0,h;do{if(n<=i.y&&n>=i.next.y&&i.next.y!==i.y){var c=i.x+(n-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(c<=s&&c>a&&(a=c,h=i.x<i.next.x?i:i.next,c===s))return h}i=i.next}while(i!==t);if(!h)return null;var m=h,_=h.x,y=h.y,w=1/0,S;i=h;do s>=i.x&&i.x>=_&&s!==i.x&&Nt(n<y?s:a,n,_,y,n<y?a:s,n,i.x,i.y)&&(S=Math.abs(n-i.y)/(s-i.x),st(i,e)&&(S<w||S===w&&(i.x>h.x||i.x===h.x&&As(h,i)))&&(h=i,w=S)),i=i.next;while(i!==m);return h}function As(e,t){return me(e.prev,e,t.prev)<0&&me(t.next,e,e.next)<0}function ir(e,t,i,s){var n=e;do n.z===0&&(n.z=ze(n.x,n.y,t,i,s)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next;while(n!==e);n.prevZ.nextZ=null,n.prevZ=null,ur(n)}function ur(e){var t,i,s,n,a,h,c,m,_=1;do{for(i=e,e=null,a=null,h=0;i;){for(h++,s=i,c=0,t=0;t<_&&(c++,s=s.nextZ,!!s);t++);for(m=_;c>0||m>0&&s;)c!==0&&(m===0||!s||i.z<=s.z)?(n=i,i=i.nextZ,c--):(n=s,s=s.nextZ,m--),a?a.nextZ=n:e=n,n.prevZ=a,a=n;i=s}a.nextZ=null,_*=2}while(h>1);return e}function ze(e,t,i,s,n){return e=(e-i)*n|0,t=(t-s)*n|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function fr(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function Nt(e,t,i,s,n,a,h,c){return(n-h)*(t-c)>=(e-h)*(a-c)&&(e-h)*(s-c)>=(i-h)*(t-c)&&(i-h)*(a-c)>=(n-h)*(s-c)}function os(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!gt(e,t)&&(st(e,t)&&st(t,e)&&pt(e,t)&&(me(e.prev,e,t.prev)||me(e,t.prev,t))||rr(e,t)&&me(e.prev,e,e.next)>0&&me(t.prev,t,t.next)>0)}function me(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function rr(e,t){return e.x===t.x&&e.y===t.y}function Pn(e,t,i,s){var n=tt(me(e,t,i)),a=tt(me(e,t,s)),h=tt(me(i,s,e)),c=tt(me(i,s,t));return!!(n!==a&&h!==c||n===0&&Zi(e,i,t)||a===0&&Zi(e,s,t)||h===0&&Zi(i,e,s)||c===0&&Zi(i,t,s))}function Zi(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function tt(e){return e>0?1:e<0?-1:0}function gt(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&Pn(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function st(e,t){return me(e.prev,e,e.next)<0?me(e,t,e.next)>=0&&me(e,e.prev,t)>=0:me(e,t,e.prev)<0||me(e,e.next,t)<0}function pt(e,t){var i=e,s=!1,n=(e.x+t.x)/2,a=(e.y+t.y)/2;do i.y>a!=i.next.y>a&&i.next.y!==i.y&&n<(i.next.x-i.x)*(a-i.y)/(i.next.y-i.y)+i.x&&(s=!s),i=i.next;while(i!==e);return s}function vt(e,t){var i=new mt(e.i,e.x,e.y),s=new mt(t.i,t.x,t.y),n=e.next,a=t.prev;return e.next=t,t.prev=e,i.next=n,n.prev=i,s.next=i,i.prev=s,a.next=s,s.prev=a,s}function Mt(e,t,i,s){var n=new mt(e,t,i);return s?(n.next=s.next,n.prev=s,s.next.prev=n,s.next=n):(n.prev=n,n.next=n),n}function zt(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function mt(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}I.deviation=function(e,t,i,s){var n=t&&t.length,a=n?t[0]*i:e.length,h=Math.abs(ge(e,0,a,i));if(n)for(var c=0,m=t.length;c<m;c++){var _=t[c]*i,y=c<m-1?t[c+1]*i:e.length;h-=Math.abs(ge(e,_,y,i))}var w=0;for(c=0;c<s.length;c+=3){var S=s[c]*i,R=s[c+1]*i,F=s[c+2]*i;w+=Math.abs((e[S]-e[F])*(e[R+1]-e[S+1])-(e[S]-e[R])*(e[F+1]-e[S+1]))}return h===0&&w===0?0:Math.abs((w-h)/h)};function ge(e,t,i,s){for(var n=0,a=t,h=i-s;a<i;a+=s)n+=(e[h]-e[a])*(e[a+1]+e[h+1]),h=a;return n}I.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},s=0,n=0;n<e.length;n++){for(var a=0;a<e[n].length;a++)for(var h=0;h<t;h++)i.vertices.push(e[n][a][h]);n>0&&(s+=e[n-1].length,i.holes.push(s))}return i},A.default=H;var xe=ct(function(e,t){(function(i){var s=t&&!t.nodeType&&t,n=e&&!e.nodeType&&e,a=typeof nt=="object"&&nt;(a.global===a||a.window===a||a.self===a)&&(i=a);var h,c=2147483647,m=36,_=1,y=26,w=38,S=700,R=72,F=128,$="-",W=/^xn--/,ot=/[^\x20-\x7E]/,ut=/[\x2E\u3002\uFF0E\uFF61]/g,Q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},at=m-_,At=Math.floor,Lt=String.fromCharCode,Pt;function bt(Yt){throw RangeError(Q[Yt])}function Zt(Yt,ce){for(var Ie=Yt.length,$e=[];Ie--;)$e[Ie]=ce(Yt[Ie]);return $e}function St(Yt,ce){var Ie=Yt.split("@"),$e="";Ie.length>1&&($e=Ie[0]+"@",Yt=Ie[1]),Yt=Yt.replace(ut,".");var ti=Yt.split("."),Ni=Zt(ti,ce).join(".");return $e+Ni}function Dt(Yt){for(var ce=[],Ie=0,$e=Yt.length,ti,Ni;Ie<$e;)ti=Yt.charCodeAt(Ie++),ti>=55296&&ti<=56319&&Ie<$e?(Ni=Yt.charCodeAt(Ie++),(Ni&64512)==56320?ce.push(((ti&1023)<<10)+(Ni&1023)+65536):(ce.push(ti),Ie--)):ce.push(ti);return ce}function ve(Yt){return Zt(Yt,function(ce){var Ie="";return ce>65535&&(ce-=65536,Ie+=Lt(ce>>>10&1023|55296),ce=56320|ce&1023),Ie+=Lt(ce),Ie}).join("")}function yt(Yt){return Yt-48<10?Yt-22:Yt-65<26?Yt-65:Yt-97<26?Yt-97:m}function xt(Yt,ce){return Yt+22+75*(Yt<26)-((ce!=0)<<5)}function De(Yt,ce,Ie){var $e=0;for(Yt=Ie?At(Yt/S):Yt>>1,Yt+=At(Yt/ce);Yt>at*y>>1;$e+=m)Yt=At(Yt/at);return At($e+(at+1)*Yt/(Yt+w))}function ne(Yt){var ce=[],Ie=Yt.length,$e,ti=0,Ni=F,Ci=R,Ui,er,Nr,$i,li,Pi,Oi,Ws,Ys;for(Ui=Yt.lastIndexOf($),Ui<0&&(Ui=0),er=0;er<Ui;++er)Yt.charCodeAt(er)>=128&&bt("not-basic"),ce.push(Yt.charCodeAt(er));for(Nr=Ui>0?Ui+1:0;Nr<Ie;){for($i=ti,li=1,Pi=m;Nr>=Ie&&bt("invalid-input"),Oi=yt(Yt.charCodeAt(Nr++)),(Oi>=m||Oi>At((c-ti)/li))&&bt("overflow"),ti+=Oi*li,Ws=Pi<=Ci?_:Pi>=Ci+y?y:Pi-Ci,!(Oi<Ws);Pi+=m)Ys=m-Ws,li>At(c/Ys)&&bt("overflow"),li*=Ys;$e=ce.length+1,Ci=De(ti-$i,$e,$i==0),At(ti/$e)>c-Ni&&bt("overflow"),Ni+=At(ti/$e),ti%=$e,ce.splice(ti++,0,Ni)}return ve(ce)}function he(Yt){var ce,Ie,$e,ti,Ni,Ci,Ui,er,Nr,$i,li,Pi=[],Oi,Ws,Ys,_h;for(Yt=Dt(Yt),Oi=Yt.length,ce=F,Ie=0,Ni=R,Ci=0;Ci<Oi;++Ci)li=Yt[Ci],li<128&&Pi.push(Lt(li));for($e=ti=Pi.length,ti&&Pi.push($);$e<Oi;){for(Ui=c,Ci=0;Ci<Oi;++Ci)li=Yt[Ci],li>=ce&&li<Ui&&(Ui=li);for(Ws=$e+1,Ui-ce>At((c-Ie)/Ws)&&bt("overflow"),Ie+=(Ui-ce)*Ws,ce=Ui,Ci=0;Ci<Oi;++Ci)if(li=Yt[Ci],li<ce&&++Ie>c&&bt("overflow"),li==ce){for(er=Ie,Nr=m;$i=Nr<=Ni?_:Nr>=Ni+y?y:Nr-Ni,!(er<$i);Nr+=m)_h=er-$i,Ys=m-$i,Pi.push(Lt(xt($i+_h%Ys,0))),er=At(_h/Ys);Pi.push(Lt(xt(er,0))),Ni=De(Ie,Ws,$e==ti),Ie=0,++$e}++Ie,++ce}return Pi.join("")}function Xe(Yt){return St(Yt,function(ce){return W.test(ce)?ne(ce.slice(4).toLowerCase()):ce})}function Ae(Yt){return St(Yt,function(ce){return ot.test(ce)?"xn--"+he(ce):ce})}if(h={version:"1.3.2",ucs2:{decode:Dt,encode:ve},decode:ne,encode:he,toASCII:Ae,toUnicode:Xe},s&&n)if(e.exports==s)n.exports=h;else for(Pt in h)h.hasOwnProperty(Pt)&&(s[Pt]=h[Pt]);else i.punycode=h})(nt)}),Ft={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}};function Vt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var Hi=function(e,t,i,s){t=t||"&",i=i||"=";var n={};if(typeof e!="string"||e.length===0)return n;var a=/\+/g;e=e.split(t);var h=1e3;s&&typeof s.maxKeys=="number"&&(h=s.maxKeys);var c=e.length;h>0&&c>h&&(c=h);for(var m=0;m<c;++m){var _=e[m].replace(a,"%20"),y=_.indexOf(i),w,S,R,F;y>=0?(w=_.substr(0,y),S=_.substr(y+1)):(w=_,S=""),R=decodeURIComponent(w),F=decodeURIComponent(S),Vt(n,R)?Array.isArray(n[R])?n[R].push(F):n[R]=[n[R],F]:n[R]=F}return n},bi=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Ti=function(e,t,i,s){return t=t||"&",i=i||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(n){var a=encodeURIComponent(bi(n))+i;return Array.isArray(e[n])?e[n].map(function(h){return a+encodeURIComponent(bi(h))}).join(t):a+encodeURIComponent(bi(e[n]))}).join(t):s?encodeURIComponent(bi(s))+i+encodeURIComponent(bi(e)):""},qt=ct(function(e,t){"use strict";t.decode=t.parse=Hi,t.encode=t.stringify=Ti}),Ot=pr,oe=Os,be=Ge,Re=Is,Ri=te;function te(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Mn=/^([a-z0-9.+-]+:)/i,pl=/:[0-9]*$/,Cs=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,dr=["<",">",'"',"`"," ","\r",`
`,"	"],mo=["{","}","|","\\","^","`"].concat(dr),mi=["'"].concat(mo),ji=["%","/","?",";","#"].concat(mi),Rr=["/","?","#"],Ps=255,Dr=/^[+a-z0-9A-Z_-]{0,63}$/,Ms=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Rs={javascript:!0,"javascript:":!0},wi={javascript:!0,"javascript:":!0},Ds={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function pr(e,t,i){if(e&&Ft.isObject(e)&&e instanceof te)return e;var s=new te;return s.parse(e,t,i),s}te.prototype.parse=function(e,t,i){if(!Ft.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var s=e.indexOf("?"),n=s!==-1&&s<e.indexOf("#")?"?":"#",a=e.split(n),h=/\\/g;a[0]=a[0].replace(h,"/"),e=a.join(n);var c=e;if(c=c.trim(),!i&&e.split("#").length===1){var m=Cs.exec(c);if(m)return this.path=c,this.href=c,this.pathname=m[1],m[2]?(this.search=m[2],t?this.query=qt.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var _=Mn.exec(c);if(_){_=_[0];var y=_.toLowerCase();this.protocol=y,c=c.substr(_.length)}if(i||_||c.match(/^\/\/[^@\/]+@[^@\/]+/)){var w=c.substr(0,2)==="//";w&&!(_&&wi[_])&&(c=c.substr(2),this.slashes=!0)}if(!wi[_]&&(w||_&&!Ds[_])){for(var S=-1,R=0;R<Rr.length;R++){var F=c.indexOf(Rr[R]);F!==-1&&(S===-1||F<S)&&(S=F)}var $,W;S===-1?W=c.lastIndexOf("@"):W=c.lastIndexOf("@",S),W!==-1&&($=c.slice(0,W),c=c.slice(W+1),this.auth=decodeURIComponent($)),S=-1;for(var R=0;R<ji.length;R++){var F=c.indexOf(ji[R]);F!==-1&&(S===-1||F<S)&&(S=F)}S===-1&&(S=c.length),this.host=c.slice(0,S),c=c.slice(S),this.parseHost(),this.hostname=this.hostname||"";var ot=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!ot)for(var ut=this.hostname.split(/\./),R=0,Q=ut.length;R<Q;R++){var at=ut[R];if(at&&!at.match(Dr)){for(var At="",Lt=0,Pt=at.length;Lt<Pt;Lt++)at.charCodeAt(Lt)>127?At+="x":At+=at[Lt];if(!At.match(Dr)){var bt=ut.slice(0,R),Zt=ut.slice(R+1),St=at.match(Ms);St&&(bt.push(St[1]),Zt.unshift(St[2])),Zt.length&&(c="/"+Zt.join(".")+c),this.hostname=bt.join(".");break}}}this.hostname.length>Ps?this.hostname="":this.hostname=this.hostname.toLowerCase(),ot||(this.hostname=xe.toASCII(this.hostname));var Dt=this.port?":"+this.port:"",ve=this.hostname||"";this.host=ve+Dt,this.href+=this.host,ot&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),c[0]!=="/"&&(c="/"+c))}if(!Rs[y])for(var R=0,Q=mi.length;R<Q;R++){var yt=mi[R];if(c.indexOf(yt)!==-1){var xt=encodeURIComponent(yt);xt===yt&&(xt=escape(yt)),c=c.split(yt).join(xt)}}var De=c.indexOf("#");De!==-1&&(this.hash=c.substr(De),c=c.slice(0,De));var ne=c.indexOf("?");if(ne!==-1?(this.search=c.substr(ne),this.query=c.substr(ne+1),t&&(this.query=qt.parse(this.query)),c=c.slice(0,ne)):t&&(this.search="",this.query={}),c&&(this.pathname=c),Ds[y]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var Dt=this.pathname||"",he=this.search||"";this.path=Dt+he}return this.href=this.format(),this};function Is(e){return Ft.isString(e)&&(e=pr(e)),e instanceof te?e.format():te.prototype.format.call(e)}te.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",s=this.hash||"",n=!1,a="";this.host?n=e+this.host:this.hostname&&(n=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(n+=":"+this.port)),this.query&&Ft.isObject(this.query)&&Object.keys(this.query).length&&(a=qt.stringify(this.query));var h=this.search||a&&"?"+a||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Ds[t])&&n!==!1?(n="//"+(n||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):n||(n=""),s&&s.charAt(0)!=="#"&&(s="#"+s),h&&h.charAt(0)!=="?"&&(h="?"+h),i=i.replace(/[?#]/g,function(c){return encodeURIComponent(c)}),h=h.replace("#","%23"),t+n+i+h+s};function Os(e,t){return pr(e,!1,!0).resolve(t)}te.prototype.resolve=function(e){return this.resolveObject(pr(e,!1,!0)).format()};function Ge(e,t){return e?pr(e,!1,!0).resolveObject(t):t}te.prototype.resolveObject=function(e){if(Ft.isString(e)){var t=new te;t.parse(e,!1,!0),e=t}for(var i=new te,s=Object.keys(this),n=0;n<s.length;n++){var a=s[n];i[a]=this[a]}if(i.hash=e.hash,e.href==="")return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var h=Object.keys(e),c=0;c<h.length;c++){var m=h[c];m!=="protocol"&&(i[m]=e[m])}return Ds[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!Ds[e.protocol]){for(var _=Object.keys(e),y=0;y<_.length;y++){var w=_[y];i[w]=e[w]}return i.href=i.format(),i}if(i.protocol=e.protocol,!e.host&&!wi[e.protocol]){for(var Q=(e.pathname||"").split("/");Q.length&&!(e.host=Q.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),Q[0]!==""&&Q.unshift(""),Q.length<2&&Q.unshift(""),i.pathname=Q.join("/")}else i.pathname=e.pathname;if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var S=i.pathname||"",R=i.search||"";i.path=S+R}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var F=i.pathname&&i.pathname.charAt(0)==="/",$=e.host||e.pathname&&e.pathname.charAt(0)==="/",W=$||F||i.host&&e.pathname,ot=W,ut=i.pathname&&i.pathname.split("/")||[],Q=e.pathname&&e.pathname.split("/")||[],at=i.protocol&&!Ds[i.protocol];if(at&&(i.hostname="",i.port=null,i.host&&(ut[0]===""?ut[0]=i.host:ut.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(Q[0]===""?Q[0]=e.host:Q.unshift(e.host)),e.host=null),W=W&&(Q[0]===""||ut[0]==="")),$)i.host=e.host||e.host===""?e.host:i.host,i.hostname=e.hostname||e.hostname===""?e.hostname:i.hostname,i.search=e.search,i.query=e.query,ut=Q;else if(Q.length)ut||(ut=[]),ut.pop(),ut=ut.concat(Q),i.search=e.search,i.query=e.query;else if(!Ft.isNullOrUndefined(e.search)){if(at){i.hostname=i.host=ut.shift();var At=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;At&&(i.auth=At.shift(),i.host=i.hostname=At.shift())}return i.search=e.search,i.query=e.query,(!Ft.isNull(i.pathname)||!Ft.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!ut.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var Lt=ut.slice(-1)[0],Pt=(i.host||e.host||ut.length>1)&&(Lt==="."||Lt==="..")||Lt==="",bt=0,Zt=ut.length;Zt>=0;Zt--)Lt=ut[Zt],Lt==="."?ut.splice(Zt,1):Lt===".."?(ut.splice(Zt,1),bt++):bt&&(ut.splice(Zt,1),bt--);if(!W&&!ot)for(;bt--;bt)ut.unshift("..");W&&ut[0]!==""&&(!ut[0]||ut[0].charAt(0)!=="/")&&ut.unshift(""),Pt&&ut.join("/").substr(-1)!=="/"&&ut.push("");var St=ut[0]===""||ut[0]&&ut[0].charAt(0)==="/";if(at){i.hostname=i.host=St?"":ut.length?ut.shift():"";var At=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;At&&(i.auth=At.shift(),i.host=i.hostname=At.shift())}return W=W||i.host&&ut.length,W&&!St&&ut.unshift(""),ut.length?i.pathname=ut.join("/"):(i.pathname=null,i.path=null),(!Ft.isNull(i.pathname)||!Ft.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i},te.prototype.parseHost=function(){var e=this.host,t=pl.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};var _a={parse:Ot,resolve:oe,resolveObject:be,format:Re,Url:Ri};const Xh={parse:Ot,format:Re,resolve:oe};function Se(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function jr(e){return e.split("?")[0].split("#")[0]}function Di(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ke(e,t,i){return e.replace(new RegExp(Di(t),"g"),i)}function Wh(e,t){let i="",s=0,n=-1,a=0,h=-1;for(let c=0;c<=e.length;++c){if(c<e.length)h=e.charCodeAt(c);else{if(h===47)break;h=47}if(h===47){if(!(n===c-1||a===1))if(n!==c-1&&a===2){if(i.length<2||s!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const m=i.lastIndexOf("/");if(m!==i.length-1){m===-1?(i="",s=0):(i=i.slice(0,m),s=i.length-1-i.lastIndexOf("/")),n=c,a=0;continue}}else if(i.length===2||i.length===1){i="",s=0,n=c,a=0;continue}}t&&(i.length>0?i+="/..":i="..",s=2)}else i.length>0?i+=`/${e.slice(n+1,c)}`:i=e.slice(n+1,c),s=c-n-1;n=c,a=0}else h===46&&a!==-1?++a:a=-1}return i}const si={toPosix(e){return ke(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){Se(e),e=this.toPosix(e);let t="";const i=/^file:\/\/\//.exec(e),s=/^[^/:]+:\/\//.exec(e),n=/^[^/:]+:\//.exec(e);if(i||s||n){const a=i?.[0]||s?.[0]||n?.[0];t=a,e=e.slice(a.length)}return t},toAbsolute(e,t,i){if(this.isDataUrl(e))return e;const s=jr(this.toPosix(t??G.ADAPTER.getBaseUrl())),n=jr(this.toPosix(i??this.rootname(s)));return Se(e),e=this.toPosix(e),e.startsWith("/")?si.join(n,e.slice(1)):this.isAbsolute(e)?e:this.join(s,e)},normalize(e){if(e=this.toPosix(e),Se(e),e.length===0)return".";let t="";const i=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const s=e.endsWith("/");return e=Wh(e,!1),e.length>0&&s&&(e+="/"),i?`/${e}`:t+e},isAbsolute(e){return Se(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let i=0;i<e.length;++i){const s=e[i];if(Se(s),s.length>0)if(t===void 0)t=s;else{const n=e[i-1]??"";this.extname(n)?t+=`/../${s}`:t+=`/${s}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(Se(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const i=t===47;let s=-1,n=!0;const a=this.getProtocol(e),h=e;e=e.slice(a.length);for(let c=e.length-1;c>=1;--c)if(t=e.charCodeAt(c),t===47){if(!n){s=c;break}}else n=!1;return s===-1?i?"/":this.isUrl(h)?a+e:a:i&&s===1?"//":a+e.slice(0,s)},rootname(e){Se(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const i=e.indexOf("/",t.length);i!==-1?t=e.slice(0,i):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){Se(e),t&&Se(t),e=jr(this.toPosix(e));let i=0,s=-1,n=!0,a;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let h=t.length-1,c=-1;for(a=e.length-1;a>=0;--a){const m=e.charCodeAt(a);if(m===47){if(!n){i=a+1;break}}else c===-1&&(n=!1,c=a+1),h>=0&&(m===t.charCodeAt(h)?--h===-1&&(s=a):(h=-1,s=c))}return i===s?s=c:s===-1&&(s=e.length),e.slice(i,s)}for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!n){i=a+1;break}}else s===-1&&(n=!1,s=a+1);return s===-1?"":e.slice(i,s)},extname(e){Se(e),e=jr(this.toPosix(e));let t=-1,i=0,s=-1,n=!0,a=0;for(let h=e.length-1;h>=0;--h){const c=e.charCodeAt(h);if(c===47){if(!n){i=h+1;break}continue}s===-1&&(n=!1,s=h+1),c===46?t===-1?t=h:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||s===-1||a===0||a===1&&t===s-1&&t===i+1?"":e.slice(t,s)},parse(e){Se(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=jr(this.toPosix(e));let i=e.charCodeAt(0);const s=this.isAbsolute(e);let n;const a="";t.root=this.rootname(e),s||this.hasProtocol(e)?n=1:n=0;let h=-1,c=0,m=-1,_=!0,y=e.length-1,w=0;for(;y>=n;--y){if(i=e.charCodeAt(y),i===47){if(!_){c=y+1;break}continue}m===-1&&(_=!1,m=y+1),i===46?h===-1?h=y:w!==1&&(w=1):h!==-1&&(w=-1)}return h===-1||m===-1||w===0||w===1&&h===m-1&&h===c+1?m!==-1&&(c===0&&s?t.base=t.name=e.slice(1,m):t.base=t.name=e.slice(c,m)):(c===0&&s?(t.name=e.slice(1,h),t.base=e.slice(1,m)):(t.name=e.slice(c,h),t.base=e.slice(c,m)),t.ext=e.slice(h,m)),t.dir=this.dirname(e),a&&(t.dir=a+t.dir),t},sep:"/",delimiter:":"},va={};function ee(e,t,i=3){if(va[t])return;let s=new Error().stack;typeof s>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
  Deprecated since v${e}`):(s=s.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
  Deprecated since v${e}`),console.warn(s),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
  Deprecated since v${e}`),console.warn(s))),va[t]=!0}function ks(){ee("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function Rn(){ee("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}let tn;function Rt(){return typeof tn>"u"&&(tn=function(){const t={stencil:!0,failIfMajorPerformanceCaveat:G.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!G.ADAPTER.getWebGLRenderingContext())return!1;const i=G.ADAPTER.createCanvas();let s=i.getContext("webgl",t)||i.getContext("experimental-webgl",t);const n=!!s?.getContextAttributes()?.stencil;if(s){const a=s.getExtension("WEBGL_lose_context");a&&a.loseContext()}return s=null,n}catch{return!1}}()),tn}var Ls={grad:.9,turn:360,rad:360/(2*Math.PI)},Si=function(e){return typeof e=="string"?e.length>0:typeof e=="number"},Be=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=Math.pow(10,t)),Math.round(i*e)/i+0},Xi=function(e,t,i){return t===void 0&&(t=0),i===void 0&&(i=1),e>i?i:e>t?e:t},go=function(e){return(e=isFinite(e)?e%360:0)>0?e:e+360},Ir=function(e){return{r:Xi(e.r,0,255),g:Xi(e.g,0,255),b:Xi(e.b,0,255),a:Xi(e.a)}},Xr=function(e){return{r:Be(e.r),g:Be(e.g),b:Be(e.b),a:Be(e.a,3)}},ml=/^#([0-9a-f]{3,8})$/i,ni=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},as=function(e){var t=e.r,i=e.g,s=e.b,n=e.a,a=Math.max(t,i,s),h=a-Math.min(t,i,s),c=h?a===t?(i-s)/h:a===i?2+(s-t)/h:4+(t-i)/h:0;return{h:60*(c<0?c+6:c),s:a?h/a*100:0,v:a/255*100,a:n}},Qe=function(e){var t=e.h,i=e.s,s=e.v,n=e.a;t=t/360*6,i/=100,s/=100;var a=Math.floor(t),h=s*(1-i),c=s*(1-(t-a)*i),m=s*(1-(1-t+a)*i),_=a%6;return{r:255*[s,c,h,h,m,s][_],g:255*[m,s,s,c,h,h][_],b:255*[h,h,m,s,s,c][_],a:n}},Wi=function(e){return{h:go(e.h),s:Xi(e.s,0,100),l:Xi(e.l,0,100),a:Xi(e.a)}},Dn=function(e){return{h:Be(e.h),s:Be(e.s),l:Be(e.l),a:Be(e.a,3)}},_o=function(e){return Qe((i=(t=e).s,{h:t.h,s:(i*=((s=t.l)<50?s:100-s)/100)>0?2*i/(s+i)*100:0,v:s+i,a:t.a}));var t,i,s},Li=function(e){return{h:(t=as(e)).h,s:(n=(200-(i=t.s))*(s=t.v)/100)>0&&n<200?i*s/100/(n<=100?n:200-n)*100:0,l:n/2,a:t.a};var t,i,s,n},vo=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,yo=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,gl=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xo=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,en={string:[[function(e){var t=ml.exec(e);return t?(e=t[1]).length<=4?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?Be(parseInt(e[3]+e[3],16)/255,2):1}:e.length===6||e.length===8?{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),a:e.length===8?Be(parseInt(e.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(e){var t=gl.exec(e)||xo.exec(e);return t?t[2]!==t[4]||t[4]!==t[6]?null:Ir({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:t[7]===void 0?1:Number(t[7])/(t[8]?100:1)}):null},"rgb"],[function(e){var t=vo.exec(e)||yo.exec(e);if(!t)return null;var i,s,n=Wi({h:(i=t[1],s=t[2],s===void 0&&(s="deg"),Number(i)*(Ls[s]||1)),s:Number(t[3]),l:Number(t[4]),a:t[5]===void 0?1:Number(t[5])/(t[6]?100:1)});return _o(n)},"hsl"]],object:[[function(e){var t=e.r,i=e.g,s=e.b,n=e.a,a=n===void 0?1:n;return Si(t)&&Si(i)&&Si(s)?Ir({r:Number(t),g:Number(i),b:Number(s),a:Number(a)}):null},"rgb"],[function(e){var t=e.h,i=e.s,s=e.l,n=e.a,a=n===void 0?1:n;if(!Si(t)||!Si(i)||!Si(s))return null;var h=Wi({h:Number(t),s:Number(i),l:Number(s),a:Number(a)});return _o(h)},"hsl"],[function(e){var t=e.h,i=e.s,s=e.v,n=e.a,a=n===void 0?1:n;if(!Si(t)||!Si(i)||!Si(s))return null;var h=function(c){return{h:go(c.h),s:Xi(c.s,0,100),v:Xi(c.v,0,100),a:Xi(c.a)}}({h:Number(t),s:Number(i),v:Number(s),a:Number(a)});return Qe(h)},"hsv"]]},In=function(e,t){for(var i=0;i<t.length;i++){var s=t[i][0](e);if(s)return[s,t[i][1]]}return[null,void 0]},On=function(e){return typeof e=="string"?In(e.trim(),en.string):typeof e=="object"&&e!==null?In(e,en.object):[null,void 0]},ya=function(e){return On(e)[1]},kn=function(e,t){var i=Li(e);return{h:i.h,s:Xi(i.s+100*t,0,100),l:i.l,a:i.a}},bo=function(e){return(299*e.r+587*e.g+114*e.b)/1e3/255},Ln=function(e,t){var i=Li(e);return{h:i.h,s:i.s,l:Xi(i.l+100*t,0,100),a:i.a}},Fn=function(){function e(t){this.parsed=On(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return e.prototype.isValid=function(){return this.parsed!==null},e.prototype.brightness=function(){return Be(bo(this.rgba),2)},e.prototype.isDark=function(){return bo(this.rgba)<.5},e.prototype.isLight=function(){return bo(this.rgba)>=.5},e.prototype.toHex=function(){return t=Xr(this.rgba),i=t.r,s=t.g,n=t.b,h=(a=t.a)<1?ni(Be(255*a)):"","#"+ni(i)+ni(s)+ni(n)+h;var t,i,s,n,a,h},e.prototype.toRgb=function(){return Xr(this.rgba)},e.prototype.toRgbString=function(){return t=Xr(this.rgba),i=t.r,s=t.g,n=t.b,(a=t.a)<1?"rgba("+i+", "+s+", "+n+", "+a+")":"rgb("+i+", "+s+", "+n+")";var t,i,s,n,a},e.prototype.toHsl=function(){return Dn(Li(this.rgba))},e.prototype.toHslString=function(){return t=Dn(Li(this.rgba)),i=t.h,s=t.s,n=t.l,(a=t.a)<1?"hsla("+i+", "+s+"%, "+n+"%, "+a+")":"hsl("+i+", "+s+"%, "+n+"%)";var t,i,s,n,a},e.prototype.toHsv=function(){return t=as(this.rgba),{h:Be(t.h),s:Be(t.s),v:Be(t.v),a:Be(t.a,3)};var t},e.prototype.invert=function(){return Or({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},e.prototype.saturate=function(t){return t===void 0&&(t=.1),Or(kn(this.rgba,t))},e.prototype.desaturate=function(t){return t===void 0&&(t=.1),Or(kn(this.rgba,-t))},e.prototype.grayscale=function(){return Or(kn(this.rgba,-1))},e.prototype.lighten=function(t){return t===void 0&&(t=.1),Or(Ln(this.rgba,t))},e.prototype.darken=function(t){return t===void 0&&(t=.1),Or(Ln(this.rgba,-t))},e.prototype.rotate=function(t){return t===void 0&&(t=15),this.hue(this.hue()+t)},e.prototype.alpha=function(t){return typeof t=="number"?Or({r:(i=this.rgba).r,g:i.g,b:i.b,a:t}):Be(this.rgba.a,3);var i},e.prototype.hue=function(t){var i=Li(this.rgba);return typeof t=="number"?Or({h:t,s:i.s,l:i.l,a:i.a}):Be(i.h)},e.prototype.isEqual=function(t){return this.toHex()===Or(t).toHex()},e}(),Or=function(e){return e instanceof Fn?e:new Fn(e)},_l=[],vl=function(e){e.forEach(function(t){_l.indexOf(t)<0&&(t(Fn,en),_l.push(t))})},Lu=function(){return new Fn({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};function xa(e,t){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},s={};for(var n in i)s[i[n]]=n;var a={};e.prototype.toName=function(h){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var c,m,_=s[this.toHex()];if(_)return _;if(h?.closest){var y=this.toRgb(),w=1/0,S="black";if(!a.length)for(var R in i)a[R]=new e(i[R]).toRgb();for(var F in i){var $=(c=y,m=a[F],Math.pow(c.r-m.r,2)+Math.pow(c.g-m.g,2)+Math.pow(c.b-m.b,2));$<w&&(w=$,S=F)}return S}},t.string.push([function(h){var c=h.toLowerCase(),m=c==="transparent"?"#0000":i[c];return m?new e(m).toRgb():null},"name"])}vl([xa]);const ls=class{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof ls)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,t){const i=typeof e;if(i!==typeof t)return!1;if(i==="number"||i==="string"||e instanceof Number)return e===t;if(Array.isArray(e)&&Array.isArray(t)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(t))return e.length!==t.length?!1:e.every((n,a)=>n===t[a]);if(e!==null&&t!==null){const n=Object.keys(e),a=Object.keys(t);return n.length!==a.length?!1:n.every(h=>e[h]===t[h])}return e===t}toRgba(){const[e,t,i,s]=this._components;return{r:e,g:t,b:i,a:s}}toRgb(){const[e,t,i]=this._components;return{r:e,g:t,b:i}}toRgbaString(){const[e,t,i]=this.toUint8RgbArray();return`rgba(${e},${t},${i},${this.alpha})`}toUint8RgbArray(e){const[t,i,s]=this._components;return e=e??[],e[0]=Math.round(t*255),e[1]=Math.round(i*255),e[2]=Math.round(s*255),e}toRgbArray(e){e=e??[];const[t,i,s]=this._components;return e[0]=t,e[1]=i,e[2]=s,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[t,i,s,n]=ls.temp.setValue(e)._components;return this._components[0]*=t,this._components[1]*=i,this._components[2]*=s,this._components[3]*=n,this.refreshInt(),this._value=null,this}premultiply(e,t=!0){return t&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e){if(e===1)return(e*255<<24)+this._int;if(e===0)return 0;let t=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return t=t*e+.5|0,i=i*e+.5|0,s=s*e+.5|0,(e*255<<24)+(t<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const t=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[t,i,s]=this._components;return this._components[0]=Math.round(t*e)/e,this._components[1]=Math.round(i*e)/e,this._components[2]=Math.round(s*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[t,i,s,n]=this._components;return e[0]=t,e[1]=i,e[2]=s,e[3]=n,e}normalize(e){let t;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const i=e;t=[(i>>16&255)/255,(i>>8&255)/255,(i&255)/255,1]}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4){e=this._clamp(e);const[i,s,n,a=1]=e;t=[i,s,n,a]}else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4){e=this._clamp(e,0,255);const[i,s,n,a=255]=e;t=[i/255,s/255,n/255,a/255]}else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const s=ls.HEX_PATTERN.exec(e);s&&(e=`#${s[2]}`)}const i=Or(e);if(i.isValid()){const{r:s,g:n,b:a,a:h}=i.rgba;t=[s/255,n/255,a/255,h]}}if(t)this._components.set(t),this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,t,i]=this._components;this._int=(e*255<<16)+(t*255<<8)+(i*255|0)}_clamp(e,t=0,i=1){return typeof e=="number"?Math.min(Math.max(e,t),i):(e.forEach((s,n)=>{e[n]=Math.min(Math.max(s,t),i)}),e)}};let Te=ls;Te.shared=new ls,Te.temp=new ls,Te.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function yl(e,t=[]){return Te.shared.setValue(e).toRgbArray(t)}function Bn(e){return ee("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Te.shared.setValue(e).toHex()}function hi(e){return ee("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),Te.shared.setValue(e).toNumber()}function xl(e){return ee("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Te.shared.setValue(e).toNumber()}function Je(){const e=[],t=[];for(let s=0;s<32;s++)e[s]=s,t[s]=s;e[f.NORMAL_NPM]=f.NORMAL,e[f.ADD_NPM]=f.ADD,e[f.SCREEN_NPM]=f.SCREEN,t[f.NORMAL]=f.NORMAL_NPM,t[f.ADD]=f.ADD_NPM,t[f.SCREEN]=f.SCREEN_NPM;const i=[];return i.push(t),i.push(e),i}const He=Je();function bl(e,t){return He[t?1:0][e]}function Fu(e,t,i,s=!0){return ee("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),Te.shared.setValue(e).premultiply(t,s).toArray(i??new Float32Array(4))}function To(e,t){return ee("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),Te.shared.setValue(e).toPremultiplied(t)}function wo(e,t,i,s=!0){return ee("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),Te.shared.setValue(e).premultiply(t,s).toArray(i??new Float32Array(4))}const Ei=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function Tl(e,t=null){const i=e*6;if(t=t||new Uint16Array(i),t.length!==i)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${i}`);for(let s=0,n=0;s<i;s+=6,n+=4)t[s+0]=n+0,t[s+1]=n+1,t[s+2]=n+2,t[s+3]=n+0,t[s+4]=n+2,t[s+5]=n+3;return t}function Fi(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}const mr={Float32Array,Uint32Array,Int32Array,Uint8Array};function rn(e,t){let i=0,s=0;const n={};for(let m=0;m<e.length;m++)s+=t[m],i+=e[m].length;const a=new ArrayBuffer(i*4);let h=null,c=0;for(let m=0;m<e.length;m++){const _=t[m],y=e[m],w=Fi(y);n[w]||(n[w]=new mr[w](a)),h=n[w];for(let S=0;S<y.length;S++){const R=(S/_|0)*s+c,F=S%_;h[R+F]=y[S]}c+=_}return new Float32Array(a)}function kr(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function Yi(e){return!(e&e-1)&&!!e}function Fs(e){let t=(e>65535?1:0)<<4;e>>>=t;let i=(e>255?1:0)<<3;return e>>>=i,t|=i,i=(e>15?1:0)<<2,e>>>=i,t|=i,i=(e>3?1:0)<<1,e>>>=i,t|=i,t|e>>1}function Wr(e,t,i){const s=e.length;let n;if(t>=s||i===0)return;i=t+i>s?s-t:i;const a=s-i;for(n=t;n<a;++n)e[n]=e[n+i];e.length=a}function Qi(e){return e===0?0:e<0?-1:1}let wl=0;function hs(){return++wl}const ei=class{constructor(e,t,i,s){this.left=e,this.top=t,this.right=i,this.bottom=s}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let So=ei;So.EMPTY=new ei(0,0,0,0);const sn={},Ai=Object.create(null),We=Object.create(null);function ba(){let e;for(e in Ai)Ai[e].destroy();for(e in We)We[e].destroy()}function Nn(){let e;for(e in Ai)delete Ai[e];for(e in We)delete We[e]}class Un{constructor(t,i,s){this._canvas=G.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=s||G.RESOLUTION,this.resize(t,i)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,i){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(i*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Bs(e,t,i){for(let s=0,n=4*i*t;s<t;++s,n+=4)if(e[n+3]!==0)return!1;return!0}function gr(e,t,i,s,n){const a=4*t;for(let h=s,c=s*a+4*i;h<=n;++h,c+=a)if(e[c+3]!==0)return!1;return!0}function Eo(e){const{width:t,height:i}=e,s=e.getContext("2d",{willReadFrequently:!0});if(s===null)throw new TypeError("Failed to get canvas 2D context");const a=s.getImageData(0,0,t,i).data;let h=0,c=0,m=t-1,_=i-1;for(;c<i&&Bs(a,t,c);)++c;if(c===i)return So.EMPTY;for(;Bs(a,t,_);)--_;for(;gr(a,t,h,c,_);)++h;for(;gr(a,t,m,c,_);)--m;return++m,++_,new So(h,c,m,_)}function Ns(e){const t=Eo(e),{width:i,height:s}=t;let n=null;if(!t.isEmpty()){const a=e.getContext("2d");if(a===null)throw new TypeError("Failed to get canvas 2D context");n=a.getImageData(t.left,t.top,i,s)}return{width:i,height:s,data:n}}function _r(e){const t=Ei.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]}}let Gn;function Ao(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,Gn||(Gn=document.createElement("a")),Gn.href=e;const i=Xh.parse(Gn.href),s=!i.port&&t.port===""||i.port===t.port;return i.hostname!==t.hostname||!s||i.protocol!==t.protocol?"anonymous":""}function Yr(e,t=1){const i=G.RETINA_PREFIX?.exec(e);return i?parseFloat(i[1]):t}var Yh={__proto__:null,isMobile:Pe,EventEmitter:g,earcut:A,url:Xh,path:si,sayHello:Rn,skipHello:ks,isWebGLSupported:Rt,hex2rgb:yl,hex2string:Bn,rgb2hex:xl,string2hex:hi,correctBlendMode:bl,premultiplyBlendMode:He,premultiplyRgba:Fu,premultiplyTint:To,premultiplyTintToRgba:wo,DATA_URI:Ei,createIndicesForQuads:Tl,getBufferType:Fi,interleaveTypedArrays:rn,isPow2:Yi,log2:Fs,nextPow2:kr,removeItems:Wr,sign:Qi,uid:hs,deprecation:ee,BoundingBox:So,BaseTextureCache:We,ProgramCache:sn,TextureCache:Ai,clearTextureCache:Nn,destroyTextureCache:ba,CanvasRenderTarget:Un,getCanvasBoundingBox:Eo,trimCanvas:Ns,decomposeDataUri:_r,determineCrossOrigin:Ao,getResolutionOfUrl:Yr},It=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(It||{});const Ta=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},$h=(e,t)=>Ta(e).priority??t,Xt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Ta).forEach(t=>{t.type.forEach(i=>this._removeHandlers[i]?.(t))}),this},add(...e){return e.map(Ta).forEach(t=>{t.type.forEach(i=>{const s=this._addHandlers,n=this._queue;s[i]?s[i](t):(n[i]=n[i]||[],n[i].push(t))})}),this},handle(e,t,i){const s=this._addHandlers,n=this._removeHandlers;if(s[e]||n[e])throw new Error(`Extension type ${e} already has a handler`);s[e]=t,n[e]=i;const a=this._queue;return a[e]&&(a[e].forEach(h=>t(h)),delete a[e]),this},handleByMap(e,t){return this.handle(e,i=>{t[i.name]=i.ref},i=>{delete t[i.name]})},handleByList(e,t,i=-1){return this.handle(e,s=>{t.includes(s.ref)||(t.push(s.ref),t.sort((n,a)=>$h(a,i)-$h(n,i)))},s=>{const n=t.indexOf(s.ref);n!==-1&&t.splice(n,1)})}};class Co{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const Sl=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function El(e){let t="";for(let i=0;i<e;++i)i>0&&(t+=`
else `),i<e-1&&(t+=`if(test == ${i}.0){}`);return t}function Al(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=t.createShader(t.FRAGMENT_SHADER);for(;;){const s=Sl.replace(/%forloop%/gi,El(e));if(t.shaderSource(i,s),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))e=e/2|0;else break}return e}const Lr=0,Jt=1,Cl=2,zn=3,Vn=4,Hn=5;class sr{constructor(){this.data=0,this.blendMode=f.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Lr)}set blend(t){!!(this.data&1<<Lr)!==t&&(this.data^=1<<Lr)}get offsets(){return!!(this.data&1<<Jt)}set offsets(t){!!(this.data&1<<Jt)!==t&&(this.data^=1<<Jt)}get culling(){return!!(this.data&1<<Cl)}set culling(t){!!(this.data&1<<Cl)!==t&&(this.data^=1<<Cl)}get depthTest(){return!!(this.data&1<<zn)}set depthTest(t){!!(this.data&1<<zn)!==t&&(this.data^=1<<zn)}get depthMask(){return!!(this.data&1<<Hn)}set depthMask(t){!!(this.data&1<<Hn)!==t&&(this.data^=1<<Hn)}get clockwiseFrontFace(){return!!(this.data&1<<Vn)}set clockwiseFrontFace(t){!!(this.data&1<<Vn)!==t&&(this.data^=1<<Vn)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==f.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new sr;return t.depthTest=!1,t.blend=!0,t}}const Po=[];function cs(e,t){if(!e)return null;let i="";if(typeof e=="string"){const s=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);s&&(i=s[1].toLowerCase())}for(let s=Po.length-1;s>=0;--s){const n=Po[s];if(n.test&&n.test(e,i))return new n(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ji{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,i,s,n,a,h,c,m){if(arguments.length>8)throw new Error("max arguments reached");const{name:_,items:y}=this;this._aliasCount++;for(let w=0,S=y.length;w<S;w++)y[w][_](t,i,s,n,a,h,c,m);return y===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const i=this.items.indexOf(t);return i!==-1&&(this.ensureNonAliasedItems(),this.items.splice(i,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ji.prototype,{dispatch:{value:Ji.prototype.emit},run:{value:Ji.prototype.emit}});class jn{constructor(t=0,i=0){this._width=t,this._height=i,this.destroyed=!1,this.internal=!1,this.onResize=new Ji("setRealSize"),this.onUpdate=new Ji("update"),this.onError=new Ji("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,i){(t!==this._width||i!==this._height)&&(this._width=t,this._height=i,this.onResize.emit(t,i))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,i,s){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,i){return!1}}class nn extends jn{constructor(t,i){const{width:s,height:n}=i||{};if(!s||!n)throw new Error("BufferResource width or height invalid");super(s,n),this.data=t}upload(t,i,s){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===P.UNPACK);const a=i.realWidth,h=i.realHeight;return s.width===a&&s.height===h?n.texSubImage2D(i.target,0,0,0,a,h,i.format,s.type,this.data):(s.width=a,s.height=h,n.texImage2D(i.target,0,s.internalFormat,a,h,0,i.format,s.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const qh={scaleMode:b.NEAREST,format:p.RGBA,alphaMode:P.NPM},on=class extends g{constructor(e=null,t=null){super(),t=Object.assign({},on.defaultOptions,t);const{alphaMode:i,mipmap:s,anisotropicLevel:n,scaleMode:a,width:h,height:c,wrapMode:m,format:_,type:y,target:w,resolution:S,resourceOptions:R}=t;e&&!(e instanceof jn)&&(e=cs(e,R),e.internal=!0),this.resolution=S||G.RESOLUTION,this.width=Math.round((h||0)*this.resolution)/this.resolution,this.height=Math.round((c||0)*this.resolution)/this.resolution,this._mipmap=s,this.anisotropicLevel=n,this._wrapMode=m,this._scaleMode=a,this.format=_,this.type=y,this.target=w,this.alphaMode=i,this.uid=hs(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=h>0&&c>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return i=i||this.resolution,this.setRealSize(e*i,t*i,i)}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Yi(this.realWidth)&&Yi(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete We[this.cacheId],delete Ai[this.cacheId],this.cacheId=null),this.dispose(),on.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=G.STRICT_TEXTURE_CACHE){const s=typeof e=="string";let n=null;if(s)n=e;else{if(!e._pixiId){const h=t?.pixiIdPrefix||"pixiid";e._pixiId=`${h}_${hs()}`}n=e._pixiId}let a=We[n];if(s&&i&&!a)throw new Error(`The cacheId "${n}" does not exist in BaseTextureCache.`);return a||(a=new on(e,t),a.cacheId=n,on.addToCache(a,n)),a}static fromBuffer(e,t,i,s){e=e||new Float32Array(t*i*4);const n=new nn(e,{width:t,height:i}),a=e instanceof Float32Array?T.FLOAT:T.UNSIGNED_BYTE;return new on(n,Object.assign({},qh,s||{width:t,height:i,type:a}))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),We[t]&&We[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),We[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=We[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete We[e],t}}else if(e?.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete We[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let le=on;le.defaultOptions={mipmap:D.POW2,anisotropicLevel:0,scaleMode:b.LINEAR,wrapMode:k.CLAMP,alphaMode:P.UNPACK,target:v.TEXTURE_2D,format:p.RGBA,type:T.UNSIGNED_BYTE},le._globalBatch=0;class Mo{constructor(){this.texArray=null,this.blend=0,this.type=d.TRIANGLES,this.start=0,this.size=0,this.data=null}}let Kh=0;class oi{constructor(t,i=!0,s=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=s,this.static=i,this.id=Kh++,this.disposeRunner=new Ji("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?z.ELEMENT_ARRAY_BUFFER:z.ARRAY_BUFFER}get index(){return this.type===z.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new oi(t)}}class Xn{constructor(t,i=0,s=!1,n=T.FLOAT,a,h,c,m=1){this.buffer=t,this.size=i,this.normalized=s,this.type=n,this.stride=a,this.start=h,this.instance=c,this.divisor=m}destroy(){this.buffer=null}static from(t,i,s,n,a){return new Xn(t,i,s,n,a)}}const Zh={Float32Array,Uint32Array,Int32Array,Uint8Array};function Pl(e,t){let i=0,s=0;const n={};for(let m=0;m<e.length;m++)s+=t[m],i+=e[m].length;const a=new ArrayBuffer(i*4);let h=null,c=0;for(let m=0;m<e.length;m++){const _=t[m],y=e[m],w=Fi(y);n[w]||(n[w]=new Zh[w](a)),h=n[w];for(let S=0;S<y.length;S++){const R=(S/_|0)*s+c,F=S%_;h[R+F]=y[S]}c+=_}return new Float32Array(a)}const Ml={5126:4,5123:2,5121:1};let Rl=0;const Dl={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class $r{constructor(t=[],i={}){this.buffers=t,this.indexBuffer=null,this.attributes=i,this.glVertexArrayObjects={},this.id=Rl++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ji("disposeGeometry"),this.refCount=0}addAttribute(t,i,s=0,n=!1,a,h,c,m=!1){if(!i)throw new Error("You must pass a buffer when creating an attribute");i instanceof oi||(i instanceof Array&&(i=new Float32Array(i)),i=new oi(i));const _=t.split("|");if(_.length>1){for(let w=0;w<_.length;w++)this.addAttribute(_[w],i,s,n,a);return this}let y=this.buffers.indexOf(i);return y===-1&&(this.buffers.push(i),y=this.buffers.length-1),this.attributes[t]=new Xn(y,s,n,a,h,c,m),this.instanced=this.instanced||m,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof oi||(t instanceof Array&&(t=new Uint16Array(t)),t=new oi(t)),t.type=z.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],i=[],s=new oi;let n;for(n in this.attributes){const a=this.attributes[n],h=this.buffers[a.buffer];t.push(h.data),i.push(a.size*Ml[a.type]/4),a.buffer=0}for(s.data=Pl(t,i),n=0;n<this.buffers.length;n++)this.buffers[n]!==this.indexBuffer&&this.buffers[n].destroy();return this.buffers=[s],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const i=this.attributes[t];return this.buffers[i.buffer].data.length/(i.stride/4||i.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new $r;for(let i=0;i<this.buffers.length;i++)t.buffers[i]=new oi(this.buffers[i].data.slice(0));for(const i in this.attributes){const s=this.attributes[i];t.attributes[i]=new Xn(s.buffer,s.size,s.normalized,s.type,s.stride,s.start,s.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=z.ELEMENT_ARRAY_BUFFER),t}static merge(t){const i=new $r,s=[],n=[],a=[];let h;for(let c=0;c<t.length;c++){h=t[c];for(let m=0;m<h.buffers.length;m++)n[m]=n[m]||0,n[m]+=h.buffers[m].data.length,a[m]=0}for(let c=0;c<h.buffers.length;c++)s[c]=new Dl[Fi(h.buffers[c].data)](n[c]),i.buffers[c]=new oi(s[c]);for(let c=0;c<t.length;c++){h=t[c];for(let m=0;m<h.buffers.length;m++)s[m].set(h.buffers[m].data,a[m]),a[m]+=h.buffers[m].data.length}if(i.attributes=h.attributes,h.indexBuffer){i.indexBuffer=i.buffers[h.buffers.indexOf(h.indexBuffer)],i.indexBuffer.type=z.ELEMENT_ARRAY_BUFFER;let c=0,m=0,_=0,y=0;for(let w=0;w<h.buffers.length;w++)if(h.buffers[w]!==h.indexBuffer){y=w;break}for(const w in h.attributes){const S=h.attributes[w];(S.buffer|0)===y&&(m+=S.size*Ml[S.type]/4)}for(let w=0;w<t.length;w++){const S=t[w].indexBuffer.data;for(let R=0;R<S.length;R++)i.indexBuffer.data[R+_]+=c;c+=t[w].buffers[y].data.length/m,_+=S.length}}return i}}class wa extends $r{constructor(t=!1){super(),this._buffer=new oi(null,t,!1),this._indexBuffer=new oi(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,T.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,T.FLOAT).addAttribute("aColor",this._buffer,4,!0,T.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,T.FLOAT).addIndex(this._indexBuffer)}}const Ro=Math.PI*2,Il=180/Math.PI,Qh=Math.PI/180;var gi=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(gi||{});class we{constructor(t=0,i=0){this.x=0,this.y=0,this.x=t,this.y=i}clone(){return new we(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,i=t){return this.x=t,this.y=i,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const an=[new we,new we,new we,new we];class de{constructor(t=0,i=0,s=0,n=0){this.x=Number(t),this.y=Number(i),this.width=Number(s),this.height=Number(n),this.type=gi.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new de(0,0,0,0)}clone(){return new de(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}intersects(t,i){if(!i){const bt=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=bt)return!1;const St=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>St}const s=this.left,n=this.right,a=this.top,h=this.bottom;if(n<=s||h<=a)return!1;const c=an[0].set(t.left,t.top),m=an[1].set(t.left,t.bottom),_=an[2].set(t.right,t.top),y=an[3].set(t.right,t.bottom);if(_.x<=c.x||m.y<=c.y)return!1;const w=Math.sign(i.a*i.d-i.b*i.c);if(w===0||(i.apply(c,c),i.apply(m,m),i.apply(_,_),i.apply(y,y),Math.max(c.x,m.x,_.x,y.x)<=s||Math.min(c.x,m.x,_.x,y.x)>=n||Math.max(c.y,m.y,_.y,y.y)<=a||Math.min(c.y,m.y,_.y,y.y)>=h))return!1;const S=w*(m.y-c.y),R=w*(c.x-m.x),F=S*s+R*a,$=S*n+R*a,W=S*s+R*h,ot=S*n+R*h;if(Math.max(F,$,W,ot)<=S*c.x+R*c.y||Math.min(F,$,W,ot)>=S*y.x+R*y.y)return!1;const ut=w*(c.y-_.y),Q=w*(_.x-c.x),at=ut*s+Q*a,At=ut*n+Q*a,Lt=ut*s+Q*h,Pt=ut*n+Q*h;return!(Math.max(at,At,Lt,Pt)<=ut*c.x+Q*c.y||Math.min(at,At,Lt,Pt)>=ut*y.x+Q*y.y)}pad(t=0,i=t){return this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2,this}fit(t){const i=Math.max(this.x,t.x),s=Math.min(this.x+this.width,t.x+t.width),n=Math.max(this.y,t.y),a=Math.min(this.y+this.height,t.y+t.height);return this.x=i,this.width=Math.max(s-i,0),this.y=n,this.height=Math.max(a-n,0),this}ceil(t=1,i=.001){const s=Math.ceil((this.x+this.width-i)*t)/t,n=Math.ceil((this.y+this.height-i)*t)/t;return this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=s-this.x,this.height=n-this.y,this}enlarge(t){const i=Math.min(this.x,t.x),s=Math.max(this.x+this.width,t.x+t.width),n=Math.min(this.y,t.y),a=Math.max(this.y+this.height,t.y+t.height);return this.x=i,this.width=s-i,this.y=n,this.height=a-n,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Sa{constructor(t=0,i=0,s=0){this.x=t,this.y=i,this.radius=s,this.type=gi.CIRC}clone(){return new Sa(this.x,this.y,this.radius)}contains(t,i){if(this.radius<=0)return!1;const s=this.radius*this.radius;let n=this.x-t,a=this.y-i;return n*=n,a*=a,n+a<=s}getBounds(){return new de(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Ea{constructor(t=0,i=0,s=0,n=0){this.x=t,this.y=i,this.width=s,this.height=n,this.type=gi.ELIP}clone(){return new Ea(this.x,this.y,this.width,this.height)}contains(t,i){if(this.width<=0||this.height<=0)return!1;let s=(t-this.x)/this.width,n=(i-this.y)/this.height;return s*=s,n*=n,s+n<=1}getBounds(){return new de(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Us{constructor(...t){let i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){const s=[];for(let n=0,a=i.length;n<a;n++)s.push(i[n].x,i[n].y);i=s}this.points=i,this.type=gi.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),i=new Us(t);return i.closeStroke=this.closeStroke,i}contains(t,i){let s=!1;const n=this.points.length/2;for(let a=0,h=n-1;a<n;h=a++){const c=this.points[a*2],m=this.points[a*2+1],_=this.points[h*2],y=this.points[h*2+1];m>i!=y>i&&t<(_-c)*((i-m)/(y-m))+c&&(s=!s)}return s}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,i)=>`${t}, ${i}`,"")}]`}}class Aa{constructor(t=0,i=0,s=0,n=0,a=20){this.x=t,this.y=i,this.width=s,this.height=n,this.radius=a,this.type=gi.RREC}clone(){return new Aa(this.x,this.y,this.width,this.height,this.radius)}contains(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const s=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+s&&i<=this.y+this.height-s||t>=this.x+s&&t<=this.x+this.width-s)return!0;let n=t-(this.x+s),a=i-(this.y+s);const h=s*s;if(n*n+a*a<=h||(n=t-(this.x+this.width-s),n*n+a*a<=h)||(a=i-(this.y+this.height-s),n*n+a*a<=h)||(n=t-(this.x+s),n*n+a*a<=h))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class je{constructor(t=1,i=0,s=0,n=1,a=0,h=0){this.array=null,this.a=t,this.b=i,this.c=s,this.d=n,this.tx=a,this.ty=h}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,i,s,n,a,h){return this.a=t,this.b=i,this.c=s,this.d=n,this.tx=a,this.ty=h,this}toArray(t,i){this.array||(this.array=new Float32Array(9));const s=i||this.array;return t?(s[0]=this.a,s[1]=this.b,s[2]=0,s[3]=this.c,s[4]=this.d,s[5]=0,s[6]=this.tx,s[7]=this.ty,s[8]=1):(s[0]=this.a,s[1]=this.c,s[2]=this.tx,s[3]=this.b,s[4]=this.d,s[5]=this.ty,s[6]=0,s[7]=0,s[8]=1),s}apply(t,i){i=i||new we;const s=t.x,n=t.y;return i.x=this.a*s+this.c*n+this.tx,i.y=this.b*s+this.d*n+this.ty,i}applyInverse(t,i){i=i||new we;const s=1/(this.a*this.d+this.c*-this.b),n=t.x,a=t.y;return i.x=this.d*s*n+-this.c*s*a+(this.ty*this.c-this.tx*this.d)*s,i.y=this.a*s*a+-this.b*s*n+(-this.ty*this.a+this.tx*this.b)*s,i}translate(t,i){return this.tx+=t,this.ty+=i,this}scale(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this}rotate(t){const i=Math.cos(t),s=Math.sin(t),n=this.a,a=this.c,h=this.tx;return this.a=n*i-this.b*s,this.b=n*s+this.b*i,this.c=a*i-this.d*s,this.d=a*s+this.d*i,this.tx=h*i-this.ty*s,this.ty=h*s+this.ty*i,this}append(t){const i=this.a,s=this.b,n=this.c,a=this.d;return this.a=t.a*i+t.b*n,this.b=t.a*s+t.b*a,this.c=t.c*i+t.d*n,this.d=t.c*s+t.d*a,this.tx=t.tx*i+t.ty*n+this.tx,this.ty=t.tx*s+t.ty*a+this.ty,this}setTransform(t,i,s,n,a,h,c,m,_){return this.a=Math.cos(c+_)*a,this.b=Math.sin(c+_)*a,this.c=-Math.sin(c-m)*h,this.d=Math.cos(c-m)*h,this.tx=t-(s*this.a+n*this.c),this.ty=i-(s*this.b+n*this.d),this}prepend(t){const i=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const s=this.a,n=this.c;this.a=s*t.a+this.b*t.c,this.b=s*t.b+this.b*t.d,this.c=n*t.a+this.d*t.c,this.d=n*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}decompose(t){const i=this.a,s=this.b,n=this.c,a=this.d,h=t.pivot,c=-Math.atan2(-n,a),m=Math.atan2(s,i),_=Math.abs(c+m);return _<1e-5||Math.abs(Ro-_)<1e-5?(t.rotation=m,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=c,t.skew.y=m),t.scale.x=Math.sqrt(i*i+s*s),t.scale.y=Math.sqrt(n*n+a*a),t.position.x=this.tx+(h.x*i+h.y*n),t.position.y=this.ty+(h.x*s+h.y*a),t}invert(){const t=this.a,i=this.b,s=this.c,n=this.d,a=this.tx,h=t*n-i*s;return this.a=n/h,this.b=-i/h,this.c=-s/h,this.d=t/h,this.tx=(s*this.ty-n*a)/h,this.ty=-(t*this.ty-i*a)/h,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new je;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new je}static get TEMP_MATRIX(){return new je}}const us=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],qr=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Kr=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Gs=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Ol=[],kl=[],Do=Math.sign;function Jh(){for(let e=0;e<16;e++){const t=[];Ol.push(t);for(let i=0;i<16;i++){const s=Do(us[e]*us[i]+Kr[e]*qr[i]),n=Do(qr[e]*us[i]+Gs[e]*qr[i]),a=Do(us[e]*Kr[i]+Kr[e]*Gs[i]),h=Do(qr[e]*Kr[i]+Gs[e]*Gs[i]);for(let c=0;c<16;c++)if(us[c]===s&&qr[c]===n&&Kr[c]===a&&Gs[c]===h){t.push(c);break}}}for(let e=0;e<16;e++){const t=new je;t.set(us[e],qr[e],Kr[e],Gs[e],0,0),kl.push(t)}}Jh();const Ye={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>us[e],uY:e=>qr[e],vX:e=>Kr[e],vY:e=>Gs[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>Ol[e][t],sub:(e,t)=>Ol[e][Ye.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?Ye.S:Ye.N:Math.abs(t)*2<=Math.abs(e)?e>0?Ye.E:Ye.W:t>0?e>0?Ye.SE:Ye.SW:e>0?Ye.NE:Ye.NW,matrixAppendRotationInv:(e,t,i=0,s=0)=>{const n=kl[Ye.inv(t)];n.tx=i,n.ty=s,e.append(n)}};class fs{constructor(t,i,s=0,n=0){this._x=s,this._y=n,this.cb=t,this.scope=i}clone(t=this.cb,i=this.scope){return new fs(t,i,this._x,this._y)}set(t=0,i=t){return(this._x!==t||this._y!==i)&&(this._x=t,this._y=i,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const tc=class{constructor(){this.worldTransform=new je,this.localTransform=new je,this.position=new fs(this.onChange,this,0,0),this.scale=new fs(this.onChange,this,1,1),this.pivot=new fs(this.onChange,this,0,0),this.skew=new fs(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const i=e.worldTransform,s=this.worldTransform;s.a=t.a*i.a+t.b*i.c,s.b=t.a*i.b+t.b*i.d,s.c=t.c*i.a+t.d*i.c,s.d=t.c*i.b+t.d*i.d,s.tx=t.tx*i.a+t.ty*i.c+i.tx,s.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let Wn=tc;Wn.IDENTITY=new tc;var ec=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,ic=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Io(e,t,i){const s=e.createShader(t);return e.shaderSource(s,i),e.compileShader(s),s}function Ca(e){const t=new Array(e);for(let i=0;i<t.length;i++)t[i]=!1;return t}function Oo(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return Ca(2*t);case"bvec3":return Ca(3*t);case"bvec4":return Ca(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const ln=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
              if(uv["${e}"] !== ud["${e}"].value)
              {
                  ud["${e}"].value = uv["${e}"]
                  gl.uniform1f(ud["${e}"].location, uv["${e}"])
              }
              `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;
  
              renderer.texture.bind(uv["${e}"], t);
  
              if(ud["${e}"].value !== t)
              {
                  ud["${e}"].value = t;
                  gl.uniform1i(ud["${e}"].location, t);
  ; // eslint-disable-line max-len
              }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
              gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
              `,codeUbo:e=>`
                  var ${e}_matrix = uv.${e}.toArray(true);
  
                  data[offset] = ${e}_matrix[0];
                  data[offset+1] = ${e}_matrix[1];
                  data[offset+2] = ${e}_matrix[2];
          
                  data[offset + 4] = ${e}_matrix[3];
                  data[offset + 5] = ${e}_matrix[4];
                  data[offset + 6] = ${e}_matrix[5];
          
                  data[offset + 8] = ${e}_matrix[6];
                  data[offset + 9] = ${e}_matrix[7];
                  data[offset + 10] = ${e}_matrix[8];
              `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                  cv = ud["${e}"].value;
                  v = uv["${e}"];
  
                  if(cv[0] !== v.x || cv[1] !== v.y)
                  {
                      cv[0] = v.x;
                      cv[1] = v.y;
                      gl.uniform2f(ud["${e}"].location, v.x, v.y);
                  }`,codeUbo:e=>`
                  v = uv.${e};
  
                  data[offset] = v.x;
                  data[offset+1] = v.y;
              `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                  cv = ud["${e}"].value;
                  v = uv["${e}"];
  
                  if(cv[0] !== v[0] || cv[1] !== v[1])
                  {
                      cv[0] = v[0];
                      cv[1] = v[1];
                      gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                  }
              `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                  cv = ud["${e}"].value;
                  v = uv["${e}"];
  
                  if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                  {
                      cv[0] = v.x;
                      cv[1] = v.y;
                      cv[2] = v.width;
                      cv[3] = v.height;
                      gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                  }`,codeUbo:e=>`
                      v = uv.${e};
  
                      data[offset] = v.x;
                      data[offset+1] = v.y;
                      data[offset+2] = v.width;
                      data[offset+3] = v.height;
                  `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                  cv = ud["${e}"].value;
                  v = uv["${e}"];
  
                  if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                  {
                      cv[0] = v.red;
                      cv[1] = v.green;
                      cv[2] = v.blue;
                      cv[3] = v.alpha;
                      gl.uniform4f(ud["${e}"].location, v.red, v.green, v.blue, v.alpha)
                  }`,codeUbo:e=>`
                      v = uv.${e};
  
                      data[offset] = v.red;
                      data[offset+1] = v.green;
                      data[offset+2] = v.blue;
                      data[offset+3] = v.alpha;
                  `},{test:(e,t)=>e.type==="vec3"&&e.size===1&&!e.isArray&&t.red!==void 0,code:e=>`
                  cv = ud["${e}"].value;
                  v = uv["${e}"];
  
                  if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                  {
                      cv[0] = v.red;
                      cv[1] = v.green;
                      cv[2] = v.blue;
      
                      gl.uniform3f(ud["${e}"].location, v.red, v.green, v.blue)
                  }`,codeUbo:e=>`
                      v = uv.${e};
  
                      data[offset] = v.red;
                      data[offset+1] = v.green;
                      data[offset+2] = v.blue;
                  `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                  cv = ud["${e}"].value;
                  v = uv["${e}"];
  
                  if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                  {
                      cv[0] = v[0];
                      cv[1] = v[1];
                      cv[2] = v[2];
                      cv[3] = v[3];
  
                      gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                  }`}],ko={float:`
      if (cv !== v)
      {
          cu.value = v;
          gl.uniform1f(location, v);
      }`,vec2:`
      if (cv[0] !== v[0] || cv[1] !== v[1])
      {
          cv[0] = v[0];
          cv[1] = v[1];
  
          gl.uniform2f(location, v[0], v[1])
      }`,vec3:`
      if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
      {
          cv[0] = v[0];
          cv[1] = v[1];
          cv[2] = v[2];
  
          gl.uniform3f(location, v[0], v[1], v[2])
      }`,vec4:`
      if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
      {
          cv[0] = v[0];
          cv[1] = v[1];
          cv[2] = v[2];
          cv[3] = v[3];
  
          gl.uniform4f(location, v[0], v[1], v[2], v[3]);
      }`,int:`
      if (cv !== v)
      {
          cu.value = v;
  
          gl.uniform1i(location, v);
      }`,ivec2:`
      if (cv[0] !== v[0] || cv[1] !== v[1])
      {
          cv[0] = v[0];
          cv[1] = v[1];
  
          gl.uniform2i(location, v[0], v[1]);
      }`,ivec3:`
      if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
      {
          cv[0] = v[0];
          cv[1] = v[1];
          cv[2] = v[2];
  
          gl.uniform3i(location, v[0], v[1], v[2]);
      }`,ivec4:`
      if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
      {
          cv[0] = v[0];
          cv[1] = v[1];
          cv[2] = v[2];
          cv[3] = v[3];
  
          gl.uniform4i(location, v[0], v[1], v[2], v[3]);
      }`,uint:`
      if (cv !== v)
      {
          cu.value = v;
  
          gl.uniform1ui(location, v);
      }`,uvec2:`
      if (cv[0] !== v[0] || cv[1] !== v[1])
      {
          cv[0] = v[0];
          cv[1] = v[1];
  
          gl.uniform2ui(location, v[0], v[1]);
      }`,uvec3:`
      if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
      {
          cv[0] = v[0];
          cv[1] = v[1];
          cv[2] = v[2];
  
          gl.uniform3ui(location, v[0], v[1], v[2]);
      }`,uvec4:`
      if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
      {
          cv[0] = v[0];
          cv[1] = v[1];
          cv[2] = v[2];
          cv[3] = v[3];
  
          gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
      }`,bool:`
      if (cv !== v)
      {
          cu.value = v;
          gl.uniform1i(location, v);
      }`,bvec2:`
      if (cv[0] != v[0] || cv[1] != v[1])
      {
          cv[0] = v[0];
          cv[1] = v[1];
  
          gl.uniform2i(location, v[0], v[1]);
      }`,bvec3:`
      if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
      {
          cv[0] = v[0];
          cv[1] = v[1];
          cv[2] = v[2];
  
          gl.uniform3i(location, v[0], v[1], v[2]);
      }`,bvec4:`
      if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
      {
          cv[0] = v[0];
          cv[1] = v[1];
          cv[2] = v[2];
          cv[3] = v[3];
  
          gl.uniform4i(location, v[0], v[1], v[2], v[3]);
      }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
      if (cv !== v)
      {
          cu.value = v;
  
          gl.uniform1i(location, v);
      }`,samplerCube:`
      if (cv !== v)
      {
          cu.value = v;
  
          gl.uniform1i(location, v);
      }`,sampler2DArray:`
      if (cv !== v)
      {
          cu.value = v;
  
          gl.uniform1i(location, v);
      }`},Ll={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function Pa(e,t){const i=[`
          var v = null;
          var cv = null;
          var cu = null;
          var t = 0;
          var gl = renderer.gl;
      `];for(const s in e.uniforms){const n=t[s];if(!n){e.uniforms[s]?.group&&(e.uniforms[s].ubo?i.push(`
                          renderer.shader.syncUniformBufferGroup(uv.${s}, '${s}');
                      `):i.push(`
                          renderer.shader.syncUniformGroup(uv.${s}, syncData);
                      `));continue}const a=e.uniforms[s];let h=!1;for(let c=0;c<ln.length;c++)if(ln[c].test(n,a)){i.push(ln[c].code(s,a)),h=!0;break}if(!h){const m=(n.size===1&&!n.isArray?ko:Ll)[n.type].replace("location",`ud["${s}"].location`);i.push(`
              cu = ud["${s}"];
              cv = cu.value;
              v = uv["${s}"];
              ${m};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}const Yn={};let $n=Yn;function Fl(){if($n===Yn||$n?.isContextLost()){const e=G.ADAPTER.createCanvas();let t;G.PREFER_ENV>=o.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),$n=t}return $n}let Ma;function Bl(){if(!Ma){Ma=U.MEDIUM;const e=Fl();e&&e.getShaderPrecisionFormat&&(Ma=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?U.HIGH:U.MEDIUM)}return Ma}function Nl(e,t){const i=e.getShaderSource(t).split(`
`).map((_,y)=>`${y}: ${_}`),s=e.getShaderInfoLog(t),n=s.split(`
`),a={},h=n.map(_=>parseFloat(_.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(_=>_&&!a[_]?(a[_]=!0,!0):!1),c=[""];h.forEach(_=>{i[_-1]=`%c${i[_-1]}%c`,c.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const m=i.join(`
`);c[0]=m,console.error(s),console.groupCollapsed("click to view full shader code"),console.warn(...c),console.groupEnd()}function Zr(e,t,i,s){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(i,e.COMPILE_STATUS)||Nl(e,i),e.getShaderParameter(s,e.COMPILE_STATUS)||Nl(e,s),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const Lo={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function ds(e){return Lo[e]}let Ra=null;const Fo={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function Bo(e,t){if(!Ra){const i=Object.keys(Fo);Ra={};for(let s=0;s<i.length;++s){const n=i[s];Ra[e[n]]=Fo[n]}}return Ra[t]}function Ul(e,t,i){if(e.substring(0,9)!=="precision"){let s=t;return t===U.HIGH&&i!==U.HIGH&&(s=U.MEDIUM),`precision ${s} float;
  ${e}`}else if(i!==U.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let zs;function qn(){if(typeof zs=="boolean")return zs;try{zs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{zs=!1}return zs}let Bu=0;const Da={},hn=class{constructor(e,t,i="pixi-shader",s={}){this.extra={},this.id=Bu++,this.vertexSrc=e||hn.defaultVertexSrc,this.fragmentSrc=t||hn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=s,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),Da[i]?(Da[i]++,i+=`-${Da[i]}`):Da[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
  ${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
  ${this.fragmentSrc}`,this.vertexSrc=Ul(this.vertexSrc,hn.defaultVertexPrecision,U.HIGH),this.fragmentSrc=Ul(this.fragmentSrc,hn.defaultFragmentPrecision,Bl())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return ic}static get defaultFragmentSrc(){return ec}static from(e,t,i){const s=e+t;let n=sn[s];return n||(sn[s]=n=new hn(e,t,i)),n}};let vr=hn;vr.defaultVertexPrecision=U.HIGH,vr.defaultFragmentPrecision=Pe.apple.device?U.HIGH:U.MEDIUM;let Nu=0;class yr{constructor(t,i,s){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Nu++,this.static=!!i,this.ubo=!!s,t instanceof oi?(this.buffer=t,this.buffer.type=z.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new oi(new Float32Array(1)),this.buffer.type=z.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,i,s){if(!this.ubo)this.uniforms[t]=new yr(i,s);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,i,s){return new yr(t,i,s)}static uboFrom(t,i){return new yr(t,i??!0,!0)}}class Fr{constructor(t,i){this.uniformBindCount=0,this.program=t,i?i instanceof yr?this.uniformGroup=i:this.uniformGroup=new yr(i):this.uniformGroup=new yr({}),this.disposeRunner=new Ji("disposeShader")}checkUniformExists(t,i){if(i.uniforms[t])return!0;for(const s in i.uniforms){const n=i.uniforms[s];if(n.group&&this.checkUniformExists(t,n))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,i,s){const n=vr.from(t,i);return new Fr(n,s)}}class rc{constructor(t,i){if(this.vertexSrc=t,this.fragTemplate=i,this.programCache={},this.defaultGroupCache={},!i.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!i.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const s=new Int32Array(t);for(let a=0;a<t;a++)s[a]=a;this.defaultGroupCache[t]=yr.from({uSamplers:s},!0);let n=this.fragTemplate;n=n.replace(/%count%/gi,`${t}`),n=n.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new vr(this.vertexSrc,n)}const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new je,default:this.defaultGroupCache[t]};return new Fr(this.programCache[t],i)}generateSampleSrc(t){let i="";i+=`
`,i+=`
`;for(let s=0;s<t;s++)s>0&&(i+=`
else `),s<t-1&&(i+=`if(vTextureId < ${s}.5)`),i+=`
{`,i+=`
      color = texture2D(uSamplers[${s}], vTextureCoord);`,i+=`
}`;return i+=`
`,i+=`
`,i}}class No{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function Uu(){return!Pe.apple.device}function ps(e){let t=!0;const i=G.ADAPTER.getNavigator();if(Pe.tablet||Pe.phone){if(Pe.apple.device){const s=i.userAgent.match(/OS (\d+)_(\d+)?/);s&&parseInt(s[1],10)<11&&(t=!1)}if(Pe.android.device){const s=i.userAgent.match(/Android\s([0-9.]*)/);s&&parseInt(s[1],10)<7&&(t=!1)}}return t?e:4}class Qr{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var cn=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,sc=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const xr=class extends Qr{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=wa,this.vertexSize=6,this.state=sr.for2d(),this.size=xr.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??ps(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??Uu(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return ee("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return sc}static get defaultFragmentTemplate(){return cn}setShaderGenerator({vertex:e=xr.defaultVertexSrc,fragment:t=xr.defaultFragmentTemplate}={}){this.shaderGenerator=new rc(e,t)}contextChange(){const e=this.renderer.gl;G.PREFER_ENV===o.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),xr.defaultMaxTextures),this.maxTextures=Al(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=xr,i=this.size/4,s=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new Mo);for(;t.length<s;)t.push(new No);for(let n=0;n<this.maxTextures;n++)this._tempBoundTextures[n]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,i=xr._textureArrayPool,s=this.renderer.batch,n=this._tempBoundTextures,a=this.renderer.textureGC.count;let h=++le._globalBatch,c=0,m=i[0],_=0;s.copyBoundTextures(n,t);for(let y=0;y<this._bufferSize;++y){const w=e[y];e[y]=null,w._batchEnabled!==h&&(m.count>=t&&(s.boundArray(m,n,h,t),this.buildDrawCalls(m,_,y),_=y,m=i[++c],++h),w._batchEnabled=h,w.touched=a,m.elements[m.count++]=w)}m.count>0&&(s.boundArray(m,n,h,t),this.buildDrawCalls(m,_,this._bufferSize),++c,++h);for(let y=0;y<n.length;y++)n[y]=null;le._globalBatch=h}buildDrawCalls(e,t,i){const{_bufferedElements:s,_attributeBuffer:n,_indexBuffer:a,vertexSize:h}=this,c=xr._drawCallPool;let m=this._dcIndex,_=this._aIndex,y=this._iIndex,w=c[m];w.start=this._iIndex,w.texArray=e;for(let S=t;S<i;++S){const R=s[S],F=R._texture.baseTexture,$=He[F.alphaMode?1:0][R.blendMode];s[S]=null,t<S&&w.blend!==$&&(w.size=y-w.start,t=S,w=c[++m],w.texArray=e,w.start=y),this.packInterleavedGeometry(R,n,a,_,y),_+=R.vertexData.length/2*h,y+=R.indices.length,w.blend=$}t<i&&(w.size=y-w.start,++m),this._dcIndex=m,this._aIndex=_,this._iIndex=y}bindAndClearTexArray(e){const t=this.renderer.texture;for(let i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;xr.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:i}=this.renderer,s=xr._drawCallPool;let n=null;for(let a=0;a<e;a++){const{texArray:h,type:c,size:m,start:_,blend:y}=s[a];n!==h&&(n=h,this.bindAndClearTexArray(h)),this.state.blendMode=y,i.set(this.state),t.drawElements(c,m,t.UNSIGNED_SHORT,_*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),xr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=kr(Math.ceil(e/8)),i=Fs(t),s=t*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._aBuffers[s];return n||(this._aBuffers[s]=n=new Co(s*this.vertexSize*4)),n}getIndexBuffer(e){const t=kr(Math.ceil(e/12)),i=Fs(t),s=t*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let n=this._iBuffers[i];return n||(this._iBuffers[i]=n=new Uint16Array(s)),n}packInterleavedGeometry(e,t,i,s,n){const{uint32View:a,float32View:h}=t,c=s/this.vertexSize,m=e.uvs,_=e.indices,y=e.vertexData,w=e._texture.baseTexture._batchLocation,S=Math.min(e.worldAlpha,1),R=Te.shared.setValue(e._tintRGB).toPremultiplied(S);for(let F=0;F<y.length;F+=2)h[s++]=y[F],h[s++]=y[F+1],h[s++]=m[F],h[s++]=m[F+1],a[s++]=R,h[s++]=w;for(let F=0;F<_.length;F++)i[n++]=c+_[F]}};let nr=xr;nr.defaultBatchSize=4096,nr.extension={name:"batch",type:It.RendererPlugin},nr._drawCallPool=[],nr._textureArrayPool=[],Xt.add(nr);var nc=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,oc=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Vs=class extends Fr{constructor(e,t,i){const s=vr.from(e||Vs.defaultVertexSrc,t||Vs.defaultFragmentSrc);super(s,i),this.padding=0,this.resolution=Vs.defaultResolution,this.multisample=Vs.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new sr}apply(e,t,i,s,n){e.applyFilter(this,t,i,s)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return oc}static get defaultFragmentSrc(){return nc}};let ci=Vs;ci.defaultResolution=1,ci.defaultMultisample=Z.NONE;class Kn{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Te(0),this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender;const{backgroundColor:i,background:s,backgroundAlpha:n}=t,a=s??i;a!==void 0&&(this.color=a),this.alpha=n}get color(){return this._backgroundColor.value}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get backgroundColor(){return this._backgroundColor}destroy(){}}Kn.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},Kn.extension={type:[It.RendererSystem,It.CanvasRendererSystem],name:"background"},Xt.add(Kn);class Uo{constructor(t){this.renderer=t,this.emptyRenderer=new Qr(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,i){const{boundTextures:s}=this.renderer.texture;for(let n=i-1;n>=0;--n)t[n]=s[n]||null,t[n]&&(t[n]._batchLocation=n)}boundArray(t,i,s,n){const{elements:a,ids:h,count:c}=t;let m=0;for(let _=0;_<c;_++){const y=a[_],w=y._batchLocation;if(w>=0&&w<n&&i[w]===y){h[_]=w;continue}for(;m<n;){const S=i[m];if(S&&S._batchEnabled===s&&S._batchLocation===m){m++;continue}h[_]=m,y._batchLocation=m,i[m]=y;break}}}destroy(){this.renderer=null}}Uo.extension={type:It.RendererSystem,name:"batch"},Xt.add(Uo);let Ii=0;class M{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Ii++}init(t){if(t.context)this.initFromContext(t.context);else{const i=this.renderer.background.alpha<1,s=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:i,premultipliedAlpha:s,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Ii++,this.renderer.runners.contextChange.emit(t);const i=this.renderer.view;i.addEventListener!==void 0&&(i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const i=this.createContext(this.renderer.view,t);this.initFromContext(i)}createContext(t,i){let s;if(G.PREFER_ENV>=o.WEBGL2&&(s=t.getContext("webgl2",i)),s)this.webGLVersion=2;else if(this.webGLVersion=1,s=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!s)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=s,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,i={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,i,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,i,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const i=t.getContextAttributes(),s="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;s&&(this.webGLVersion=2),i&&!i.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const n=s||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=n,n||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}M.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},M.extension={type:It.RendererSystem,name:"context"},Xt.add(M);class V extends nn{upload(t,i,s){const n=t.gl;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===P.UNPACK);const a=i.realWidth,h=i.realHeight;return s.width===a&&s.height===h?n.texSubImage2D(i.target,0,0,0,a,h,i.format,s.type,this.data):(s.width=a,s.height=h,n.texImage2D(i.target,0,s.internalFormat,a,h,0,i.format,s.type,this.data)),!0}}class lt{constructor(t,i){this.width=Math.round(t||100),this.height=Math.round(i||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ji("disposeFramebuffer"),this.multisample=Z.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,i){return this.colorTextures[t]=i||new le(null,{scaleMode:b.NEAREST,resolution:1,mipmap:D.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new le(new V(null,{width:this.width,height:this.height}),{scaleMode:b.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:D.OFF,format:p.DEPTH_COMPONENT,type:T.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,i){if(t=Math.round(t),i=Math.round(i),!(t===this.width&&i===this.height)){this.width=t,this.height=i,this.dirtyId++,this.dirtySize++;for(let s=0;s<this.colorTextures.length;s++){const n=this.colorTextures[s],a=n.resolution;n.setSize(t/a,i/a)}if(this.depthTexture){const s=this.depthTexture.resolution;this.depthTexture.setSize(t/s,i/s)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class ft extends le{constructor(t={}){if(typeof t=="number"){const i=arguments[0],s=arguments[1],n=arguments[2],a=arguments[3];t={width:i,height:s,scaleMode:n,resolution:a}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=Z.NONE),super(null,t),this.mipmap=D.OFF,this.valid=!0,this._clear=new Te([0,0,0,0]),this.framebuffer=new lt(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(t){this._clear.setValue(t)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(t,i){this.framebuffer.resize(t*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Ct extends jn{constructor(t){const i=t,s=i.naturalWidth||i.videoWidth||i.width,n=i.naturalHeight||i.videoHeight||i.height;super(s,n),this.source=t,this.noSubImage=!1}static crossOrigin(t,i,s){s===void 0&&!i.startsWith("data:")?t.crossOrigin=Ao(i):s!==!1&&(t.crossOrigin=typeof s=="string"?s:"anonymous")}upload(t,i,s,n){const a=t.gl,h=i.realWidth,c=i.realHeight;if(n=n||this.source,typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement){if(!n.complete||n.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement&&n.readyState<=1&&n.buffered.length===0)return!1;return a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===P.UNPACK),!this.noSubImage&&i.target===a.TEXTURE_2D&&s.width===h&&s.height===c?a.texSubImage2D(a.TEXTURE_2D,0,0,0,i.format,s.type,n):(s.width=h,s.height=c,a.texImage2D(i.target,0,s.internalFormat,i.format,s.type,n)),!0}update(){if(this.destroyed)return;const t=this.source,i=t.naturalWidth||t.videoWidth||t.width,s=t.naturalHeight||t.videoHeight||t.height;this.resize(i,s),super.update()}dispose(){this.source=null}}class jt extends Ct{constructor(t,i){if(i=i||{},typeof t=="string"){const s=new Image;Ct.crossOrigin(s,t,i.crossorigin),s.src=t,t=s}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(i.createBitmap??G.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.bitmap=null,this._load=null,i.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((i,s)=>{const n=this.source;this.url=n.src;const a=()=>{this.destroyed||(n.onload=null,n.onerror=null,this.resize(n.width,n.height),this._load=null,this.createBitmap?i(this.process()):i(this))};n.complete&&n.src?a():(n.onload=a,n.onerror=h=>{s(h),this.onError.emit(h)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const i=globalThis.createImageBitmap,s=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:s?"cors":"no-cors"}).then(n=>n.blob()).then(n=>i(n,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===P.UNPACK?"premultiply":"none"})).then(n=>this.destroyed?Promise.reject():(this.bitmap=n,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,i,s){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,i,s);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,i,s,this.bitmap),!this.preserveBitmap){let n=!0;const a=i._glTextures;for(const h in a){const c=a[h];if(c!==s&&c.dirtyId!==i.dirtyId){n=!1;break}}n&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class Ee{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,i,s){const n=i.width,a=i.height;if(s){const h=t.width/2/n,c=t.height/2/a,m=t.x/n+h,_=t.y/a+c;s=Ye.add(s,Ye.NW),this.x0=m+h*Ye.uX(s),this.y0=_+c*Ye.uY(s),s=Ye.add(s,2),this.x1=m+h*Ye.uX(s),this.y1=_+c*Ye.uY(s),s=Ye.add(s,2),this.x2=m+h*Ye.uX(s),this.y2=_+c*Ye.uY(s),s=Ye.add(s,2),this.x3=m+h*Ye.uX(s),this.y3=_+c*Ye.uY(s)}else this.x0=t.x/n,this.y0=t.y/a,this.x1=(t.x+t.width)/n,this.y1=t.y/a,this.x2=(t.x+t.width)/n,this.y2=(t.y+t.height)/a,this.x3=t.x/n,this.y3=(t.y+t.height)/a;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const ui=new Ee;function fi(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class wt extends g{constructor(t,i,s,n,a,h,c){if(super(),this.noFrame=!1,i||(this.noFrame=!0,i=new de(0,0,1,1)),t instanceof wt&&(t=t.baseTexture),this.baseTexture=t,this._frame=i,this.trim=n,this.valid=!1,this._uvs=ui,this.uvMatrix=null,this.orig=s||i,this._rotate=Number(a||0),a===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=h?new we(h.x,h.y):new we(0,0),this.defaultBorders=c,this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=i:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:i}=this.baseTexture;i?.url&&Ai[i.url]&&wt.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,wt.removeFromCache(this),this.textureCacheIds=null}clone(){const t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),s=new wt(this.baseTexture,!this.noFrame&&t,i,this.trim?.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(s._frame=t),s}updateUvs(){this._uvs===ui&&(this._uvs=new Ee),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,i={},s=G.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let a=null;if(n)a=t;else if(t instanceof le){if(!t.cacheId){const c=i?.pixiIdPrefix||"pixiid";t.cacheId=`${c}-${hs()}`,le.addToCache(t,t.cacheId)}a=t.cacheId}else{if(!t._pixiId){const c=i?.pixiIdPrefix||"pixiid";t._pixiId=`${c}_${hs()}`}a=t._pixiId}let h=Ai[a];if(n&&s&&!h)throw new Error(`The cacheId "${a}" does not exist in TextureCache.`);return!h&&!(t instanceof le)?(i.resolution||(i.resolution=Yr(t)),h=new wt(new le(t,i)),h.baseTexture.cacheId=a,le.addToCache(h.baseTexture,a),wt.addToCache(h,a)):!h&&t instanceof le&&(h=new wt(t),wt.addToCache(h,a)),h}static fromURL(t,i){const s=Object.assign({autoLoad:!1},i?.resourceOptions),n=wt.from(t,Object.assign({resourceOptions:s},i),!1),a=n.baseTexture.resource;return n.baseTexture.valid?Promise.resolve(n):a.load().then(()=>Promise.resolve(n))}static fromBuffer(t,i,s,n){return new wt(le.fromBuffer(t,i,s,n))}static fromLoader(t,i,s,n){const a=new le(t,Object.assign({scaleMode:le.defaultOptions.scaleMode,resolution:Yr(i)},n)),{resource:h}=a;h instanceof jt&&(h.url=i);const c=new wt(a);return s||(s=i),le.addToCache(c.baseTexture,s),wt.addToCache(c,s),s!==i&&(le.addToCache(c.baseTexture,i),wt.addToCache(c,i)),c.baseTexture.valid?Promise.resolve(c):new Promise(m=>{c.baseTexture.once("loaded",()=>m(c))})}static addToCache(t,i){i&&(t.textureCacheIds.includes(i)||t.textureCacheIds.push(i),Ai[i]&&Ai[i]!==t&&console.warn(`Texture added to the cache with an id [${i}] that already had an entry`),Ai[i]=t)}static removeFromCache(t){if(typeof t=="string"){const i=Ai[t];if(i){const s=i.textureCacheIds.indexOf(t);return s>-1&&i.textureCacheIds.splice(s,1),delete Ai[t],i}}else if(t?.textureCacheIds){for(let i=0;i<t.textureCacheIds.length;++i)Ai[t.textureCacheIds[i]]===t&&delete Ai[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:i,y:s,width:n,height:a}=t,h=i+n>this.baseTexture.width,c=s+a>this.baseTexture.height;if(h||c){const m=h&&c?"and":"or",_=`X: ${i} + ${n} = ${i+n} > ${this.baseTexture.width}`,y=`Y: ${s} + ${a} = ${s+a} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${_} ${m} ${y}`)}this.valid=n&&a&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return wt._EMPTY||(wt._EMPTY=new wt(new le),fi(wt._EMPTY),fi(wt._EMPTY.baseTexture)),wt._EMPTY}static get WHITE(){if(!wt._WHITE){const t=G.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),wt._WHITE=new wt(le.from(t)),fi(wt._WHITE),fi(wt._WHITE.baseTexture)}return wt._WHITE}}class tr extends wt{constructor(t,i){super(t,i),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,i,s=!0){const n=this.baseTexture.resolution,a=Math.round(t*n)/n,h=Math.round(i*n)/n;this.valid=a>0&&h>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=h,s&&this.baseTexture.resize(a,h),this.updateUvs()}setResolution(t){const{baseTexture:i}=this;i.resolution!==t&&(i.setResolution(t),this.resize(i.width,i.height,!1))}static create(t){return new tr(new ft(t))}}class un{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,i,s=Z.NONE){const n=new ft(Object.assign({width:t,height:i,resolution:1,multisample:s},this.textureOptions));return new tr(n)}getOptimalTexture(t,i,s=1,n=Z.NONE){let a;t=Math.ceil(t*s-1e-6),i=Math.ceil(i*s-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||i!==this._pixelsHeight?(t=kr(t),i=kr(i),a=((t&65535)<<16|i&65535)>>>0,n>1&&(a+=n*4294967296)):a=n>1?-n:-1,this.texturePool[a]||(this.texturePool[a]=[]);let h=this.texturePool[a].pop();return h||(h=this.createTexture(t,i,n)),h.filterPoolKey=a,h.setResolution(s),h}getFilterTexture(t,i,s){const n=this.getOptimalTexture(t.width,t.height,i||t.resolution,s||Z.NONE);return n.filterFrame=t.filterFrame,n}returnTexture(t){const i=t.filterPoolKey;t.filterFrame=null,this.texturePool[i].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const i in this.texturePool){const s=this.texturePool[i];if(s)for(let n=0;n<s.length;n++)s[n].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const s=this.texturePool[i];if(s)for(let n=0;n<s.length;n++)s[n].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}un.SCREEN_KEY=-1;class Hs extends $r{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class Go extends $r{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new oi(this.vertices),this.uvBuffer=new oi(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,i){let s=0,n=0;return this.uvs[0]=s,this.uvs[1]=n,this.uvs[2]=s+i.width/t.width,this.uvs[3]=n,this.uvs[4]=s+i.width/t.width,this.uvs[5]=n+i.height/t.height,this.uvs[6]=s,this.uvs[7]=n+i.height/t.height,s=i.x,n=i.y,this.vertices[0]=s,this.vertices[1]=n,this.vertices[2]=s+i.width,this.vertices[3]=n,this.vertices[4]=s+i.width,this.vertices[5]=n+i.height,this.vertices[6]=s,this.vertices[7]=n+i.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class Ia{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Z.NONE,this.sourceFrame=new de,this.destinationFrame=new de,this.bindingSourceFrame=new de,this.bindingDestinationFrame=new de,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const ms=[new we,new we,new we,new we],zo=new je;class Vo{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new un,this.statePool=[],this.quad=new Hs,this.quadUv=new Go,this.tempRect=new de,this.activeState={},this.globalUniforms=new yr({outputFrame:new de,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,i){const s=this.renderer,n=this.defaultFilterStack,a=this.statePool.pop()||new Ia,h=this.renderer.renderTexture;let c=i[0].resolution,m=i[0].multisample,_=i[0].padding,y=i[0].autoFit,w=i[0].legacy??!0;for(let F=1;F<i.length;F++){const $=i[F];c=Math.min(c,$.resolution),m=Math.min(m,$.multisample),_=this.useMaxPadding?Math.max(_,$.padding):_+$.padding,y=y&&$.autoFit,w=w||($.legacy??!0)}n.length===1&&(this.defaultFilterStack[0].renderTexture=h.current),n.push(a),a.resolution=c,a.multisample=m,a.legacy=w,a.target=t,a.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),a.sourceFrame.pad(_);const S=this.tempRect.copyFrom(h.sourceFrame);s.projection.transform&&this.transformAABB(zo.copyFrom(s.projection.transform).invert(),S),y?(a.sourceFrame.fit(S),(a.sourceFrame.width<=0||a.sourceFrame.height<=0)&&(a.sourceFrame.width=0,a.sourceFrame.height=0)):a.sourceFrame.intersects(S)||(a.sourceFrame.width=0,a.sourceFrame.height=0),this.roundFrame(a.sourceFrame,h.current?h.current.resolution:s.resolution,h.sourceFrame,h.destinationFrame,s.projection.transform),a.renderTexture=this.getOptimalFilterTexture(a.sourceFrame.width,a.sourceFrame.height,c,m),a.filters=i,a.destinationFrame.width=a.renderTexture.width,a.destinationFrame.height=a.renderTexture.height;const R=this.tempRect;R.x=0,R.y=0,R.width=a.sourceFrame.width,R.height=a.sourceFrame.height,a.renderTexture.filterFrame=a.sourceFrame,a.bindingSourceFrame.copyFrom(h.sourceFrame),a.bindingDestinationFrame.copyFrom(h.destinationFrame),a.transform=s.projection.transform,s.projection.transform=null,h.bind(a.renderTexture,a.sourceFrame,R),s.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,i=t.pop(),s=i.filters;this.activeState=i;const n=this.globalUniforms.uniforms;n.outputFrame=i.sourceFrame,n.resolution=i.resolution;const a=n.inputSize,h=n.inputPixel,c=n.inputClamp;if(a[0]=i.destinationFrame.width,a[1]=i.destinationFrame.height,a[2]=1/a[0],a[3]=1/a[1],h[0]=Math.round(a[0]*i.resolution),h[1]=Math.round(a[1]*i.resolution),h[2]=1/h[0],h[3]=1/h[1],c[0]=.5*h[2],c[1]=.5*h[3],c[2]=i.sourceFrame.width*a[2]-.5*h[2],c[3]=i.sourceFrame.height*a[3]-.5*h[3],i.legacy){const _=n.filterArea;_[0]=i.destinationFrame.width,_[1]=i.destinationFrame.height,_[2]=i.sourceFrame.x,_[3]=i.sourceFrame.y,n.filterClamp=n.inputClamp}this.globalUniforms.update();const m=t[t.length-1];if(this.renderer.framebuffer.blit(),s.length===1)s[0].apply(this,i.renderTexture,m.renderTexture,L.BLEND,i),this.returnFilterTexture(i.renderTexture);else{let _=i.renderTexture,y=this.getOptimalFilterTexture(_.width,_.height,i.resolution);y.filterFrame=_.filterFrame;let w=0;for(w=0;w<s.length-1;++w){w===1&&i.multisample>1&&(y=this.getOptimalFilterTexture(_.width,_.height,i.resolution),y.filterFrame=_.filterFrame),s[w].apply(this,_,y,L.CLEAR,i);const S=_;_=y,y=S}s[w].apply(this,_,m.renderTexture,L.BLEND,i),w>1&&i.multisample>1&&this.returnFilterTexture(i.renderTexture),this.returnFilterTexture(_),this.returnFilterTexture(y)}i.clear(),this.statePool.push(i)}bindAndClear(t,i=L.CLEAR){const{renderTexture:s,state:n}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t?.filterFrame){const h=this.tempRect;h.x=0,h.y=0,h.width=t.filterFrame.width,h.height=t.filterFrame.height,s.bind(t,t.filterFrame,h)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?s.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const a=n.stateId&1||this.forceClear;(i===L.CLEAR||i===L.BLIT&&a)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,i,s,n){const a=this.renderer;a.state.set(t.state),this.bindAndClear(s,n),t.uniforms.uSampler=i,t.uniforms.filterGlobals=this.globalUniforms,a.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(i._frame,i.filterFrame),a.geometry.bind(this.quadUv),a.geometry.draw(d.TRIANGLES)):(a.geometry.bind(this.quad),a.geometry.draw(d.TRIANGLE_STRIP))}calculateSpriteMatrix(t,i){const{sourceFrame:s,destinationFrame:n}=this.activeState,{orig:a}=i._texture,h=t.set(n.width,0,0,n.height,s.x,s.y),c=i.worldTransform.copyTo(je.TEMP_MATRIX);return c.invert(),h.prepend(c),h.scale(1/a.width,1/a.height),h.translate(i.anchor.x,i.anchor.y),h}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,i,s=1,n=Z.NONE){return this.texturePool.getOptimalTexture(t,i,s,n)}getFilterTexture(t,i,s){if(typeof t=="number"){const a=t;t=i,i=a}t=t||this.activeState.renderTexture;const n=this.texturePool.getOptimalTexture(t.width,t.height,i||t.resolution,s||Z.NONE);return n.filterFrame=t.filterFrame,n}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,i){const s=ms[0],n=ms[1],a=ms[2],h=ms[3];s.set(i.left,i.top),n.set(i.left,i.bottom),a.set(i.right,i.top),h.set(i.right,i.bottom),t.apply(s,s),t.apply(n,n),t.apply(a,a),t.apply(h,h);const c=Math.min(s.x,n.x,a.x,h.x),m=Math.min(s.y,n.y,a.y,h.y),_=Math.max(s.x,n.x,a.x,h.x),y=Math.max(s.y,n.y,a.y,h.y);i.x=c,i.y=m,i.width=_-c,i.height=y-m}roundFrame(t,i,s,n,a){if(!(t.width<=0||t.height<=0||s.width<=0||s.height<=0)){if(a){const{a:h,b:c,c:m,d:_}=a;if((Math.abs(c)>1e-4||Math.abs(m)>1e-4)&&(Math.abs(h)>1e-4||Math.abs(_)>1e-4))return}a=a?zo.copyFrom(a):zo.identity(),a.translate(-s.x,-s.y).scale(n.width/s.width,n.height/s.height).translate(n.x,n.y),this.transformAABB(a,t),t.ceil(i),this.transformAABB(a.invert(),t)}}}Vo.extension={type:It.RendererSystem,name:"filter"},Xt.add(Vo);class ac{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Z.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const Gu=new de;class Gl{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new lt(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new de,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let i=this.renderer.context.extensions.drawBuffers,s=this.renderer.context.extensions.depthTexture;G.PREFER_ENV===o.WEBGL_LEGACY&&(i=null,s=null),i?t.drawBuffers=n=>i.drawBuffersWEBGL(n):(this.hasMRT=!1,t.drawBuffers=()=>{}),s||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,i,s=0){const{gl:n}=this;if(t){const a=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,n.bindFramebuffer(n.FRAMEBUFFER,a.framebuffer)),a.mipLevel!==s&&(t.dirtyId++,t.dirtyFormat++,a.mipLevel=s),a.dirtyId!==t.dirtyId&&(a.dirtyId=t.dirtyId,a.dirtyFormat!==t.dirtyFormat?(a.dirtyFormat=t.dirtyFormat,a.dirtySize=t.dirtySize,this.updateFramebuffer(t,s)):a.dirtySize!==t.dirtySize&&(a.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let h=0;h<t.colorTextures.length;h++){const c=t.colorTextures[h];this.renderer.texture.unbind(c.parentTextureArray||c)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),i){const h=i.width>>s,c=i.height>>s,m=h/i.width;this.setViewport(i.x*m,i.y*m,h,c)}else{const h=t.width>>s,c=t.height>>s;this.setViewport(0,0,h,c)}}else this.current&&(this.current=null,n.bindFramebuffer(n.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,i,s,n){const a=this.viewport;t=Math.round(t),i=Math.round(i),s=Math.round(s),n=Math.round(n),(a.width!==s||a.height!==n||a.x!==t||a.y!==i)&&(a.x=t,a.y=i,a.width=s,a.height=n,this.gl.viewport(t,i,s,n))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,i,s,n,a=u.COLOR|u.DEPTH){const{gl:h}=this;h.clearColor(t,i,s,n),h.clear(a)}initFramebuffer(t){const{gl:i}=this,s=new ac(i.createFramebuffer());return s.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=s,this.managedFramebuffers.push(t),t.disposeRunner.add(this),s}resizeFramebuffer(t){const{gl:i}=this,s=t.glFramebuffers[this.CONTEXT_UID];s.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,s.stencil),s.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height));const n=t.colorTextures;let a=n.length;i.drawBuffers||(a=Math.min(a,1));for(let h=0;h<a;h++){const c=n[h],m=c.parentTextureArray||c;this.renderer.texture.bind(m,0),h===0&&s.msaaBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,s.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,s.multisample,m._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,i){const{gl:s}=this,n=t.glFramebuffers[this.CONTEXT_UID],a=t.colorTextures;let h=a.length;s.drawBuffers||(h=Math.min(h,1)),n.multisample>1&&this.canMultisampleFramebuffer(t)?n.msaaBuffer=n.msaaBuffer||s.createRenderbuffer():n.msaaBuffer&&(s.deleteRenderbuffer(n.msaaBuffer),n.msaaBuffer=null,n.blitFramebuffer&&(n.blitFramebuffer.dispose(),n.blitFramebuffer=null));const c=[];for(let m=0;m<h;m++){const _=a[m],y=_.parentTextureArray||_;this.renderer.texture.bind(y,0),m===0&&n.msaaBuffer?(s.bindRenderbuffer(s.RENDERBUFFER,n.msaaBuffer),s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,y._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.RENDERBUFFER,n.msaaBuffer)):(s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0+m,_.target,y._glTextures[this.CONTEXT_UID].texture,i),c.push(s.COLOR_ATTACHMENT0+m))}if(c.length>1&&s.drawBuffers(c),t.depthTexture&&this.writeDepthTexture){const _=t.depthTexture;this.renderer.texture.bind(_,0),s.framebufferTexture2D(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.TEXTURE_2D,_._glTextures[this.CONTEXT_UID].texture,i)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(n.stencil=n.stencil||s.createRenderbuffer(),s.bindRenderbuffer(s.RENDERBUFFER,n.stencil),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,t.width,t.height):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,t.width,t.height),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,n.stencil)):n.stencil&&(s.deleteRenderbuffer(n.stencil),n.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:i}=this;let s=Z.NONE;if(t<=1||i===null)return s;for(let n=0;n<i.length;n++)if(i[n]<=t){s=i[n];break}return s===1&&(s=Z.NONE),s}blit(t,i,s){const{current:n,renderer:a,gl:h,CONTEXT_UID:c}=this;if(a.context.webGLVersion!==2||!n)return;const m=n.glFramebuffers[c];if(!m)return;if(!t){if(!m.msaaBuffer)return;const y=n.colorTextures[0];if(!y)return;m.blitFramebuffer||(m.blitFramebuffer=new lt(n.width,n.height),m.blitFramebuffer.addColorTexture(0,y)),t=m.blitFramebuffer,t.colorTextures[0]!==y&&(t.colorTextures[0]=y,t.dirtyId++,t.dirtyFormat++),(t.width!==n.width||t.height!==n.height)&&(t.width=n.width,t.height=n.height,t.dirtyId++,t.dirtySize++)}i||(i=Gu,i.width=n.width,i.height=n.height),s||(s=i);const _=i.width===s.width&&i.height===s.height;this.bind(t),h.bindFramebuffer(h.READ_FRAMEBUFFER,m.framebuffer),h.blitFramebuffer(i.left,i.top,i.right,i.bottom,s.left,s.top,s.right,s.bottom,h.COLOR_BUFFER_BIT,_?h.NEAREST:h.LINEAR)}disposeFramebuffer(t,i){const s=t.glFramebuffers[this.CONTEXT_UID],n=this.gl;if(!s)return;delete t.glFramebuffers[this.CONTEXT_UID];const a=this.managedFramebuffers.indexOf(t);a>=0&&this.managedFramebuffers.splice(a,1),t.disposeRunner.remove(this),i||(n.deleteFramebuffer(s.framebuffer),s.msaaBuffer&&n.deleteRenderbuffer(s.msaaBuffer),s.stencil&&n.deleteRenderbuffer(s.stencil)),s.blitFramebuffer&&this.disposeFramebuffer(s.blitFramebuffer,i)}disposeAll(t){const i=this.managedFramebuffers;this.managedFramebuffers=[];for(let s=0;s<i.length;s++)this.disposeFramebuffer(i[s],t)}forceStencil(){const t=this.current;if(!t)return;const i=t.glFramebuffers[this.CONTEXT_UID];if(!i||i.stencil)return;t.stencil=!0;const s=t.width,n=t.height,a=this.gl,h=a.createRenderbuffer();a.bindRenderbuffer(a.RENDERBUFFER,h),i.msaaBuffer?a.renderbufferStorageMultisample(a.RENDERBUFFER,i.multisample,a.DEPTH24_STENCIL8,s,n):a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,s,n),i.stencil=h,a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,h)}reset(){this.current=this.unknownFramebuffer,this.viewport=new de}destroy(){this.renderer=null}}Gl.extension={type:It.RendererSystem,name:"framebuffer"},Xt.add(Gl);const zl={5126:4,5123:2,5121:1};class Ho{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){let s=this.renderer.context.extensions.vertexArrayObject;G.PREFER_ENV===o.WEBGL_LEGACY&&(s=null),s?(t.createVertexArray=()=>s.createVertexArrayOES(),t.bindVertexArray=n=>s.bindVertexArrayOES(n),t.deleteVertexArray=n=>s.deleteVertexArrayOES(n)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(i.webGLVersion!==2){const s=t.getExtension("ANGLE_instanced_arrays");s?(t.vertexAttribDivisor=(n,a)=>s.vertexAttribDivisorANGLE(n,a),t.drawElementsInstanced=(n,a,h,c,m)=>s.drawElementsInstancedANGLE(n,a,h,c,m),t.drawArraysInstanced=(n,a,h,c)=>s.drawArraysInstancedANGLE(n,a,h,c)):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex}bind(t,i){i=i||this.renderer.shader.shader;const{gl:s}=this;let n=t.glVertexArrayObjects[this.CONTEXT_UID],a=!1;n||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=n={},a=!0);const h=n[i.program.id]||this.initGeometryVao(t,i,a);this._activeGeometry=t,this._activeVao!==h&&(this._activeVao=h,this.hasVao?s.bindVertexArray(h):this.activateVao(t,i.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,i=this.renderer.buffer;for(let s=0;s<t.buffers.length;s++){const n=t.buffers[s];i.update(n)}}checkCompatibility(t,i){const s=t.attributes,n=i.attributeData;for(const a in n)if(!s[a])throw new Error(`shader and geometry incompatible, geometry missing the "${a}" attribute`)}getSignature(t,i){const s=t.attributes,n=i.attributeData,a=["g",t.id];for(const h in s)n[h]&&a.push(h,n[h].location);return a.join("-")}initGeometryVao(t,i,s=!0){const n=this.gl,a=this.CONTEXT_UID,h=this.renderer.buffer,c=i.program;c.glPrograms[a]||this.renderer.shader.generateProgram(i),this.checkCompatibility(t,c);const m=this.getSignature(t,c),_=t.glVertexArrayObjects[this.CONTEXT_UID];let y=_[m];if(y)return _[c.id]=y,y;const w=t.buffers,S=t.attributes,R={},F={};for(const $ in w)R[$]=0,F[$]=0;for(const $ in S)!S[$].size&&c.attributeData[$]?S[$].size=c.attributeData[$].size:S[$].size||console.warn(`PIXI Geometry attribute '${$}' size cannot be determined (likely the bound shader does not have the attribute)`),R[S[$].buffer]+=S[$].size*zl[S[$].type];for(const $ in S){const W=S[$],ot=W.size;W.stride===void 0&&(R[W.buffer]===ot*zl[W.type]?W.stride=0:W.stride=R[W.buffer]),W.start===void 0&&(W.start=F[W.buffer],F[W.buffer]+=ot*zl[W.type])}y=n.createVertexArray(),n.bindVertexArray(y);for(let $=0;$<w.length;$++){const W=w[$];h.bind(W),s&&W._glBuffers[a].refCount++}return this.activateVao(t,c),_[c.id]=y,_[m]=y,n.bindVertexArray(null),h.unbind(z.ARRAY_BUFFER),y}disposeGeometry(t,i){if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const s=t.glVertexArrayObjects[this.CONTEXT_UID],n=this.gl,a=t.buffers,h=this.renderer?.buffer;if(t.disposeRunner.remove(this),!!s){if(h)for(let c=0;c<a.length;c++){const m=a[c]._glBuffers[this.CONTEXT_UID];m&&(m.refCount--,m.refCount===0&&!i&&h.dispose(a[c],i))}if(!i){for(const c in s)if(c[0]==="g"){const m=s[c];this._activeVao===m&&this.unbind(),n.deleteVertexArray(m)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const i=Object.keys(this.managedGeometries);for(let s=0;s<i.length;s++)this.disposeGeometry(this.managedGeometries[i[s]],t)}activateVao(t,i){const s=this.gl,n=this.CONTEXT_UID,a=this.renderer.buffer,h=t.buffers,c=t.attributes;t.indexBuffer&&a.bind(t.indexBuffer);let m=null;for(const _ in c){const y=c[_],w=h[y.buffer],S=w._glBuffers[n];if(i.attributeData[_]){m!==S&&(a.bind(w),m=S);const R=i.attributeData[_].location;if(s.enableVertexAttribArray(R),s.vertexAttribPointer(R,y.size,y.type||s.FLOAT,y.normalized,y.stride,y.start),y.instance)if(this.hasInstance)s.vertexAttribDivisor(R,y.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,i,s,n){const{gl:a}=this,h=this._activeGeometry;if(h.indexBuffer){const c=h.indexBuffer.data.BYTES_PER_ELEMENT,m=c===2?a.UNSIGNED_SHORT:a.UNSIGNED_INT;c===2||c===4&&this.canUseUInt32ElementIndex?h.instanced?a.drawElementsInstanced(t,i||h.indexBuffer.data.length,m,(s||0)*c,n||1):a.drawElements(t,i||h.indexBuffer.data.length,m,(s||0)*c):console.warn("unsupported index buffer type: uint32")}else h.instanced?a.drawArraysInstanced(t,s,i||h.getSize(),n||1):a.drawArrays(t,s,i||h.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}Ho.extension={type:It.RendererSystem,name:"geometry"},Xt.add(Ho);const lc=new je;class Oa{constructor(t,i){this._texture=t,this.mapCoord=new je,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof i>"u"?.5:i,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,i){i===void 0&&(i=t);const s=this.mapCoord;for(let n=0;n<t.length;n+=2){const a=t[n],h=t[n+1];i[n]=a*s.a+h*s.c+s.tx,i[n+1]=a*s.b+h*s.d+s.ty}return i}update(t){const i=this._texture;if(!i||!i.valid||!t&&this._textureID===i._updateID)return!1;this._textureID=i._updateID,this._updateID++;const s=i._uvs;this.mapCoord.set(s.x1-s.x0,s.y1-s.y0,s.x3-s.x0,s.y3-s.y0,s.x0,s.y0);const n=i.orig,a=i.trim;a&&(lc.set(n.width/a.width,0,0,n.height/a.height,-a.x/a.width,-a.y/a.height),this.mapCoord.append(lc));const h=i.baseTexture,c=this.uClampFrame,m=this.clampMargin/h.resolution,_=this.clampOffset;return c[0]=(i._frame.x+m+_)/h.width,c[1]=(i._frame.y+m+_)/h.height,c[2]=(i._frame.x+i._frame.width-m+_)/h.width,c[3]=(i._frame.y+i._frame.height-m+_)/h.height,this.uClampOffset[0]=_/h.realWidth,this.uClampOffset[1]=_/h.realHeight,this.isSimple=i._frame.width===h.width&&i._frame.height===h.height&&i.rotate===0,!0}}var Vl=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,Hl=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class jl extends ci{constructor(t,i,s){let n=null;typeof t!="string"&&i===void 0&&s===void 0&&(n=t,t=void 0,i=void 0,s=void 0),super(t||Hl,i||Vl,s),this.maskSprite=n,this.maskMatrix=new je}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,i,s,n){const a=this._maskSprite,h=a._texture;h.valid&&(h.uvMatrix||(h.uvMatrix=new Oa(h,0)),h.uvMatrix.update(),this.uniforms.npmAlpha=h.baseTexture.alphaMode?0:1,this.uniforms.mask=h,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,a).prepend(h.uvMatrix.mapCoord),this.uniforms.alpha=a.worldAlpha,this.uniforms.maskClamp=h.uvMatrix.uClampFrame,t.applyFilter(this,i,s,n))}}class hc{constructor(t=null){this.type=N.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=ci.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=N.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class zu{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,i){let s=i;if(!s.isMaskData){const a=this.maskDataPool.pop()||new hc;a.pooled=!0,a.maskObject=i,s=a}const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(s.copyCountersOrReset(n),s._colorMask=n?n._colorMask:15,s.autoDetect&&this.detect(s),s._target=t,s.type!==N.SPRITE&&this.maskStack.push(s),s.enabled)switch(s.type){case N.SCISSOR:this.renderer.scissor.push(s);break;case N.STENCIL:this.renderer.stencil.push(s);break;case N.SPRITE:s.copyCountersOrReset(null),this.pushSpriteMask(s);break;case N.COLOR:this.pushColorMask(s);break;default:break}s.type===N.SPRITE&&this.maskStack.push(s)}pop(t){const i=this.maskStack.pop();if(!(!i||i._target!==t)){if(i.enabled)switch(i.type){case N.SCISSOR:this.renderer.scissor.pop(i);break;case N.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case N.SPRITE:this.popSpriteMask(i);break;case N.COLOR:this.popColorMask(i);break;default:break}if(i.reset(),i.pooled&&this.maskDataPool.push(i),this.maskStack.length!==0){const s=this.maskStack[this.maskStack.length-1];s.type===N.SPRITE&&s._filters&&(s._filters[0].maskSprite=s.maskObject)}}}detect(t){const i=t.maskObject;i?i.isSprite?t.type=N.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=N.SCISSOR:t.type=N.STENCIL:t.type=N.COLOR}pushSpriteMask(t){const{maskObject:i}=t,s=t._target;let n=t._filters;n||(n=this.alphaMaskPool[this.alphaMaskIndex],n||(n=this.alphaMaskPool[this.alphaMaskIndex]=[new jl]));const a=this.renderer,h=a.renderTexture;let c,m;if(h.current){const y=h.current;c=t.resolution||y.resolution,m=t.multisample??y.multisample}else c=t.resolution||a.resolution,m=t.multisample??a.multisample;n[0].resolution=c,n[0].multisample=m,n[0].maskSprite=i;const _=s.filterArea;s.filterArea=i.getBounds(!0),a.filter.push(s,n),s.filterArea=_,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const i=t._colorMask,s=t._colorMask=i&t.colorMask;s!==i&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}popColorMask(t){const i=t._colorMask,s=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;s!==i&&this.renderer.gl.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)}destroy(){this.renderer=null}}zu.extension={type:It.RendererSystem,name:"mask"},Xt.add(zu);class jp{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:i}=this.renderer,s=this.getStackLength();this.maskStack=t;const n=this.getStackLength();n!==s&&(n===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Xp=new je,Wp=[],cc=class extends jp{constructor(e){super(e),this.glConst=G.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:i}=e,{renderer:s}=this,n=s.renderTexture,a=i.getBounds(!0,Wp.pop()??new de);this.roundFrameToPixels(a,n.current?n.current.resolution:s.resolution,n.sourceFrame,n.destinationFrame,s.projection.transform),t&&a.fit(t),e._scissorRectLocal=a}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:i,c:s,d:n}=e;return(Math.abs(i)>1e-4||Math.abs(s)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(n)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||cc.isMatrixRotated(t.worldTransform)||cc.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,t,i,s,n){cc.isMatrixRotated(n)||(n=n?Xp.copyFrom(n):Xp.identity(),n.translate(-i.x,-i.y).scale(s.width/i.width,s.height/i.height).translate(s.x,s.y),this.renderer.filter.transformAABB(n,e),e.fit(s),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&Wp.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let Vu=cc;Vu.extension={type:It.RendererSystem,name:"scissor"},Xt.add(Vu);class Hu extends jp{constructor(t){super(t),this.glConst=G.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const i=t.maskObject,{gl:s}=this.renderer,n=t._stencilCounter;n===0&&(this.renderer.framebuffer.forceStencil(),s.clearStencil(0),s.clear(s.STENCIL_BUFFER_BIT),s.enable(s.STENCIL_TEST)),t._stencilCounter++;const a=t._colorMask;a!==0&&(t._colorMask=0,s.colorMask(!1,!1,!1,!1)),s.stencilFunc(s.EQUAL,n,4294967295),s.stencilOp(s.KEEP,s.KEEP,s.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,a!==0&&(t._colorMask=a,s.colorMask((a&1)!==0,(a&2)!==0,(a&4)!==0,(a&8)!==0)),this._useCurrent()}pop(t){const i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{const s=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,n=s?s._colorMask:15;n!==0&&(s._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,n!==0&&(s._colorMask=n,i.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}Hu.extension={type:It.RendererSystem,name:"stencil"},Xt.add(Hu);class ju{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return ee("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return ee("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return ee("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(){const t=this.rendererPlugins;for(const i in t)this.plugins[i]=new t[i](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}ju.extension={type:[It.RendererSystem,It.CanvasRendererSystem],name:"_plugin"},Xt.add(ju);class Xu{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new je,this.transform=null}update(t,i,s,n){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,s,n),this.transform&&this.projectionMatrix.append(this.transform);const a=this.renderer;a.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,a.globalUniforms.update(),a.shader.shader&&a.shader.syncUniformGroup(a.shader.shader.uniforms.globals)}calculateProjection(t,i,s,n){const a=this.projectionMatrix,h=n?-1:1;a.identity(),a.a=1/i.width*2,a.d=h*(1/i.height*2),a.tx=-1-i.x*a.a,a.ty=-h-i.y*a.d}setTransform(t){}destroy(){this.renderer=null}}Xu.extension={type:It.RendererSystem,name:"projection"},Xt.add(Xu);const P0=new Wn;class Wu{constructor(t){this.renderer=t,this._tempMatrix=new je}generateTexture(t,i){const{region:s,...n}=i||{},a=s||t.getLocalBounds(null,!0);a.width===0&&(a.width=1),a.height===0&&(a.height=1);const h=tr.create({width:a.width,height:a.height,...n});this._tempMatrix.tx=-a.x,this._tempMatrix.ty=-a.y;const c=t.transform;return t.transform=P0,this.renderer.render(t,{renderTexture:h,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=c,h}destroy(){}}Wu.extension={type:[It.RendererSystem,It.CanvasRendererSystem],name:"textureGenerator"},Xt.add(Wu);const jo=new de,Xl=new de;class Yu{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new de,this.destinationFrame=new de,this.viewportFrame=new de}bind(t=null,i,s){const n=this.renderer;this.current=t;let a,h,c;t?(a=t.baseTexture,c=a.resolution,i||(jo.width=t.frame.width,jo.height=t.frame.height,i=jo),s||(Xl.x=t.frame.x,Xl.y=t.frame.y,Xl.width=i.width,Xl.height=i.height,s=Xl),h=a.framebuffer):(c=n.resolution,i||(jo.width=n._view.screen.width,jo.height=n._view.screen.height,i=jo),s||(s=jo,s.width=i.width,s.height=i.height));const m=this.viewportFrame;m.x=s.x*c,m.y=s.y*c,m.width=s.width*c,m.height=s.height*c,t||(m.y=n.view.height-(m.y+m.height)),m.ceil(),this.renderer.framebuffer.bind(h,m),this.renderer.projection.update(s,i,c,!h),t?this.renderer.mask.setMaskStack(a.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(s)}clear(t,i){const s=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,n=t?Te.shared.setValue(t):s,a=this.destinationFrame,h=this.current?this.current.baseTexture:this.renderer._view.screen,c=a.width!==h.width||a.height!==h.height;if(c){let{x:m,y:_,width:y,height:w}=this.viewportFrame;m=Math.round(m),_=Math.round(_),y=Math.round(y),w=Math.round(w),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(m,_,y,w)}this.renderer.framebuffer.clear(n.red,n.green,n.blue,n.alpha,i),c&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}Yu.extension={type:It.RendererSystem,name:"renderTexture"},Xt.add(Yu);class M0{}class Yp{constructor(t,i){this.program=t,this.uniformData=i,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function R0(e,t){const i={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let n=0;n<s;n++){const a=t.getActiveAttrib(e,n);if(a.name.startsWith("gl_"))continue;const h=Bo(t,a.type),c={type:h,name:a.name,size:ds(h),location:t.getAttribLocation(e,a.name)};i[a.name]=c}return i}function D0(e,t){const i={},s=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let n=0;n<s;n++){const a=t.getActiveUniform(e,n),h=a.name.replace(/\[.*?\]$/,""),c=!!a.name.match(/\[.*?\]$/),m=Bo(t,a.type);i[h]={name:h,index:n,type:m,size:a.size,isArray:c,value:Oo(m,a.size)}}return i}function $p(e,t){const i=Io(e,e.VERTEX_SHADER,t.vertexSrc),s=Io(e,e.FRAGMENT_SHADER,t.fragmentSrc),n=e.createProgram();e.attachShader(n,i),e.attachShader(n,s);const a=t.extra?.transformFeedbackVaryings;if(a&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(n,a.names,a.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(n),e.getProgramParameter(n,e.LINK_STATUS)||Zr(e,n,i,s),t.attributeData=R0(n,e),t.uniformData=D0(n,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const m=Object.keys(t.attributeData);m.sort((_,y)=>_>y?1:-1);for(let _=0;_<m.length;_++)t.attributeData[m[_]].location=_,e.bindAttribLocation(n,_,m[_]);e.linkProgram(n)}e.deleteShader(i),e.deleteShader(s);const h={};for(const m in t.uniformData){const _=t.uniformData[m];h[m]={location:e.getUniformLocation(n,m),value:Oo(_.type,_.size)}}return new Yp(n,h)}function I0(e,t,i,s,n){i.buffer.update(n)}const O0={float:`
          data[offset] = v;
      `,vec2:`
          data[offset] = v[0];
          data[offset+1] = v[1];
      `,vec3:`
          data[offset] = v[0];
          data[offset+1] = v[1];
          data[offset+2] = v[2];
  
      `,vec4:`
          data[offset] = v[0];
          data[offset+1] = v[1];
          data[offset+2] = v[2];
          data[offset+3] = v[3];
      `,mat2:`
          data[offset] = v[0];
          data[offset+1] = v[1];
  
          data[offset+4] = v[2];
          data[offset+5] = v[3];
      `,mat3:`
          data[offset] = v[0];
          data[offset+1] = v[1];
          data[offset+2] = v[2];
  
          data[offset + 4] = v[3];
          data[offset + 5] = v[4];
          data[offset + 6] = v[5];
  
          data[offset + 8] = v[6];
          data[offset + 9] = v[7];
          data[offset + 10] = v[8];
      `,mat4:`
          for(var i = 0; i < 16; i++)
          {
              data[offset + i] = v[i];
          }
      `},qp={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function Kp(e){const t=e.map(a=>({data:a,offset:0,dataLen:0,dirty:0}));let i=0,s=0,n=0;for(let a=0;a<t.length;a++){const h=t[a];if(i=qp[h.data.type],h.data.size>1&&(i=Math.max(i,16)*h.data.size),h.dataLen=i,s%i!==0&&s<16){const c=s%i%16;s+=c,n+=c}s+i>16?(n=Math.ceil(n/16)*16,h.offset=n,n+=i,s=i):(h.offset=n,s+=i,n+=i)}return n=Math.ceil(n/16)*16,{uboElements:t,size:n}}function Zp(e,t){const i=[];for(const s in e)t[s]&&i.push(t[s]);return i.sort((s,n)=>s.index-n.index),i}function Qp(e,t){if(!e.autoManage)return{size:0,syncFunc:I0};const i=Zp(e.uniforms,t),{uboElements:s,size:n}=Kp(i),a=[`
      var v = null;
      var v2 = null;
      var cv = null;
      var t = 0;
      var gl = renderer.gl
      var index = 0;
      var data = buffer.data;
      `];for(let h=0;h<s.length;h++){const c=s[h],m=e.uniforms[c.data.name],_=c.data.name;let y=!1;for(let w=0;w<ln.length;w++){const S=ln[w];if(S.codeUbo&&S.test(c.data,m)){a.push(`offset = ${c.offset/4};`,ln[w].codeUbo(c.data.name,m)),y=!0;break}}if(!y)if(c.data.size>1){const w=ds(c.data.type),S=Math.max(qp[c.data.type]/16,1),R=w/S,F=(4-R%4)%4;a.push(`
                  cv = ud.${_}.value;
                  v = uv.${_};
                  offset = ${c.offset/4};
  
                  t = 0;
  
                  for(var i=0; i < ${c.data.size*S}; i++)
                  {
                      for(var j = 0; j < ${R}; j++)
                      {
                          data[offset++] = v[t++];
                      }
                      offset += ${F};
                  }
  
                  `)}else{const w=O0[c.data.type];a.push(`
                  cv = ud.${_}.value;
                  v = uv.${_};
                  offset = ${c.offset/4};
                  ${w};
                  `)}}return a.push(`
         renderer.buffer.update(buffer);
      `),{size:n,syncFunc:new Function("ud","uv","renderer","syncData","buffer",a.join(`
`))}}let k0=0;const uc={textureCount:0,uboCount:0};class $u{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=k0++}systemCheck(){if(!qn())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,i){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const s=t.program,n=s.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==s&&(this.program=s,this.gl.useProgram(n.program)),i||(uc.textureCount=0,uc.uboCount=0,this.syncUniformGroup(t.uniformGroup,uc)),n}setUniforms(t){const i=this.shader.program,s=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(s.uniformData,t,this.renderer)}syncUniformGroup(t,i){const s=this.getGlProgram();(!t.static||t.dirtyId!==s.uniformDirtyGroups[t.id])&&(s.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,s,i))}syncUniforms(t,i,s){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(i.uniformData,t.uniforms,this.renderer,s)}createSyncGroups(t){const i=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[i]||(this.cache[i]=Pa(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[i],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,i){const s=this.getGlProgram();if(!t.static||t.dirtyId!==0||!s.uniformGroups[t.id]){t.dirtyId=0;const n=s.uniformGroups[t.id]||this.createSyncBufferGroup(t,s,i);t.buffer.update(),n(s.uniformData,t.uniforms,this.renderer,uc,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,s.uniformBufferBindings[i])}createSyncBufferGroup(t,i,s){const{gl:n}=this.renderer;this.renderer.buffer.bind(t.buffer);const a=this.gl.getUniformBlockIndex(i.program,s);i.uniformBufferBindings[s]=this.shader.uniformBindCount,n.uniformBlockBinding(i.program,a,this.shader.uniformBindCount),this.shader.uniformBindCount++;const h=this.getSignature(t,this.shader.program.uniformData,"ubo");let c=this._uboCache[h];if(c||(c=this._uboCache[h]=Qp(t,this.shader.program.uniformData)),t.autoManage){const m=new Float32Array(c.size/4);t.buffer.update(m)}return i.uniformGroups[t.id]=c.syncFunc,i.uniformGroups[t.id]}getSignature(t,i,s){const n=t.uniforms,a=[`${s}-`];for(const h in n)a.push(h),i[h]&&a.push(i[h].type);return a.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const i=this.gl,s=t.program,n=$p(i,s);return s.glPrograms[this.renderer.CONTEXT_UID]=n,n}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}$u.extension={type:It.RendererSystem,name:"shader"},Xt.add($u);class Wl{constructor(t){this.renderer=t}run(t){const{renderer:i}=this;i.runners.init.emit(i.options),t.hello&&console.log(`PixiJS 7.2.3 - ${i.rendererLogId} - https://pixijs.com`),i.resize(i.screen.width,i.screen.height)}destroy(){}}Wl.defaultOptions={hello:!1},Wl.extension={type:[It.RendererSystem,It.CanvasRendererSystem],name:"startup"},Xt.add(Wl);function L0(e,t=[]){return t[f.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.ADD]=[e.ONE,e.ONE],t[f.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.NONE]=[0,0],t[f.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[f.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[f.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[f.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[f.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[f.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[f.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[f.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[f.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[f.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[f.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const F0=0,B0=1,N0=2,U0=3,G0=4,z0=5,qu=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=f.NONE,this._blendEq=!1,this.map=[],this.map[F0]=this.setBlend,this.map[B0]=this.setOffset,this.map[N0]=this.setCullFace,this.map[U0]=this.setDepthTest,this.map[G0]=this.setFrontFace,this.map[z0]=this.setDepthMask,this.checks=[],this.defaultState=new sr,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=L0(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(qu.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(qu.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let Ku=qu;Ku.extension={type:It.RendererSystem,name:"state"},Xt.add(Ku);class Jp extends g{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const i=(t.priority??[]).filter(n=>t.systems[n]),s=[...i,...Object.keys(t.systems).filter(n=>!i.includes(n))];for(const n of s)this.addSystem(t.systems[n],n)}addRunners(...t){t.forEach(i=>{this.runners[i]=new Ji(i)})}addSystem(t,i){const s=new t(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=s,this._systemsHash[i]=s;for(const n in this.runners)this.runners[n].add(s);return this}emitWithCustomOptions(t,i){const s=Object.keys(this._systemsHash);t.items.forEach(n=>{const a=s.find(h=>this._systemsHash[h]===n);n[t.name](i[a])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const fc=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=fc.defaultMaxIdle,this.checkCountMax=fc.defaultCheckCountMax,this.mode=fc.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==j.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let s=0;s<t.length;s++){const n=t[s];!n.framebuffer&&this.count-n.touched>this.maxIdle&&(e.destroyTexture(n,!0),t[s]=null,i=!0)}if(i){let s=0;for(let n=0;n<t.length;n++)t[n]!==null&&(t[s++]=t[n]);t.length=s}}unload(e){const t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(let s=e.children.length-1;s>=0;s--)this.unload(e.children[s])}destroy(){this.renderer=null}};let Jr=fc;Jr.defaultMode=j.AUTO,Jr.defaultMaxIdle=60*60,Jr.defaultCheckCountMax=60*10,Jr.extension={type:It.RendererSystem,name:"textureGC"},Xt.add(Jr);class dc{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=T.UNSIGNED_BYTE,this.internalFormat=p.RGBA,this.samplerType=0}}function V0(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[T.UNSIGNED_BYTE]:{[p.RGBA]:e.RGBA8,[p.RGB]:e.RGB8,[p.RG]:e.RG8,[p.RED]:e.R8,[p.RGBA_INTEGER]:e.RGBA8UI,[p.RGB_INTEGER]:e.RGB8UI,[p.RG_INTEGER]:e.RG8UI,[p.RED_INTEGER]:e.R8UI,[p.ALPHA]:e.ALPHA,[p.LUMINANCE]:e.LUMINANCE,[p.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[T.BYTE]:{[p.RGBA]:e.RGBA8_SNORM,[p.RGB]:e.RGB8_SNORM,[p.RG]:e.RG8_SNORM,[p.RED]:e.R8_SNORM,[p.RGBA_INTEGER]:e.RGBA8I,[p.RGB_INTEGER]:e.RGB8I,[p.RG_INTEGER]:e.RG8I,[p.RED_INTEGER]:e.R8I},[T.UNSIGNED_SHORT]:{[p.RGBA_INTEGER]:e.RGBA16UI,[p.RGB_INTEGER]:e.RGB16UI,[p.RG_INTEGER]:e.RG16UI,[p.RED_INTEGER]:e.R16UI,[p.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[T.SHORT]:{[p.RGBA_INTEGER]:e.RGBA16I,[p.RGB_INTEGER]:e.RGB16I,[p.RG_INTEGER]:e.RG16I,[p.RED_INTEGER]:e.R16I},[T.UNSIGNED_INT]:{[p.RGBA_INTEGER]:e.RGBA32UI,[p.RGB_INTEGER]:e.RGB32UI,[p.RG_INTEGER]:e.RG32UI,[p.RED_INTEGER]:e.R32UI,[p.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[T.INT]:{[p.RGBA_INTEGER]:e.RGBA32I,[p.RGB_INTEGER]:e.RGB32I,[p.RG_INTEGER]:e.RG32I,[p.RED_INTEGER]:e.R32I},[T.FLOAT]:{[p.RGBA]:e.RGBA32F,[p.RGB]:e.RGB32F,[p.RG]:e.RG32F,[p.RED]:e.R32F,[p.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[T.HALF_FLOAT]:{[p.RGBA]:e.RGBA16F,[p.RGB]:e.RGB16F,[p.RG]:e.RG16F,[p.RED]:e.R16F},[T.UNSIGNED_SHORT_5_6_5]:{[p.RGB]:e.RGB565},[T.UNSIGNED_SHORT_4_4_4_4]:{[p.RGBA]:e.RGBA4},[T.UNSIGNED_SHORT_5_5_5_1]:{[p.RGBA]:e.RGB5_A1},[T.UNSIGNED_INT_2_10_10_10_REV]:{[p.RGBA]:e.RGB10_A2,[p.RGBA_INTEGER]:e.RGB10_A2UI},[T.UNSIGNED_INT_10F_11F_11F_REV]:{[p.RGB]:e.R11F_G11F_B10F},[T.UNSIGNED_INT_5_9_9_9_REV]:{[p.RGB]:e.RGB9_E5},[T.UNSIGNED_INT_24_8]:{[p.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[T.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[p.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[T.UNSIGNED_BYTE]:{[p.RGBA]:e.RGBA,[p.RGB]:e.RGB,[p.ALPHA]:e.ALPHA,[p.LUMINANCE]:e.LUMINANCE,[p.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[T.UNSIGNED_SHORT_5_6_5]:{[p.RGB]:e.RGB},[T.UNSIGNED_SHORT_4_4_4_4]:{[p.RGBA]:e.RGBA},[T.UNSIGNED_SHORT_5_5_5_1]:{[p.RGBA]:e.RGBA}},t}class Zu{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new le,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=V0(t);const i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(let n=0;n<i;n++)this.boundTextures[n]=null;this.emptyTextures={};const s=new dc(t.createTexture());t.bindTexture(t.TEXTURE_2D,s.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=s,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new dc(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let n=0;n<6;n++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let n=0;n<this.boundTextures.length;n++)this.bind(null,n)}bind(t,i=0){const{gl:s}=this;if(t=t?.castToBaseTexture(),t?.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const n=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[i]!==t&&(this.currentLocation!==i&&(this.currentLocation=i,s.activeTexture(s.TEXTURE0+i)),s.bindTexture(t.target,n.texture)),n.dirtyId!==t.dirtyId?(this.currentLocation!==i&&(this.currentLocation=i,s.activeTexture(s.TEXTURE0+i)),this.updateTexture(t)):n.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[i]=t}else this.currentLocation!==i&&(this.currentLocation=i,s.activeTexture(s.TEXTURE0+i)),s.bindTexture(s.TEXTURE_2D,this.emptyTextures[s.TEXTURE_2D].texture),this.boundTextures[i]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:i,boundTextures:s}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let n=0;n<s.length;n++)s[n]===this.unknownTexture&&this.bind(null,n)}for(let n=0;n<s.length;n++)s[n]===t&&(this.currentLocation!==n&&(i.activeTexture(i.TEXTURE0+n),this.currentLocation=n),i.bindTexture(t.target,this.emptyTextures[t.target].texture),s[n]=null)}ensureSamplerType(t){const{boundTextures:i,hasIntegerTextures:s,CONTEXT_UID:n}=this;if(s)for(let a=t-1;a>=0;--a){const h=i[a];h&&h._glTextures[n].samplerType!==C.FLOAT&&this.renderer.texture.unbind(h)}}initTexture(t){const i=new dc(this.gl.createTexture());return i.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),i}initTextureType(t,i){i.internalFormat=this.internalFormats[t.type]?.[t.format]??t.format,this.webGLVersion===2&&t.type===T.HALF_FLOAT?i.type=this.gl.HALF_FLOAT:i.type=t.type}updateTexture(t){const i=t._glTextures[this.CONTEXT_UID];if(!i)return;const s=this.renderer;if(this.initTextureType(t,i),t.resource?.upload(s,t,i))i.samplerType!==C.FLOAT&&(this.hasIntegerTextures=!0);else{const n=t.realWidth,a=t.realHeight,h=s.gl;(i.width!==n||i.height!==a||i.dirtyId<0)&&(i.width=n,i.height=a,h.texImage2D(t.target,0,i.internalFormat,n,a,0,t.format,i.type,null))}t.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(t),i.dirtyId=t.dirtyId}destroyTexture(t,i){const{gl:s}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),s.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!i)){const n=this.managedTextures.indexOf(t);n!==-1&&Wr(this.managedTextures,n,1)}}updateTextureStyle(t){const i=t._glTextures[this.CONTEXT_UID];i&&((t.mipmap===D.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?i.mipmap=!1:i.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?i.wrapMode=k.CLAMP:i.wrapMode=t.wrapMode,t.resource?.style(this.renderer,t,i)||this.setStyle(t,i),i.dirtyStyleId=t.dirtyStyleId)}setStyle(t,i){const s=this.gl;if(i.mipmap&&t.mipmap!==D.ON_MANUAL&&s.generateMipmap(t.target),s.texParameteri(t.target,s.TEXTURE_WRAP_S,i.wrapMode),s.texParameteri(t.target,s.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===b.LINEAR?s.LINEAR_MIPMAP_LINEAR:s.NEAREST_MIPMAP_NEAREST);const n=this.renderer.context.extensions.anisotropicFiltering;if(n&&t.anisotropicLevel>0&&t.scaleMode===b.LINEAR){const a=Math.min(t.anisotropicLevel,s.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT));s.texParameterf(t.target,n.TEXTURE_MAX_ANISOTROPY_EXT,a)}}else s.texParameteri(t.target,s.TEXTURE_MIN_FILTER,t.scaleMode===b.LINEAR?s.LINEAR:s.NEAREST);s.texParameteri(t.target,s.TEXTURE_MAG_FILTER,t.scaleMode===b.LINEAR?s.LINEAR:s.NEAREST)}destroy(){this.renderer=null}}Zu.extension={type:It.RendererSystem,name:"texture"},Xt.add(Zu);class Qu{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:s}=this,n=t._glTransformFeedbacks[s]||this.createGLTransformFeedback(t);i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,n)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,i){const{gl:s,renderer:n}=this;i&&n.shader.bind(i),s.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:i,renderer:s,CONTEXT_UID:n}=this,a=i.createTransformFeedback();t._glTransformFeedbacks[n]=a,i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,a);for(let h=0;h<t.buffers.length;h++){const c=t.buffers[h];c&&(s.buffer.update(c),c._glBuffers[n].refCount++,i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,h,c._glBuffers[n].buffer||null))}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),a}disposeTransformFeedback(t,i){const s=t._glTransformFeedbacks[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this);const a=this.renderer.buffer;if(a)for(let h=0;h<t.buffers.length;h++){const c=t.buffers[h];if(!c)continue;const m=c._glBuffers[this.CONTEXT_UID];m&&(m.refCount--,m.refCount===0&&!i&&a.dispose(c,i))}s&&(i||n.deleteTransformFeedback(s),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Qu.extension={type:It.RendererSystem,name:"transformFeedback"},Xt.add(Qu);class Yl{constructor(t){this.renderer=t}init(t){this.screen=new de(0,0,t.width,t.height),this.element=t.view||G.ADAPTER.createCanvas(),this.resolution=t.resolution||G.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,i){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(i*this.resolution);const s=this.element.width/this.resolution,n=this.element.height/this.resolution;this.screen.width=s,this.screen.height=n,this.autoDensity&&(this.element.style.width=`${s}px`,this.element.style.height=`${n}px`),this.renderer.emit("resize",s,n),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){t&&this.element.parentNode?.removeChild(this.element),this.renderer=null,this.element=null,this.screen=null}}Yl.defaultOptions={width:800,height:600,resolution:G.RESOLUTION,autoDensity:!1},Yl.extension={type:[It.RendererSystem,It.CanvasRendererSystem],name:"_view"},Xt.add(Yl),G.PREFER_ENV=o.WEBGL2,G.STRICT_TEXTURE_CACHE=!1,G.RENDER_OPTIONS={...M.defaultOptions,...Kn.defaultOptions,...Yl.defaultOptions,...Wl.defaultOptions},Object.defineProperties(G,{WRAP_MODE:{get(){return le.defaultOptions.wrapMode},set(e){ee("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),le.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return le.defaultOptions.scaleMode},set(e){ee("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),le.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return le.defaultOptions.mipmap},set(e){ee("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),le.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return le.defaultOptions.anisotropicLevel},set(e){ee("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),le.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return ee("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),ci.defaultResolution},set(e){ci.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return ee("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),ci.defaultMultisample},set(e){ci.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return nr.defaultMaxTextures},set(e){ee("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),nr.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return nr.defaultBatchSize},set(e){ee("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),nr.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return nr.canUploadSameBuffer},set(e){ee("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),nr.canUploadSameBuffer=e}},GC_MODE:{get(){return Jr.defaultMode},set(e){ee("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Jr.defaultMode=e}},GC_MAX_IDLE:{get(){return Jr.defaultMaxIdle},set(e){ee("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Jr.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return Jr.defaultCheckCountMax},set(e){ee("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Jr.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return vr.defaultVertexPrecision},set(e){ee("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),vr.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return vr.defaultFragmentPrecision},set(e){ee("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),vr.defaultFragmentPrecision=e}}});var fn=(e=>(e[e.INTERACTION=50]="INTERACTION",e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(fn||{});class Ju{constructor(t,i=null,s=0,n=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=i,this.priority=s,this.once=n}match(t,i=null){return this.fn===t&&this.context===i}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const i=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=t?null:i,this.previous=null,i}}const Br=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new Ju(null,null,1/0),this.deltaMS=1/Br.targetFPMS,this.elapsedMS=1/Br.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=fn.NORMAL){return this._addListener(new Ju(e,t,i))}addOnce(e,t,i=fn.NORMAL){return this._addListener(new Ju(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const n=e-this._lastFrame|0;if(n<this._minElapsedMS)return;this._lastFrame=e-n%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*Br.targetFPMS;const i=this._head;let s=i.next;for(;s;)s=s.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,Br.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!Br._shared){const e=Br._shared=new Br;e.autoStart=!0,e._protected=!0}return Br._shared}static get system(){if(!Br._system){const e=Br._system=new Br;e.autoStart=!0,e._protected=!0}return Br._system}};let _i=Br;_i.targetFPMS=.06,Object.defineProperties(G,{TARGET_FPMS:{get(){return _i.targetFPMS},set(e){ee("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),_i.targetFPMS=e}}});class tf{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,fn.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?_i.shared:new _i,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}tf.extension=It.Application,Xt.add(tf);const tm=[];Xt.handleByList(It.Renderer,tm);function em(e){for(const t of tm)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var H0=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,j0=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const im=H0,ef=j0;class rf{constructor(t){this.renderer=t}contextChange(t){let i;if(this.renderer.context.webGLVersion===1){const s=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,s)}else{const s=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,s)}i>=Z.HIGH?this.multisample=Z.HIGH:i>=Z.MEDIUM?this.multisample=Z.MEDIUM:i>=Z.LOW?this.multisample=Z.LOW:this.multisample=Z.NONE}destroy(){}}rf.extension={type:It.RendererSystem,name:"_multisample"},Xt.add(rf);class X0{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class sf{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:s}=this,n=t._glBuffers[s]||this.createGLBuffer(t);i.bindBuffer(t.type,n.buffer)}unbind(t){const{gl:i}=this;i.bindBuffer(t,null)}bindBufferBase(t,i){const{gl:s,CONTEXT_UID:n}=this;if(this.boundBufferBases[i]!==t){const a=t._glBuffers[n]||this.createGLBuffer(t);this.boundBufferBases[i]=t,s.bindBufferBase(s.UNIFORM_BUFFER,i,a.buffer)}}bindBufferRange(t,i,s){const{gl:n,CONTEXT_UID:a}=this;s=s||0;const h=t._glBuffers[a]||this.createGLBuffer(t);n.bindBufferRange(n.UNIFORM_BUFFER,i||0,h.buffer,s*256,256)}update(t){const{gl:i,CONTEXT_UID:s}=this,n=t._glBuffers[s]||this.createGLBuffer(t);if(t._updateID!==n.updateID)if(n.updateID=t._updateID,i.bindBuffer(t.type,n.buffer),n.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{const a=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;n.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,a)}}dispose(t,i){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const s=t._glBuffers[this.CONTEXT_UID],n=this.gl;t.disposeRunner.remove(this),s&&(i||n.deleteBuffer(s.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const i=Object.keys(this.managedBuffers);for(let s=0;s<i.length;s++)this.dispose(this.managedBuffers[i[s]],t)}createGLBuffer(t){const{CONTEXT_UID:i,gl:s}=this;return t._glBuffers[i]=new X0(s.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]}}sf.extension={type:It.RendererSystem,name:"buffer"},Xt.add(sf);class nf{constructor(t){this.renderer=t}render(t,i){const s=this.renderer;let n,a,h,c;if(i&&(n=i.renderTexture,a=i.clear,h=i.transform,c=i.skipUpdateTransform),this.renderingToScreen=!n,s.runners.prerender.emit(),s.emit("prerender"),s.projection.transform=h,!s.context.isLost){if(n||(this.lastObjectRendered=t),!c){const m=t.enableTempParent();t.updateTransform(),t.disableTempParent(m)}s.renderTexture.bind(n),s.batch.currentRenderer.start(),(a??s.background.clearBeforeRender)&&s.renderTexture.clear(),t.render(s),s.batch.currentRenderer.flush(),n&&(i.blit&&s.framebuffer.blit(),n.baseTexture.update()),s.runners.postrender.emit(),s.projection.transform=null,s.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}nf.extension={type:It.RendererSystem,name:"objectRenderer"},Xt.add(nf);const of=class extends Jp{constructor(e){super(),this.type=l.WEBGL,e=Object.assign({},G.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new yr({projectionMatrix:new je},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:of.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(ee("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=of.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e?.forceCanvas?!1:Rt()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return ee("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return ee("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return ee("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return ee("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){ee("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return ee("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){ee("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return ee("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let Xo=of;Xo.extension={type:It.Renderer,priority:1},Xo.__plugins={},Xo.__systems={},Xt.handleByMap(It.RendererPlugin,Xo.__plugins),Xt.handleByMap(It.RendererSystem,Xo.__systems),Xt.add(Xo);class af extends jn{constructor(t,i){const{width:s,height:n}=i||{};super(s,n),this.items=[],this.itemDirtyIds=[];for(let a=0;a<t;a++){const h=new le;this.items.push(h),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,i){for(let s=0;s<this.length;s++)t[s]&&(t[s].castToBaseTexture?this.addBaseTextureAt(t[s].castToBaseTexture(),s):t[s]instanceof jn?this.addResourceAt(t[s],s):this.addResourceAt(cs(t[s],i),s))}dispose(){for(let t=0,i=this.length;t<i;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,i){if(!this.items[i])throw new Error(`Index ${i} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[i].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=t,this.items[i].on("update",t.update,t)}unbind(t){super.unbind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",t.update,t)}load(){if(this._load)return this._load;const i=this.items.map(s=>s.resource).filter(s=>s).map(s=>s.load());return this._load=Promise.all(i).then(()=>{const{realWidth:s,realHeight:n}=this.items[0];return this.resize(s,n),Promise.resolve(this)}),this._load}}class rm extends af{constructor(t,i){const{width:s,height:n}=i||{};let a,h;Array.isArray(t)?(a=t,h=t.length):h=t,super(h,{width:s,height:n}),a&&this.initFromArray(a,i)}addBaseTextureAt(t,i){if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=v.TEXTURE_2D_ARRAY}upload(t,i,s){const{length:n,itemDirtyIds:a,items:h}=this,{gl:c}=t;s.dirtyId<0&&c.texImage3D(c.TEXTURE_2D_ARRAY,0,s.internalFormat,this._width,this._height,n,0,i.format,s.type,null);for(let m=0;m<n;m++){const _=h[m];a[m]<_.dirtyId&&(a[m]=_.dirtyId,_.valid&&c.texSubImage3D(c.TEXTURE_2D_ARRAY,0,0,0,m,_.resource.width,_.resource.height,1,i.format,s.type,_.resource.source))}return!0}}class sm extends Ct{constructor(t){super(t)}static test(t){const{OffscreenCanvas:i}=globalThis;return i&&t instanceof i?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const $l=class extends af{constructor(e,t){const{width:i,height:s,autoLoad:n,linkBaseTexture:a}=t||{};if(e&&e.length!==$l.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:s});for(let h=0;h<$l.SIDES;h++)this.items[h].target=v.TEXTURE_CUBE_MAP_POSITIVE_X+h;this.linkBaseTexture=a!==!1,e&&this.initFromArray(e,t),n!==!1&&this.load()}bind(e){super.bind(e),e.target=v.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=v.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,i){const s=this.itemDirtyIds;for(let n=0;n<$l.SIDES;n++){const a=this.items[n];(s[n]<a.dirtyId||i.dirtyId<t.dirtyId)&&(a.valid&&a.resource?(a.resource.upload(e,a,i),s[n]=a.dirtyId):s[n]<-1&&(e.gl.texImage2D(a.target,0,i.internalFormat,t.realWidth,t.realHeight,0,t.format,i.type,null),s[n]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===$l.SIDES}};let lf=$l;lf.SIDES=6;class Wo extends Ct{constructor(t,i){i=i||{};let s,n;typeof t=="string"?(s=Wo.EMPTY,n=t):(s=t,n=null),super(s),this.url=n,this.crossOrigin=i.crossOrigin??!0,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,i)=>{if(this.url===null){t(this);return}try{const s=await G.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const n=await s.blob();if(this.destroyed)return;const a=await createImageBitmap(n,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===P.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=a,this.update(),t(this)}catch(s){if(this.destroyed)return;i(s),this.onError.emit(s)}}),this._load)}upload(t,i,s){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),super.upload(t,i,s)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return Wo._EMPTY=Wo._EMPTY??G.ADAPTER.createCanvas(0,0),Wo._EMPTY}}const pc=class extends Ct{constructor(e,t){t=t||{},super(G.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},pc.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Ct.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,i=e.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let s=t*this.scale,n=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(s=this._overrideWidth||this._overrideHeight/i*t,n=this._overrideHeight||this._overrideWidth/t*i),s=Math.round(s),n=Math.round(n);const a=this.source;a.width=s,a.height=n,a._pixiId=`canvas_${hs()}`,a.getContext("2d").drawImage(e,0,0,t,i,0,0,s,n),this._resolve(),this._resolve=null}}static getSize(e){const t=pc.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&pc.SVG_XML.test(e)}};let ka=pc;ka.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,ka.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const hf=class extends Ct{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);const s=e[0].src||e[0];Ct.crossOrigin(i,s,t.crossorigin);for(let n=0;n<e.length;++n){const a=document.createElement("source");let{src:h,mime:c}=e[n];h=h||e[n];const m=h.split("?").shift().toLowerCase(),_=m.slice(m.lastIndexOf(".")+1);c=c||hf.MIME_TYPES[_]||`video/${_}`,a.src=h,a.type=c,i.appendChild(a)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){const t=_i.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(_i.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(_i.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(_i.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(_i.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(_i.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||hf.TYPES.includes(t)}};let mc=hf;mc.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],mc.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"},Po.push(Wo,jt,sm,mc,ka,nn,lf,rm);class W0{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new Ji("disposeTransformFeedback")}bindBuffer(t,i){this.buffers[t]=i}destroy(){this.disposeRunner.emit(this,!1)}}const Y0="7.2.3";class ql{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?de.EMPTY:(t=t||new de(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,i){const{a:s,b:n,c:a,d:h,tx:c,ty:m}=t,_=s*i.x+a*i.y+c,y=n*i.x+h*i.y+m;this.minX=Math.min(this.minX,_),this.maxX=Math.max(this.maxX,_),this.minY=Math.min(this.minY,y),this.maxY=Math.max(this.maxY,y)}addQuad(t){let i=this.minX,s=this.minY,n=this.maxX,a=this.maxY,h=t[0],c=t[1];i=h<i?h:i,s=c<s?c:s,n=h>n?h:n,a=c>a?c:a,h=t[2],c=t[3],i=h<i?h:i,s=c<s?c:s,n=h>n?h:n,a=c>a?c:a,h=t[4],c=t[5],i=h<i?h:i,s=c<s?c:s,n=h>n?h:n,a=c>a?c:a,h=t[6],c=t[7],i=h<i?h:i,s=c<s?c:s,n=h>n?h:n,a=c>a?c:a,this.minX=i,this.minY=s,this.maxX=n,this.maxY=a}addFrame(t,i,s,n,a){this.addFrameMatrix(t.worldTransform,i,s,n,a)}addFrameMatrix(t,i,s,n,a){const h=t.a,c=t.b,m=t.c,_=t.d,y=t.tx,w=t.ty;let S=this.minX,R=this.minY,F=this.maxX,$=this.maxY,W=h*i+m*s+y,ot=c*i+_*s+w;S=W<S?W:S,R=ot<R?ot:R,F=W>F?W:F,$=ot>$?ot:$,W=h*n+m*s+y,ot=c*n+_*s+w,S=W<S?W:S,R=ot<R?ot:R,F=W>F?W:F,$=ot>$?ot:$,W=h*i+m*a+y,ot=c*i+_*a+w,S=W<S?W:S,R=ot<R?ot:R,F=W>F?W:F,$=ot>$?ot:$,W=h*n+m*a+y,ot=c*n+_*a+w,S=W<S?W:S,R=ot<R?ot:R,F=W>F?W:F,$=ot>$?ot:$,this.minX=S,this.minY=R,this.maxX=F,this.maxY=$}addVertexData(t,i,s){let n=this.minX,a=this.minY,h=this.maxX,c=this.maxY;for(let m=i;m<s;m+=2){const _=t[m],y=t[m+1];n=_<n?_:n,a=y<a?y:a,h=_>h?_:h,c=y>c?y:c}this.minX=n,this.minY=a,this.maxX=h,this.maxY=c}addVertices(t,i,s,n){this.addVerticesMatrix(t.worldTransform,i,s,n)}addVerticesMatrix(t,i,s,n,a=0,h=a){const c=t.a,m=t.b,_=t.c,y=t.d,w=t.tx,S=t.ty;let R=this.minX,F=this.minY,$=this.maxX,W=this.maxY;for(let ot=s;ot<n;ot+=2){const ut=i[ot],Q=i[ot+1],at=c*ut+_*Q+w,At=y*Q+m*ut+S;R=Math.min(R,at-a),$=Math.max($,at+a),F=Math.min(F,At-h),W=Math.max(W,At+h)}this.minX=R,this.minY=F,this.maxX=$,this.maxY=W}addBounds(t){const i=this.minX,s=this.minY,n=this.maxX,a=this.maxY;this.minX=t.minX<i?t.minX:i,this.minY=t.minY<s?t.minY:s,this.maxX=t.maxX>n?t.maxX:n,this.maxY=t.maxY>a?t.maxY:a}addBoundsMask(t,i){const s=t.minX>i.minX?t.minX:i.minX,n=t.minY>i.minY?t.minY:i.minY,a=t.maxX<i.maxX?t.maxX:i.maxX,h=t.maxY<i.maxY?t.maxY:i.maxY;if(s<=a&&n<=h){const c=this.minX,m=this.minY,_=this.maxX,y=this.maxY;this.minX=s<c?s:c,this.minY=n<m?n:m,this.maxX=a>_?a:_,this.maxY=h>y?h:y}}addBoundsMatrix(t,i){this.addFrameMatrix(i,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,i){const s=t.minX>i.x?t.minX:i.x,n=t.minY>i.y?t.minY:i.y,a=t.maxX<i.x+i.width?t.maxX:i.x+i.width,h=t.maxY<i.y+i.height?t.maxY:i.y+i.height;if(s<=a&&n<=h){const c=this.minX,m=this.minY,_=this.maxX,y=this.maxY;this.minX=s<c?s:c,this.minY=n<m?n:m,this.maxX=a>_?a:_,this.maxY=h>y?h:y}}pad(t=0,i=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=i,this.maxY+=i)}addFramePad(t,i,s,n,a,h){t-=a,i-=h,s+=a,n+=h,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>s?this.maxX:s,this.minY=this.minY<i?this.minY:i,this.maxY=this.maxY>n?this.maxY:n}}class ai extends g{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Wn,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new ql,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const i=Object.keys(t);for(let s=0;s<i.length;++s){const n=i[s];Object.defineProperty(ai.prototype,n,Object.getOwnPropertyDescriptor(t,n))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new de),i=this._boundsRect),this._bounds.getRectangle(i)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new de),t=this._localBoundsRect),this._localBounds||(this._localBounds=new ql);const i=this.transform,s=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const n=this._bounds,a=this._boundsID;this._bounds=this._localBounds;const h=this.getBounds(!1,t);return this.parent=s,this.transform=i,this._bounds=n,this._bounds.updateID+=this._boundsID-a,h}toGlobal(t,i,s=!1){return s||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)}toLocal(t,i,s,n){return i&&(t=i.toGlobal(t,s,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,s)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){this.parent?.removeChild(this)}setTransform(t=0,i=0,s=1,n=1,a=0,h=0,c=0,m=0,_=0){return this.position.x=t,this.position.y=i,this.scale.x=s||1,this.scale.y=n||1,this.rotation=a,this.skew.x=h,this.skew.y=c,this.pivot.x=m,this.pivot.y=_,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new nm),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*Il}set angle(t){this.transform.rotation=t*Qh}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=t,this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}}}class nm extends ai{constructor(){super(...arguments),this.sortDirty=null}}ai.prototype.displayObjectUpdateTransform=ai.prototype.updateTransform;const $0=new je;function q0(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const cf=class extends ai{constructor(){super(),this.children=[],this.sortableChildren=cf.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),s=this.getChildIndex(t);this.children[i]=t,this.children[s]=e,this.onChildrenChange(i<s?i:s)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);Wr(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,Wr(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Wr(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const i=e,s=t,n=s-i;let a;if(n>0&&n<=s){a=this.children.splice(i,n);for(let h=0;h<a.length;++h)a[h].parent=null,a[h].transform&&(a[h].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let h=0;h<a.length;++h)a[h].emit("removed",this),this.emit("childRemoved",a[h],this,h);return a}else if(n===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const s=this.children[t];s._lastSortedIndex=t,!e&&s.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(q0),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let s=0,n=this.children.length;s<n;++s){const a=this.children[s];a.visible&&a.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,s;this.cullArea?(i=this.cullArea,s=this.worldTransform):this._render!==cf.prototype._render&&(i=this.getBounds(!0));const n=e.projection.transform;if(n&&(s?(s=$0.copyFrom(s),s.prepend(n)):s=n),i&&t.intersects(i,s))this._render(e);else if(this.cullArea)return;for(let a=0,h=this.children.length;a<h;++a){const c=this.children[a],m=c.cullable;c.cullable=m||!this.cullArea,c.render(e),c.cullable=m}}render(e){if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||this.filters?.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let t=0,i=this.children.length;t<i;++t)this.children[t].render(e)}}renderAdvanced(e){const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let n=0;n<t.length;n++)t[n].enabled&&this._enabledFilters.push(t[n])}const s=t&&this._enabledFilters?.length||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==N.NONE));if(s&&e.batch.flush(),t&&this._enabledFilters?.length&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let n=0,a=this.children.length;n<a;++n)this.children[n].render(e)}s&&e.batch.flush(),i&&e.mask.pop(this),t&&this._enabledFilters?.length&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e?.children,i=this.removeChildren(0,this.children.length);if(t)for(let s=0;s<i.length;++s)i[s].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};let br=cf;br.defaultSortableChildren=!1,br.prototype.containerUpdateTransform=br.prototype.updateTransform,Object.defineProperties(G,{SORTABLE_CHILDREN:{get(){return br.defaultSortableChildren},set(e){ee("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),br.defaultSortableChildren=e}}});const Kl=new we,K0=new Uint16Array([0,1,2,0,2,3]);class dn extends br{constructor(t){super(),this._anchor=new fs(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Te(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=f.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||wt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=K0,this.pluginName="batch",this.isSprite=!0,this._roundPixels=G.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Qi(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Qi(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const i=this.transform.worldTransform,s=i.a,n=i.b,a=i.c,h=i.d,c=i.tx,m=i.ty,_=this.vertexData,y=t.trim,w=t.orig,S=this._anchor;let R=0,F=0,$=0,W=0;if(y?(F=y.x-S._x*w.width,R=F+y.width,W=y.y-S._y*w.height,$=W+y.height):(F=-S._x*w.width,R=F+w.width,W=-S._y*w.height,$=W+w.height),_[0]=s*F+a*W+c,_[1]=h*W+n*F+m,_[2]=s*R+a*W+c,_[3]=h*W+n*R+m,_[4]=s*R+a*$+c,_[5]=h*$+n*R+m,_[6]=s*F+a*$+c,_[7]=h*$+n*F+m,this._roundPixels){const ot=G.RESOLUTION;for(let ut=0;ut<_.length;++ut)_[ut]=Math.round(_[ut]*ot)/ot}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,i=this.vertexTrimmedData,s=t.orig,n=this._anchor,a=this.transform.worldTransform,h=a.a,c=a.b,m=a.c,_=a.d,y=a.tx,w=a.ty,S=-n._x*s.width,R=S+s.width,F=-n._y*s.height,$=F+s.height;i[0]=h*S+m*F+y,i[1]=_*F+c*S+w,i[2]=h*R+m*F+y,i[3]=_*F+c*R+w,i[4]=h*R+m*$+y,i[5]=_*$+c*R+w,i[6]=h*S+m*$+y,i[7]=_*$+c*S+w}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,i=this._texture.orig;!t||t.width===i.width&&t.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new ql),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new de),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,Kl);const i=this._texture.orig.width,s=this._texture.orig.height,n=-i*this.anchor.x;let a=0;return Kl.x>=n&&Kl.x<n+i&&(a=-s*this.anchor.y,Kl.y>=a&&Kl.y<a+s)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t?.texture){const s=typeof t=="boolean"?t:t?.baseTexture;this._texture.destroy(!!s)}this._texture=null}static from(t,i){const s=t instanceof wt?t:wt.from(t,i);return new dn(s)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const i=Qi(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const i=Qi(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||wt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const om=new je;ai.prototype._cacheAsBitmap=!1,ai.prototype._cacheData=null,ai.prototype._cacheAsBitmapResolution=null,ai.prototype._cacheAsBitmapMultisample=null;class Z0{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(ai.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new Z0),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}}),ai.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))},ai.prototype._initCachedDisplayObject=function(t){if(this._cacheData?.sprite)return;const i=this.alpha;this.alpha=1,t.batch.flush();const s=this.getLocalBounds(null,!0).clone();if(this.filters?.length){const S=this.filters[0].padding;s.pad(S)}s.ceil(G.RESOLUTION);const n=t.renderTexture.current,a=t.renderTexture.sourceFrame.clone(),h=t.renderTexture.destinationFrame.clone(),c=t.projection.transform,m=tr.create({width:s.width,height:s.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),_=`cacheAsBitmap_${hs()}`;this._cacheData.textureCacheId=_,le.addToCache(m.baseTexture,_),wt.addToCache(m,_);const y=this.transform.localTransform.copyTo(om).invert().translate(-s.x,-s.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:m,clear:!0,transform:y,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=c,t.renderTexture.bind(n,a,h),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const w=new dn(m);w.transform.worldTransform=this.transform.worldTransform,w.anchor.x=-(s.x/s.width),w.anchor.y=-(s.y/s.height),w.alpha=i,w._bounds=this._bounds,this._cacheData.sprite=w,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=w.containsPoint.bind(w)},ai.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},ai.prototype._initCachedDisplayObjectCanvas=function(t){if(this._cacheData?.sprite)return;const i=this.getLocalBounds(null,!0),s=this.alpha;this.alpha=1;const n=t.canvasContext.activeContext,a=t._projTransform;i.ceil(G.RESOLUTION);const h=tr.create({width:i.width,height:i.height}),c=`cacheAsBitmap_${hs()}`;this._cacheData.textureCacheId=c,le.addToCache(h.baseTexture,c),wt.addToCache(h,c);const m=om;this.transform.localTransform.copyTo(m),m.invert(),m.tx-=i.x,m.ty-=i.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:h,clear:!0,transform:m,skipUpdateTransform:!1}),t.canvasContext.activeContext=n,t._projTransform=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=s;const _=new dn(h);_.transform.worldTransform=this.transform.worldTransform,_.anchor.x=-(i.x/i.width),_.anchor.y=-(i.y/i.height),_.alpha=s,_._bounds=this._bounds,this._cacheData.sprite=_,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=_.containsPoint.bind(_)},ai.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID},ai.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)},ai.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,le.removeFromCache(this._cacheData.textureCacheId),wt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},ai.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)},ai.prototype.name=null,br.prototype.getChildByName=function(t,i){for(let s=0,n=this.children.length;s<n;s++)if(this.children[s].name===t)return this.children[s];if(i)for(let s=0,n=this.children.length;s<n;s++){const a=this.children[s];if(!a.getChildByName)continue;const h=a.getChildByName(t,!0);if(h)return h}return null},ai.prototype.getGlobalPosition=function(t=new we,i=!1){return this.parent?this.parent.toGlobal(this.position,t,i):(t.x=this.position.x,t.y=this.position.y),t};var Q0=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class am extends ci{constructor(t=1){super(im,Q0,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const J0={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},tv=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function ev(e){const t=J0[e],i=t.length;let s=tv,n="";const a="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let h;for(let c=0;c<e;c++){let m=a.replace("%index%",c.toString());h=c,c>=i&&(h=e-c-1),m=m.replace("%value%",t[h].toString()),n+=m,n+=`
`}return s=s.replace("%blur%",n),s=s.replace("%size%",e.toString()),s}const iv=`
      attribute vec2 aVertexPosition;
  
      uniform mat3 projectionMatrix;
  
      uniform float strength;
  
      varying vec2 vBlurTexCoords[%size%];
  
      uniform vec4 inputSize;
      uniform vec4 outputFrame;
  
      vec4 filterVertexPosition( void )
      {
          vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;
  
          return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
      }
  
      vec2 filterTextureCoord( void )
      {
          return aVertexPosition * (outputFrame.zw * inputSize.zw);
      }
  
      void main(void)
      {
          gl_Position = filterVertexPosition();
  
          vec2 textureCoord = filterTextureCoord();
          %blur%
      }`;function rv(e,t){const i=Math.ceil(e/2);let s=iv,n="",a;t?a="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":a="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let h=0;h<e;h++){let c=a.replace("%index%",h.toString());c=c.replace("%sampleIndex%",`${h-(i-1)}.0`),n+=c,n+=`
`}return s=s.replace("%blur%",n),s=s.replace("%size%",e.toString()),s}class gc extends ci{constructor(t,i=8,s=4,n=ci.defaultResolution,a=5){const h=rv(a,t),c=ev(a);super(h,c),this.horizontal=t,this.resolution=n,this._quality=0,this.quality=s,this.blur=i}apply(t,i,s,n){if(s?this.horizontal?this.uniforms.strength=1/s.width*(s.width/i.width):this.uniforms.strength=1/s.height*(s.height/i.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/i.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,i,s,n);else{const a=t.getFilterTexture(),h=t.renderer;let c=i,m=a;this.state.blend=!1,t.applyFilter(this,c,m,L.CLEAR);for(let _=1;_<this.passes-1;_++){t.bindAndClear(c,L.BLIT),this.uniforms.uSampler=m;const y=m;m=c,c=y,h.shader.bind(this),h.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,m,s,n),t.returnFilterTexture(a)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class lm extends ci{constructor(t=8,i=4,s=ci.defaultResolution,n=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new gc(!0,t,i,s,n),this.blurYFilter=new gc(!1,t,i,s,n),this.resolution=s,this.quality=i,this.blur=t,this.repeatEdgePixels=!1}apply(t,i,s,n){const a=Math.abs(this.blurXFilter.strength),h=Math.abs(this.blurYFilter.strength);if(a&&h){const c=t.getFilterTexture();this.blurXFilter.apply(t,i,c,L.CLEAR),this.blurYFilter.apply(t,c,s,n),t.returnFilterTexture(c)}else h?this.blurYFilter.apply(t,i,s,n):this.blurXFilter.apply(t,i,s,n)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var sv=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class _c extends ci{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(ef,sv,t),this.alpha=1}_loadMatrix(t,i=!1){let s=t;i&&(this._multiply(s,this.uniforms.m,t),s=this._colorMatrix(s)),this.uniforms.m=s}_multiply(t,i,s){return t[0]=i[0]*s[0]+i[1]*s[5]+i[2]*s[10]+i[3]*s[15],t[1]=i[0]*s[1]+i[1]*s[6]+i[2]*s[11]+i[3]*s[16],t[2]=i[0]*s[2]+i[1]*s[7]+i[2]*s[12]+i[3]*s[17],t[3]=i[0]*s[3]+i[1]*s[8]+i[2]*s[13]+i[3]*s[18],t[4]=i[0]*s[4]+i[1]*s[9]+i[2]*s[14]+i[3]*s[19]+i[4],t[5]=i[5]*s[0]+i[6]*s[5]+i[7]*s[10]+i[8]*s[15],t[6]=i[5]*s[1]+i[6]*s[6]+i[7]*s[11]+i[8]*s[16],t[7]=i[5]*s[2]+i[6]*s[7]+i[7]*s[12]+i[8]*s[17],t[8]=i[5]*s[3]+i[6]*s[8]+i[7]*s[13]+i[8]*s[18],t[9]=i[5]*s[4]+i[6]*s[9]+i[7]*s[14]+i[8]*s[19]+i[9],t[10]=i[10]*s[0]+i[11]*s[5]+i[12]*s[10]+i[13]*s[15],t[11]=i[10]*s[1]+i[11]*s[6]+i[12]*s[11]+i[13]*s[16],t[12]=i[10]*s[2]+i[11]*s[7]+i[12]*s[12]+i[13]*s[17],t[13]=i[10]*s[3]+i[11]*s[8]+i[12]*s[13]+i[13]*s[18],t[14]=i[10]*s[4]+i[11]*s[9]+i[12]*s[14]+i[13]*s[19]+i[14],t[15]=i[15]*s[0]+i[16]*s[5]+i[17]*s[10]+i[18]*s[15],t[16]=i[15]*s[1]+i[16]*s[6]+i[17]*s[11]+i[18]*s[16],t[17]=i[15]*s[2]+i[16]*s[7]+i[17]*s[12]+i[18]*s[17],t[18]=i[15]*s[3]+i[16]*s[8]+i[17]*s[13]+i[18]*s[18],t[19]=i[15]*s[4]+i[16]*s[9]+i[17]*s[14]+i[18]*s[19]+i[19],t}_colorMatrix(t){const i=new Float32Array(t);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i}brightness(t,i){const s=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(s,i)}tint(t,i){const[s,n,a]=Te.shared.setValue(t).toArray(),h=[s,0,0,0,0,0,n,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(h,i)}greyscale(t,i){const s=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(s,i)}blackAndWhite(t){const i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,t)}hue(t,i){t=(t||0)/180*Math.PI;const s=Math.cos(t),n=Math.sin(t),a=Math.sqrt,h=1/3,c=a(h),m=s+(1-s)*h,_=h*(1-s)-c*n,y=h*(1-s)+c*n,w=h*(1-s)+c*n,S=s+h*(1-s),R=h*(1-s)-c*n,F=h*(1-s)-c*n,$=h*(1-s)+c*n,W=s+h*(1-s),ot=[m,_,y,0,0,w,S,R,0,0,F,$,W,0,0,0,0,0,1,0];this._loadMatrix(ot,i)}contrast(t,i){const s=(t||0)+1,n=-.5*(s-1),a=[s,0,0,0,n,0,s,0,0,n,0,0,s,0,n,0,0,0,1,0];this._loadMatrix(a,i)}saturate(t=0,i){const s=t*2/3+1,n=(s-1)*-.5,a=[s,n,n,0,0,n,s,n,0,0,n,n,s,0,0,0,0,0,1,0];this._loadMatrix(a,i)}desaturate(){this.saturate(-1)}negative(t){const i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,t)}sepia(t){const i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,t)}technicolor(t){const i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,t)}polaroid(t){const i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,t)}toBGR(t){const i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,t)}kodachrome(t){const i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,t)}browni(t){const i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,t)}vintage(t){const i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,t)}colorTone(t,i,s,n,a){t=t||.2,i=i||.15,s=s||16770432,n=n||3375104;const h=Te.shared,[c,m,_]=h.setValue(s).toArray(),[y,w,S]=h.setValue(n).toArray(),R=[.3,.59,.11,0,0,c,m,_,t,0,y,w,S,i,0,c-y,m-w,_-S,0,0];this._loadMatrix(R,a)}night(t,i){t=t||.1;const s=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(s,i)}predator(t,i){const s=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(s,i)}lsd(t){const i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}_c.prototype.grayscale=_c.prototype.greyscale;var nv=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,ov=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class hm extends ci{constructor(t,i){const s=new je;t.renderable=!1,super(ov,nv,{mapSampler:t._texture,filterMatrix:s,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=s,i==null&&(i=20),this.scale=new we(i,i)}apply(t,i,s,n){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const a=this.maskSprite.worldTransform,h=Math.sqrt(a.a*a.a+a.b*a.b),c=Math.sqrt(a.c*a.c+a.d*a.d);h!==0&&c!==0&&(this.uniforms.rotation[0]=a.a/h,this.uniforms.rotation[1]=a.b/h,this.uniforms.rotation[2]=a.c/c,this.uniforms.rotation[3]=a.d/c),t.applyFilter(this,i,s,n)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var av=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,lv=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class cm extends ci{constructor(){super(lv,av)}}var hv=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class um extends ci{constructor(t=.5,i=Math.random()){super(ef,hv,{uNoise:0,uSeed:0}),this.noise=t,this.seed=i}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const uf={AlphaFilter:am,BlurFilter:lm,BlurFilterPass:gc,ColorMatrixFilter:_c,DisplacementFilter:hm,FXAAFilter:cm,NoiseFilter:um};Object.entries(uf).forEach(([e,t])=>{Object.defineProperty(uf,e,{get(){return ee("7.1.0",`filters.${e} has moved to ${e}`),t}})});class cv{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(t){this.removeTickerListener(),this.events=t,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(t){this._pauseUpdate=t}addTickerListener(){this.tickerAdded||!this.domElement||(_i.system.add(this.tickerUpdate,this,fn.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(_i.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const t=this.events.rootPointerEvent;this.events.supportsTouchEvents&&t.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:t.clientX,clientY:t.clientY}))}tickerUpdate(t){this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Zn=new cv;class La{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=La.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new we,this.page=new we,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,i,s){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,i,s,n,a){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Zl extends La{constructor(){super(...arguments),this.client=new we,this.movement=new we,this.offset=new we,this.global=new we,this.screen=new we}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(t,i,s){return t.worldTransform.applyInverse(s||this.global,i)}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,i,s,n,a,h,c,m,_,y,w,S,R,F,$){throw new Error("Method not implemented.")}}class ts extends Zl{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Yo extends Zl{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Yo.DOM_DELTA_PIXEL=0,Yo.DOM_DELTA_LINE=1,Yo.DOM_DELTA_PAGE=2;const uv=2048,fv=new we,ff=new we;class fm{constructor(t){this.dispatch=new g,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,i){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:i,priority:0}),this.mappingTable[t].sort((s,n)=>s.priority-n.priority)}dispatchEvent(t,i){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,i),this.dispatch.emit(i||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const i=this.mappingTable[t.type];if(i)for(let s=0,n=i.length;s<n;s++)i[s].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,i){Zn.pauseUpdate=!0;const n=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",a=this[n](this.rootTarget,this.rootTarget.eventMode,fv.set(t,i),this.hitTestFn,this.hitPruneFn);return a&&a[0]}propagate(t,i){if(!t.target)return;const s=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let n=0,a=s.length-1;n<a;n++)if(t.currentTarget=s[n],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,i),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let n=s.length-2;n>=0;n--)if(t.currentTarget=s[n],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,i,s=this._allInteractiveElements){if(s.length===0)return;t.eventPhase=t.BUBBLING_PHASE;const n=Array.isArray(i)?i:[i];for(let a=s.length-1;a>=0;a--)n.forEach(h=>{t.currentTarget=s[a],this.notifyTarget(t,h)})}propagationPath(t){const i=[t];for(let s=0;s<uv&&t!==this.rootTarget;s++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(t.parent),t=t.parent}return i.reverse(),i}hitTestMoveRecursive(t,i,s,n,a,h=!1){if(this._interactivePrune(t))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(Zn.pauseUpdate=!1),t.interactiveChildren&&t.children){const _=t.children;for(let y=_.length-1;y>=0;y--){const w=_[y],S=this.hitTestMoveRecursive(w,this._isInteractive(i)?i:w.eventMode,s,n,a,a(t,s));if(S){if(S.length>0&&!S[S.length-1].parent)continue;const R=t.isInteractive();(S.length>0||R)&&(R&&this._allInteractiveElements.push(t),S.push(t)),this._hitElements.length===0&&(this._hitElements=S)}}}const c=this._isInteractive(i),m=t.isInteractive();return m&&m&&this._allInteractiveElements.push(t),h||this._hitElements.length>0?null:c&&!a(t,s)&&n(t,s)?m?[t]:[]:null}hitTestRecursive(t,i,s,n,a){if(this._interactivePrune(t)||a(t,s))return null;if((t.eventMode==="dynamic"||i==="dynamic")&&(Zn.pauseUpdate=!1),t.interactiveChildren&&t.children){const m=t.children;for(let _=m.length-1;_>=0;_--){const y=m[_],w=this.hitTestRecursive(y,this._isInteractive(i)?i:y.eventMode,s,n,a);if(w){if(w.length>0&&!w[w.length-1].parent)continue;const S=t.isInteractive();return(w.length>0||S)&&w.push(t),w}}}const h=this._isInteractive(i),c=t.isInteractive();return h&&n(t,s)?c?[t]:[]:null}_isInteractive(t){return t==="static"||t==="dynamic"}_interactivePrune(t){return!!(!t||t.isMask||!t.visible||!t.renderable||t.eventMode==="none"||t.eventMode==="passive"&&!t.interactiveChildren||t.isMask)}hitPruneFn(t,i){if(t.hitArea&&(t.worldTransform.applyInverse(i,ff),!t.hitArea.contains(ff.x,ff.y)))return!0;if(t._mask){const s=t._mask.isMaskData?t._mask.maskObject:t._mask;if(s&&!s.containsPoint?.(i))return!0}return!1}hitTestFn(t,i){return t.eventMode==="passive"?!1:t.hitArea?!0:t.containsPoint?t.containsPoint(i):!1}notifyTarget(t,i){i=i??t.type;const s=`on${i}`;t.currentTarget[s]?.(t);const n=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${i}capture`:i;this.notifyListeners(t,n),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,i)}mapPointerDown(t){if(!(t instanceof ts)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const n=i.button===2;this.dispatchEvent(i,n?"rightdown":"mousedown")}const s=this.trackingData(t.pointerId);s.pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(t){if(!(t instanceof ts)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const i=this.createPointerEvent(t);this._isPointerMoveEvent=!1;const s=i.pointerType==="mouse"||i.pointerType==="pen",n=this.trackingData(t.pointerId),a=this.findMountedTarget(n.overTargets);if(n.overTargets?.length>0&&a!==i.target){const m=t.type==="mousemove"?"mouseout":"pointerout",_=this.createPointerEvent(t,m,a);if(this.dispatchEvent(_,"pointerout"),s&&this.dispatchEvent(_,"mouseout"),!i.composedPath().includes(a)){const y=this.createPointerEvent(t,"pointerleave",a);for(y.eventPhase=y.AT_TARGET;y.target&&!i.composedPath().includes(y.target);)y.currentTarget=y.target,this.notifyTarget(y),s&&this.notifyTarget(y,"mouseleave"),y.target=y.target.parent;this.freeEvent(y)}this.freeEvent(_)}if(a!==i.target){const m=t.type==="mousemove"?"mouseover":"pointerover",_=this.clonePointerEvent(i,m);this.dispatchEvent(_,"pointerover"),s&&this.dispatchEvent(_,"mouseover");let y=a?.parent;for(;y&&y!==this.rootTarget.parent&&y!==i.target;)y=y.parent;if(!y||y===this.rootTarget.parent){const S=this.clonePointerEvent(i,"pointerenter");for(S.eventPhase=S.AT_TARGET;S.target&&S.target!==a&&S.target!==this.rootTarget.parent;)S.currentTarget=S.target,this.notifyTarget(S),s&&this.notifyTarget(S,"mouseenter"),S.target=S.target.parent;this.freeEvent(S)}this.freeEvent(_)}const h=[],c=this.enableGlobalMoveEvents??!0;this.moveOnAll?h.push("pointermove"):this.dispatchEvent(i,"pointermove"),c&&h.push("globalpointermove"),i.pointerType==="touch"&&(this.moveOnAll?h.splice(1,0,"touchmove"):this.dispatchEvent(i,"touchmove"),c&&h.push("globaltouchmove")),s&&(this.moveOnAll?h.splice(1,0,"mousemove"):this.dispatchEvent(i,"mousemove"),c&&h.push("globalmousemove"),this.cursor=i.target?.cursor),h.length>0&&this.all(i,h),this._allInteractiveElements.length=0,this._hitElements.length=0,n.overTargets=i.composedPath(),this.freeEvent(i)}mapPointerOver(t){if(!(t instanceof ts)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),s=this.createPointerEvent(t),n=s.pointerType==="mouse"||s.pointerType==="pen";this.dispatchEvent(s,"pointerover"),n&&this.dispatchEvent(s,"mouseover"),s.pointerType==="mouse"&&(this.cursor=s.target?.cursor);const a=this.clonePointerEvent(s,"pointerenter");for(a.eventPhase=a.AT_TARGET;a.target&&a.target!==this.rootTarget.parent;)a.currentTarget=a.target,this.notifyTarget(a),n&&this.notifyTarget(a,"mouseenter"),a.target=a.target.parent;i.overTargets=s.composedPath(),this.freeEvent(s),this.freeEvent(a)}mapPointerOut(t){if(!(t instanceof ts)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId);if(i.overTargets){const s=t.pointerType==="mouse"||t.pointerType==="pen",n=this.findMountedTarget(i.overTargets),a=this.createPointerEvent(t,"pointerout",n);this.dispatchEvent(a),s&&this.dispatchEvent(a,"mouseout");const h=this.createPointerEvent(t,"pointerleave",n);for(h.eventPhase=h.AT_TARGET;h.target&&h.target!==this.rootTarget.parent;)h.currentTarget=h.target,this.notifyTarget(h),s&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;i.overTargets=null,this.freeEvent(a),this.freeEvent(h)}this.cursor=null}mapPointerUp(t){if(!(t instanceof ts)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=performance.now(),s=this.createPointerEvent(t);if(this.dispatchEvent(s,"pointerup"),s.pointerType==="touch")this.dispatchEvent(s,"touchend");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const c=s.button===2;this.dispatchEvent(s,c?"rightup":"mouseup")}const n=this.trackingData(t.pointerId),a=this.findMountedTarget(n.pressTargetsByButton[t.button]);let h=a;if(a&&!s.composedPath().includes(a)){let c=a;for(;c&&!s.composedPath().includes(c);){if(s.currentTarget=c,this.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch")this.notifyTarget(s,"touchendoutside");else if(s.pointerType==="mouse"||s.pointerType==="pen"){const m=s.button===2;this.notifyTarget(s,m?"rightupoutside":"mouseupoutside")}c=c.parent}delete n.pressTargetsByButton[t.button],h=c}if(h){const c=this.clonePointerEvent(s,"click");c.target=h,c.path=null,n.clicksByButton[t.button]||(n.clicksByButton[t.button]={clickCount:0,target:c.target,timeStamp:i});const m=n.clicksByButton[t.button];if(m.target===c.target&&i-m.timeStamp<200?++m.clickCount:m.clickCount=1,m.target=c.target,m.timeStamp=i,c.detail=m.clickCount,c.pointerType==="mouse"){const _=c.button===2;this.dispatchEvent(c,_?"rightclick":"click")}else c.pointerType==="touch"&&this.dispatchEvent(c,"tap");this.dispatchEvent(c,"pointertap"),this.freeEvent(c)}this.freeEvent(s)}mapPointerUpOutside(t){if(!(t instanceof ts)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[t.button]),n=this.createPointerEvent(t);if(s){let a=s;for(;a;)n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch"?this.notifyTarget(n,"touchendoutside"):(n.pointerType==="mouse"||n.pointerType==="pen")&&this.notifyTarget(n,n.button===2?"rightupoutside":"mouseupoutside"),a=a.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(n)}mapWheel(t){if(!(t instanceof Yo)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(t);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(t){if(!t)return null;let i=t[0];for(let s=1;s<t.length&&t[s].parent===i;s++)i=t[s];return i}createPointerEvent(t,i,s){const n=this.allocateEvent(ts);return this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.nativeEvent=t.nativeEvent,n.originalEvent=t,n.target=s??this.hitTest(n.global.x,n.global.y)??this._hitElements[0],typeof i=="string"&&(n.type=i),n}createWheelEvent(t){const i=this.allocateEvent(Yo);return this.copyWheelData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(t,i){const s=this.allocateEvent(ts);return s.nativeEvent=t.nativeEvent,s.originalEvent=t.originalEvent,this.copyPointerData(t,s),this.copyMouseData(t,s),this.copyData(t,s),s.target=t.target,s.path=t.composedPath().slice(),s.type=i??s.type,s}copyWheelData(t,i){i.deltaMode=t.deltaMode,i.deltaX=t.deltaX,i.deltaY=t.deltaY,i.deltaZ=t.deltaZ}copyPointerData(t,i){t instanceof ts&&i instanceof ts&&(i.pointerId=t.pointerId,i.width=t.width,i.height=t.height,i.isPrimary=t.isPrimary,i.pointerType=t.pointerType,i.pressure=t.pressure,i.tangentialPressure=t.tangentialPressure,i.tiltX=t.tiltX,i.tiltY=t.tiltY,i.twist=t.twist)}copyMouseData(t,i){t instanceof Zl&&i instanceof Zl&&(i.altKey=t.altKey,i.button=t.button,i.buttons=t.buttons,i.client.copyFrom(t.client),i.ctrlKey=t.ctrlKey,i.metaKey=t.metaKey,i.movement.copyFrom(t.movement),i.screen.copyFrom(t.screen),i.shiftKey=t.shiftKey,i.global.copyFrom(t.global))}copyData(t,i){i.isTrusted=t.isTrusted,i.srcElement=t.srcElement,i.timeStamp=performance.now(),i.type=t.type,i.detail=t.detail,i.view=t.view,i.which=t.which,i.layer.copyFrom(t.layer),i.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const i=this.eventPool.get(t).pop()||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(t)}notifyListeners(t,i){const s=t.currentTarget._events[i];if(s&&t.currentTarget.isInteractive())if("fn"in s)s.once&&t.currentTarget.removeListener(i,s.fn,void 0,!0),s.fn.call(s.context,t);else for(let n=0,a=s.length;n<a&&!t.propagationImmediatelyStopped;n++)s[n].once&&t.currentTarget.removeListener(i,s[n].fn,void 0,!0),s[n].fn.call(s[n].context,t)}}const dv=1,pv={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},df=class{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new fm(null),Zn.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new ts(null),this.rootWheelEvent=new Yo(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...df.defaultEventFeatures},{set:(t,i,s)=>(i==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=s),t[i]=s,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:t,resolution:i}=this.renderer;this.setTargetElement(t),this.resolution=i,df._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let t=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(t=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":t&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":t&&Object.assign(this.domElement.style,i);break}else t&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);this.autoPreventDefault&&t[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,s=t.length;i<s;i++){const n=t[i],a=this.bootstrapEvent(this.rootPointerEvent,n);this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;Zn.pointerMoved();const t=this.normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;let t=e.target;e.composedPath&&e.composedPath().length>0&&(t=e.composedPath()[0]);const i=t!==this.domElement?"outside":"",s=this.normalizeToPointerData(e);for(let n=0,a=s.length;n<a;n++){const h=this.bootstrapEvent(this.rootPointerEvent,s[n]);h.type+=i,this.rootBoundary.mapEvent(h)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch"))return;const t=this.normalizeToPointerData(e);for(let i=0,s=t.length;i<s;i++){const n=this.bootstrapEvent(this.rootPointerEvent,t[i]);this.rootBoundary.mapEvent(n)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const t=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(t)}setTargetElement(e){this.removeEvents(),this.domElement=e,Zn.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Zn.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Zn.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,t,i){let s;this.domElement.parentElement?s=this.domElement.getBoundingClientRect():s={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const n=1/this.resolution;e.x=(t-s.left)*(this.domElement.width/s.width)*n,e.y=(i-s.top)*(this.domElement.height/s.height)*n}normalizeToPointerData(e){const t=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,s=e.changedTouches.length;i<s;i++){const n=e.changedTouches[i];typeof n.button>"u"&&(n.button=0),typeof n.buttons>"u"&&(n.buttons=1),typeof n.isPrimary>"u"&&(n.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof n.width>"u"&&(n.width=n.radiusX||1),typeof n.height>"u"&&(n.height=n.radiusY||1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="touch"),typeof n.pointerId>"u"&&(n.pointerId=n.identifier||0),typeof n.pressure>"u"&&(n.pressure=n.force||.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),typeof n.layerX>"u"&&(n.layerX=n.offsetX=n.clientX),typeof n.layerY>"u"&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,n.type=e.type,t.push(n)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=dv),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,t.push(i)}else t.push(e);return t}normalizeWheelEvent(e){const t=this.rootWheelEvent;return this.transferMouseData(t,e),t.deltaX=e.deltaX,t.deltaY=e.deltaY,t.deltaZ=e.deltaZ,t.deltaMode=e.deltaMode,this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.nativeEvent=e,t.type=e.type,t}bootstrapEvent(e,t){return e.originalEvent=null,e.nativeEvent=t,e.pointerId=t.pointerId,e.width=t.width,e.height=t.height,e.isPrimary=t.isPrimary,e.pointerType=t.pointerType,e.pressure=t.pressure,e.tangentialPressure=t.tangentialPressure,e.tiltX=t.tiltX,e.tiltY=t.tiltY,e.twist=t.twist,this.transferMouseData(e,t),this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=t.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=pv[e.type]||e.type),e}transferMouseData(e,t){e.isTrusted=t.isTrusted,e.srcElement=t.srcElement,e.timeStamp=performance.now(),e.type=t.type,e.altKey=t.altKey,e.button=t.button,e.buttons=t.buttons,e.client.x=t.clientX,e.client.y=t.clientY,e.ctrlKey=t.ctrlKey,e.metaKey=t.metaKey,e.movement.x=t.movementX,e.movement.y=t.movementY,e.page.x=t.pageX,e.page.y=t.pageY,e.relatedTarget=null,e.shiftKey=t.shiftKey}};let Fa=df;Fa.extension={name:"events",type:[It.RendererSystem,It.CanvasRendererSystem]},Fa.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0},Xt.add(Fa);function dm(e){return e==="dynamic"||e==="static"}const pm={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??dm(Fa.defaultEventMode)},set interactive(e){ee("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=e,this.eventMode=e?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Fa.defaultEventMode},set eventMode(e){this._internalInteractive=dm(e),this._internalEventMode=e},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(e,t,i){const s=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,n=typeof t=="function"?void 0:t;e=s?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,n)},removeEventListener(e,t,i){const s=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,n=typeof t=="function"?void 0:t;e=s?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,n)},dispatchEvent(e){if(!(e instanceof La))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};ai.mixin(pm);const mm={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ai.mixin(mm);const mv=9,vc=100,gv=0,_v=0,gm=2,_m=1,vv=-1e3,yv=-1e3,xv=2;class pf{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Pe.tablet||Pe.phone)&&this.createTouchHook();const i=document.createElement("div");i.style.width=`${vc}px`,i.style.height=`${vc}px`,i.style.position="absolute",i.style.top=`${gv}px`,i.style.left=`${_v}px`,i.style.zIndex=gm.toString(),this.div=i,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${_m}px`,t.style.height=`${_m}px`,t.style.position="absolute",t.style.top=`${vv}px`,t.style.left=`${yv}px`,t.style.zIndex=xv.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode?.appendChild(this.div))}deactivate(){!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode?.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.isInteractive()&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const i=t.children;if(i)for(let s=0;s<i.length;s++)this.updateAccessibleObjects(i[s])}update(){const t=performance.now();if(Pe.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:i,y:s,width:n,height:a}=this.renderer.view.getBoundingClientRect(),{width:h,height:c,resolution:m}=this.renderer,_=n/h*m,y=a/c*m;let w=this.div;w.style.left=`${i}px`,w.style.top=`${s}px`,w.style.width=`${h}px`,w.style.height=`${c}px`;for(let S=0;S<this.children.length;S++){const R=this.children[S];if(R.renderId!==this.renderId)R._accessibleActive=!1,Wr(this.children,S,1),this.div.removeChild(R._accessibleDiv),this.pool.push(R._accessibleDiv),R._accessibleDiv=null,S--;else{w=R._accessibleDiv;let F=R.hitArea;const $=R.worldTransform;R.hitArea?(w.style.left=`${($.tx+F.x*$.a)*_}px`,w.style.top=`${($.ty+F.y*$.d)*y}px`,w.style.width=`${F.width*$.a*_}px`,w.style.height=`${F.height*$.d*y}px`):(F=R.getBounds(),this.capHitArea(F),w.style.left=`${F.x*_}px`,w.style.top=`${F.y*y}px`,w.style.width=`${F.width*_}px`,w.style.height=`${F.height*y}px`,w.title!==R.accessibleTitle&&R.accessibleTitle!==null&&(w.title=R.accessibleTitle),w.getAttribute("aria-label")!==R.accessibleHint&&R.accessibleHint!==null&&w.setAttribute("aria-label",R.accessibleHint)),(R.accessibleTitle!==w.title||R.tabIndex!==w.tabIndex)&&(w.title=R.accessibleTitle,w.tabIndex=R.tabIndex,this.debug&&this.updateDebugHTML(w))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:i,height:s}=this.renderer;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>s&&(t.height=s-t.y)}addChild(t){let i=this.pool.pop();i||(i=document.createElement("button"),i.style.width=`${vc}px`,i.style.height=`${vc}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=gm.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=t.accessiblePointerEvents,i.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?i.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(i.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&i.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(i),t._accessibleActive=!0,t._accessibleDiv=i,i.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,i){const{displayObject:s}=t.target,n=this.renderer.events.rootBoundary,a=Object.assign(new La(n),{target:s});n.rootTarget=this.renderer.lastObjectRendered,i.forEach(h=>n.dispatchEvent(a,h))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===mv&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}pf.extension={name:"accessibility",type:[It.RendererPlugin,It.CanvasRendererPlugin]},Xt.add(pf);const mf=class{constructor(e){this.stage=new br,e=Object.assign({forceCanvas:!1},e),this.renderer=em(e),mf._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const i=mf._plugins.slice(0);i.reverse(),i.forEach(s=>{s.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let gf=mf;gf._plugins=[],Xt.handleByList(It.Application,gf._plugins);class _f{static init(t){Object.defineProperty(this,"resizeTo",{set(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let i,s;if(this._resizeTo===globalThis.window)i=globalThis.innerWidth,s=globalThis.innerHeight;else{const{clientWidth:n,clientHeight:a}=this._resizeTo;i=n,s=a}this.renderer.resize(i,s),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}_f.extension=It.Application,Xt.add(_f);const vm={loader:It.LoadParser,resolver:It.ResolveParser,cache:It.CacheParser,detection:It.DetectionParser};Xt.handle(It.Asset,e=>{const t=e.ref;Object.entries(vm).filter(([i])=>!!t[i]).forEach(([i,s])=>Xt.add(Object.assign(t[i],{extension:t[i].extension??s})))},e=>{const t=e.ref;Object.keys(vm).filter(i=>!!t[i]).forEach(i=>Xt.remove(t[i]))});class bv{constructor(t,i=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(t){t.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let s=0;s<i;s++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function Ba(e,t){if(Array.isArray(t)){for(const i of t)if(e.startsWith(`data:${i}`))return!0;return!1}return e.startsWith(`data:${t}`)}function Qn(e,t){const i=e.split("?")[0],s=si.extname(i).toLowerCase();return Array.isArray(t)?t.includes(s):s===t}const js=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map(i=>typeof i=="string"?t(i):i):e),yc=(e,t)=>{const i=t.split("?")[1];return i&&(e+=`?${i}`),e};function ym(e,t,i,s,n){const a=t[i];for(let h=0;h<a.length;h++){const c=a[h];i<t.length-1?ym(e.replace(s[i],c),t,i+1,s,n):n.push(e.replace(s[i],c))}}function xm(e){const t=/\{(.*?)\}/g,i=e.match(t),s=[];if(i){const n=[];i.forEach(a=>{const h=a.substring(1,a.length-1).split(",");n.push(h)}),ym(e,n,0,i,s)}else s.push(e);return s}const Ql=e=>!Array.isArray(e);class Tv{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const i=this._cache.get(t);return i||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),i}set(t,i){const s=js(t);let n;for(let c=0;c<this.parsers.length;c++){const m=this.parsers[c];if(m.test(i)){n=m.getCacheableAssets(s,i);break}}n||(n={},s.forEach(c=>{n[c]=i}));const a=Object.keys(n),h={cacheKeys:a,keys:s};if(s.forEach(c=>{this._cacheMap.set(c,h)}),a.forEach(c=>{this._cache.has(c)&&this._cache.get(c)!==i&&console.warn("[Cache] already has key:",c),this._cache.set(c,n[c])}),i instanceof wt){const c=i;s.forEach(m=>{c.baseTexture!==wt.EMPTY.baseTexture&&le.addToCache(c.baseTexture,m),wt.addToCache(c,m)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const i=this._cacheMap.get(t);i.cacheKeys.forEach(n=>{this._cache.delete(n)}),i.keys.forEach(n=>{this._cacheMap.delete(n)})}get parsers(){return this._parsers}}const Na=new Tv;class wv{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,i,s)=>(this._parsersValidated=!1,t[i]=s,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,i){const s={promise:null,parser:null};return s.promise=(async()=>{let n=null,a=null;if(i.loadParser&&(a=this._parserHash[i.loadParser],a||console.warn(`[Assets] specified load parser "${i.loadParser}" not found while loading ${t}`)),!a){for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];if(c.load&&c.test?.(t,i,this)){a=c;break}}if(!a)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}n=await a.load(t,i,this),s.parser=a;for(let h=0;h<this.parsers.length;h++){const c=this.parsers[h];c.parse&&c.parse&&await c.testParse?.(n,i,this)&&(n=await c.parse(n,i,this)||n,s.parser=c)}return n})(),s}async load(t,i){this._parsersValidated||this._validateParsers();let s=0;const n={},a=Ql(t),h=js(t,_=>({src:_})),c=h.length,m=h.map(async _=>{const y=si.toAbsolute(_.src);if(!n[_.src])try{this.promiseCache[y]||(this.promiseCache[y]=this._getLoadPromiseAndParser(y,_)),n[_.src]=await this.promiseCache[y].promise,i&&i(++s/c)}catch(w){throw delete this.promiseCache[y],delete n[_.src],new Error(`[Loader.load] Failed to load ${y}.
  ${w}`)}});return await Promise.all(m),a?n[h[0].src]:n}async unload(t){const s=js(t,n=>({src:n})).map(async n=>{const a=si.toAbsolute(n.src),h=this.promiseCache[a];if(h){const c=await h.promise;h.parser?.unload?.(c,n,this),delete this.promiseCache[a]}});await Promise.all(s)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,i)=>(t[i.name]&&console.warn(`[Assets] loadParser name conflict "${i.name}"`),{...t,[i.name]:i}),{})}}var gs=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(gs||{});const Sv=".json",Ev="application/json",bm={extension:{type:It.LoadParser,priority:gs.Low},name:"loadJson",test(e){return Ba(e,Ev)||Qn(e,Sv)},async load(e){return await(await G.ADAPTER.fetch(e)).json()}};Xt.add(bm);const Av=".txt",Cv="text/plain",Tm={name:"loadTxt",extension:{type:It.LoadParser,priority:gs.Low},test(e){return Ba(e,Cv)||Qn(e,Av)},async load(e){return await(await G.ADAPTER.fetch(e)).text()}};Xt.add(Tm);const Pv=["normal","bold","100","200","300","400","500","600","700","800","900"],Mv=[".ttf",".otf",".woff",".woff2"],Rv=["font/ttf","font/otf","font/woff","font/woff2"];function wm(e){const t=si.extname(e);return si.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")}const Sm={extension:{type:It.LoadParser,priority:gs.Low},name:"loadWebFont",test(e){return Ba(e,Rv)||Qn(e,Mv)},async load(e,t){const i=G.ADAPTER.getFontFaceSet();if(i){const s=[],n=t.data?.family??wm(e),a=t.data?.weights?.filter(c=>Pv.includes(c))??["normal"],h=t.data??{};for(let c=0;c<a.length;c++){const m=a[c],_=new FontFace(n,`url(${encodeURI(e)})`,{...h,weight:m});await _.load(),i.add(_),s.push(_)}return s.length===1?s[0]:s}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>G.ADAPTER.getFontFaceSet().delete(t))}};Xt.add(Sm);let Em=0,vf;const Dv={id:"checkImageBitmap",code:`
      async function checkImageBitmap()
      {
          try
          {
              if (typeof createImageBitmap !== 'function') return false;
  
              const response = await fetch('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=');
              const imageBlob =  await response.blob();
              const imageBitmap = await createImageBitmap(imageBlob);
  
              return imageBitmap.width === 1 && imageBitmap.height === 1;
          }
          catch (e)
          {
              return false;
          }
      }
      checkImageBitmap().then((result) => { self.postMessage(result); });
      `},Iv={id:"loadImageBitmap",code:`
      async function loadImageBitmap(url)
      {
          const response = await fetch(url);
  
          if (!response.ok)
          {
              throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                  + \`\${response.status} \${response.statusText}\`);
          }
  
          const imageBlob =  await response.blob();
          const imageBitmap = await createImageBitmap(imageBlob);
  
          return imageBitmap;
      }
      self.onmessage = async (event) =>
      {
          try
          {
              const imageBitmap = await loadImageBitmap(event.data.data[0]);
  
              self.postMessage({
                  data: imageBitmap,
                  uuid: event.data.uuid,
                  id: event.data.id,
              }, [imageBitmap]);
          }
          catch(e)
          {
              self.postMessage({
                  error: e,
                  uuid: event.data.uuid,
                  id: event.data.id,
              });
          }
      };`};let yf;class Ov{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const i=URL.createObjectURL(new Blob([Dv.code],{type:"application/javascript"})),s=new Worker(i);s.addEventListener("message",n=>{s.terminate(),URL.revokeObjectURL(i),t(n.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){vf===void 0&&(vf=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<vf&&(yf||(yf=URL.createObjectURL(new Blob([Iv.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(yf),t.addEventListener("message",i=>{this.complete(i.data),this.returnWorker(i.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,i){await this._initWorkers();const s=new Promise((n,a)=>{this.queue.push({id:t,arguments:i,resolve:n,reject:a})});return this.next(),s}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const i=this.queue.pop(),s=i.id;this.resolveHash[Em]={resolve:i.resolve,reject:i.reject},t.postMessage({data:i.arguments,uuid:Em++,id:s})}}const Am=new Ov;function Jl(e,t,i){const s=new wt(e);return s.baseTexture.on("dispose",()=>{delete t.promiseCache[i]}),s}const kv=[".jpeg",".jpg",".png",".webp",".avif"],Lv=["image/jpeg","image/png","image/webp","image/avif"];async function Cm(e){const t=await G.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const i=await t.blob();return await createImageBitmap(i)}const th={name:"loadTextures",extension:{type:It.LoadParser,priority:gs.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(e){return Ba(e,Lv)||Qn(e,kv)},async load(e,t,i){let s=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Am.isImageBitmapSupported()?s=await Am.loadImageBitmap(e):s=await Cm(e):s=await new Promise(a=>{s=new Image,s.crossOrigin=this.config.crossOrigin,s.src=e,s.complete?a(s):s.onload=()=>{a(s)}});const n=new le(s,{resolution:Yr(e),...t.data});return n.resource.src=e,Jl(n,i,e)},unload(e){e.destroy(!0)}};Xt.add(th);const Fv=".svg",Bv="image/svg+xml",Pm={extension:{type:It.LoadParser,priority:gs.High},name:"loadSVG",test(e){return Ba(e,Bv)||Qn(e,Fv)},async testParse(e){return ka.test(e)},async parse(e,t,i){const s=new ka(e,t?.data?.resourceOptions),n=new le(s,{resolution:Yr(e),...t?.data});n.resource.src=e;const a=Jl(n,i,e);return t?.data?.resourceOptions?.autoLoad||await s.load(),a},async load(e,t){return(await G.ADAPTER.fetch(e)).text()},unload:th.unload};Xt.add(Pm);class Nv{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,i)=>`${t}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(t,i)=>i.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const i=t;this._defaultSearchParams=Object.keys(i).map(s=>`${encodeURIComponent(s)}=${encodeURIComponent(i[s])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(t,i){const s=[];Array.isArray(i)?i.forEach(n=>{if(typeof n.name=="string"){const a=this._createBundleAssetId(t,n.name);s.push(a),this.add([n.name,a],n.srcs,n.data)}else{const a=n.name.map(h=>this._createBundleAssetId(t,h));a.forEach(h=>{s.push(h)}),this.add([...n.name,...a],n.srcs)}}):Object.keys(i).forEach(n=>{s.push(this._createBundleAssetId(t,n)),this.add([n,this._createBundleAssetId(t,n)],i[n])}),this._bundles[t]=s}add(t,i,s){const n=js(t);n.forEach(h=>{this.hasKey(h)&&console.warn(`[Resolver] already has key: ${h} overwriting`)}),Array.isArray(i)||(typeof i=="string"?i=xm(i):i=[i]);const a=i.map(h=>{let c=h;if(typeof h=="string"){let m=!1;for(let _=0;_<this._parsers.length;_++){const y=this._parsers[_];if(y.test(h)){c=y.parse(h),m=!0;break}}m||(c={src:h})}return c.format||(c.format=c.src.split(".").pop()),c.alias||(c.alias=n),(this._basePath||this._rootPath)&&(c.src=si.toAbsolute(c.src,this._basePath,this._rootPath)),c.src=this._appendDefaultSearchParams(c.src),c.data=c.data??s,c});n.forEach(h=>{this._assetMap[h]=a})}resolveBundle(t){const i=Ql(t);t=js(t);const s={};return t.forEach(n=>{const a=this._bundles[n];if(a){const h=this.resolve(a),c={};for(const m in h){const _=h[m];c[this._extractAssetIdFromBundle(n,m)]=_}s[n]=c}}),i?s[t[0]]:s}resolveUrl(t){const i=this.resolve(t);if(typeof t!="string"){const s={};for(const n in i)s[n]=i[n].src;return s}return i.src}resolve(t){const i=Ql(t);t=js(t);const s={};return t.forEach(n=>{if(!this._resolverHash[n])if(this._assetMap[n]){let a=this._assetMap[n];const h=this._getPreferredOrder(a),c=a[0];h?.priority.forEach(m=>{h.params[m].forEach(_=>{const y=a.filter(w=>w[m]?w[m]===_:!1);y.length&&(a=y)})}),this._resolverHash[n]=a[0]??c}else{let a=n;(this._basePath||this._rootPath)&&(a=si.toAbsolute(a,this._basePath,this._rootPath)),a=this._appendDefaultSearchParams(a),this._resolverHash[n]={src:a}}s[n]=this._resolverHash[n]}),i?s[t[0]]:s}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let i=0;i<t.length;i++){const s=t[0],n=this._preferredOrder.find(a=>a.params.format.includes(s.format));if(n)return n}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const i=/\?/.test(t)?"&":"?";return`${t}${i}${this._defaultSearchParams}`}}class Mm{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Nv,this.loader=new wv,this.cache=Na,this._backgroundLoader=new bv(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let a=t.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const i=t.texturePreference?.resolution??1,s=typeof i=="number"?[i]:i;let n=[];if(t.texturePreference?.format){const a=t.texturePreference?.format;n=typeof a=="string"?[a]:a;for(const h of this._detections)await h.test()||(n=await h.remove(n))}else for(const a of this._detections)await a.test()&&(n=await a.add(n));this.resolver.prefer({params:{format:n,resolution:s}}),t.preferences&&this.setPreferences(t.preferences)}add(t,i,s){this.resolver.add(t,i,s)}async load(t,i){this._initialized||await this.init();const s=Ql(t),n=js(t).map(c=>typeof c!="string"?(this.resolver.add(c.src,c),c.src):(this.resolver.hasKey(c)||this.resolver.add(c,c),c)),a=this.resolver.resolve(n),h=await this._mapLoadToResolve(a,i);return s?h[n[0]]:h}addBundle(t,i){this.resolver.addBundle(t,i)}async loadBundle(t,i){this._initialized||await this.init();let s=!1;typeof t=="string"&&(s=!0,t=[t]);const n=this.resolver.resolveBundle(t),a={},h=Object.keys(n);let c=0,m=0;const _=()=>{i?.(++c/m)},y=h.map(w=>{const S=n[w];return m+=Object.keys(S).length,this._mapLoadToResolve(S,_).then(R=>{a[w]=R})});return await Promise.all(y),s?a[t[0]]:a}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolveBundle(t);Object.values(i).forEach(s=>{this._backgroundLoader.add(Object.values(s))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return Na.get(t);const i={};for(let s=0;s<t.length;s++)i[s]=Na.get(t[s]);return i}async _mapLoadToResolve(t,i){const s=Object.values(t),n=Object.keys(t);this._backgroundLoader.active=!1;const a=await this.loader.load(s,i);this._backgroundLoader.active=!0;const h={};return s.forEach((c,m)=>{const _=a[c.src],y=[c.src];c.alias&&y.push(...c.alias),h[n[m]]=_,Na.set(y,_)}),h}async unload(t){this._initialized||await this.init();const i=js(t).map(n=>typeof n!="string"?n.src:n),s=this.resolver.resolve(i);await this._unloadFromResolved(s)}async unloadBundle(t){this._initialized||await this.init(),t=js(t);const i=this.resolver.resolveBundle(t),s=Object.keys(i).map(n=>this._unloadFromResolved(i[n]));await Promise.all(s)}async _unloadFromResolved(t){const i=Object.values(t);i.forEach(s=>{Na.remove(s.src)}),await this.loader.unload(i)}get detections(){return this._detections}get preferWorkers(){return th.config.preferWorkers}set preferWorkers(t){ee("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:t})}setPreferences(t){this.loader.parsers.forEach(i=>{i.config&&Object.keys(i.config).filter(s=>s in t).forEach(s=>{i.config[s]=t[s]})})}}const eh=new Mm;Xt.handleByList(It.LoadParser,eh.loader.parsers).handleByList(It.ResolveParser,eh.resolver.parsers).handleByList(It.CacheParser,eh.cache.parsers).handleByList(It.DetectionParser,eh.detections);const Rm={extension:It.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof wt),getCacheableAssets:(e,t)=>{const i={};return e.forEach(s=>{t.forEach((n,a)=>{i[s+(a===0?"":a+1)]=n})}),i}};Xt.add(Rm);const Dm={extension:{type:It.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await G.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};Xt.add(Dm);const Im={extension:{type:It.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await G.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};Xt.add(Im);const Om=["png","jpg","jpeg"],km={extension:{type:It.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...Om],remove:async e=>e.filter(t=>!Om.includes(t))};Xt.add(km);const Lm={extension:It.ResolveParser,test:th.test,parse:e=>({resolution:parseFloat(G.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e})};Xt.add(Lm);var Tr=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(Tr||{});const ih={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let pn,Ua;function Fm(){Ua={s3tc:pn.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:pn.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:pn.getExtension("WEBGL_compressed_texture_etc"),etc1:pn.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:pn.getExtension("WEBGL_compressed_texture_pvrtc")||pn.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:pn.getExtension("WEBGL_compressed_texture_atc"),astc:pn.getExtension("WEBGL_compressed_texture_astc")}}const Bm={extension:{type:It.DetectionParser,priority:2},test:async()=>{const t=G.ADAPTER.createCanvas().getContext("webgl");return t?(pn=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{Ua||Fm();const t=[];for(const i in Ua)Ua[i]&&t.push(i);return[...t,...e]},remove:async e=>(Ua||Fm(),e.filter(t=>!(t in Ua)))};Xt.add(Bm);class Nm extends nn{constructor(t,i={width:1,height:1,autoLoad:!0}){let s,n;typeof t=="string"?(s=t,n=new Uint8Array):(s=null,n=t),super(n,i),this.origin=s,this.buffer=n?new Co(n):null,this.origin&&i.autoLoad!==!1&&this.load(),n?.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}async load(){const s=await(await(await fetch(this.origin)).blob()).arrayBuffer();return this.data=new Uint32Array(s),this.buffer=new Co(s),this.loaded=!0,this.onBlobLoaded(s),this.update(),this}}class Jn extends Nm{constructor(t,i){super(t,i),this.format=i.format,this.levels=i.levels||1,this._width=i.width,this._height=i.height,this._extension=Jn._formatToExtension(this.format),(i.levelBuffers||this.buffer)&&(this._levelBuffers=i.levelBuffers||Jn._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,i,s){const n=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let h=0,c=this.levels;h<c;h++){const{levelID:m,levelWidth:_,levelHeight:y,levelBuffer:w}=this._levelBuffers[h];n.compressedTexImage2D(n.TEXTURE_2D,m,this.format,_,y,0,w)}return!0}onBlobLoaded(){this._levelBuffers=Jn._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,i,s,n,a,h,c){const m=new Array(s);let _=t.byteOffset,y=h,w=c,S=y+n-1&~(n-1),R=w+a-1&~(a-1),F=S*R*ih[i];for(let $=0;$<s;$++)m[$]={levelID:$,levelWidth:s>1?y:S,levelHeight:s>1?w:R,levelBuffer:new Uint8Array(t.buffer,_,F)},_+=F,y=y>>1||1,w=w>>1||1,S=y+n-1&~(n-1),R=w+a-1&~(a-1),F=S*R*ih[i];return m}}const xf=4,xc=124,Uv=32,Um=20,Gv=542327876,bc={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},zv={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Tc={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4};var Vv=(e=>(e[e.DXGI_FORMAT_UNKNOWN=0]="DXGI_FORMAT_UNKNOWN",e[e.DXGI_FORMAT_R32G32B32A32_TYPELESS=1]="DXGI_FORMAT_R32G32B32A32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32A32_FLOAT=2]="DXGI_FORMAT_R32G32B32A32_FLOAT",e[e.DXGI_FORMAT_R32G32B32A32_UINT=3]="DXGI_FORMAT_R32G32B32A32_UINT",e[e.DXGI_FORMAT_R32G32B32A32_SINT=4]="DXGI_FORMAT_R32G32B32A32_SINT",e[e.DXGI_FORMAT_R32G32B32_TYPELESS=5]="DXGI_FORMAT_R32G32B32_TYPELESS",e[e.DXGI_FORMAT_R32G32B32_FLOAT=6]="DXGI_FORMAT_R32G32B32_FLOAT",e[e.DXGI_FORMAT_R32G32B32_UINT=7]="DXGI_FORMAT_R32G32B32_UINT",e[e.DXGI_FORMAT_R32G32B32_SINT=8]="DXGI_FORMAT_R32G32B32_SINT",e[e.DXGI_FORMAT_R16G16B16A16_TYPELESS=9]="DXGI_FORMAT_R16G16B16A16_TYPELESS",e[e.DXGI_FORMAT_R16G16B16A16_FLOAT=10]="DXGI_FORMAT_R16G16B16A16_FLOAT",e[e.DXGI_FORMAT_R16G16B16A16_UNORM=11]="DXGI_FORMAT_R16G16B16A16_UNORM",e[e.DXGI_FORMAT_R16G16B16A16_UINT=12]="DXGI_FORMAT_R16G16B16A16_UINT",e[e.DXGI_FORMAT_R16G16B16A16_SNORM=13]="DXGI_FORMAT_R16G16B16A16_SNORM",e[e.DXGI_FORMAT_R16G16B16A16_SINT=14]="DXGI_FORMAT_R16G16B16A16_SINT",e[e.DXGI_FORMAT_R32G32_TYPELESS=15]="DXGI_FORMAT_R32G32_TYPELESS",e[e.DXGI_FORMAT_R32G32_FLOAT=16]="DXGI_FORMAT_R32G32_FLOAT",e[e.DXGI_FORMAT_R32G32_UINT=17]="DXGI_FORMAT_R32G32_UINT",e[e.DXGI_FORMAT_R32G32_SINT=18]="DXGI_FORMAT_R32G32_SINT",e[e.DXGI_FORMAT_R32G8X24_TYPELESS=19]="DXGI_FORMAT_R32G8X24_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT_S8X24_UINT=20]="DXGI_FORMAT_D32_FLOAT_S8X24_UINT",e[e.DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS=21]="DXGI_FORMAT_R32_FLOAT_X8X24_TYPELESS",e[e.DXGI_FORMAT_X32_TYPELESS_G8X24_UINT=22]="DXGI_FORMAT_X32_TYPELESS_G8X24_UINT",e[e.DXGI_FORMAT_R10G10B10A2_TYPELESS=23]="DXGI_FORMAT_R10G10B10A2_TYPELESS",e[e.DXGI_FORMAT_R10G10B10A2_UNORM=24]="DXGI_FORMAT_R10G10B10A2_UNORM",e[e.DXGI_FORMAT_R10G10B10A2_UINT=25]="DXGI_FORMAT_R10G10B10A2_UINT",e[e.DXGI_FORMAT_R11G11B10_FLOAT=26]="DXGI_FORMAT_R11G11B10_FLOAT",e[e.DXGI_FORMAT_R8G8B8A8_TYPELESS=27]="DXGI_FORMAT_R8G8B8A8_TYPELESS",e[e.DXGI_FORMAT_R8G8B8A8_UNORM=28]="DXGI_FORMAT_R8G8B8A8_UNORM",e[e.DXGI_FORMAT_R8G8B8A8_UNORM_SRGB=29]="DXGI_FORMAT_R8G8B8A8_UNORM_SRGB",e[e.DXGI_FORMAT_R8G8B8A8_UINT=30]="DXGI_FORMAT_R8G8B8A8_UINT",e[e.DXGI_FORMAT_R8G8B8A8_SNORM=31]="DXGI_FORMAT_R8G8B8A8_SNORM",e[e.DXGI_FORMAT_R8G8B8A8_SINT=32]="DXGI_FORMAT_R8G8B8A8_SINT",e[e.DXGI_FORMAT_R16G16_TYPELESS=33]="DXGI_FORMAT_R16G16_TYPELESS",e[e.DXGI_FORMAT_R16G16_FLOAT=34]="DXGI_FORMAT_R16G16_FLOAT",e[e.DXGI_FORMAT_R16G16_UNORM=35]="DXGI_FORMAT_R16G16_UNORM",e[e.DXGI_FORMAT_R16G16_UINT=36]="DXGI_FORMAT_R16G16_UINT",e[e.DXGI_FORMAT_R16G16_SNORM=37]="DXGI_FORMAT_R16G16_SNORM",e[e.DXGI_FORMAT_R16G16_SINT=38]="DXGI_FORMAT_R16G16_SINT",e[e.DXGI_FORMAT_R32_TYPELESS=39]="DXGI_FORMAT_R32_TYPELESS",e[e.DXGI_FORMAT_D32_FLOAT=40]="DXGI_FORMAT_D32_FLOAT",e[e.DXGI_FORMAT_R32_FLOAT=41]="DXGI_FORMAT_R32_FLOAT",e[e.DXGI_FORMAT_R32_UINT=42]="DXGI_FORMAT_R32_UINT",e[e.DXGI_FORMAT_R32_SINT=43]="DXGI_FORMAT_R32_SINT",e[e.DXGI_FORMAT_R24G8_TYPELESS=44]="DXGI_FORMAT_R24G8_TYPELESS",e[e.DXGI_FORMAT_D24_UNORM_S8_UINT=45]="DXGI_FORMAT_D24_UNORM_S8_UINT",e[e.DXGI_FORMAT_R24_UNORM_X8_TYPELESS=46]="DXGI_FORMAT_R24_UNORM_X8_TYPELESS",e[e.DXGI_FORMAT_X24_TYPELESS_G8_UINT=47]="DXGI_FORMAT_X24_TYPELESS_G8_UINT",e[e.DXGI_FORMAT_R8G8_TYPELESS=48]="DXGI_FORMAT_R8G8_TYPELESS",e[e.DXGI_FORMAT_R8G8_UNORM=49]="DXGI_FORMAT_R8G8_UNORM",e[e.DXGI_FORMAT_R8G8_UINT=50]="DXGI_FORMAT_R8G8_UINT",e[e.DXGI_FORMAT_R8G8_SNORM=51]="DXGI_FORMAT_R8G8_SNORM",e[e.DXGI_FORMAT_R8G8_SINT=52]="DXGI_FORMAT_R8G8_SINT",e[e.DXGI_FORMAT_R16_TYPELESS=53]="DXGI_FORMAT_R16_TYPELESS",e[e.DXGI_FORMAT_R16_FLOAT=54]="DXGI_FORMAT_R16_FLOAT",e[e.DXGI_FORMAT_D16_UNORM=55]="DXGI_FORMAT_D16_UNORM",e[e.DXGI_FORMAT_R16_UNORM=56]="DXGI_FORMAT_R16_UNORM",e[e.DXGI_FORMAT_R16_UINT=57]="DXGI_FORMAT_R16_UINT",e[e.DXGI_FORMAT_R16_SNORM=58]="DXGI_FORMAT_R16_SNORM",e[e.DXGI_FORMAT_R16_SINT=59]="DXGI_FORMAT_R16_SINT",e[e.DXGI_FORMAT_R8_TYPELESS=60]="DXGI_FORMAT_R8_TYPELESS",e[e.DXGI_FORMAT_R8_UNORM=61]="DXGI_FORMAT_R8_UNORM",e[e.DXGI_FORMAT_R8_UINT=62]="DXGI_FORMAT_R8_UINT",e[e.DXGI_FORMAT_R8_SNORM=63]="DXGI_FORMAT_R8_SNORM",e[e.DXGI_FORMAT_R8_SINT=64]="DXGI_FORMAT_R8_SINT",e[e.DXGI_FORMAT_A8_UNORM=65]="DXGI_FORMAT_A8_UNORM",e[e.DXGI_FORMAT_R1_UNORM=66]="DXGI_FORMAT_R1_UNORM",e[e.DXGI_FORMAT_R9G9B9E5_SHAREDEXP=67]="DXGI_FORMAT_R9G9B9E5_SHAREDEXP",e[e.DXGI_FORMAT_R8G8_B8G8_UNORM=68]="DXGI_FORMAT_R8G8_B8G8_UNORM",e[e.DXGI_FORMAT_G8R8_G8B8_UNORM=69]="DXGI_FORMAT_G8R8_G8B8_UNORM",e[e.DXGI_FORMAT_BC1_TYPELESS=70]="DXGI_FORMAT_BC1_TYPELESS",e[e.DXGI_FORMAT_BC1_UNORM=71]="DXGI_FORMAT_BC1_UNORM",e[e.DXGI_FORMAT_BC1_UNORM_SRGB=72]="DXGI_FORMAT_BC1_UNORM_SRGB",e[e.DXGI_FORMAT_BC2_TYPELESS=73]="DXGI_FORMAT_BC2_TYPELESS",e[e.DXGI_FORMAT_BC2_UNORM=74]="DXGI_FORMAT_BC2_UNORM",e[e.DXGI_FORMAT_BC2_UNORM_SRGB=75]="DXGI_FORMAT_BC2_UNORM_SRGB",e[e.DXGI_FORMAT_BC3_TYPELESS=76]="DXGI_FORMAT_BC3_TYPELESS",e[e.DXGI_FORMAT_BC3_UNORM=77]="DXGI_FORMAT_BC3_UNORM",e[e.DXGI_FORMAT_BC3_UNORM_SRGB=78]="DXGI_FORMAT_BC3_UNORM_SRGB",e[e.DXGI_FORMAT_BC4_TYPELESS=79]="DXGI_FORMAT_BC4_TYPELESS",e[e.DXGI_FORMAT_BC4_UNORM=80]="DXGI_FORMAT_BC4_UNORM",e[e.DXGI_FORMAT_BC4_SNORM=81]="DXGI_FORMAT_BC4_SNORM",e[e.DXGI_FORMAT_BC5_TYPELESS=82]="DXGI_FORMAT_BC5_TYPELESS",e[e.DXGI_FORMAT_BC5_UNORM=83]="DXGI_FORMAT_BC5_UNORM",e[e.DXGI_FORMAT_BC5_SNORM=84]="DXGI_FORMAT_BC5_SNORM",e[e.DXGI_FORMAT_B5G6R5_UNORM=85]="DXGI_FORMAT_B5G6R5_UNORM",e[e.DXGI_FORMAT_B5G5R5A1_UNORM=86]="DXGI_FORMAT_B5G5R5A1_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_UNORM=87]="DXGI_FORMAT_B8G8R8A8_UNORM",e[e.DXGI_FORMAT_B8G8R8X8_UNORM=88]="DXGI_FORMAT_B8G8R8X8_UNORM",e[e.DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM=89]="DXGI_FORMAT_R10G10B10_XR_BIAS_A2_UNORM",e[e.DXGI_FORMAT_B8G8R8A8_TYPELESS=90]="DXGI_FORMAT_B8G8R8A8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8A8_UNORM_SRGB=91]="DXGI_FORMAT_B8G8R8A8_UNORM_SRGB",e[e.DXGI_FORMAT_B8G8R8X8_TYPELESS=92]="DXGI_FORMAT_B8G8R8X8_TYPELESS",e[e.DXGI_FORMAT_B8G8R8X8_UNORM_SRGB=93]="DXGI_FORMAT_B8G8R8X8_UNORM_SRGB",e[e.DXGI_FORMAT_BC6H_TYPELESS=94]="DXGI_FORMAT_BC6H_TYPELESS",e[e.DXGI_FORMAT_BC6H_UF16=95]="DXGI_FORMAT_BC6H_UF16",e[e.DXGI_FORMAT_BC6H_SF16=96]="DXGI_FORMAT_BC6H_SF16",e[e.DXGI_FORMAT_BC7_TYPELESS=97]="DXGI_FORMAT_BC7_TYPELESS",e[e.DXGI_FORMAT_BC7_UNORM=98]="DXGI_FORMAT_BC7_UNORM",e[e.DXGI_FORMAT_BC7_UNORM_SRGB=99]="DXGI_FORMAT_BC7_UNORM_SRGB",e[e.DXGI_FORMAT_AYUV=100]="DXGI_FORMAT_AYUV",e[e.DXGI_FORMAT_Y410=101]="DXGI_FORMAT_Y410",e[e.DXGI_FORMAT_Y416=102]="DXGI_FORMAT_Y416",e[e.DXGI_FORMAT_NV12=103]="DXGI_FORMAT_NV12",e[e.DXGI_FORMAT_P010=104]="DXGI_FORMAT_P010",e[e.DXGI_FORMAT_P016=105]="DXGI_FORMAT_P016",e[e.DXGI_FORMAT_420_OPAQUE=106]="DXGI_FORMAT_420_OPAQUE",e[e.DXGI_FORMAT_YUY2=107]="DXGI_FORMAT_YUY2",e[e.DXGI_FORMAT_Y210=108]="DXGI_FORMAT_Y210",e[e.DXGI_FORMAT_Y216=109]="DXGI_FORMAT_Y216",e[e.DXGI_FORMAT_NV11=110]="DXGI_FORMAT_NV11",e[e.DXGI_FORMAT_AI44=111]="DXGI_FORMAT_AI44",e[e.DXGI_FORMAT_IA44=112]="DXGI_FORMAT_IA44",e[e.DXGI_FORMAT_P8=113]="DXGI_FORMAT_P8",e[e.DXGI_FORMAT_A8P8=114]="DXGI_FORMAT_A8P8",e[e.DXGI_FORMAT_B4G4R4A4_UNORM=115]="DXGI_FORMAT_B4G4R4A4_UNORM",e[e.DXGI_FORMAT_P208=116]="DXGI_FORMAT_P208",e[e.DXGI_FORMAT_V208=117]="DXGI_FORMAT_V208",e[e.DXGI_FORMAT_V408=118]="DXGI_FORMAT_V408",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE=119]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIN_MIP_OPAQUE",e[e.DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE=120]="DXGI_FORMAT_SAMPLER_FEEDBACK_MIP_REGION_USED_OPAQUE",e[e.DXGI_FORMAT_FORCE_UINT=121]="DXGI_FORMAT_FORCE_UINT",e))(Vv||{}),Hv=(e=>(e[e.DDS_DIMENSION_TEXTURE1D=2]="DDS_DIMENSION_TEXTURE1D",e[e.DDS_DIMENSION_TEXTURE2D=3]="DDS_DIMENSION_TEXTURE2D",e[e.DDS_DIMENSION_TEXTURE3D=6]="DDS_DIMENSION_TEXTURE3D",e))(Hv||{});const jv=1,Xv=2,Wv=4,Yv=64,$v=512,qv=131072,Kv=827611204,Zv=861165636,Qv=894720068,Jv=808540228,ty=4,ey={[Kv]:Tr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[Zv]:Tr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Qv]:Tr.COMPRESSED_RGBA_S3TC_DXT5_EXT},iy={[70]:Tr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:Tr.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:Tr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:Tr.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:Tr.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:Tr.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:Tr.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:Tr.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:Tr.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function Gm(e){const t=new Uint32Array(e);if(t[0]!==Gv)throw new Error("Invalid DDS file magic word");const s=new Uint32Array(e,0,xc/Uint32Array.BYTES_PER_ELEMENT),n=s[bc.HEIGHT],a=s[bc.WIDTH],h=s[bc.MIPMAP_COUNT],c=new Uint32Array(e,bc.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,Uv/Uint32Array.BYTES_PER_ELEMENT),m=c[jv];if(m&Wv){const _=c[zv.FOURCC];if(_!==Jv){const Q=ey[_],at=xf+xc,At=new Uint8Array(e,at);return[new Jn(At,{format:Q,width:a,height:n,levels:h})]}const y=xf+xc,w=new Uint32Array(t.buffer,y,Um/Uint32Array.BYTES_PER_ELEMENT),S=w[Tc.DXGI_FORMAT],R=w[Tc.RESOURCE_DIMENSION],F=w[Tc.MISC_FLAG],$=w[Tc.ARRAY_SIZE],W=iy[S];if(W===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${S}`);if(F===ty)throw new Error("DDSParser does not support cubemap textures");if(R===6)throw new Error("DDSParser does not supported 3D texture data");const ot=new Array,ut=xf+xc+Um;if($===1)ot.push(new Uint8Array(e,ut));else{const Q=ih[W];let at=0,At=a,Lt=n;for(let bt=0;bt<h;bt++){const Zt=Math.max(1,At+3&-4),St=Math.max(1,Lt+3&-4),Dt=Zt*St*Q;at+=Dt,At=At>>>1,Lt=Lt>>>1}let Pt=ut;for(let bt=0;bt<$;bt++)ot.push(new Uint8Array(e,Pt,at)),Pt+=at}return ot.map(Q=>new Jn(Q,{format:W,width:a,height:n,levels:h}))}throw m&Yv?new Error("DDSParser does not support uncompressed texture data."):m&$v?new Error("DDSParser does not supported YUV uncompressed texture data."):m&qv?new Error("DDSParser does not support single-channel (lumninance) texture data!"):m&Xv?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const zm=[171,75,84,88,32,49,49,187,13,10,26,10],ry=67305985,_s={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},bf=64,Tf={[T.UNSIGNED_BYTE]:1,[T.UNSIGNED_SHORT]:2,[T.INT]:4,[T.UNSIGNED_INT]:4,[T.FLOAT]:4,[T.HALF_FLOAT]:8},Vm={[p.RGBA]:4,[p.RGB]:3,[p.RG]:2,[p.RED]:1,[p.LUMINANCE]:1,[p.LUMINANCE_ALPHA]:2,[p.ALPHA]:1},Hm={[T.UNSIGNED_SHORT_4_4_4_4]:2,[T.UNSIGNED_SHORT_5_5_5_1]:2,[T.UNSIGNED_SHORT_5_6_5]:2};function jm(e,t,i=!1){const s=new DataView(t);if(!sy(e,s))return null;const n=s.getUint32(_s.ENDIANNESS,!0)===ry,a=s.getUint32(_s.GL_TYPE,n),h=s.getUint32(_s.GL_FORMAT,n),c=s.getUint32(_s.GL_INTERNAL_FORMAT,n),m=s.getUint32(_s.PIXEL_WIDTH,n),_=s.getUint32(_s.PIXEL_HEIGHT,n)||1,y=s.getUint32(_s.PIXEL_DEPTH,n)||1,w=s.getUint32(_s.NUMBER_OF_ARRAY_ELEMENTS,n)||1,S=s.getUint32(_s.NUMBER_OF_FACES,n),R=s.getUint32(_s.NUMBER_OF_MIPMAP_LEVELS,n),F=s.getUint32(_s.BYTES_OF_KEY_VALUE_DATA,n);if(_===0||y!==1)throw new Error("Only 2D textures are supported");if(S!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(w!==1)throw new Error("WebGL does not support array textures");const $=4,W=4,ot=m+3&-4,ut=_+3&-4,Q=new Array(w);let at=m*_;a===0&&(at=ot*ut);let At;if(a!==0?Tf[a]?At=Tf[a]*Vm[h]:At=Hm[a]:At=ih[c],At===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const Lt=i?oy(s,F,n):null;let bt=at*At,Zt=m,St=_,Dt=ot,ve=ut,yt=bf+F;for(let xt=0;xt<R;xt++){const De=s.getUint32(yt,n);let ne=yt+4;for(let he=0;he<w;he++){let Xe=Q[he];Xe||(Xe=Q[he]=new Array(R)),Xe[xt]={levelID:xt,levelWidth:R>1||a!==0?Zt:Dt,levelHeight:R>1||a!==0?St:ve,levelBuffer:new Uint8Array(t,ne,bt)},ne+=bt}yt+=De+4,yt=yt%4!==0?yt+4-yt%4:yt,Zt=Zt>>1||1,St=St>>1||1,Dt=Zt+$-1&~($-1),ve=St+W-1&~(W-1),bt=Dt*ve*At}return a!==0?{uncompressed:Q.map(xt=>{let De=xt[0].levelBuffer,ne=!1;return a===T.FLOAT?De=new Float32Array(xt[0].levelBuffer.buffer,xt[0].levelBuffer.byteOffset,xt[0].levelBuffer.byteLength/4):a===T.UNSIGNED_INT?(ne=!0,De=new Uint32Array(xt[0].levelBuffer.buffer,xt[0].levelBuffer.byteOffset,xt[0].levelBuffer.byteLength/4)):a===T.INT&&(ne=!0,De=new Int32Array(xt[0].levelBuffer.buffer,xt[0].levelBuffer.byteOffset,xt[0].levelBuffer.byteLength/4)),{resource:new nn(De,{width:xt[0].levelWidth,height:xt[0].levelHeight}),type:a,format:ne?ny(h):h}}),kvData:Lt}:{compressed:Q.map(xt=>new Jn(null,{format:c,width:m,height:_,levels:R,levelBuffers:xt})),kvData:Lt}}function sy(e,t){for(let i=0;i<zm.length;i++)if(t.getUint8(i)!==zm[i])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function ny(e){switch(e){case p.RGBA:return p.RGBA_INTEGER;case p.RGB:return p.RGB_INTEGER;case p.RG:return p.RG_INTEGER;case p.RED:return p.RED_INTEGER;default:return e}}function oy(e,t,i){const s=new Map;let n=0;for(;n<t;){const a=e.getUint32(bf+n,i),h=bf+n+4,c=3-(a+3)%4;if(a===0||a>t-n){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let m=0;for(;m<a&&e.getUint8(h+m)!==0;m++);if(m===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const _=new TextDecoder().decode(new Uint8Array(e.buffer,h,m)),y=new DataView(e.buffer,h+m+1,a-m-1);s.set(_,y),n+=4+a+c}return s}const Xm={extension:{type:It.LoadParser,priority:gs.High},name:"loadDDS",test(e){return Qn(e,".dds")},async load(e,t,i){const n=await(await G.ADAPTER.fetch(e)).arrayBuffer(),h=Gm(n).map(c=>{const m=new le(c,{mipmap:D.OFF,alphaMode:P.NO_PREMULTIPLIED_ALPHA,resolution:Yr(e),...t.data});return Jl(m,i,e)});return h.length===1?h[0]:h},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};Xt.add(Xm);const Wm={extension:{type:It.LoadParser,priority:gs.High},name:"loadKTX",test(e){return Qn(e,".ktx")},async load(e,t,i){const n=await(await G.ADAPTER.fetch(e)).arrayBuffer(),{compressed:a,uncompressed:h,kvData:c}=jm(e,n),m=a??h,_={mipmap:D.OFF,alphaMode:P.NO_PREMULTIPLIED_ALPHA,resolution:Yr(e),...t.data},y=m.map(w=>{m===h&&Object.assign(_,{type:w.type,format:w.format});const S=new le(w,_);return S.ktxKeyValueData=c,Jl(S,i,e)});return y.length===1?y[0]:y},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};Xt.add(Wm);const Ym={extension:It.ResolveParser,test:e=>{const i=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(i)},parse:e=>{if(e.split("?")[0].split(".").pop()==="ktx"){const s=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(s.some(n=>e.endsWith(n)))return{resolution:parseFloat(G.RETINA_PREFIX.exec(e)?.[1]??"1"),format:s.find(n=>e.endsWith(n)),src:e}}return{resolution:parseFloat(G.RETINA_PREFIX.exec(e)?.[1]??"1"),format:e.split(".").pop(),src:e}}};Xt.add(Ym);const ay=new de,ly=4,wf=class{constructor(e){this.renderer=e}async image(e,t,i){const s=new Image;return s.src=await this.base64(e,t,i),s}async base64(e,t,i){const s=this.canvas(e);if(s.toDataURL!==void 0)return s.toDataURL(t,i);if(s.convertToBlob!==void 0){const n=await s.convertToBlob({type:t,quality:i});return await new Promise(a=>{const h=new FileReader;h.onload=()=>a(h.result),h.readAsDataURL(n)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:i,width:s,height:n,flipY:a}=this._rawPixels(e,t);let h=new Un(s,n,1);const c=h.context.getImageData(0,0,s,n);if(wf.arrayPostDivide(i,c.data),h.context.putImageData(c,0,0),a){const m=new Un(h.width,h.height,1);m.context.scale(1,-1),m.context.drawImage(h.canvas,0,-n),h.destroy(),h=m}return h.canvas}pixels(e,t){const{pixels:i}=this._rawPixels(e,t);return wf.arrayPostDivide(i,i),i}_rawPixels(e,t){const i=this.renderer;if(!i)throw new Error("The Extract has already been destroyed");let s,n=!1,a,h=!1;if(e)if(e instanceof tr)a=e;else{const w=i.context.webGLVersion>=2?i.multisample:Z.NONE;if(a=i.generateTexture(e,{multisample:w}),w!==Z.NONE){const S=tr.create({width:a.width,height:a.height});i.framebuffer.bind(a.framebuffer),i.framebuffer.blit(S.framebuffer),i.framebuffer.bind(),a.destroy(!0),a=S}h=!0}a?(s=a.baseTexture.resolution,t=t??a.frame,n=!1,i.renderTexture.bind(a)):(s=i.resolution,t||(t=ay,t.width=i.width,t.height=i.height),n=!0,i.renderTexture.bind());const c=Math.round(t.width*s),m=Math.round(t.height*s),_=new Uint8Array(ly*c*m),y=i.gl;return y.readPixels(Math.round(t.x*s),Math.round(t.y*s),c,m,y.RGBA,y.UNSIGNED_BYTE,_),h&&a?.destroy(!0),{pixels:_,width:c,height:m,flipY:n}}destroy(){this.renderer=null}static arrayPostDivide(e,t){for(let i=0;i<e.length;i+=4){const s=t[i+3]=e[i+3];s!==0?(t[i]=Math.round(Math.min(e[i]*255/s,255)),t[i+1]=Math.round(Math.min(e[i+1]*255/s,255)),t[i+2]=Math.round(Math.min(e[i+2]*255/s,255))):(t[i]=e[i],t[i+1]=e[i+1],t[i+2]=e[i+2])}}};let Sf=wf;Sf.extension={name:"extract",type:It.RendererSystem},Xt.add(Sf);const rh={build(e){const t=e.points;let i,s,n,a,h,c;if(e.type===gi.CIRC){const F=e.shape;i=F.x,s=F.y,h=c=F.radius,n=a=0}else if(e.type===gi.ELIP){const F=e.shape;i=F.x,s=F.y,h=F.width,c=F.height,n=a=0}else{const F=e.shape,$=F.width/2,W=F.height/2;i=F.x+$,s=F.y+W,h=c=Math.max(0,Math.min(F.radius,Math.min($,W))),n=$-h,a=W-c}if(!(h>=0&&c>=0&&n>=0&&a>=0)){t.length=0;return}const m=Math.ceil(2.3*Math.sqrt(h+c)),_=m*8+(n?4:0)+(a?4:0);if(t.length=_,_===0)return;if(m===0){t.length=8,t[0]=t[6]=i+n,t[1]=t[3]=s+a,t[2]=t[4]=i-n,t[5]=t[7]=s-a;return}let y=0,w=m*4+(n?2:0)+2,S=w,R=_;{const F=n+h,$=a,W=i+F,ot=i-F,ut=s+$;if(t[y++]=W,t[y++]=ut,t[--w]=ut,t[--w]=ot,a){const Q=s-$;t[S++]=ot,t[S++]=Q,t[--R]=Q,t[--R]=W}}for(let F=1;F<m;F++){const $=Math.PI/2*(F/m),W=n+Math.cos($)*h,ot=a+Math.sin($)*c,ut=i+W,Q=i-W,at=s+ot,At=s-ot;t[y++]=ut,t[y++]=at,t[--w]=at,t[--w]=Q,t[S++]=Q,t[S++]=At,t[--R]=At,t[--R]=ut}{const F=n,$=a+c,W=i+F,ot=i-F,ut=s+$,Q=s-$;t[y++]=W,t[y++]=ut,t[--R]=Q,t[--R]=W,n&&(t[y++]=ot,t[y++]=ut,t[--R]=Q,t[--R]=ot)}},triangulate(e,t){const i=e.points,s=t.points,n=t.indices;if(i.length===0)return;let a=s.length/2;const h=a;let c,m;if(e.type!==gi.RREC){const y=e.shape;c=y.x,m=y.y}else{const y=e.shape;c=y.x+y.width/2,m=y.y+y.height/2}const _=e.matrix;s.push(e.matrix?_.a*c+_.c*m+_.tx:c,e.matrix?_.b*c+_.d*m+_.ty:m),a++,s.push(i[0],i[1]);for(let y=2;y<i.length;y+=2)s.push(i[y],i[y+1]),n.push(a++,h,a);n.push(h+1,h,a)}};function $m(e,t=!1){const i=e.length;if(i<6)return;let s=0;for(let n=0,a=e[i-2],h=e[i-1];n<i;n+=2){const c=e[n],m=e[n+1];s+=(c-a)*(m+h),a=c,h=m}if(!t&&s>0||t&&s<=0){const n=i/2;for(let a=n+n%2;a<i;a+=2){const h=i-a-2,c=i-a-1,m=a,_=a+1;[e[h],e[m]]=[e[m],e[h]],[e[c],e[_]]=[e[_],e[c]]}}}const Ef={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let i=e.points;const s=e.holes,n=t.points,a=t.indices;if(i.length>=6){$m(i,!1);const h=[];for(let _=0;_<s.length;_++){const y=s[_];$m(y.points,!0),h.push(i.length/2),i=i.concat(y.points)}const c=A(i,h,2);if(!c)return;const m=n.length/2;for(let _=0;_<c.length;_+=3)a.push(c[_]+m),a.push(c[_+1]+m),a.push(c[_+2]+m);for(let _=0;_<i.length;_++)n.push(i[_])}}},qm={build(e){const t=e.shape,i=t.x,s=t.y,n=t.width,a=t.height,h=e.points;h.length=0,n>=0&&a>=0&&h.push(i,s,i+n,s,i+n,s+a,i,s+a)},triangulate(e,t){const i=e.points,s=t.points;if(i.length===0)return;const n=s.length/2;s.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),t.indices.push(n,n+1,n+2,n+1,n+2,n+3)}},Km={build(e){rh.build(e)},triangulate(e,t){rh.triangulate(e,t)}};var es=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(es||{}),to=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(to||{});const eo={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let i=Math.ceil(e/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}},hy=eo;class Af{static curveTo(t,i,s,n,a,h){const c=h[h.length-2],_=h[h.length-1]-i,y=c-t,w=n-i,S=s-t,R=Math.abs(_*S-y*w);if(R<1e-8||a===0)return(h[h.length-2]!==t||h[h.length-1]!==i)&&h.push(t,i),null;const F=_*_+y*y,$=w*w+S*S,W=_*w+y*S,ot=a*Math.sqrt(F)/R,ut=a*Math.sqrt($)/R,Q=ot*W/F,at=ut*W/$,At=ot*S+ut*y,Lt=ot*w+ut*_,Pt=y*(ut+Q),bt=_*(ut+Q),Zt=S*(ot+at),St=w*(ot+at),Dt=Math.atan2(bt-Lt,Pt-At),ve=Math.atan2(St-Lt,Zt-At);return{cx:At+t,cy:Lt+i,radius:a,startAngle:Dt,endAngle:ve,anticlockwise:y*w>S*_}}static arc(t,i,s,n,a,h,c,m,_){const y=c-h,w=eo._segmentsCount(Math.abs(y)*a,Math.ceil(Math.abs(y)/Ro)*40),S=y/(w*2),R=S*2,F=Math.cos(S),$=Math.sin(S),W=w-1,ot=W%1/W;for(let ut=0;ut<=W;++ut){const Q=ut+ot*ut,at=S+h+R*Q,At=Math.cos(at),Lt=-Math.sin(at);_.push((F*At+$*Lt)*a+s,(F*-Lt+$*At)*a+n)}}}class Zm{constructor(){this.reset()}begin(t,i,s){this.reset(),this.style=t,this.start=i,this.attribStart=s}end(t,i){this.attribSize=i-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class wc{static curveLength(t,i,s,n,a,h,c,m){let y=0,w=0,S=0,R=0,F=0,$=0,W=0,ot=0,ut=0,Q=0,at=0,At=t,Lt=i;for(let Pt=1;Pt<=10;++Pt)w=Pt/10,S=w*w,R=S*w,F=1-w,$=F*F,W=$*F,ot=W*t+3*$*w*s+3*F*S*a+R*c,ut=W*i+3*$*w*n+3*F*S*h+R*m,Q=At-ot,at=Lt-ut,At=ot,Lt=ut,y+=Math.sqrt(Q*Q+at*at);return y}static curveTo(t,i,s,n,a,h,c){const m=c[c.length-2],_=c[c.length-1];c.length-=2;const y=eo._segmentsCount(wc.curveLength(m,_,t,i,s,n,a,h));let w=0,S=0,R=0,F=0,$=0;c.push(m,_);for(let W=1,ot=0;W<=y;++W)ot=W/y,w=1-ot,S=w*w,R=S*w,F=ot*ot,$=F*ot,c.push(R*m+3*S*ot*t+3*w*F*s+$*a,R*_+3*S*ot*i+3*w*F*n+$*h)}}function Qm(e,t,i,s,n,a,h,c){const m=e-i*n,_=t-s*n,y=e+i*a,w=t+s*a;let S,R;h?(S=s,R=-i):(S=-s,R=i);const F=m+S,$=_+R,W=y+S,ot=w+R;return c.push(F,$,W,ot),2}function $o(e,t,i,s,n,a,h,c){const m=i-e,_=s-t;let y=Math.atan2(m,_),w=Math.atan2(n-e,a-t);c&&y<w?y+=Math.PI*2:!c&&y>w&&(w+=Math.PI*2);let S=y;const R=w-y,F=Math.abs(R),$=Math.sqrt(m*m+_*_),W=(15*F*Math.sqrt($)/Math.PI>>0)+1,ot=R/W;if(S+=ot,c){h.push(e,t,i,s);for(let ut=1,Q=S;ut<W;ut++,Q+=ot)h.push(e,t,e+Math.sin(Q)*$,t+Math.cos(Q)*$);h.push(e,t,n,a)}else{h.push(i,s,e,t);for(let ut=1,Q=S;ut<W;ut++,Q+=ot)h.push(e+Math.sin(Q)*$,t+Math.cos(Q)*$,e,t);h.push(n,a,e,t)}return W*2}function cy(e,t){const i=e.shape;let s=e.points||i.points.slice();const n=t.closePointEps;if(s.length===0)return;const a=e.lineStyle,h=new we(s[0],s[1]),c=new we(s[s.length-2],s[s.length-1]),m=i.type!==gi.POLY||i.closeStroke,_=Math.abs(h.x-c.x)<n&&Math.abs(h.y-c.y)<n;if(m){s=s.slice(),_&&(s.pop(),s.pop(),c.set(s[s.length-2],s[s.length-1]));const he=(h.x+c.x)*.5,Xe=(c.y+h.y)*.5;s.unshift(he,Xe),s.push(he,Xe)}const y=t.points,w=s.length/2;let S=s.length;const R=y.length/2,F=a.width/2,$=F*F,W=a.miterLimit*a.miterLimit;let ot=s[0],ut=s[1],Q=s[2],at=s[3],At=0,Lt=0,Pt=-(ut-at),bt=ot-Q,Zt=0,St=0,Dt=Math.sqrt(Pt*Pt+bt*bt);Pt/=Dt,bt/=Dt,Pt*=F,bt*=F;const ve=a.alignment,yt=(1-ve)*2,xt=ve*2;m||(a.cap===to.ROUND?S+=$o(ot-Pt*(yt-xt)*.5,ut-bt*(yt-xt)*.5,ot-Pt*yt,ut-bt*yt,ot+Pt*xt,ut+bt*xt,y,!0)+2:a.cap===to.SQUARE&&(S+=Qm(ot,ut,Pt,bt,yt,xt,!0,y))),y.push(ot-Pt*yt,ut-bt*yt,ot+Pt*xt,ut+bt*xt);for(let he=1;he<w-1;++he){ot=s[(he-1)*2],ut=s[(he-1)*2+1],Q=s[he*2],at=s[he*2+1],At=s[(he+1)*2],Lt=s[(he+1)*2+1],Pt=-(ut-at),bt=ot-Q,Dt=Math.sqrt(Pt*Pt+bt*bt),Pt/=Dt,bt/=Dt,Pt*=F,bt*=F,Zt=-(at-Lt),St=Q-At,Dt=Math.sqrt(Zt*Zt+St*St),Zt/=Dt,St/=Dt,Zt*=F,St*=F;const Xe=Q-ot,Ae=ut-at,Yt=Q-At,ce=Lt-at,Ie=Xe*Yt+Ae*ce,$e=Ae*Yt-ce*Xe,ti=$e<0;if(Math.abs($e)<.001*Math.abs(Ie)){y.push(Q-Pt*yt,at-bt*yt,Q+Pt*xt,at+bt*xt),Ie>=0&&(a.join===es.ROUND?S+=$o(Q,at,Q-Pt*yt,at-bt*yt,Q-Zt*yt,at-St*yt,y,!1)+4:S+=2,y.push(Q-Zt*xt,at-St*xt,Q+Zt*yt,at+St*yt));continue}const Ni=(-Pt+ot)*(-bt+at)-(-Pt+Q)*(-bt+ut),Ci=(-Zt+At)*(-St+at)-(-Zt+Q)*(-St+Lt),Ui=(Xe*Ci-Yt*Ni)/$e,er=(ce*Ni-Ae*Ci)/$e,Nr=(Ui-Q)*(Ui-Q)+(er-at)*(er-at),$i=Q+(Ui-Q)*yt,li=at+(er-at)*yt,Pi=Q-(Ui-Q)*xt,Oi=at-(er-at)*xt,Ws=Math.min(Xe*Xe+Ae*Ae,Yt*Yt+ce*ce),Ys=ti?yt:xt,_h=Ws+Ys*Ys*$,Xy=Nr<=_h;let Bc=a.join;if(Bc===es.MITER&&Nr/$>W&&(Bc=es.BEVEL),Xy)switch(Bc){case es.MITER:{y.push($i,li,Pi,Oi);break}case es.BEVEL:{ti?y.push($i,li,Q+Pt*xt,at+bt*xt,$i,li,Q+Zt*xt,at+St*xt):y.push(Q-Pt*yt,at-bt*yt,Pi,Oi,Q-Zt*yt,at-St*yt,Pi,Oi),S+=2;break}case es.ROUND:{ti?(y.push($i,li,Q+Pt*xt,at+bt*xt),S+=$o(Q,at,Q+Pt*xt,at+bt*xt,Q+Zt*xt,at+St*xt,y,!0)+4,y.push($i,li,Q+Zt*xt,at+St*xt)):(y.push(Q-Pt*yt,at-bt*yt,Pi,Oi),S+=$o(Q,at,Q-Pt*yt,at-bt*yt,Q-Zt*yt,at-St*yt,y,!1)+4,y.push(Q-Zt*yt,at-St*yt,Pi,Oi));break}}else{switch(y.push(Q-Pt*yt,at-bt*yt,Q+Pt*xt,at+bt*xt),Bc){case es.MITER:{ti?y.push(Pi,Oi,Pi,Oi):y.push($i,li,$i,li),S+=2;break}case es.ROUND:{ti?S+=$o(Q,at,Q+Pt*xt,at+bt*xt,Q+Zt*xt,at+St*xt,y,!0)+2:S+=$o(Q,at,Q-Pt*yt,at-bt*yt,Q-Zt*yt,at-St*yt,y,!1)+2;break}}y.push(Q-Zt*yt,at-St*yt,Q+Zt*xt,at+St*xt),S+=2}}ot=s[(w-2)*2],ut=s[(w-2)*2+1],Q=s[(w-1)*2],at=s[(w-1)*2+1],Pt=-(ut-at),bt=ot-Q,Dt=Math.sqrt(Pt*Pt+bt*bt),Pt/=Dt,bt/=Dt,Pt*=F,bt*=F,y.push(Q-Pt*yt,at-bt*yt,Q+Pt*xt,at+bt*xt),m||(a.cap===to.ROUND?S+=$o(Q-Pt*(yt-xt)*.5,at-bt*(yt-xt)*.5,Q-Pt*yt,at-bt*yt,Q+Pt*xt,at+bt*xt,y,!1)+2:a.cap===to.SQUARE&&(S+=Qm(Q,at,Pt,bt,yt,xt,!1,y)));const De=t.indices,ne=eo.epsilon*eo.epsilon;for(let he=R;he<S+R-2;++he)ot=y[he*2],ut=y[he*2+1],Q=y[(he+1)*2],at=y[(he+1)*2+1],At=y[(he+2)*2],Lt=y[(he+2)*2+1],!(Math.abs(ot*(at-Lt)+Q*(Lt-ut)+At*(ut-at))<ne)&&De.push(he,he+1,he+2)}function uy(e,t){let i=0;const s=e.shape,n=e.points||s.points,a=s.type!==gi.POLY||s.closeStroke;if(n.length===0)return;const h=t.points,c=t.indices,m=n.length/2,_=h.length/2;let y=_;for(h.push(n[0],n[1]),i=1;i<m;i++)h.push(n[i*2],n[i*2+1]),c.push(y,y+1),y++;a&&c.push(y,_)}function Cf(e,t){e.lineStyle.native?uy(e,t):cy(e,t)}class Sc{static curveLength(t,i,s,n,a,h){const c=t-2*s+a,m=i-2*n+h,_=2*s-2*t,y=2*n-2*i,w=4*(c*c+m*m),S=4*(c*_+m*y),R=_*_+y*y,F=2*Math.sqrt(w+S+R),$=Math.sqrt(w),W=2*w*$,ot=2*Math.sqrt(R),ut=S/$;return(W*F+$*S*(F-ot)+(4*R*w-S*S)*Math.log((2*$+ut+F)/(ut+ot)))/(4*W)}static curveTo(t,i,s,n,a){const h=a[a.length-2],c=a[a.length-1],m=eo._segmentsCount(Sc.curveLength(h,c,t,i,s,n));let _=0,y=0;for(let w=1;w<=m;++w){const S=w/m;_=h+(t-h)*S,y=c+(i-c)*S,a.push(_+(t+(s-t)*S-_)*S,y+(i+(n-i)*S-y)*S)}}}const Ec={[gi.POLY]:Ef,[gi.CIRC]:rh,[gi.ELIP]:rh,[gi.RECT]:qm,[gi.RREC]:Km},Pf=[],sh=[];class nh{constructor(t,i=null,s=null,n=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=s,this.fillStyle=i,this.matrix=n,this.type=t.type}clone(){return new nh(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Ga=new we,Jm=class extends wa{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new ql,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),sh.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),Pf.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,i=null,s=null){const n=new nh(e,t,i,s);return this.graphicsData.push(n),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const i=new nh(e,null,null,t),s=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=s.lineStyle,s.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let i=0;i<t.length;++i){const s=t[i];if(s.fillStyle.visible&&s.shape&&(s.matrix?s.matrix.applyInverse(e,Ga):Ga.copyFrom(e),s.shape.contains(Ga.x,Ga.y))){let n=!1;if(s.holes){for(let a=0;a<s.holes.length;a++)if(s.holes[a].shape.contains(Ga.x,Ga.y)){n=!0;break}}if(!n)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let i=null,s=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],s=i.style);for(let c=this.shapeIndex;c<t.length;c++){this.shapeIndex++;const m=t[c],_=m.fillStyle,y=m.lineStyle;Ec[m.type].build(m),m.matrix&&this.transformPoints(m.points,m.matrix),(_.visible||y.visible)&&this.processHoles(m.holes);for(let S=0;S<2;S++){const R=S===0?_:y;if(!R.visible)continue;const F=R.texture.baseTexture,$=this.indices.length,W=this.points.length/2;F.wrapMode=k.REPEAT,S===0?this.processFill(m):this.processLine(m);const ot=this.points.length/2-W;ot!==0&&(i&&!this._compareStyles(s,R)&&(i.end($,W),i=null),i||(i=Pf.pop()||new Zm,i.begin(R,$,W),this.batches.push(i),s=R),this.addUvs(this.points,e,R.texture,W,ot,R.matrix))}}const n=this.indices.length,a=this.points.length/2;if(i&&i.end(n,a),this.batches.length===0){this.batchable=!0;return}const h=a>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&h===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=h?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const i=this.graphicsData[e],s=i.fillStyle,n=i.lineStyle;if(s&&!s.texture.baseTexture.valid||n&&!n.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,i=e.length;t<i;t++){const s=e[t];for(let n=0;n<s.size;n++){const a=s.start+n;this.indicesUint16[a]=this.indicesUint16[a]-s.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<Jm.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++le._globalBatch;for(let y=0;y<this.drawCalls.length;y++)this.drawCalls[y].texArray.clear(),sh.push(this.drawCalls[y]);this.drawCalls.length=0;const t=this.colors,i=this.textureIds;let s=sh.pop();s||(s=new Mo,s.texArray=new No),s.texArray.count=0,s.start=0,s.size=0,s.type=d.TRIANGLES;let n=0,a=null,h=0,c=!1,m=d.TRIANGLES,_=0;this.drawCalls.push(s);for(let y=0;y<this.batches.length;y++){const w=this.batches[y],S=8,R=w.style,F=R.texture.baseTexture;c!==!!R.native&&(c=!!R.native,m=c?d.LINES:d.TRIANGLES,a=null,n=S,e++),a!==F&&(a=F,F._batchEnabled!==e&&(n===S&&(e++,n=0,s.size>0&&(s=sh.pop(),s||(s=new Mo,s.texArray=new No),this.drawCalls.push(s)),s.start=_,s.size=0,s.texArray.count=0,s.type=m),F.touched=1,F._batchEnabled=e,F._batchLocation=n,F.wrapMode=k.REPEAT,s.texArray.elements[s.texArray.count++]=F,n++)),s.size+=w.size,_+=w.size,h=F._batchLocation,this.addColors(t,R.color,R.alpha,w.attribSize,w.attribStart),this.addTextureIds(i,h,w.attribSize,w.attribStart)}le._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,i=this.colors,s=this.textureIds,n=new ArrayBuffer(e.length*3*4),a=new Float32Array(n),h=new Uint32Array(n);let c=0;for(let m=0;m<e.length/2;m++)a[c++]=e[m*2],a[c++]=e[m*2+1],a[c++]=t[m*2],a[c++]=t[m*2+1],h[c++]=i[m],a[c++]=s[m];this._buffer.update(n),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?Ef.triangulate(e,this):Ec[e.type].triangulate(e,this)}processLine(e){Cf(e,this);for(let t=0;t<e.holes.length;t++)Cf(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const i=e[t];Ec[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let i=0;i<e.length/2;i++){const s=e[i*2],n=e[i*2+1];e[i*2]=t.a*s+t.c*n+t.tx,e[i*2+1]=t.b*s+t.d*n+t.ty}}addColors(e,t,i,s,n=0){const a=Te.shared.setValue(t).toLittleEndianNumber(),h=Te.shared.setValue(a).toPremultiplied(i);e.length=Math.max(e.length,n+s);for(let c=0;c<s;c++)e[n+c]=h}addTextureIds(e,t,i,s=0){e.length=Math.max(e.length,s+i);for(let n=0;n<i;n++)e[s+n]=t}addUvs(e,t,i,s,n,a=null){let h=0;const c=t.length,m=i.frame;for(;h<n;){let y=e[(s+h)*2],w=e[(s+h)*2+1];if(a){const S=a.a*y+a.c*w+a.tx;w=a.b*y+a.d*w+a.ty,y=S}h++,t.push(y/m.width,w/m.height)}const _=i.baseTexture;(m.width<_.width||m.height<_.height)&&this.adjustUvs(t,i,c,n)}adjustUvs(e,t,i,s){const n=t.baseTexture,a=1e-6,h=i+s*2,c=t.frame,m=c.width/n.width,_=c.height/n.height;let y=c.x/c.width,w=c.y/c.height,S=Math.floor(e[i]+a),R=Math.floor(e[i+1]+a);for(let F=i+2;F<h;F+=2)S=Math.min(S,Math.floor(e[F]+a)),R=Math.min(R,Math.floor(e[F+1]+a));y-=S,w-=R;for(let F=i;F<h;F+=2)e[F]=(e[F]+y)*m,e[F+1]=(e[F+1]+w)*_}};let Mf=Jm;Mf.BATCHABLE_SIZE=100;class oh{constructor(){this.color=16777215,this.alpha=1,this.texture=wt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new oh;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=wt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Ac extends oh{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=to.BUTT,this.join=es.MITER,this.miterLimit=10}clone(){const t=new Ac;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const Rf={},Cc=class extends br{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new oh,this._lineStyle=new Ac,this._matrix=null,this._holeMode=!1,this.state=sr.for2d(),this._geometry=e||new Mf,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Te(16777215),this.blendMode=f.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Cc(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,i,s=.5,n=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:i,alignment:s,native:n}),this.lineTextureStyle(e)}lineTextureStyle(e){const t={width:0,texture:wt.WHITE,color:e?.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:to.BUTT,join:es.MITER,miterLimit:10};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.width>0&&e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:i},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Us,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Us,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,s=i[i.length-2],n=i[i.length-1];return(s!==e||n!==t)&&i.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,i,s){this._initCurve();const n=this.currentPath.points;return n.length===0&&this.moveTo(0,0),Sc.curveTo(e,t,i,s,n),this}bezierCurveTo(e,t,i,s,n,a){return this._initCurve(),wc.curveTo(e,t,i,s,n,a,this.currentPath.points),this}arcTo(e,t,i,s,n){this._initCurve(e,t);const a=this.currentPath.points,h=Af.curveTo(e,t,i,s,n,a);if(h){const{cx:c,cy:m,radius:_,startAngle:y,endAngle:w,anticlockwise:S}=h;this.arc(c,m,_,y,w,S)}return this}arc(e,t,i,s,n,a=!1){if(s===n)return this;if(!a&&n<=s?n+=Ro:a&&s<=n&&(s+=Ro),n-s===0)return this;const c=e+Math.cos(s)*i,m=t+Math.sin(s)*i,_=this._geometry.closePointEps;let y=this.currentPath?this.currentPath.points:null;if(y){const w=Math.abs(y[y.length-2]-c),S=Math.abs(y[y.length-1]-m);w<_&&S<_||y.push(c,m)}else this.moveTo(c,m),y=this.currentPath.points;return Af.arc(c,m,e,t,i,s,n,a,y),this}beginFill(e=0,t){return this.beginTextureFill({texture:wt.WHITE,color:e,alpha:t})}normalizeColor(e){const t=Te.shared.setValue(e.color??0);e.color=t.toNumber(),e.alpha??(e.alpha=t.alpha)}beginTextureFill(e){const t={texture:wt.WHITE,color:16777215,matrix:null};e=Object.assign(t,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const i=e.alpha>0;return i?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:i},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,i,s){return this.drawShape(new de(e,t,i,s))}drawRoundedRect(e,t,i,s,n){return this.drawShape(new Aa(e,t,i,s,n))}drawCircle(e,t,i){return this.drawShape(new Sa(e,t,i))}drawEllipse(e,t,i,s){return this.drawShape(new Ea(e,t,i,s))}drawPolygon(...e){let t,i=!0;const s=e[0];s.points?(i=s.closeStroke,t=s.points):Array.isArray(e[0])?t=e[0]:t=e;const n=new Us(t);return n.closeStroke=i,this.drawShape(n),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===gi.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(let s=0;s<i;s++){const n=e.batches[s],a=n.style.color,h=new Float32Array(this.vertexData.buffer,n.attribStart*4*2,n.attribSize*2),c=new Float32Array(e.uvsFloat32.buffer,n.attribStart*4*2,n.attribSize*2),m=new Uint16Array(e.indicesUint16.buffer,n.start*2,n.size),_={vertexData:h,blendMode:t,indices:m,uvs:c,_batchRGB:Te.shared.setValue(a).toRgbArray(),_tintRGB:a,_texture:n.style.texture,alpha:n.style.alpha,worldAlpha:1};this.batches[s]=_}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,i=this.batches.length;t<i;t++){const s=this.batches[t];s.worldAlpha=this.worldAlpha*s.alpha,e.plugins[this.pluginName].render(s)}}}_renderDirect(e){const t=this._resolveDirectShader(e),i=this._geometry,s=this.worldAlpha,n=t.uniforms,a=i.drawCalls;n.translationMatrix=this.transform.worldTransform,Te.shared.setValue(this._tintColor).premultiply(s).toArray(n.tint),e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(let h=0,c=a.length;h<c;h++)this._renderDrawCallDirect(e,i.drawCalls[h])}_renderDrawCallDirect(e,t){const{texArray:i,type:s,size:n,start:a}=t,h=i.count;for(let c=0;c<h;c++)e.texture.bind(i.elements[c],c);e.geometry.draw(s,n,a)}_resolveDirectShader(e){let t=this.shader;const i=this.pluginName;if(!t){if(!Rf[i]){const{maxTextures:s}=e.plugins[i],n=new Int32Array(s);for(let c=0;c<s;c++)n[c]=c;const a={tint:new Float32Array([1,1,1,1]),translationMatrix:new je,default:yr.from({uSamplers:n},!0)},h=e.plugins[i]._shader.program;Rf[i]=new Fr(h,a)}t=Rf[i]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:i,maxX:s,maxY:n}=e.bounds;this._bounds.addFrame(this.transform,t,i,s,n)}containsPoint(e){return this.worldTransform.applyInverse(e,Cc._TEMP_POINT),this._geometry.containsPoint(Cc._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t._tintRGB=Te.shared.setValue(this._tintColor).multiply(t._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,i=t.a,s=t.b,n=t.c,a=t.d,h=t.tx,c=t.ty,m=this._geometry.points,_=this.vertexData;let y=0;for(let w=0;w<m.length;w+=2){const S=m[w],R=m[w+1];_[y++]=i*S+n*R+h,_[y++]=a*R+s*S+c}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let ah=Cc;ah.curves=eo,ah._TEMP_POINT=new we;const fy={buildPoly:Ef,buildCircle:rh,buildRectangle:qm,buildRoundedRectangle:Km,buildLine:Cf,ArcUtils:Af,BezierUtils:wc,QuadraticUtils:Sc,BatchPart:Zm,FILL_COMMANDS:Ec,BATCH_POOL:Pf,DRAW_CALL_POOL:sh};class tg{constructor(t,i){this.uvBuffer=t,this.uvMatrix=i,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const i=this.uvBuffer.data;(!this.data||this.data.length!==i.length)&&(this.data=new Float32Array(i.length)),this.uvMatrix.multiplyUvs(i,this.data),this._updateID++}}const Df=new we,eg=new Us,ig=class extends br{constructor(e,t,i,s=d.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=i||sr.for2d(),this.drawMode=s,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=G.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===d.TRIANGLES&&t.length<ig.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const s=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[s]),e.plugins[s].render(this)}calculateVertices(){const t=this.geometry.buffers[0],i=t.data,s=t._updateID;if(s===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));const n=this.transform.worldTransform,a=n.a,h=n.b,c=n.c,m=n.d,_=n.tx,y=n.ty,w=this.vertexData;for(let S=0;S<w.length/2;S++){const R=i[S*2],F=i[S*2+1];w[S*2]=a*R+c*F+_,w[S*2+1]=h*R+m*F+y}if(this._roundPixels){const S=G.RESOLUTION;for(let R=0;R<w.length;++R)w[R]=Math.round(w[R]*S)/S}this.vertexDirty=s}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new tg(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,Df);const t=this.geometry.getBuffer("aVertexPosition").data,i=eg.points,s=this.geometry.getIndex().data,n=s.length,a=this.drawMode===4?3:1;for(let h=0;h+2<n;h+=a){const c=s[h]*2,m=s[h+1]*2,_=s[h+2]*2;if(i[0]=t[c],i[1]=t[c+1],i[2]=t[m],i[3]=t[m+1],i[4]=t[_],i[5]=t[_+1],eg.contains(Df.x,Df.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let qo=ig;qo.BATCHABLE_SIZE=100;class lh extends $r{constructor(t,i,s){super();const n=new oi(t),a=new oi(i,!0),h=new oi(s,!0,!0);this.addAttribute("aVertexPosition",n,2,!1,T.FLOAT).addAttribute("aTextureCoord",a,2,!1,T.FLOAT).addIndex(h),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var dy=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,py=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class za extends Fr{constructor(t,i){const s={uSampler:t,alpha:1,uTextureMatrix:je.IDENTITY,uColor:new Float32Array([1,1,1,1])};i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(s,i.uniforms),super(i.program||vr.from(py,dy),s),this._colorDirty=!1,this.uvMatrix=new Oa(t),this.batchable=i.program===void 0,this.pluginName=i.pluginName,this._tintColor=new Te(i.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=i.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this.tint&&(this._tintColor.setValue(t),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const i=this.texture.baseTexture.alphaMode;Te.shared.setValue(this._tintColor).premultiply(this._alpha,i).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class rg extends lh{constructor(t=100,i=100,s=10,n=10){super(),this.segWidth=s,this.segHeight=n,this.width=t,this.height=i,this.build()}build(){const t=this.segWidth*this.segHeight,i=[],s=[],n=[],a=this.segWidth-1,h=this.segHeight-1,c=this.width/a,m=this.height/h;for(let y=0;y<t;y++){const w=y%this.segWidth,S=y/this.segWidth|0;i.push(w*c,S*m),s.push(w/a,S/h)}const _=a*h;for(let y=0;y<_;y++){const w=y%a,S=y/a|0,R=S*this.segWidth+w,F=S*this.segWidth+w+1,$=(S+1)*this.segWidth+w,W=(S+1)*this.segWidth+w+1;n.push(R,F,$,F,W,$)}this.buffers[0].data=new Float32Array(i),this.buffers[1].data=new Float32Array(s),this.indexBuffer.data=new Uint16Array(n),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class sg extends lh{constructor(t=200,i,s=0){super(new Float32Array(i.length*4),new Float32Array(i.length*4),new Uint16Array((i.length-1)*6)),this.points=i,this._width=t,this.textureScale=s,this.build()}get width(){return this._width}build(){const t=this.points;if(!t)return;const i=this.getBuffer("aVertexPosition"),s=this.getBuffer("aTextureCoord"),n=this.getIndex();if(t.length<1)return;i.data.length/4!==t.length&&(i.data=new Float32Array(t.length*4),s.data=new Float32Array(t.length*4),n.data=new Uint16Array((t.length-1)*6));const a=s.data,h=n.data;a[0]=0,a[1]=0,a[2]=0,a[3]=1;let c=0,m=t[0];const _=this._width*this.textureScale,y=t.length;for(let S=0;S<y;S++){const R=S*4;if(this.textureScale>0){const F=m.x-t[S].x,$=m.y-t[S].y,W=Math.sqrt(F*F+$*$);m=t[S],c+=W/_}else c=S/(y-1);a[R]=c,a[R+1]=0,a[R+2]=c,a[R+3]=1}let w=0;for(let S=0;S<y-1;S++){const R=S*2;h[w++]=R,h[w++]=R+1,h[w++]=R+2,h[w++]=R+2,h[w++]=R+1,h[w++]=R+3}s.update(),n.update(),this.updateVertices()}updateVertices(){const t=this.points;if(t.length<1)return;let i=t[0],s,n=0,a=0;const h=this.buffers[0].data,c=t.length,m=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let _=0;_<c;_++){const y=t[_],w=_*4;_<t.length-1?s=t[_+1]:s=y,a=-(s.x-i.x),n=s.y-i.y;let S=(1-_/(c-1))*10;S>1&&(S=1);const R=Math.sqrt(n*n+a*a);R<1e-6?(n=0,a=0):(n/=R,a/=R,n*=m,a*=m),h[w]=y.x+n,h[w+1]=y.y+a,h[w+2]=y.x-n,h[w+3]=y.y-a,i=y}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class ng extends qo{constructor(t,i,s){const n=new rg(t.width,t.height,i,s),a=new za(wt.WHITE);super(n,a),this.texture=t,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const t=this.geometry,{width:i,height:s}=this.shader.texture;this.autoResize&&(t.width!==i||t.height!==s)&&(t.width=this.shader.texture.width,t.height=this.shader.texture.height,t.build())}set texture(t){this.shader.texture!==t&&(this.shader.texture=t,this._textureID=-1,t.baseTexture.valid?this.textureUpdated():t.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(t){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(t)}destroy(t){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(t)}}const Pc=10;class my extends ng{constructor(t,i,s,n,a){super(wt.WHITE,4,4),this._origWidth=t.orig.width,this._origHeight=t.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=i??t.defaultBorders?.left??Pc,this._rightWidth=n??t.defaultBorders?.right??Pc,this._topHeight=s??t.defaultBorders?.top??Pc,this._bottomHeight=a??t.defaultBorders?.bottom??Pc,this.texture=t}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}updateHorizontalVertices(){const t=this.vertices,i=this._getMinScale();t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height}updateVerticalVertices(){const t=this.vertices,i=this._getMinScale();t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width}_getMinScale(){const t=this._leftWidth+this._rightWidth,i=this._width>t?1:this._width/t,s=this._topHeight+this._bottomHeight,n=this._height>s?1:this._height/s;return Math.min(i,n)}get width(){return this._width}set width(t){this._width=t,this._refresh()}get height(){return this._height}set height(t){this._height=t,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(t){this._leftWidth=t,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(t){this._rightWidth=t,this._refresh()}get topHeight(){return this._topHeight}set topHeight(t){this._topHeight=t,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(t){this._bottomHeight=t,this._refresh()}_refresh(){const t=this.texture,i=this.geometry.buffers[1].data;this._origWidth=t.orig.width,this._origHeight=t.orig.height;const s=1/this._origWidth,n=1/this._origHeight;i[0]=i[8]=i[16]=i[24]=0,i[1]=i[3]=i[5]=i[7]=0,i[6]=i[14]=i[22]=i[30]=1,i[25]=i[27]=i[29]=i[31]=1,i[2]=i[10]=i[18]=i[26]=s*this._leftWidth,i[4]=i[12]=i[20]=i[28]=1-s*this._rightWidth,i[9]=i[11]=i[13]=i[15]=n*this._topHeight,i[17]=i[19]=i[21]=i[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class gy extends qo{constructor(t=wt.EMPTY,i,s,n,a){const h=new lh(i,s,n);h.getBuffer("aVertexPosition").static=!1;const c=new za(t);super(h,c,null,a),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(t){this.geometry.getBuffer("aVertexPosition").data=t}_render(t){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(t)}}class _y extends qo{constructor(t,i,s=0){const n=new sg(t.height,i,s),a=new za(t);s>0&&(t.baseTexture.wrapMode=k.REPEAT),super(n,a),this.autoUpdate=!0}_render(t){const i=this.geometry;(this.autoUpdate||i._width!==this.shader.texture.height)&&(i._width=this.shader.texture.height,i.update()),super._render(t)}}class vy extends br{constructor(t=1500,i,s=16384,n=!1){super();const a=16384;s>a&&(s=a),this._properties=[!1,!0,!1,!1,!1],this._maxSize=t,this._batchSize=s,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=f.NORMAL,this.autoResize=n,this.roundPixels=!0,this.baseTexture=null,this.setProperties(i),this._tintColor=new Te(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t),this._tintColor.toRgbArray(this.tintRgb)}render(t){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),t.batch.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))}onChildrenChange(t){const i=Math.floor(t/this._batchSize);for(;this._bufferUpdateIDs.length<i;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[i]=++this._updateID}dispose(){if(this._buffers){for(let t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._buffers=null}}destroy(t){super.destroy(t),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class og{constructor(t,i,s){this.geometry=new $r,this.indexBuffer=null,this.size=s,this.dynamicProperties=[],this.staticProperties=[];for(let n=0;n<t.length;++n){let a=t[n];a={attributeName:a.attributeName,size:a.size,uploadFunction:a.uploadFunction,type:a.type||T.FLOAT,offset:a.offset},i[n]?this.dynamicProperties.push(a):this.staticProperties.push(a)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let i=0;this.indexBuffer=new oi(Tl(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let h=0;h<this.dynamicProperties.length;++h){const c=this.dynamicProperties[h];c.offset=i,i+=c.size,this.dynamicStride+=c.size}const s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=new oi(this.dynamicData,!1,!1);let n=0;this.staticStride=0;for(let h=0;h<this.staticProperties.length;++h){const c=this.staticProperties[h];c.offset=n,n+=c.size,this.staticStride+=c.size}const a=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(a),this.staticDataUint32=new Uint32Array(a),this.staticBuffer=new oi(this.staticData,!0,!1);for(let h=0;h<this.dynamicProperties.length;++h){const c=this.dynamicProperties[h];t.addAttribute(c.attributeName,this.dynamicBuffer,0,c.type===T.UNSIGNED_BYTE,c.type,this.dynamicStride*4,c.offset*4)}for(let h=0;h<this.staticProperties.length;++h){const c=this.staticProperties[h];t.addAttribute(c.attributeName,this.staticBuffer,0,c.type===T.UNSIGNED_BYTE,c.type,this.staticStride*4,c.offset*4)}}uploadDynamic(t,i,s){for(let n=0;n<this.dynamicProperties.length;n++){const a=this.dynamicProperties[n];a.uploadFunction(t,i,s,a.type===T.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,a.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,i,s){for(let n=0;n<this.staticProperties.length;n++){const a=this.staticProperties[n];a.uploadFunction(t,i,s,a.type===T.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,a.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var yy=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,xy=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class If extends Qr{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new je,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:T.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Fr.from(xy,yy,{}),this.state=sr.for2d()}render(t){const i=t.children,s=t._maxSize,n=t._batchSize,a=this.renderer;let h=i.length;if(h===0)return;h>s&&!t.autoResize&&(h=s);let c=t._buffers;c||(c=t._buffers=this.generateBuffers(t));const m=i[0]._texture.baseTexture,_=m.alphaMode>0;this.state.blendMode=bl(t.blendMode,_),a.state.set(this.state);const y=a.gl,w=t.worldTransform.copyTo(this.tempMatrix);w.prepend(a.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=w.toArray(!0),this.shader.uniforms.uColor=Te.shared.setValue(t.tintRgb).premultiply(t.worldAlpha,_).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=m,this.renderer.shader.bind(this.shader);let S=!1;for(let R=0,F=0;R<h;R+=n,F+=1){let $=h-R;$>n&&($=n),F>=c.length&&c.push(this._generateOneMoreBuffer(t));const W=c[F];W.uploadDynamic(i,R,$);const ot=t._bufferUpdateIDs[F]||0;S=S||W._updateID<ot,S&&(W._updateID=t._updateID,W.uploadStatic(i,R,$)),a.geometry.bind(W.geometry),y.drawElements(y.TRIANGLES,$*6,y.UNSIGNED_SHORT,0)}}generateBuffers(t){const i=[],s=t._maxSize,n=t._batchSize,a=t._properties;for(let h=0;h<s;h+=n)i.push(new og(this.properties,a,n));return i}_generateOneMoreBuffer(t){const i=t._batchSize,s=t._properties;return new og(this.properties,s,i)}uploadVertices(t,i,s,n,a,h){let c=0,m=0,_=0,y=0;for(let w=0;w<s;++w){const S=t[i+w],R=S._texture,F=S.scale.x,$=S.scale.y,W=R.trim,ot=R.orig;W?(m=W.x-S.anchor.x*ot.width,c=m+W.width,y=W.y-S.anchor.y*ot.height,_=y+W.height):(c=ot.width*(1-S.anchor.x),m=ot.width*-S.anchor.x,_=ot.height*(1-S.anchor.y),y=ot.height*-S.anchor.y),n[h]=m*F,n[h+1]=y*$,n[h+a]=c*F,n[h+a+1]=y*$,n[h+a*2]=c*F,n[h+a*2+1]=_*$,n[h+a*3]=m*F,n[h+a*3+1]=_*$,h+=a*4}}uploadPosition(t,i,s,n,a,h){for(let c=0;c<s;c++){const m=t[i+c].position;n[h]=m.x,n[h+1]=m.y,n[h+a]=m.x,n[h+a+1]=m.y,n[h+a*2]=m.x,n[h+a*2+1]=m.y,n[h+a*3]=m.x,n[h+a*3+1]=m.y,h+=a*4}}uploadRotation(t,i,s,n,a,h){for(let c=0;c<s;c++){const m=t[i+c].rotation;n[h]=m,n[h+a]=m,n[h+a*2]=m,n[h+a*3]=m,h+=a*4}}uploadUvs(t,i,s,n,a,h){for(let c=0;c<s;++c){const m=t[i+c]._texture._uvs;m?(n[h]=m.x0,n[h+1]=m.y0,n[h+a]=m.x1,n[h+a+1]=m.y1,n[h+a*2]=m.x2,n[h+a*2+1]=m.y2,n[h+a*3]=m.x3,n[h+a*3+1]=m.y3,h+=a*4):(n[h]=0,n[h+1]=0,n[h+a]=0,n[h+a+1]=0,n[h+a*2]=0,n[h+a*2+1]=0,n[h+a*3]=0,n[h+a*3+1]=0,h+=a*4)}}uploadTint(t,i,s,n,a,h){for(let c=0;c<s;++c){const m=t[i+c],_=Te.shared.setValue(m._tintRGB).toPremultiplied(m.alpha);n[h]=_,n[h+a]=_,n[h+a*2]=_,n[h+a*3]=_,h+=a*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}If.extension={name:"particle",type:It.RendererPlugin},Xt.add(If);var hh=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(hh||{});const Mc={willReadFrequently:!0},Wt=class{static get experimentalLetterSpacingSupported(){let e=Wt._experimentalLetterSpacingSupported;if(e!==void 0){const t=G.ADAPTER.getCanvasRenderingContext2D().prototype;e=Wt._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,s,n,a,h,c,m){this.text=e,this.style=t,this.width=i,this.height=s,this.lines=n,this.lineWidths=a,this.lineHeight=h,this.maxLineWidth=c,this.fontProperties=m}static measureText(e,t,i,s=Wt._canvas){i=i??t.wordWrap;const n=t.toFontString(),a=Wt.measureFont(n);a.fontSize===0&&(a.fontSize=t.fontSize,a.ascent=t.fontSize);const h=s.getContext("2d",Mc);h.font=n;const m=(i?Wt.wordWrap(e,t,s):e).split(/(?:\r\n|\r|\n)/),_=new Array(m.length);let y=0;for(let F=0;F<m.length;F++){const $=Wt._measureText(m[F],t.letterSpacing,h);_[F]=$,y=Math.max(y,$)}let w=y+t.strokeThickness;t.dropShadow&&(w+=t.dropShadowDistance);const S=t.lineHeight||a.fontSize+t.strokeThickness;let R=Math.max(S,a.fontSize+t.strokeThickness*2)+(m.length-1)*(S+t.leading);return t.dropShadow&&(R+=t.dropShadowDistance),new Wt(e,t,w,R,m,_,S+t.leading,y,a)}static _measureText(e,t,i){let s=!1;Wt.experimentalLetterSpacingSupported&&(Wt.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,s=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let n=i.measureText(e).width;return n>0&&(s?n-=t:n+=(Wt.graphemeSegmenter(e).length-1)*t),n}static wordWrap(e,t,i=Wt._canvas){const s=i.getContext("2d",Mc);let n=0,a="",h="";const c=Object.create(null),{letterSpacing:m,whiteSpace:_}=t,y=Wt.collapseSpaces(_),w=Wt.collapseNewlines(_);let S=!y;const R=t.wordWrapWidth+m,F=Wt.tokenize(e);for(let $=0;$<F.length;$++){let W=F[$];if(Wt.isNewline(W)){if(!w){h+=Wt.addLine(a),S=!y,a="",n=0;continue}W=" "}if(y){const ut=Wt.isBreakingSpace(W),Q=Wt.isBreakingSpace(a[a.length-1]);if(ut&&Q)continue}const ot=Wt.getFromCache(W,m,c,s);if(ot>R)if(a!==""&&(h+=Wt.addLine(a),a="",n=0),Wt.canBreakWords(W,t.breakWords)){const ut=Wt.wordWrapSplit(W);for(let Q=0;Q<ut.length;Q++){let at=ut[Q],At=at,Lt=1;for(;ut[Q+Lt];){const bt=ut[Q+Lt];if(!Wt.canBreakChars(At,bt,W,Q,t.breakWords))at+=bt;else break;At=bt,Lt++}Q+=Lt-1;const Pt=Wt.getFromCache(at,m,c,s);Pt+n>R&&(h+=Wt.addLine(a),S=!1,a="",n=0),a+=at,n+=Pt}}else{a.length>0&&(h+=Wt.addLine(a),a="",n=0);const ut=$===F.length-1;h+=Wt.addLine(W,!ut),S=!1,a="",n=0}else ot+n>R&&(S=!1,h+=Wt.addLine(a),a="",n=0),(a.length>0||!Wt.isBreakingSpace(W)||S)&&(a+=W,n+=ot)}return h+=Wt.addLine(a,!1),h}static addLine(e,t=!0){return e=Wt.trimRight(e),e=t?`${e}
  `:e,e}static getFromCache(e,t,i,s){let n=i[e];return typeof n!="number"&&(n=Wt._measureText(e,t,s)+t,i[e]=n),n}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!Wt.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:Wt._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:Wt._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let s=0;s<e.length;s++){const n=e[s],a=e[s+1];if(Wt.isBreakingSpace(n,a)||Wt.isNewline(n)){i!==""&&(t.push(i),i=""),t.push(n);continue}i+=n}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,s,n){return!0}static wordWrapSplit(e){return Wt.graphemeSegmenter(e)}static measureFont(e){if(Wt._fonts[e])return Wt._fonts[e];const t={ascent:0,descent:0,fontSize:0},i=Wt._canvas,s=Wt._context;s.font=e;const n=Wt.METRICS_STRING+Wt.BASELINE_SYMBOL,a=Math.ceil(s.measureText(n).width);let h=Math.ceil(s.measureText(Wt.BASELINE_SYMBOL).width);const c=Math.ceil(Wt.HEIGHT_MULTIPLIER*h);if(h=h*Wt.BASELINE_MULTIPLIER|0,a===0||c===0)return Wt._fonts[e]=t,t;i.width=a,i.height=c,s.fillStyle="#f00",s.fillRect(0,0,a,c),s.font=e,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText(n,0,h);const m=s.getImageData(0,0,a,c).data,_=m.length,y=a*4;let w=0,S=0,R=!1;for(w=0;w<h;++w){for(let F=0;F<y;F+=4)if(m[S+F]!==255){R=!0;break}if(!R)S+=y;else break}for(t.ascent=h-w,S=_-y,R=!1,w=c;w>h;--w){for(let F=0;F<y;F+=4)if(m[S+F]!==255){R=!0;break}if(!R)S-=y;else break}return t.descent=w-h,t.fontSize=t.ascent+t.descent,Wt._fonts[e]=t,t}static clearMetrics(e=""){e?delete Wt._fonts[e]:Wt._fonts={}}static get _canvas(){if(!Wt.__canvas){let e;try{const t=new OffscreenCanvas(0,0);if(t.getContext("2d",Mc)?.measureText)return Wt.__canvas=t,t;e=G.ADAPTER.createCanvas()}catch{e=G.ADAPTER.createCanvas()}e.width=e.height=10,Wt.__canvas=e}return Wt.__canvas}static get _context(){return Wt.__context||(Wt.__context=Wt._canvas.getContext("2d",Mc)),Wt.__context}};let Bi=Wt;Bi.METRICS_STRING="|\xC9q\xC5",Bi.BASELINE_SYMBOL="M",Bi.BASELINE_MULTIPLIER=1.4,Bi.HEIGHT_MULTIPLIER=2,Bi.graphemeSegmenter=(()=>{if(typeof Intl?.Segmenter=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(i=>i.segment)}return e=>[...e]})(),Bi.experimentalLetterSpacing=!1,Bi._fonts={},Bi._newlines=[10,13],Bi._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const by=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ch=class{constructor(e){this.styleID=0,this.reset(),kf(this,e,e)}clone(){const e={};return kf(e,this,ch.defaultStyle),new ch(e)}reset(){kf(this,ch.defaultStyle,ch.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=Of(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=Of(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){Ty(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=Of(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let s=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(s)&&!by.includes(s)&&(s=`"${s}"`),t[i]=s}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};let Xs=ch;Xs.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:hh.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Of(e){const t=Te.shared;return Array.isArray(e)?e.map(i=>t.setValue(i).toHex()):t.setValue(e).toHex()}function Ty(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}function kf(e,t,i){for(const s in i)Array.isArray(t[s])?e[s]=t[s].slice():e[s]=t[s]}const wy={texture:!0,children:!1,baseTexture:!0},Lf=class extends dn{constructor(e,t,i){let s=!1;i||(i=G.ADAPTER.createCanvas(),s=!0),i.width=3,i.height=3;const n=wt.from(i);n.orig=new de,n.trim=new de,super(n),this._ownCanvas=s,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=Lf.defaultResolution??G.RESOLUTION,this._autoResolution=Lf.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return Bi.experimentalLetterSpacing}static set experimentalLetterSpacing(e){ee("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Bi.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const i=this.context,s=Bi.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),n=s.width,a=s.height,h=s.lines,c=s.lineHeight,m=s.lineWidths,_=s.maxLineWidth,y=s.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,n)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,a)+t.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;let w,S;const R=t.dropShadow?2:1;for(let F=0;F<R;++F){const $=t.dropShadow&&F===0,W=$?Math.ceil(Math.max(1,a)+t.padding*2):0,ot=W*this._resolution;if($){i.fillStyle="black",i.strokeStyle="black";const Q=t.dropShadowColor,at=t.dropShadowBlur*this._resolution,At=t.dropShadowDistance*this._resolution;i.shadowColor=Te.shared.setValue(Q).setAlpha(t.dropShadowAlpha).toRgbaString(),i.shadowBlur=at,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*At,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*At+ot}else i.fillStyle=this._generateFillStyle(t,h,s),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let ut=(c-y.fontSize)/2;c-y.fontSize<0&&(ut=0);for(let Q=0;Q<h.length;Q++)w=t.strokeThickness/2,S=t.strokeThickness/2+Q*c+y.ascent+ut,t.align==="right"?w+=_-m[Q]:t.align==="center"&&(w+=(_-m[Q])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(h[Q],w+t.padding,S+t.padding-W,!0),t.fill&&this.drawLetterSpacing(h[Q],w+t.padding,S+t.padding-W)}this.updateTexture()}drawLetterSpacing(e,t,i,s=!1){const a=this._style.letterSpacing;let h=!1;if(Bi.experimentalLetterSpacingSupported&&(Bi.experimentalLetterSpacing?(this.context.letterSpacing=`${a}px`,this.context.textLetterSpacing=`${a}px`,h=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),a===0||h){s?this.context.strokeText(e,t,i):this.context.fillText(e,t,i);return}let c=t;const m=Bi.graphemeSegmenter(e);let _=this.context.measureText(e).width,y=0;for(let w=0;w<m.length;++w){const S=m[w];s?this.context.strokeText(S,c,i):this.context.fillText(S,c,i);let R="";for(let F=w+1;F<m.length;++F)R+=m[F];y=this.context.measureText(R).width,c+=_-y+a,_=y}}updateTexture(){const e=this.canvas;if(this._style.trim){const a=Ns(e);a.data&&(e.width=a.width,e.height=a.height,this.context.putImageData(a.data,0,0))}const t=this._texture,i=this._style,s=i.trim?0:i.padding,n=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-s,t.trim.y=-s,t.orig.width=t._frame.width-s*2,t.orig.height=t._frame.height-s*2,this._onTextureUpdate(),n.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,i){const s=e.fill;if(Array.isArray(s)){if(s.length===1)return s[0]}else return s;let n;const a=e.dropShadow?e.dropShadowDistance:0,h=e.padding||0,c=this.canvas.width/this._resolution-a-h*2,m=this.canvas.height/this._resolution-a-h*2,_=s.slice(),y=e.fillGradientStops.slice();if(!y.length){const w=_.length+1;for(let S=1;S<w;++S)y.push(S/w)}if(_.unshift(s[0]),y.unshift(0),_.push(s[s.length-1]),y.push(1),e.fillGradientType===hh.LINEAR_VERTICAL){n=this.context.createLinearGradient(c/2,h,c/2,m+h);const w=i.fontProperties.fontSize+e.strokeThickness;for(let S=0;S<t.length;S++){const R=i.lineHeight*(S-1)+w,F=i.lineHeight*S;let $=F;S>0&&R>F&&($=(F+R)/2);const W=F+w,ot=i.lineHeight*(S+1);let ut=W;S+1<t.length&&ot<W&&(ut=(W+ot)/2);const Q=(ut-$)/m;for(let at=0;at<_.length;at++){let At=0;typeof y[at]=="number"?At=y[at]:At=at/_.length;let Lt=Math.min(1,Math.max(0,$/m+At*Q));Lt=Number(Lt.toFixed(5)),n.addColorStop(Lt,_[at])}}}else{n=this.context.createLinearGradient(h,m/2,c+h,m/2);const w=_.length+1;let S=1;for(let R=0;R<_.length;R++){let F;typeof y[R]=="number"?F=y[R]:F=S/w,n.addColorStop(F,_[R]),S++}}return n}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},wy,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=Qi(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=Qi(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Xs?this._style=e:this._style=new Xs(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let Rc=Lf;Rc.defaultAutoResolution=!0;class ag{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function Sy(e,t){let i=!1;if(e?._textures?.length){for(let s=0;s<e._textures.length;s++)if(e._textures[s]instanceof wt){const n=e._textures[s].baseTexture;t.includes(n)||(t.push(n),i=!0)}}return i}function Ey(e,t){if(e.baseTexture instanceof le){const i=e.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function Ay(e,t){if(e._texture&&e._texture instanceof wt){const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function Cy(e,t){return t instanceof Rc?(t.updateText(!0),!0):!1}function Py(e,t){if(t instanceof Xs){const i=t.toFontString();return Bi.measureFont(i),!0}return!1}function My(e,t){if(e instanceof Rc){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function Ry(e,t){return e instanceof Xs?(t.includes(e)||t.push(e),!0):!1}const lg=class{constructor(e){this.limiter=new ag(lg.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(My),this.registerFindHook(Ry),this.registerFindHook(Sy),this.registerFindHook(Ey),this.registerFindHook(Ay),this.registerUploadHook(Cy),this.registerUploadHook(Py)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,_i.system.addOnce(this.tick,this,fn.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let i=0,s=this.uploadHooks.length;i<s;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)_i.system.addOnce(this.tick,this,fn.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,i=e.length;t<i;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof br)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&_i.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let uh=lg;uh.uploadsPerFrame=4,Object.defineProperties(G,{UPLOADS_PER_FRAME:{get(){return uh.uploadsPerFrame},set(e){ee("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),uh.uploadsPerFrame=e}}});function hg(e,t){return t instanceof le?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function Dy(e,t){if(!(t instanceof ah))return!1;const{geometry:i}=t;t.finishPoly(),i.updateBatches();const{batches:s}=i;for(let n=0;n<s.length;n++){const{texture:a}=s[n].style;a&&hg(e,a.baseTexture)}return i.batchable||e.geometry.bind(i,t._resolveDirectShader(e)),!0}function Iy(e,t){return e instanceof ah?(t.push(e),!0):!1}class Ff extends uh{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(Iy),this.registerUploadHook(hg),this.registerUploadHook(Dy)}}Ff.extension={name:"prepare",type:It.RendererSystem},Xt.add(Ff);class Oy{constructor(t){this.maxMilliseconds=t,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}class Dc extends dn{constructor(t,i=!0){super(t[0]instanceof wt?t[0]:t[0].texture),this._textures=null,this._durations=null,this._autoUpdate=i,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=t}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(_i.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(_i.shared.add(this.update,this,fn.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(t){this.stop(),this.currentFrame=t}gotoAndPlay(t){this.currentFrame=t,this.play()}update(t){if(!this._playing)return;const i=this.animationSpeed*t,s=this.currentFrame;if(this._durations!==null){let n=this._currentTime%1*this._durations[this.currentFrame];for(n+=i/60*1e3;n<0;)this._currentTime--,n+=this._durations[this.currentFrame];const a=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*a,this._currentTime+=a;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=i;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):s!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<s||this.animationSpeed<0&&this.currentFrame>s)&&this.onLoop(),this.updateTexture())}updateTexture(){const t=this.currentFrame;this._previousFrame!==t&&(this._previousFrame=t,this._texture=this._textures[t],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(t){this.stop(),super.destroy(t),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(t){const i=[];for(let s=0;s<t.length;++s)i.push(wt.from(t[s]));return new Dc(i)}static fromImages(t){const i=[];for(let s=0;s<t.length;++s)i.push(wt.from(t[s]));return new Dc(i)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(t){if(t[0]instanceof wt)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(let i=0;i<t.length;i++)this._textures.push(t[i].texture),this._durations.push(t[i].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}set currentFrame(t){if(t<0||t>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${t}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const i=this.currentFrame;this._currentTime=t,i!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(_i.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(_i.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const fh=new we;class Bf extends dn{constructor(t,i=100,s=100){super(t),this.tileTransform=new Wn,this._width=i,this._height=s,this.uvMatrix=this.texture.uvMatrix||new Oa(t),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(t){this.uvMatrix.clampMargin=t,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(t){this.tileTransform.scale.copyFrom(t)}get tilePosition(){return this.tileTransform.position}set tilePosition(t){this.tileTransform.position.copyFrom(t)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(t){const i=this._texture;!i||!i.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))}_calculateBounds(){const t=this._width*-this._anchor._x,i=this._height*-this._anchor._y,s=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,i,s,n)}getLocalBounds(t){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new de),t=this._localBoundsRect),this._bounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,fh);const i=this._width,s=this._height,n=-i*this.anchor._x;if(fh.x>=n&&fh.x<n+i){const a=-s*this.anchor._y;if(fh.y>=a&&fh.y<a+s)return!0}return!1}destroy(t){super.destroy(t),this.tileTransform=null,this.uvMatrix=null}static from(t,i){const s=t instanceof wt?t:wt.from(t,i);return new Bf(s,i.width,i.height)}get width(){return this._width}set width(t){this._width=t}get height(){return this._height}set height(t){this._height=t}}var ky=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,Ly=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Fy=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,cg=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,By=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Ic=new je;class Nf extends Qr{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new Go,this.state=sr.for2d()}contextChange(){const t=this.renderer,i={globals:t.globalUniforms};this.simpleShader=Fr.from(cg,By,i),this.shader=t.context.webGLVersion>1?Fr.from(Ly,ky,i):Fr.from(cg,Fy,i)}render(t){const i=this.renderer,s=this.quad;let n=s.vertices;n[0]=n[6]=t._width*-t.anchor.x,n[1]=n[3]=t._height*-t.anchor.y,n[2]=n[4]=t._width*(1-t.anchor.x),n[5]=n[7]=t._height*(1-t.anchor.y);const a=t.uvRespectAnchor?t.anchor.x:0,h=t.uvRespectAnchor?t.anchor.y:0;n=s.uvs,n[0]=n[6]=-a,n[1]=n[3]=-h,n[2]=n[4]=1-a,n[5]=n[7]=1-h,s.invalidate();const c=t._texture,m=c.baseTexture,_=m.alphaMode>0,y=t.tileTransform.localTransform,w=t.uvMatrix;let S=m.isPowerOfTwo&&c.frame.width===m.width&&c.frame.height===m.height;S&&(m._glTextures[i.CONTEXT_UID]?S=m.wrapMode!==k.CLAMP:m.wrapMode===k.CLAMP&&(m.wrapMode=k.REPEAT));const R=S?this.simpleShader:this.shader,F=c.width,$=c.height,W=t._width,ot=t._height;Ic.set(y.a*F/W,y.b*F/ot,y.c*$/W,y.d*$/ot,y.tx/W,y.ty/ot),Ic.invert(),S?Ic.prepend(w.mapCoord):(R.uniforms.uMapCoord=w.mapCoord.toArray(!0),R.uniforms.uClampFrame=w.uClampFrame,R.uniforms.uClampOffset=w.uClampOffset),R.uniforms.uTransform=Ic.toArray(!0),R.uniforms.uColor=Te.shared.setValue(t.tint).premultiply(t.worldAlpha,_).toArray(R.uniforms.uColor),R.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),R.uniforms.uSampler=c,i.shader.bind(R),i.geometry.bind(s),this.state.blendMode=bl(t.blendMode,_),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Nf.extension={name:"tilingSprite",type:It.RendererPlugin},Xt.add(Nf);const dh=class{constructor(e,t,i=null){this.linkedSheets=[],this._texture=e instanceof wt?e:null,this.baseTexture=e instanceof le?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const s=this.baseTexture.resource;this.resolution=this._updateResolution(i||(s?s.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let i=Yr(e,null);return i===null&&(i=parseFloat(t??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=dh.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=dh.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const s=this._frameKeys[t],n=this._frames[s],a=n.frame;if(a){let h=null,c=null;const m=n.trimmed!==!1&&n.sourceSize?n.sourceSize:n.frame,_=new de(0,0,Math.floor(m.w)/this.resolution,Math.floor(m.h)/this.resolution);n.rotated?h=new de(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.h)/this.resolution,Math.floor(a.w)/this.resolution):h=new de(Math.floor(a.x)/this.resolution,Math.floor(a.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution),n.trimmed!==!1&&n.spriteSourceSize&&(c=new de(Math.floor(n.spriteSourceSize.x)/this.resolution,Math.floor(n.spriteSourceSize.y)/this.resolution,Math.floor(a.w)/this.resolution,Math.floor(a.h)/this.resolution)),this.textures[s]=new wt(this.baseTexture,h,_,c,n.rotated?2:0,n.anchor,n.borders),wt.addToCache(this.textures[s],s)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const s=e[t][i];this.animations[t].push(this.textures[s])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*dh.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*dh.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&(this._texture?.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Oc=dh;Oc.BATCH_SIZE=1e3;const Ny=["jpg","png","jpeg","avif","webp"];function ug(e,t,i){const s={};if(e.forEach(n=>{s[n]=t}),Object.keys(t.textures).forEach(n=>{s[n]=t.textures[n]}),!i){const n=si.dirname(e[0]);t.linkedSheets.forEach((a,h)=>{const c=ug([`${n}/${t.data.meta.related_multi_packs[h]}`],a,!0);Object.assign(s,c)})}return s}const fg={extension:It.Asset,cache:{test:e=>e instanceof Oc,getCacheableAssets:(e,t)=>ug(e,t,!1)},resolver:{test:e=>{const i=e.split("?")[0].split("."),s=i.pop(),n=i.pop();return s==="json"&&Ny.includes(n)},parse:e=>{const t=e.split(".");return{resolution:parseFloat(G.RETINA_PREFIX.exec(e)?.[1]??"1"),format:t[t.length-2],src:e}}},loader:{name:"spritesheetLoader",extension:{type:It.LoadParser,priority:gs.Normal},async testParse(e,t){return si.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,i){let s=si.dirname(t.src);s&&s.lastIndexOf("/")!==s.length-1&&(s+="/");let n=s+e.meta.image;n=yc(n,t.src);const h=(await i.load([n]))[n],c=new Oc(h.baseTexture,e,t.src);await c.parse();const m=e?.meta?.related_multi_packs;if(Array.isArray(m)){const _=[];for(const w of m){if(typeof w!="string")continue;let S=s+w;t.data?.ignoreMultiPack||(S=yc(S,t.src),_.push(i.load({src:S,data:{ignoreMultiPack:!0}})))}const y=await Promise.all(_);c.linkedSheets=y,y.forEach(w=>{w.linkedSheets=[c].concat(c.linkedSheets.filter(S=>S!==w))})}return c},unload(e){e.destroy(!0)}}};Xt.add(fg);class ph{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class mh{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const i=t.match(/^[a-z]+\s+.+$/gm),s={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const a in i){const h=i[a].match(/^[a-z]+/gm)[0],c=i[a].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),m={};for(const _ in c){const y=c[_].split("="),w=y[0],S=y[1].replace(/"/gm,""),R=parseFloat(S),F=isNaN(R)?S:R;m[w]=F}s[h].push(m)}const n=new ph;return s.info.forEach(a=>n.info.push({face:a.face,size:parseInt(a.size,10)})),s.common.forEach(a=>n.common.push({lineHeight:parseInt(a.lineHeight,10)})),s.page.forEach(a=>n.page.push({id:parseInt(a.id,10),file:a.file})),s.char.forEach(a=>n.char.push({id:parseInt(a.id,10),page:parseInt(a.page,10),x:parseInt(a.x,10),y:parseInt(a.y,10),width:parseInt(a.width,10),height:parseInt(a.height,10),xoffset:parseInt(a.xoffset,10),yoffset:parseInt(a.yoffset,10),xadvance:parseInt(a.xadvance,10)})),s.kerning.forEach(a=>n.kerning.push({first:parseInt(a.first,10),second:parseInt(a.second,10),amount:parseInt(a.amount,10)})),s.distanceField.forEach(a=>n.distanceField.push({distanceRange:parseInt(a.distanceRange,10),fieldType:a.fieldType})),n}}class kc{static test(t){const i=t;return"getElementsByTagName"in i&&i.getElementsByTagName("page").length&&i.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const i=new ph,s=t.getElementsByTagName("info"),n=t.getElementsByTagName("common"),a=t.getElementsByTagName("page"),h=t.getElementsByTagName("char"),c=t.getElementsByTagName("kerning"),m=t.getElementsByTagName("distanceField");for(let _=0;_<s.length;_++)i.info.push({face:s[_].getAttribute("face"),size:parseInt(s[_].getAttribute("size"),10)});for(let _=0;_<n.length;_++)i.common.push({lineHeight:parseInt(n[_].getAttribute("lineHeight"),10)});for(let _=0;_<a.length;_++)i.page.push({id:parseInt(a[_].getAttribute("id"),10)||0,file:a[_].getAttribute("file")});for(let _=0;_<h.length;_++){const y=h[_];i.char.push({id:parseInt(y.getAttribute("id"),10),page:parseInt(y.getAttribute("page"),10)||0,x:parseInt(y.getAttribute("x"),10),y:parseInt(y.getAttribute("y"),10),width:parseInt(y.getAttribute("width"),10),height:parseInt(y.getAttribute("height"),10),xoffset:parseInt(y.getAttribute("xoffset"),10),yoffset:parseInt(y.getAttribute("yoffset"),10),xadvance:parseInt(y.getAttribute("xadvance"),10)})}for(let _=0;_<c.length;_++)i.kerning.push({first:parseInt(c[_].getAttribute("first"),10),second:parseInt(c[_].getAttribute("second"),10),amount:parseInt(c[_].getAttribute("amount"),10)});for(let _=0;_<m.length;_++)i.distanceField.push({fieldType:m[_].getAttribute("fieldType"),distanceRange:parseInt(m[_].getAttribute("distanceRange"),10)});return i}}class Lc{static test(t){return typeof t=="string"&&t.includes("<font>")?kc.test(G.ADAPTER.parseXML(t)):!1}static parse(t){return kc.parse(G.ADAPTER.parseXML(t))}}const Uf=[mh,kc,Lc];function dg(e){for(let t=0;t<Uf.length;t++)if(Uf[t].test(e))return Uf[t];return null}function Uy(e,t,i,s,n,a){const h=i.fill;if(Array.isArray(h)){if(h.length===1)return h[0]}else return h;let c;const m=i.dropShadow?i.dropShadowDistance:0,_=i.padding||0,y=e.width/s-m-_*2,w=e.height/s-m-_*2,S=h.slice(),R=i.fillGradientStops.slice();if(!R.length){const F=S.length+1;for(let $=1;$<F;++$)R.push($/F)}if(S.unshift(h[0]),R.unshift(0),S.push(h[h.length-1]),R.push(1),i.fillGradientType===hh.LINEAR_VERTICAL){c=t.createLinearGradient(y/2,_,y/2,w+_);let F=0;const W=(a.fontProperties.fontSize+i.strokeThickness)/w;for(let ot=0;ot<n.length;ot++){const ut=a.lineHeight*ot;for(let Q=0;Q<S.length;Q++){let at=0;typeof R[Q]=="number"?at=R[Q]:at=Q/S.length;const At=ut/w+at*W;let Lt=Math.max(F,At);Lt=Math.min(Lt,1),c.addColorStop(Lt,S[Q]),F=Lt}}}else{c=t.createLinearGradient(_,w/2,y+_,w/2);const F=S.length+1;let $=1;for(let W=0;W<S.length;W++){let ot;typeof R[W]=="number"?ot=R[W]:ot=$/F,c.addColorStop(ot,S[W]),$++}}return c}function Gy(e,t,i,s,n,a,h){const c=i.text,m=i.fontProperties;t.translate(s,n),t.scale(a,a);const _=h.strokeThickness/2,y=-(h.strokeThickness/2);if(t.font=h.toFontString(),t.lineWidth=h.strokeThickness,t.textBaseline=h.textBaseline,t.lineJoin=h.lineJoin,t.miterLimit=h.miterLimit,t.fillStyle=Uy(e,t,h,a,[c],i),t.strokeStyle=h.stroke,h.dropShadow){const w=h.dropShadowColor,S=h.dropShadowBlur*a,R=h.dropShadowDistance*a;t.shadowColor=Te.shared.setValue(w).setAlpha(h.dropShadowAlpha).toRgbaString(),t.shadowBlur=S,t.shadowOffsetX=Math.cos(h.dropShadowAngle)*R,t.shadowOffsetY=Math.sin(h.dropShadowAngle)*R}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;h.stroke&&h.strokeThickness&&t.strokeText(c,_,y+i.lineHeight-m.descent),h.fill&&t.fillText(c,_,y+i.lineHeight-m.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function Fc(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function pg(e){return Array.from?Array.from(e):e.split("")}function zy(e){typeof e=="string"&&(e=[e]);const t=[];for(let i=0,s=e.length;i<s;i++){const n=e[i];if(Array.isArray(n)){if(n.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${n.length}.`);const a=n[0].charCodeAt(0),h=n[1].charCodeAt(0);if(h<a)throw new Error("[BitmapFont]: Invalid character range.");for(let c=a,m=h;c<=m;c++)t.push(String.fromCharCode(c))}else t.push(...pg(n))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const vs=class{constructor(e,t,i){const[s]=e.info,[n]=e.common,[a]=e.page,[h]=e.distanceField,c=Yr(a.file),m={};this._ownsTextures=i,this.font=s.face,this.size=s.size,this.lineHeight=n.lineHeight/c,this.chars={},this.pageTextures=m;for(let _=0;_<e.page.length;_++){const{id:y,file:w}=e.page[_];m[y]=t instanceof Array?t[_]:t[w],h?.fieldType&&h.fieldType!=="none"&&(m[y].baseTexture.alphaMode=P.NO_PREMULTIPLIED_ALPHA,m[y].baseTexture.mipmap=D.OFF)}for(let _=0;_<e.char.length;_++){const{id:y,page:w}=e.char[_];let{x:S,y:R,width:F,height:$,xoffset:W,yoffset:ot,xadvance:ut}=e.char[_];S/=c,R/=c,F/=c,$/=c,W/=c,ot/=c,ut/=c;const Q=new de(S+m[w].frame.x/c,R+m[w].frame.y/c,F,$);this.chars[y]={xOffset:W,yOffset:ot,xAdvance:ut,kerning:{},texture:new wt(m[w].baseTexture,Q),page:w}}for(let _=0;_<e.kerning.length;_++){let{first:y,second:w,amount:S}=e.kerning[_];y/=c,w/=c,S/=c,this.chars[w]&&(this.chars[w].kerning[y]=S)}this.distanceFieldRange=h?.distanceRange,this.distanceFieldType=h?.fieldType?.toLowerCase()??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,i){let s;if(e instanceof ph)s=e;else{const a=dg(e);if(!a)throw new Error("Unrecognized data format for font.");s=a.parse(e)}t instanceof wt&&(t=[t]);const n=new vs(s,t,i);return vs.available[n.font]=n,n}static uninstall(e){const t=vs.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete vs.available[e]}static from(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:s,padding:n,resolution:a,textureWidth:h,textureHeight:c,...m}=Object.assign({},vs.defaultOptions,i),_=zy(s),y=t instanceof Xs?t:new Xs(t),w=h,S=new ph;S.info[0]={face:y.fontFamily,size:y.fontSize},S.common[0]={lineHeight:y.fontSize};let R=0,F=0,$,W,ot,ut=0;const Q=[],at=[];for(let Lt=0;Lt<_.length;Lt++){$||($=G.ADAPTER.createCanvas(),$.width=h,$.height=c,W=$.getContext("2d"),ot=new le($,{resolution:a,...m}),Q.push(ot),at.push(new wt(ot)),S.page.push({id:at.length-1,file:""}));const Pt=_[Lt],bt=Bi.measureText(Pt,y,!1,$),Zt=bt.width,St=Math.ceil(bt.height),Dt=Math.ceil((y.fontStyle==="italic"?2:1)*Zt);if(F>=c-St*a){if(F===0)throw new Error(`[BitmapFont] textureHeight ${c}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${Pt}')`);--Lt,$=null,W=null,ot=null,F=0,R=0,ut=0;continue}if(ut=Math.max(St+bt.fontProperties.descent,ut),Dt*a+R>=w){if(R===0)throw new Error(`[BitmapFont] textureWidth ${h}px is too small (fontFamily: '${y.fontFamily}', fontSize: ${y.fontSize}px, char: '${Pt}')`);--Lt,F+=ut*a,F=Math.ceil(F),R=0,ut=0;continue}Gy($,W,bt,R,F,a,y);const ve=Fc(bt.text);S.char.push({id:ve,page:at.length-1,x:R/a,y:F/a,width:Dt,height:St,xoffset:0,yoffset:0,xadvance:Zt-(y.dropShadow?y.dropShadowDistance:0)-(y.stroke?y.strokeThickness:0)}),R+=(Dt+2*n)*a,R=Math.ceil(R)}for(let Lt=0,Pt=_.length;Lt<Pt;Lt++){const bt=_[Lt];for(let Zt=0;Zt<Pt;Zt++){const St=_[Zt],Dt=W.measureText(bt).width,ve=W.measureText(St).width,xt=W.measureText(bt+St).width-(Dt+ve);xt&&S.kerning.push({first:Fc(bt),second:Fc(St),amount:xt})}}const At=new vs(S,at,!0);return vs.available[e]!==void 0&&vs.uninstall(e),vs.available[e]=At,At}};let or=vs;or.ALPHA=[["a","z"],["A","Z"]," "],or.NUMERIC=[["0","9"]],or.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],or.ASCII=[[" ","~"]],or.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:vs.ALPHANUMERIC},or.available={};var Vy=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,Hy=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const mg=[],gg=[],_g=[],vg=class extends br{constructor(e,t={}){super();const{align:i,tint:s,maxWidth:n,letterSpacing:a,fontName:h,fontSize:c}=Object.assign({},vg.styleDefaults,t);if(!or.available[h])throw new Error(`Missing BitmapFont "${h}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tintColor=new Te(s),this._font=void 0,this._fontName=h,this._fontSize=c,this.text=e,this._maxWidth=n,this._maxLineHeight=0,this._letterSpacing=a,this._anchor=new fs(()=>{this.dirty=!0},this,0,0),this._roundPixels=G.ROUND_PIXELS,this.dirty=!0,this._resolution=G.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){const e=or.available[this._fontName],t=this.fontSize,i=t/e.size,s=new we,n=[],a=[],h=[],c=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",m=pg(c),_=this._maxWidth*e.size/t,y=e.distanceFieldType==="none"?mg:gg;let w=null,S=0,R=0,F=0,$=-1,W=0,ot=0,ut=0,Q=0;for(let St=0;St<m.length;St++){const Dt=m[St],ve=Fc(Dt);if(/(?:\s)/.test(Dt)&&($=St,W=S,Q++),Dt==="\r"||Dt===`
`){a.push(S),h.push(-1),R=Math.max(R,S),++F,++ot,s.x=0,s.y+=e.lineHeight,w=null,Q=0;continue}const yt=e.chars[ve];if(!yt)continue;w&&yt.kerning[w]&&(s.x+=yt.kerning[w]);const xt=_g.pop()||{texture:wt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new we};xt.texture=yt.texture,xt.line=F,xt.charCode=ve,xt.position.x=Math.round(s.x+yt.xOffset+this._letterSpacing/2),xt.position.y=Math.round(s.y+yt.yOffset),xt.prevSpaces=Q,n.push(xt),S=xt.position.x+Math.max(yt.xAdvance-yt.xOffset,yt.texture.orig.width),s.x+=yt.xAdvance+this._letterSpacing,ut=Math.max(ut,yt.yOffset+yt.texture.height),w=ve,$!==-1&&_>0&&s.x>_&&(++ot,Wr(n,1+$-ot,1+St-$),St=$,$=-1,a.push(W),h.push(n.length>0?n[n.length-1].prevSpaces:0),R=Math.max(R,W),F++,s.x=0,s.y+=e.lineHeight,w=null,Q=0)}const at=m[m.length-1];at!=="\r"&&at!==`
`&&(/(?:\s)/.test(at)&&(S=W),a.push(S),R=Math.max(R,S),h.push(-1));const At=[];for(let St=0;St<=F;St++){let Dt=0;this._align==="right"?Dt=R-a[St]:this._align==="center"?Dt=(R-a[St])/2:this._align==="justify"&&(Dt=h[St]<0?0:(R-a[St])/h[St]),At.push(Dt)}const Lt=n.length,Pt={},bt=[],Zt=this._activePagesMeshData;y.push(...Zt);for(let St=0;St<Lt;St++){const Dt=n[St].texture,ve=Dt.baseTexture.uid;if(!Pt[ve]){let yt=y.pop();if(!yt){const De=new lh;let ne,he;e.distanceFieldType==="none"?(ne=new za(wt.EMPTY),he=f.NORMAL):(ne=new za(wt.EMPTY,{program:vr.from(Hy,Vy),uniforms:{uFWidth:0}}),he=f.NORMAL_NPM);const Xe=new qo(De,ne);Xe.blendMode=he,yt={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Xe,vertices:null,uvs:null,indices:null}}yt.index=0,yt.indexCount=0,yt.vertexCount=0,yt.uvsCount=0,yt.total=0;const{_textureCache:xt}=this;xt[ve]=xt[ve]||new wt(Dt.baseTexture),yt.mesh.texture=xt[ve],yt.mesh.tint=this._tintColor.value,bt.push(yt),Pt[ve]=yt}Pt[ve].total++}for(let St=0;St<Zt.length;St++)bt.includes(Zt[St])||this.removeChild(Zt[St].mesh);for(let St=0;St<bt.length;St++)bt[St].mesh.parent!==this&&this.addChild(bt[St].mesh);this._activePagesMeshData=bt;for(const St in Pt){const Dt=Pt[St],ve=Dt.total;if(!(Dt.indices?.length>6*ve)||Dt.vertices.length<qo.BATCHABLE_SIZE*2)Dt.vertices=new Float32Array(4*2*ve),Dt.uvs=new Float32Array(4*2*ve),Dt.indices=new Uint16Array(6*ve);else{const yt=Dt.total,xt=Dt.vertices;for(let De=yt*4*2;De<xt.length;De++)xt[De]=0}Dt.mesh.size=6*ve}for(let St=0;St<Lt;St++){const Dt=n[St];let ve=Dt.position.x+At[Dt.line]*(this._align==="justify"?Dt.prevSpaces:1);this._roundPixels&&(ve=Math.round(ve));const yt=ve*i,xt=Dt.position.y*i,De=Dt.texture,ne=Pt[De.baseTexture.uid],he=De.frame,Xe=De._uvs,Ae=ne.index++;ne.indices[Ae*6+0]=0+Ae*4,ne.indices[Ae*6+1]=1+Ae*4,ne.indices[Ae*6+2]=2+Ae*4,ne.indices[Ae*6+3]=0+Ae*4,ne.indices[Ae*6+4]=2+Ae*4,ne.indices[Ae*6+5]=3+Ae*4,ne.vertices[Ae*8+0]=yt,ne.vertices[Ae*8+1]=xt,ne.vertices[Ae*8+2]=yt+he.width*i,ne.vertices[Ae*8+3]=xt,ne.vertices[Ae*8+4]=yt+he.width*i,ne.vertices[Ae*8+5]=xt+he.height*i,ne.vertices[Ae*8+6]=yt,ne.vertices[Ae*8+7]=xt+he.height*i,ne.uvs[Ae*8+0]=Xe.x0,ne.uvs[Ae*8+1]=Xe.y0,ne.uvs[Ae*8+2]=Xe.x1,ne.uvs[Ae*8+3]=Xe.y1,ne.uvs[Ae*8+4]=Xe.x2,ne.uvs[Ae*8+5]=Xe.y2,ne.uvs[Ae*8+6]=Xe.x3,ne.uvs[Ae*8+7]=Xe.y3}this._textWidth=R*i,this._textHeight=(s.y+e.lineHeight)*i;for(const St in Pt){const Dt=Pt[St];if(this.anchor.x!==0||this.anchor.y!==0){let De=0;const ne=this._textWidth*this.anchor.x,he=this._textHeight*this.anchor.y;for(let Xe=0;Xe<Dt.total;Xe++)Dt.vertices[De++]-=ne,Dt.vertices[De++]-=he,Dt.vertices[De++]-=ne,Dt.vertices[De++]-=he,Dt.vertices[De++]-=ne,Dt.vertices[De++]-=he,Dt.vertices[De++]-=ne,Dt.vertices[De++]-=he}this._maxLineHeight=ut*i;const ve=Dt.mesh.geometry.getBuffer("aVertexPosition"),yt=Dt.mesh.geometry.getBuffer("aTextureCoord"),xt=Dt.mesh.geometry.getIndex();ve.data=Dt.vertices,yt.data=Dt.uvs,xt.data=Dt.indices,ve.update(),yt.update(),xt.update()}for(let St=0;St<n.length;St++)_g.push(n[St]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:i,size:s}=or.available[this._fontName];if(i!=="none"){const{a:n,b:a,c:h,d:c}=this.worldTransform,m=Math.sqrt(n*n+a*a),_=Math.sqrt(h*h+c*c),y=(Math.abs(m)+Math.abs(_))/2,w=this.fontSize/s,S=e._view.resolution;for(const R of this._activePagesMeshData)R.mesh.shader.uniforms.uFWidth=y*t*w*S}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=or.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!or.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??or.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,s=or.available[this._fontName].distanceFieldType==="none"?mg:gg;s.push(...this._activePagesMeshData);for(const n of this._activePagesMeshData)this.removeChild(n.mesh);this._activePagesMeshData=[],s.filter(n=>t[n.mesh.texture.baseTexture.uid]).forEach(n=>{n.mesh.texture=wt.EMPTY});for(const n in t)t[n].destroy(),delete t[n];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};let yg=vg;yg.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const jy=[".xml",".fnt"],xg={extension:{type:It.LoadParser,priority:gs.Normal},name:"loadBitmapFont",test(e){return jy.includes(si.extname(e).toLowerCase())},async testParse(e){return mh.test(e)||Lc.test(e)},async parse(e,t,i){const s=mh.test(e)?mh.parse(e):Lc.parse(e),{src:n}=t,{page:a}=s,h=[];for(let _=0;_<a.length;++_){const y=a[_].file;let w=si.join(si.dirname(n),y);w=yc(w,n),h.push(w)}const c=await i.load(h),m=h.map(_=>c[_]);return or.install(s,m,!0)},async load(e,t){return(await G.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};Xt.add(xg);const Va=class extends Xs{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Va(Object.keys(Va.defaultOptions).reduce((t,i)=>({...t,[i]:e[i]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Va.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,t={}){const{availableFonts:i}=Va;if(i[e]){const s=i[e];return this._fonts.push(s),s.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return G.ADAPTER.fetch(e).then(s=>s.blob()).then(async s=>new Promise((n,a)=>{const h=URL.createObjectURL(s),c=new FileReader;c.onload=()=>n([h,c.result]),c.onerror=a,c.readAsDataURL(s)})).then(async([s,n])=>{const a=Object.assign({family:si.basename(e,si.extname(e)),weight:"normal",style:"normal",src:s,dataSrc:n,refs:1,originalUrl:e,fontFace:null},t);i[e]=a,this._fonts.push(a),this.styleID++;const h=new FontFace(a.family,`url(${a.src})`,{weight:a.weight,style:a.style});a.fontFace=h,await h.load(),document.fonts.add(h),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const t=e.filter(i=>!this._overrides.includes(i));t.length>0&&(this._overrides.push(...t),this.styleID++)}removeOverride(...e){const t=e.filter(i=>this._overrides.includes(i));t.length>0&&(this._overrides=this._overrides.filter(i=>!t.includes(i)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,t)=>`${e}
              @font-face {
                  font-family: "${t.family}";
                  src: url('${t.dataSrc}');
                  font-weight: ${t.weight};
                  font-style: ${t.style}; 
              }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=xl(e)),typeof e=="number"?Bn(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const t=this.dropShadowAlpha,i=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),s=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&t<1&&(e+=(t*255|0).toString(16).padStart(2,"0"));const n=`${i}px ${s}px`;return this.dropShadowBlur>0?`text-shadow: ${n} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${n} ${e}`}reset(){Object.assign(this,Va.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(t=>setTimeout(t,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=G.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let Ha=Va;Ha.availableFonts={},Ha.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const ja=class extends dn{constructor(e="",t={}){super(wt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const i=new Image,s=wt.from(i,{scaleMode:G.SCALE_MODE,resourceOptions:{autoLoad:!1}});s.orig=new de,s.trim=new de,this.texture=s;const n="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xhtml",h=document.createElementNS(n,"svg"),c=document.createElementNS(n,"foreignObject"),m=document.createElementNS(a,"div"),_=document.createElementNS(a,"style");c.setAttribute("width","10000"),c.setAttribute("height","10000"),c.style.overflow="hidden",h.appendChild(c),this.maxWidth=ja.defaultMaxWidth,this.maxHeight=ja.defaultMaxHeight,this._domElement=m,this._styleElement=_,this._svgRoot=h,this._foreignObject=c,this._foreignObject.appendChild(_),this._foreignObject.appendChild(m),this._image=i,this._loadImage=new Image,this._autoResolution=ja.defaultAutoResolution,this._resolution=ja.defaultResolution??G.RESOLUTION,this.text=e,this.style=t}measureText(e){const{text:t,style:i,resolution:s}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:t,style:i.toCSS(s)}),this._styleElement.textContent=i.toGlobalCSS(),document.body.appendChild(this._svgRoot);const n=this._domElement.getBoundingClientRect();this._svgRoot.remove();const a=Math.min(this.maxWidth,Math.ceil(n.width)),h=Math.min(this.maxHeight,Math.ceil(n.height));return this._svgRoot.setAttribute("width",a.toString()),this._svgRoot.setAttribute("height",h.toString()),t!==this._text&&(this._domElement.innerHTML=this._text),i!==this._style&&(Object.assign(this._domElement,{style:this._style?.toCSS(s)}),this._styleElement.textContent=this._style?.toGlobalCSS()),{width:a+i.padding*2,height:h+i.padding*2}}async updateText(e=!0){const{style:t,_image:i,_loadImage:s}=this;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;const{width:n,height:a}=this.measureText();i.width=s.width=Math.ceil(Math.max(1,n)),i.height=s.height=Math.ceil(Math.max(1,a)),this._loading||(this._loading=!0,await new Promise(h=>{s.onload=async()=>{await t.onBeforeDraw(),this._loading=!1,i.src=s.src,s.onload=null,s.src="",this.updateTexture(),h()};const c=new XMLSerializer().serializeToString(this._svgRoot);s.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`}))}get source(){return this._image}updateTexture(){const{style:e,texture:t,_image:i,resolution:s}=this,{padding:n}=e,{baseTexture:a}=t;t.trim.width=t._frame.width=i.width/s,t.trim.height=t._frame.height=i.height/s,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),a.setRealSize(i.width,i.height,s),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},ja.defaultDestroyOptions,e),super.destroy(e);const t=null;this.ownsStyle&&this._style?.cleanFonts(),this._style=t,this._svgRoot?.remove(),this._svgRoot=t,this._domElement?.remove(),this._domElement=t,this._foreignObject?.remove(),this._foreignObject=t,this._styleElement?.remove(),this._styleElement=t,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=t,this._image.src="",this._image=t}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const t=Qi(this.scale.x)||1;this.scale.x=t*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const t=Qi(this.scale.y)||1;this.scale.y=t*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof Ha?(this.ownsStyle=!1,this._style=e):e instanceof Xs?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Ha.from(e)):(this.ownsStyle=!0,this._style=new Ha(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let gh=ja;return gh.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},gh.defaultMaxWidth=2024,gh.defaultMaxHeight=2024,gh.defaultAutoResolution=!0,r.ALPHA_MODES=P,r.AbstractMultiResource=af,r.AccessibilityManager=pf,r.AlphaFilter=am,r.AnimatedSprite=Dc,r.Application=gf,r.ArrayResource=rm,r.Assets=eh,r.AssetsClass=Mm,r.Attribute=Xn,r.BLEND_MODES=f,r.BUFFER_BITS=u,r.BUFFER_TYPE=z,r.BackgroundSystem=Kn,r.BaseImageResource=Ct,r.BasePrepare=uh,r.BaseRenderTexture=ft,r.BaseTexture=le,r.BatchDrawCall=Mo,r.BatchGeometry=wa,r.BatchRenderer=nr,r.BatchShaderGenerator=rc,r.BatchSystem=Uo,r.BatchTextureArray=No,r.BitmapFont=or,r.BitmapFontData=ph,r.BitmapText=yg,r.BlobResource=Nm,r.BlurFilter=lm,r.BlurFilterPass=gc,r.Bounds=ql,r.BrowserAdapter=K,r.Buffer=oi,r.BufferResource=nn,r.BufferSystem=sf,r.CLEAR_MODES=L,r.COLOR_MASK_BITS=Y,r.Cache=Na,r.CanvasResource=sm,r.Circle=Sa,r.Color=Te,r.ColorMatrixFilter=_c,r.CompressedTextureResource=Jn,r.Container=br,r.ContextSystem=M,r.CountLimiter=ag,r.CubeResource=lf,r.DEG_TO_RAD=Qh,r.DRAW_MODES=d,r.DisplacementFilter=hm,r.DisplayObject=ai,r.ENV=o,r.Ellipse=Ea,r.EventBoundary=fm,r.EventSystem=Fa,r.ExtensionType=It,r.Extract=Sf,r.FORMATS=p,r.FORMATS_TO_COMPONENTS=Vm,r.FXAAFilter=cm,r.FederatedDisplayObject=pm,r.FederatedEvent=La,r.FederatedMouseEvent=Zl,r.FederatedPointerEvent=ts,r.FederatedWheelEvent=Yo,r.FillStyle=oh,r.Filter=ci,r.FilterState=Ia,r.FilterSystem=Vo,r.Framebuffer=lt,r.FramebufferSystem=Gl,r.GC_MODES=j,r.GLFramebuffer=ac,r.GLProgram=Yp,r.GLTexture=dc,r.GRAPHICS_CURVES=hy,r.GenerateTextureSystem=Wu,r.Geometry=$r,r.GeometrySystem=Ho,r.Graphics=ah,r.GraphicsData=nh,r.GraphicsGeometry=Mf,r.HTMLText=gh,r.HTMLTextStyle=Ha,r.IGLUniformData=M0,r.INSTALLED=Po,r.INTERNAL_FORMATS=Tr,r.INTERNAL_FORMAT_TO_BYTES_PER_PIXEL=ih,r.ImageBitmapResource=Wo,r.ImageResource=jt,r.LINE_CAP=to,r.LINE_JOIN=es,r.LineStyle=Ac,r.LoaderParserPriority=gs,r.MASK_TYPES=N,r.MIPMAP_MODES=D,r.MSAA_QUALITY=Z,r.MaskData=hc,r.MaskSystem=zu,r.Matrix=je,r.Mesh=qo,r.MeshBatchUvs=tg,r.MeshGeometry=lh,r.MeshMaterial=za,r.MultisampleSystem=rf,r.NineSlicePlane=my,r.NoiseFilter=um,r.ObjectRenderer=Qr,r.ObjectRendererSystem=nf,r.ObservablePoint=fs,r.PI_2=Ro,r.PRECISION=U,r.ParticleContainer=vy,r.ParticleRenderer=If,r.PlaneGeometry=rg,r.PluginSystem=ju,r.Point=we,r.Polygon=Us,r.Prepare=Ff,r.Program=vr,r.ProjectionSystem=Xu,r.Quad=Hs,r.QuadUv=Go,r.RAD_TO_DEG=Il,r.RENDERER_TYPE=l,r.Rectangle=de,r.RenderTexture=tr,r.RenderTexturePool=un,r.RenderTextureSystem=Yu,r.Renderer=Xo,r.ResizePlugin=_f,r.Resource=jn,r.RopeGeometry=sg,r.RoundedRectangle=Aa,r.Runner=Ji,r.SAMPLER_TYPES=C,r.SCALE_MODES=b,r.SHAPES=gi,r.SVGResource=ka,r.ScissorSystem=Vu,r.Shader=Fr,r.ShaderSystem=$u,r.SimpleMesh=gy,r.SimplePlane=ng,r.SimpleRope=_y,r.Sprite=dn,r.SpriteMaskFilter=jl,r.Spritesheet=Oc,r.StartupSystem=Wl,r.State=sr,r.StateSystem=Ku,r.StencilSystem=Hu,r.SystemManager=Jp,r.TARGETS=v,r.TEXT_GRADIENT=hh,r.TYPES=T,r.TYPES_TO_BYTES_PER_COMPONENT=Tf,r.TYPES_TO_BYTES_PER_PIXEL=Hm,r.TemporaryDisplayObject=nm,r.Text=Rc,r.TextFormat=mh,r.TextMetrics=Bi,r.TextStyle=Xs,r.Texture=wt,r.TextureGCSystem=Jr,r.TextureMatrix=Oa,r.TextureSystem=Zu,r.TextureUvs=Ee,r.Ticker=_i,r.TickerPlugin=tf,r.TilingSprite=Bf,r.TilingSpriteRenderer=Nf,r.TimeLimiter=Oy,r.Transform=Wn,r.TransformFeedback=W0,r.TransformFeedbackSystem=Qu,r.UPDATE_PRIORITY=fn,r.UniformGroup=yr,r.VERSION=Y0,r.VideoResource=mc,r.ViewSystem=Yl,r.ViewableBuffer=Co,r.WRAP_MODES=k,r.XMLFormat=kc,r.XMLStringFormat=Lc,r.accessibleTarget=mm,r.autoDetectFormat=dg,r.autoDetectRenderer=em,r.autoDetectResource=cs,r.cacheTextureArray=Rm,r.checkDataUrl=Ba,r.checkExtension=Qn,r.checkMaxIfStatementsInShader=Al,r.convertToList=js,r.copySearchParams=yc,r.createStringVariations=xm,r.createTexture=Jl,r.createUBOElements=Kp,r.curves=eo,r.defaultFilterVertex=ef,r.defaultVertex=im,r.detectAvif=Dm,r.detectCompressedTextures=Bm,r.detectDefaults=km,r.detectWebp=Im,r.extensions=Xt,r.filters=uf,r.generateProgram=$p,r.generateUniformBufferSync=Qp,r.getFontFamilyName=wm,r.getTestContext=Fl,r.getUBOData=Zp,r.graphicsUtils=fy,r.groupD8=Ye,r.isMobile=Pe,r.isSingleItem=Ql,r.loadBitmapFont=xg,r.loadDDS=Xm,r.loadImageBitmap=Cm,r.loadJson=bm,r.loadKTX=Wm,r.loadSVG=Pm,r.loadTextures=th,r.loadTxt=Tm,r.loadWebFont=Sm,r.parseDDS=Gm,r.parseKTX=jm,r.resolveCompressedTextureUrl=Ym,r.resolveTextureUrl=Lm,r.settings=G,r.spritesheetAsset=fg,r.uniformParsers=ln,r.unsafeEvalSupported=qn,r.utils=Yh,Object.defineProperty(r,"__esModule",{value:!0}),r}({}),m0=function(r,o,l,u,f,d,p,v){"use strict";var T=function(B,E){return(T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var H in A)Object.prototype.hasOwnProperty.call(A,H)&&(g[H]=A[H])})(B,E)};function C(B,E){function g(){this.constructor=B}T(B,E),B.prototype=E===null?Object.create(E):(g.prototype=E.prototype,new g)}var b=function(){return(b=Object.assign||function(B){for(var E,g=arguments,A=1,H=arguments.length;A<H;A++)for(var I in E=g[A])Object.prototype.hasOwnProperty.call(E,I)&&(B[I]=E[I]);return B}).apply(this,arguments)},k=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,D=function(B){function E(g){var A=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float gamma;
uniform float contrast;
uniform float saturation;
uniform float brightness;
uniform float red;
uniform float green;
uniform float blue;
uniform float alpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (c.a > 0.0) {
        c.rgb /= c.a;

        vec3 rgb = pow(c.rgb, vec3(1. / gamma));
        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);
        rgb.r *= red;
        rgb.g *= green;
        rgb.b *= blue;
        c.rgb = rgb * brightness;

        c.rgb *= c.a;
    }

    gl_FragColor = c * alpha;
}
`)||this;return A.gamma=1,A.saturation=1,A.contrast=1,A.brightness=1,A.red=1,A.green=1,A.blue=1,A.alpha=1,Object.assign(A,g),A}return C(E,B),E.prototype.apply=function(g,A,H,I){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,g.applyFilter(this,A,H,I)},E}(o.Filter),P=function(B){function E(g){g===void 0&&(g=.5);var A=B.call(this,k,`
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform float threshold;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);

    // A simple & fast algorithm for getting brightness.
    // It's inaccuracy , but good enought for this feature.
    float _max = max(max(color.r, color.g), color.b);
    float _min = min(min(color.r, color.g), color.b);
    float brightness = (_max + _min) * 0.5;

    if(brightness > threshold) {
        gl_FragColor = color;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
    }
}
`)||this;return A.threshold=g,A}return C(E,B),Object.defineProperty(E.prototype,"threshold",{get:function(){return this.uniforms.threshold},set:function(g){this.uniforms.threshold=g},enumerable:!1,configurable:!0}),E}(o.Filter),L=function(B){function E(g,A,H){g===void 0&&(g=4),A===void 0&&(A=3),H===void 0&&(H=!1);var I=B.call(this,k,H?`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;
uniform vec4 filterClamp;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample top right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom right pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Sample bottom left pixel
    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}
`:`
varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 uOffset;

void main(void)
{
    vec4 color = vec4(0.0);

    // Sample top left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample top right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));

    // Sample bottom right pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));

    // Sample bottom left pixel
    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));

    // Average
    color *= 0.25;

    gl_FragColor = color;
}`)||this;return I._kernels=[],I._blur=4,I._quality=3,I.uniforms.uOffset=new Float32Array(2),I._pixelSize=new l.Point,I.pixelSize=1,I._clamp=H,Array.isArray(g)?I.kernels=g:(I._blur=g,I.quality=A),I}return C(E,B),E.prototype.apply=function(g,A,H,I){var J,it=this._pixelSize.x/A._frame.width,ht=this._pixelSize.y/A._frame.height;if(this._quality===1||this._blur===0)J=this._kernels[0]+.5,this.uniforms.uOffset[0]=J*it,this.uniforms.uOffset[1]=J*ht,g.applyFilter(this,A,H,I);else{for(var _t=g.getFilterTexture(),Et=A,kt=_t,ae=void 0,Oe=this._quality-1,Fe=0;Fe<Oe;Fe++)J=this._kernels[Fe]+.5,this.uniforms.uOffset[0]=J*it,this.uniforms.uOffset[1]=J*ht,g.applyFilter(this,Et,kt,1),ae=Et,Et=kt,kt=ae;J=this._kernels[Oe]+.5,this.uniforms.uOffset[0]=J*it,this.uniforms.uOffset[1]=J*ht,g.applyFilter(this,Et,H,I),g.returnFilterTexture(_t)}},E.prototype._updatePadding=function(){this.padding=Math.ceil(this._kernels.reduce(function(g,A){return g+A+.5},0))},E.prototype._generateKernels=function(){var g=this._blur,A=this._quality,H=[g];if(g>0)for(var I=g,J=g/A,it=1;it<A;it++)I-=J,H.push(I);this._kernels=H,this._updatePadding()},Object.defineProperty(E.prototype,"kernels",{get:function(){return this._kernels},set:function(g){Array.isArray(g)&&g.length>0?(this._kernels=g,this._quality=g.length,this._blur=Math.max.apply(Math,g)):(this._kernels=[0],this._quality=1)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"clamp",{get:function(){return this._clamp},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"pixelSize",{get:function(){return this._pixelSize},set:function(g){typeof g=="number"?(this._pixelSize.x=g,this._pixelSize.y=g):Array.isArray(g)?(this._pixelSize.x=g[0],this._pixelSize.y=g[1]):g instanceof l.Point?(this._pixelSize.x=g.x,this._pixelSize.y=g.y):(this._pixelSize.x=1,this._pixelSize.y=1)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"quality",{get:function(){return this._quality},set:function(g){this._quality=Math.max(1,Math.round(g)),this._generateKernels()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"blur",{get:function(){return this._blur},set:function(g){this._blur=g,this._generateKernels()},enumerable:!1,configurable:!0}),E}(o.Filter),j=function(B){function E(g){var A=B.call(this,k,`uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform sampler2D bloomTexture;
uniform float bloomScale;
uniform float brightness;

void main() {
    vec4 color = texture2D(uSampler, vTextureCoord);
    color.rgb *= brightness;
    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);
    bloomColor.rgb *= bloomScale;
    gl_FragColor = color + bloomColor;
}
`)||this;A.bloomScale=1,A.brightness=1,A._resolution=u.Filter.defaultResolution,typeof g=="number"&&(g={threshold:g});var H=Object.assign(E.defaults,g);A.bloomScale=H.bloomScale,A.brightness=H.brightness;var I=H.kernels,J=H.blur,it=H.quality,ht=H.pixelSize,_t=H.resolution;return A._extractFilter=new P(H.threshold),A._extractFilter.resolution=_t,A._blurFilter=I?new L(I):new L(J,it),A.pixelSize=ht,A.resolution=_t,A}return C(E,B),E.prototype.apply=function(g,A,H,I,J){var it=g.getFilterTexture();this._extractFilter.apply(g,A,it,1,J);var ht=g.getFilterTexture();this._blurFilter.apply(g,it,ht,1),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=ht,g.applyFilter(this,A,H,I),g.returnFilterTexture(ht),g.returnFilterTexture(it)},Object.defineProperty(E.prototype,"resolution",{get:function(){return this._resolution},set:function(g){this._resolution=g,this._extractFilter&&(this._extractFilter.resolution=g),this._blurFilter&&(this._blurFilter.resolution=g)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"threshold",{get:function(){return this._extractFilter.threshold},set:function(g){this._extractFilter.threshold=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(g){this._blurFilter.kernels=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(g){this._blurFilter.blur=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(g){this._blurFilter.quality=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(g){this._blurFilter.pixelSize=g},enumerable:!1,configurable:!0}),E.defaults={threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:u.Filter.defaultResolution},E}(o.Filter),U=function(B){function E(g){g===void 0&&(g=8);var A=B.call(this,k,`varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform float pixelSize;
uniform sampler2D uSampler;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
    return floor( coord / size ) * size;
}

vec2 getMod(vec2 coord, vec2 size)
{
    return mod( coord , size) / size;
}

float character(float n, vec2 p)
{
    p = floor(p*vec2(4.0, -4.0) + 2.5);

    if (clamp(p.x, 0.0, 4.0) == p.x)
    {
        if (clamp(p.y, 0.0, 4.0) == p.y)
        {
            if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;
        }
    }
    return 0.0;
}

void main()
{
    vec2 coord = mapCoord(vTextureCoord);

    // get the rounded color..
    vec2 pixCoord = pixelate(coord, vec2(pixelSize));
    pixCoord = unmapCoord(pixCoord);

    vec4 color = texture2D(uSampler, pixCoord);

    // determine the character to use
    float gray = (color.r + color.g + color.b) / 3.0;

    float n =  65536.0;             // .
    if (gray > 0.2) n = 65600.0;    // :
    if (gray > 0.3) n = 332772.0;   // *
    if (gray > 0.4) n = 15255086.0; // o
    if (gray > 0.5) n = 23385164.0; // &
    if (gray > 0.6) n = 15252014.0; // 8
    if (gray > 0.7) n = 13199452.0; // @
    if (gray > 0.8) n = 11512810.0; // #

    // get the mod..
    vec2 modd = getMod(coord, vec2(pixelSize));

    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);

}
`)||this;return A.size=g,A}return C(E,B),Object.defineProperty(E.prototype,"size",{get:function(){return this.uniforms.pixelSize},set:function(g){this.uniforms.pixelSize=g},enumerable:!1,configurable:!0}),E}(o.Filter),N=function(B){function E(g){var A=B.call(this,k,`precision mediump float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float transformX;
uniform float transformY;
uniform vec3 lightColor;
uniform float lightAlpha;
uniform vec3 shadowColor;
uniform float shadowAlpha;

void main(void) {
    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);
    vec4 color = texture2D(uSampler, vTextureCoord);
    float light = texture2D(uSampler, vTextureCoord - transform).a;
    float shadow = texture2D(uSampler, vTextureCoord + transform).a;

    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));
    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));
    gl_FragColor = vec4(color.rgb * color.a, color.a);
}
`)||this;return A._thickness=2,A._angle=0,A.uniforms.lightColor=new Float32Array(3),A.uniforms.shadowColor=new Float32Array(3),Object.assign(A,{rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},g),A.padding=1,A}return C(E,B),E.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},Object.defineProperty(E.prototype,"rotation",{get:function(){return this._angle/l.DEG_TO_RAD},set:function(g){this._angle=g*l.DEG_TO_RAD,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"thickness",{get:function(){return this._thickness},set:function(g){this._thickness=g,this._updateTransform()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"lightColor",{get:function(){return f.rgb2hex(this.uniforms.lightColor)},set:function(g){f.hex2rgb(g,this.uniforms.lightColor)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"lightAlpha",{get:function(){return this.uniforms.lightAlpha},set:function(g){this.uniforms.lightAlpha=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"shadowColor",{get:function(){return f.rgb2hex(this.uniforms.shadowColor)},set:function(g){f.hex2rgb(g,this.uniforms.shadowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"shadowAlpha",{get:function(){return this.uniforms.shadowAlpha},set:function(g){this.uniforms.shadowAlpha=g},enumerable:!1,configurable:!0}),E}(o.Filter),Y=function(B){function E(g,A,H,I){g===void 0&&(g=2),A===void 0&&(A=4),H===void 0&&(H=u.Filter.defaultResolution),I===void 0&&(I=5);var J,it,ht=B.call(this)||this;return typeof g=="number"?(J=g,it=g):g instanceof l.Point?(J=g.x,it=g.y):Array.isArray(g)&&(J=g[0],it=g[1]),ht.blurXFilter=new v.BlurFilterPass(!0,J,A,H,I),ht.blurYFilter=new v.BlurFilterPass(!1,it,A,H,I),ht.blurYFilter.blendMode=d.BLEND_MODES.SCREEN,ht.defaultFilter=new p.AlphaFilter,ht}return C(E,B),E.prototype.apply=function(g,A,H,I){var J=g.getFilterTexture();this.defaultFilter.apply(g,A,H,I),this.blurXFilter.apply(g,A,J,1),this.blurYFilter.apply(g,J,H,0),g.returnFilterTexture(J)},Object.defineProperty(E.prototype,"blur",{get:function(){return this.blurXFilter.blur},set:function(g){this.blurXFilter.blur=this.blurYFilter.blur=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"blurX",{get:function(){return this.blurXFilter.blur},set:function(g){this.blurXFilter.blur=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"blurY",{get:function(){return this.blurYFilter.blur},set:function(g){this.blurYFilter.blur=g},enumerable:!1,configurable:!0}),E}(o.Filter),Z=function(B){function E(g){var A=B.call(this,k,`uniform float radius;
uniform float strength;
uniform vec2 center;
uniform sampler2D uSampler;
varying vec2 vTextureCoord;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

void main()
{
    vec2 coord = vTextureCoord * filterArea.xy;
    coord -= center * dimensions.xy;
    float distance = length(coord);
    if (distance < radius) {
        float percent = distance / radius;
        if (strength > 0.0) {
            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);
        } else {
            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);
        }
    }
    coord += center * dimensions.xy;
    coord /= filterArea.xy;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    gl_FragColor = color;
}
`)||this;return A.uniforms.dimensions=new Float32Array(2),Object.assign(A,E.defaults,g),A}return C(E,B),E.prototype.apply=function(g,A,H,I){var J=A.filterFrame,it=J.width,ht=J.height;this.uniforms.dimensions[0]=it,this.uniforms.dimensions[1]=ht,g.applyFilter(this,A,H,I)},Object.defineProperty(E.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(g){this.uniforms.radius=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(g){this.uniforms.strength=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"center",{get:function(){return this.uniforms.center},set:function(g){this.uniforms.center=g},enumerable:!1,configurable:!0}),E.defaults={center:[.5,.5],radius:100,strength:1},E}(o.Filter),z=function(B){function E(g,A,H){A===void 0&&(A=!1),H===void 0&&(H=1);var I=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D colorMap;
uniform float _mix;
uniform float _size;
uniform float _sliceSize;
uniform float _slicePixelSize;
uniform float _sliceInnerSize;
void main() {
    vec4 color = texture2D(uSampler, vTextureCoord.xy);

    vec4 adjusted;
    if (color.a > 0.0) {
        color.rgb /= color.a;
        float innerWidth = _size - 1.0;
        float zSlice0 = min(floor(color.b * innerWidth), innerWidth);
        float zSlice1 = min(zSlice0 + 1.0, innerWidth);
        float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;
        float s0 = xOffset + (zSlice0 * _sliceSize);
        float s1 = xOffset + (zSlice1 * _sliceSize);
        float yOffset = _sliceSize * 0.5 + color.g * (1.0 - _sliceSize);
        vec4 slice0Color = texture2D(colorMap, vec2(s0,yOffset));
        vec4 slice1Color = texture2D(colorMap, vec2(s1,yOffset));
        float zOffset = fract(color.b * innerWidth);
        adjusted = mix(slice0Color, slice1Color, zOffset);

        color.rgb *= color.a;
    }
    gl_FragColor = vec4(mix(color, adjusted, _mix).rgb, color.a);

}`)||this;return I.mix=1,I._size=0,I._sliceSize=0,I._slicePixelSize=0,I._sliceInnerSize=0,I._nearest=!1,I._scaleMode=null,I._colorMap=null,I._scaleMode=null,I.nearest=A,I.mix=H,I.colorMap=g,I}return C(E,B),E.prototype.apply=function(g,A,H,I){this.uniforms._mix=this.mix,g.applyFilter(this,A,H,I)},Object.defineProperty(E.prototype,"colorSize",{get:function(){return this._size},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"colorMap",{get:function(){return this._colorMap},set:function(g){var A;g&&(g instanceof o.Texture||(g=o.Texture.from(g)),!((A=g)===null||A===void 0)&&A.baseTexture&&(g.baseTexture.scaleMode=this._scaleMode,g.baseTexture.mipmap=d.MIPMAP_MODES.OFF,this._size=g.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=g),this._colorMap=g)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"nearest",{get:function(){return this._nearest},set:function(g){this._nearest=g,this._scaleMode=g?d.SCALE_MODES.NEAREST:d.SCALE_MODES.LINEAR;var A=this._colorMap;A&&A.baseTexture&&(A.baseTexture._glTextures={},A.baseTexture.scaleMode=this._scaleMode,A.baseTexture.mipmap=d.MIPMAP_MODES.OFF,A._updateID++,A.baseTexture.emit("update",A.baseTexture))},enumerable:!1,configurable:!0}),E.prototype.updateColorMap=function(){var g=this._colorMap;g&&g.baseTexture&&(g._updateID++,g.baseTexture.emit("update",g.baseTexture),this.colorMap=g)},E.prototype.destroy=function(g){g===void 0&&(g=!1),this._colorMap&&this._colorMap.destroy(g),B.prototype.destroy.call(this)},E}(o.Filter),K=function(B){function E(g,A){g===void 0&&(g=0),A===void 0&&(A=1);var H=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 color;
uniform float alpha;

void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    gl_FragColor = vec4(mix(currentColor.rgb, color.rgb, currentColor.a * alpha), currentColor.a);
}
`)||this;return H._color=0,H._alpha=1,H.uniforms.color=new Float32Array(3),H.color=g,H.alpha=A,H}return C(E,B),Object.defineProperty(E.prototype,"color",{get:function(){return this._color},set:function(g){var A=this.uniforms.color;typeof g=="number"?(f.hex2rgb(g,A),this._color=g):(A[0]=g[0],A[1]=g[1],A[2]=g[2],this._color=f.rgb2hex(A))},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"alpha",{get:function(){return this._alpha},set:function(g){this.uniforms.alpha=g,this._alpha=g},enumerable:!1,configurable:!0}),E}(o.Filter),G=function(B){function E(g,A,H){g===void 0&&(g=16711680),A===void 0&&(A=0),H===void 0&&(H=.4);var I=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec3 originalColor;
uniform vec3 newColor;
uniform float epsilon;
void main(void) {
    vec4 currentColor = texture2D(uSampler, vTextureCoord);
    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));
    float colorDistance = length(colorDiff);
    float doReplace = step(colorDistance, epsilon);
    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);
}
`)||this;return I._originalColor=16711680,I._newColor=0,I.uniforms.originalColor=new Float32Array(3),I.uniforms.newColor=new Float32Array(3),I.originalColor=g,I.newColor=A,I.epsilon=H,I}return C(E,B),Object.defineProperty(E.prototype,"originalColor",{get:function(){return this._originalColor},set:function(g){var A=this.uniforms.originalColor;typeof g=="number"?(f.hex2rgb(g,A),this._originalColor=g):(A[0]=g[0],A[1]=g[1],A[2]=g[2],this._originalColor=f.rgb2hex(A))},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"newColor",{get:function(){return this._newColor},set:function(g){var A=this.uniforms.newColor;typeof g=="number"?(f.hex2rgb(g,A),this._newColor=g):(A[0]=g[0],A[1]=g[1],A[2]=g[2],this._newColor=f.rgb2hex(A))},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(g){this.uniforms.epsilon=g},enumerable:!1,configurable:!0}),E}(o.Filter),rt=function(B){function E(g,A,H){A===void 0&&(A=200),H===void 0&&(H=200);var I=B.call(this,k,`precision mediump float;

varying mediump vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec2 texelSize;
uniform float matrix[9];

void main(void)
{
   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left
   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center
   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right

   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left
   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center
   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right

   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left
   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center
   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right

   gl_FragColor =
       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +
       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +
       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];

   gl_FragColor.a = c22.a;
}
`)||this;return I.uniforms.texelSize=new Float32Array(2),I.uniforms.matrix=new Float32Array(9),g!==void 0&&(I.matrix=g),I.width=A,I.height=H,I}return C(E,B),Object.defineProperty(E.prototype,"matrix",{get:function(){return this.uniforms.matrix},set:function(g){var A=this;g.forEach(function(H,I){A.uniforms.matrix[I]=H})},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"width",{get:function(){return 1/this.uniforms.texelSize[0]},set:function(g){this.uniforms.texelSize[0]=1/g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"height",{get:function(){return 1/this.uniforms.texelSize[1]},set:function(g){this.uniforms.texelSize[1]=1/g},enumerable:!1,configurable:!0}),E}(o.Filter),dt=function(B){function E(){return B.call(this,k,`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void)
{
    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);

    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);

    if (lum < 1.00)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.75)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.50)
    {
        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }

    if (lum < 0.3)
    {
        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)
        {
            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
        }
    }
}
`)||this}return C(E,B),E}(o.Filter),Bt=function(B){function E(g){var A=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec2 dimensions;

const float SQRT_2 = 1.414213;

const float light = 1.0;

uniform float curvature;
uniform float lineWidth;
uniform float lineContrast;
uniform bool verticalLine;
uniform float noise;
uniform float noiseSize;

uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;

uniform float seed;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 dir = vec2(vTextureCoord.xy * filterArea.xy / dimensions - vec2(0.5, 0.5));
    
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 rgb = gl_FragColor.rgb;

    if (noise > 0.0 && noiseSize > 0.0)
    {
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        rgb += _noise * noise;
    }

    if (lineWidth > 0.0)
    {
        float _c = curvature > 0. ? curvature : 1.;
        float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;
        vec2 uv = dir * k;

        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;
        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;
        rgb *= j;
        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);
        rgb *= 0.99 + ceil(segment) * 0.015;
    }

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    gl_FragColor.rgb = rgb;
}
`)||this;return A.time=0,A.seed=0,A.uniforms.dimensions=new Float32Array(2),Object.assign(A,E.defaults,g),A}return C(E,B),E.prototype.apply=function(g,A,H,I){var J=A.filterFrame,it=J.width,ht=J.height;this.uniforms.dimensions[0]=it,this.uniforms.dimensions[1]=ht,this.uniforms.seed=this.seed,this.uniforms.time=this.time,g.applyFilter(this,A,H,I)},Object.defineProperty(E.prototype,"curvature",{get:function(){return this.uniforms.curvature},set:function(g){this.uniforms.curvature=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"lineWidth",{get:function(){return this.uniforms.lineWidth},set:function(g){this.uniforms.lineWidth=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"lineContrast",{get:function(){return this.uniforms.lineContrast},set:function(g){this.uniforms.lineContrast=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"verticalLine",{get:function(){return this.uniforms.verticalLine},set:function(g){this.uniforms.verticalLine=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(g){this.uniforms.noise=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(g){this.uniforms.noiseSize=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(g){this.uniforms.vignetting=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(g){this.uniforms.vignettingAlpha=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(g){this.uniforms.vignettingBlur=g},enumerable:!1,configurable:!0}),E.defaults={curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},E}(o.Filter),Tt=function(B){function E(g,A){g===void 0&&(g=1),A===void 0&&(A=5);var H=B.call(this,k,`precision mediump float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform vec4 filterArea;
uniform sampler2D uSampler;

uniform float angle;
uniform float scale;

float pattern()
{
   float s = sin(angle), c = cos(angle);
   vec2 tex = vTextureCoord * filterArea.xy;
   vec2 point = vec2(
       c * tex.x - s * tex.y,
       s * tex.x + c * tex.y
   ) * scale;
   return (sin(point.x) * sin(point.y)) * 4.0;
}

void main()
{
   vec4 color = texture2D(uSampler, vTextureCoord);
   float average = (color.r + color.g + color.b) / 3.0;
   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);
}
`)||this;return H.scale=g,H.angle=A,H}return C(E,B),Object.defineProperty(E.prototype,"scale",{get:function(){return this.uniforms.scale},set:function(g){this.uniforms.scale=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(g){this.uniforms.angle=g},enumerable:!1,configurable:!0}),E}(o.Filter),ie=function(B){function E(g){var A=B.call(this)||this;A.angle=45,A._distance=5,A._resolution=u.Filter.defaultResolution;var H=g?b(b({},E.defaults),g):E.defaults,I=H.kernels,J=H.blur,it=H.quality,ht=H.pixelSize,_t=H.resolution;A._tintFilter=new o.Filter(k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float alpha;
uniform vec3 color;

uniform vec2 shift;
uniform vec4 inputSize;

void main(void){
    vec4 sample = texture2D(uSampler, vTextureCoord - shift * inputSize.zw);

    // Premultiply alpha
    sample.rgb = color.rgb * sample.a;

    // alpha user alpha
    sample *= alpha;

    gl_FragColor = sample;
}`),A._tintFilter.uniforms.color=new Float32Array(4),A._tintFilter.uniforms.shift=new l.Point,A._tintFilter.resolution=_t,A._blurFilter=I?new L(I):new L(J,it),A.pixelSize=ht,A.resolution=_t;var Et=H.shadowOnly,kt=H.rotation,ae=H.distance,Oe=H.alpha,Fe=H.color;return A.shadowOnly=Et,A.rotation=kt,A.distance=ae,A.alpha=Oe,A.color=Fe,A._updatePadding(),A}return C(E,B),E.prototype.apply=function(g,A,H,I){var J=g.getFilterTexture();this._tintFilter.apply(g,A,J,1),this._blurFilter.apply(g,J,H,I),this.shadowOnly!==!0&&g.applyFilter(this,A,H,0),g.returnFilterTexture(J)},E.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},E.prototype._updateShift=function(){this._tintFilter.uniforms.shift.set(this.distance*Math.cos(this.angle),this.distance*Math.sin(this.angle))},Object.defineProperty(E.prototype,"resolution",{get:function(){return this._resolution},set:function(g){this._resolution=g,this._tintFilter&&(this._tintFilter.resolution=g),this._blurFilter&&(this._blurFilter.resolution=g)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"distance",{get:function(){return this._distance},set:function(g){this._distance=g,this._updatePadding(),this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"rotation",{get:function(){return this.angle/l.DEG_TO_RAD},set:function(g){this.angle=g*l.DEG_TO_RAD,this._updateShift()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"alpha",{get:function(){return this._tintFilter.uniforms.alpha},set:function(g){this._tintFilter.uniforms.alpha=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"color",{get:function(){return f.rgb2hex(this._tintFilter.uniforms.color)},set:function(g){f.hex2rgb(g,this._tintFilter.uniforms.color)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"kernels",{get:function(){return this._blurFilter.kernels},set:function(g){this._blurFilter.kernels=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"blur",{get:function(){return this._blurFilter.blur},set:function(g){this._blurFilter.blur=g,this._updatePadding()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"quality",{get:function(){return this._blurFilter.quality},set:function(g){this._blurFilter.quality=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"pixelSize",{get:function(){return this._blurFilter.pixelSize},set:function(g){this._blurFilter.pixelSize=g},enumerable:!1,configurable:!0}),E.defaults={rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:u.Filter.defaultResolution},E}(o.Filter),Kt=function(B){function E(g){g===void 0&&(g=5);var A=B.call(this,k,`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float strength;
uniform vec4 filterArea;


void main(void)
{
	vec2 onePixel = vec2(1.0 / filterArea);

	vec4 color;

	color.rgb = vec3(0.5);

	color -= texture2D(uSampler, vTextureCoord - onePixel) * strength;
	color += texture2D(uSampler, vTextureCoord + onePixel) * strength;

	color.rgb = vec3((color.r + color.g + color.b) / 3.0);

	float alpha = texture2D(uSampler, vTextureCoord).a;

	gl_FragColor = vec4(color.rgb * alpha, alpha);
}
`)||this;return A.strength=g,A}return C(E,B),Object.defineProperty(E.prototype,"strength",{get:function(){return this.uniforms.strength},set:function(g){this.uniforms.strength=g},enumerable:!1,configurable:!0}),E}(o.Filter),Gt=function(B){function E(g){var A=B.call(this,k,`// precision highp float;

varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;
uniform float aspect;

uniform sampler2D displacementMap;
uniform float offset;
uniform float sinDir;
uniform float cosDir;
uniform int fillMode;

uniform float seed;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

const int TRANSPARENT = 0;
const int ORIGINAL = 1;
const int LOOP = 2;
const int CLAMP = 3;
const int MIRROR = 4;

void main(void)
{
    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;

    if (coord.x > 1.0 || coord.y > 1.0) {
        return;
    }

    float cx = coord.x - 0.5;
    float cy = (coord.y - 0.5) * aspect;
    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;

    // displacementMap: repeat
    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);

    // displacementMap: mirror
    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);

    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));

    float displacement = (dc.r - dc.g) * (offset / filterArea.x);

    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);

    if (fillMode == CLAMP) {
        coord = clamp(coord, filterClamp.xy, filterClamp.zw);
    } else {
        if( coord.x > filterClamp.z ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x -= filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x = filterClamp.z * 2.0 - coord.x;
            }
        } else if( coord.x < filterClamp.x ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.x += filterClamp.z;
            } else if (fillMode == MIRROR) {
                coord.x *= -filterClamp.z;
            }
        }

        if( coord.y > filterClamp.w ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y -= filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y = filterClamp.w * 2.0 - coord.y;
            }
        } else if( coord.y < filterClamp.y ) {
            if (fillMode == TRANSPARENT) {
                discard;
            } else if (fillMode == LOOP) {
                coord.y += filterClamp.w;
            } else if (fillMode == MIRROR) {
                coord.y *= -filterClamp.w;
            }
        }
    }

    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;
    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;
    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;
    gl_FragColor.a = texture2D(uSampler, coord).a;
}
`)||this;return A.offset=100,A.fillMode=E.TRANSPARENT,A.average=!1,A.seed=0,A.minSize=8,A.sampleSize=512,A._slices=0,A._offsets=new Float32Array(1),A._sizes=new Float32Array(1),A._direction=-1,A.uniforms.dimensions=new Float32Array(2),A._canvas=document.createElement("canvas"),A._canvas.width=4,A._canvas.height=A.sampleSize,A.texture=o.Texture.from(A._canvas,{scaleMode:d.SCALE_MODES.NEAREST}),Object.assign(A,E.defaults,g),A}return C(E,B),E.prototype.apply=function(g,A,H,I){var J=A.filterFrame,it=J.width,ht=J.height;this.uniforms.dimensions[0]=it,this.uniforms.dimensions[1]=ht,this.uniforms.aspect=ht/it,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,g.applyFilter(this,A,H,I)},E.prototype._randomizeSizes=function(){var g=this._sizes,A=this._slices-1,H=this.sampleSize,I=Math.min(this.minSize/H,.9/this._slices);if(this.average){for(var J=this._slices,it=1,ht=0;ht<A;ht++){var _t=it/(J-ht),Et=Math.max(_t*(1-.6*Math.random()),I);g[ht]=Et,it-=Et}g[A]=it}else{it=1;var kt=Math.sqrt(1/this._slices);for(ht=0;ht<A;ht++)Et=Math.max(kt*it*Math.random(),I),g[ht]=Et,it-=Et;g[A]=it}this.shuffle()},E.prototype.shuffle=function(){for(var g=this._sizes,A=this._slices-1;A>0;A--){var H=Math.random()*A>>0,I=g[A];g[A]=g[H],g[H]=I}},E.prototype._randomizeOffsets=function(){for(var g=0;g<this._slices;g++)this._offsets[g]=Math.random()*(Math.random()<.5?-1:1)},E.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},E.prototype.redraw=function(){var g,A=this.sampleSize,H=this.texture,I=this._canvas.getContext("2d");I.clearRect(0,0,8,A);for(var J=0,it=0;it<this._slices;it++){g=Math.floor(256*this._offsets[it]);var ht=this._sizes[it]*A,_t=g>0?g:0,Et=g<0?-g:0;I.fillStyle="rgba("+_t+", "+Et+", 0, 1)",I.fillRect(0,J>>0,A,ht+1>>0),J+=ht}H.baseTexture.update(),this.uniforms.displacementMap=H},Object.defineProperty(E.prototype,"sizes",{get:function(){return this._sizes},set:function(g){for(var A=Math.min(this._slices,g.length),H=0;H<A;H++)this._sizes[H]=g[H]},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"offsets",{get:function(){return this._offsets},set:function(g){for(var A=Math.min(this._slices,g.length),H=0;H<A;H++)this._offsets[H]=g[H]},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"slices",{get:function(){return this._slices},set:function(g){this._slices!==g&&(this._slices=g,this.uniforms.slices=g,this._sizes=this.uniforms.slicesWidth=new Float32Array(g),this._offsets=this.uniforms.slicesOffset=new Float32Array(g),this.refresh())},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"direction",{get:function(){return this._direction},set:function(g){if(this._direction!==g){this._direction=g;var A=g*l.DEG_TO_RAD;this.uniforms.sinDir=Math.sin(A),this.uniforms.cosDir=Math.cos(A)}},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"red",{get:function(){return this.uniforms.red},set:function(g){this.uniforms.red=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"green",{get:function(){return this.uniforms.green},set:function(g){this.uniforms.green=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(g){this.uniforms.blue=g},enumerable:!1,configurable:!0}),E.prototype.destroy=function(){var g;(g=this.texture)===null||g===void 0||g.destroy(!0),this.texture=this._canvas=this.red=this.green=this.blue=this._sizes=this._offsets=null},E.defaults={slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},E.TRANSPARENT=0,E.ORIGINAL=1,E.LOOP=2,E.CLAMP=3,E.MIRROR=4,E}(o.Filter),$t=function(B){function E(g){var A=this,H=Object.assign({},E.defaults,g),I=H.outerStrength,J=H.innerStrength,it=H.color,ht=H.knockout,_t=H.quality,Et=Math.round(H.distance);return(A=B.call(this,k,`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

uniform float outerStrength;
uniform float innerStrength;

uniform vec4 glowColor;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform bool knockout;

const float PI = 3.14159265358979323846264;

const float DIST = __DIST__;
const float ANGLE_STEP_SIZE = min(__ANGLE_STEP_SIZE__, PI * 2.0);
const float ANGLE_STEP_NUM = ceil(PI * 2.0 / ANGLE_STEP_SIZE);

const float MAX_TOTAL_ALPHA = ANGLE_STEP_NUM * DIST * (DIST + 1.0) / 2.0;

void main(void) {
    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);

    float totalAlpha = 0.0;

    vec2 direction;
    vec2 displaced;
    vec4 curColor;

    for (float angle = 0.0; angle < PI * 2.0; angle += ANGLE_STEP_SIZE) {
       direction = vec2(cos(angle), sin(angle)) * px;

       for (float curDistance = 0.0; curDistance < DIST; curDistance++) {
           displaced = clamp(vTextureCoord + direction * 
                   (curDistance + 1.0), filterClamp.xy, filterClamp.zw);

           curColor = texture2D(uSampler, displaced);

           totalAlpha += (DIST - curDistance) * curColor.a;
       }
    }
    
    curColor = texture2D(uSampler, vTextureCoord);

    float alphaRatio = (totalAlpha / MAX_TOTAL_ALPHA);

    float innerGlowAlpha = (1.0 - alphaRatio) * innerStrength * curColor.a;
    float innerGlowStrength = min(1.0, innerGlowAlpha);
    
    vec4 innerColor = mix(curColor, glowColor, innerGlowStrength);

    float outerGlowAlpha = alphaRatio * outerStrength * (1. - curColor.a);
    float outerGlowStrength = min(1.0 - innerColor.a, outerGlowAlpha);

    vec4 outerGlowColor = outerGlowStrength * glowColor.rgba;
    
    if (knockout) {
      float resultAlpha = outerGlowAlpha + innerGlowAlpha;
      gl_FragColor = vec4(glowColor.rgb * resultAlpha, resultAlpha);
    }
    else {
      gl_FragColor = innerColor + outerGlowColor;
    }
}
`.replace(/__ANGLE_STEP_SIZE__/gi,""+(1/_t/Et).toFixed(7)).replace(/__DIST__/gi,Et.toFixed(0)+".0"))||this).uniforms.glowColor=new Float32Array([0,0,0,1]),Object.assign(A,{color:it,outerStrength:I,innerStrength:J,padding:Et,knockout:ht}),A}return C(E,B),Object.defineProperty(E.prototype,"color",{get:function(){return f.rgb2hex(this.uniforms.glowColor)},set:function(g){f.hex2rgb(g,this.uniforms.glowColor)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"outerStrength",{get:function(){return this.uniforms.outerStrength},set:function(g){this.uniforms.outerStrength=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"innerStrength",{get:function(){return this.uniforms.innerStrength},set:function(g){this.uniforms.innerStrength=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"knockout",{get:function(){return this.uniforms.knockout},set:function(g){this.uniforms.knockout=g},enumerable:!1,configurable:!0}),E.defaults={distance:10,outerStrength:4,innerStrength:0,color:16777215,quality:.1,knockout:!1},E}(o.Filter),Ht=function(B){function E(g){var A=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform vec2 light;
uniform bool parallel;
uniform float aspect;

uniform float gain;
uniform float lacunarity;
uniform float time;
uniform float alpha;

\${perlin}

void main(void) {
    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    float d;

    if (parallel) {
        float _cos = light.x;
        float _sin = light.y;
        d = (_cos * coord.x) + (_sin * coord.y * aspect);
    } else {
        float dx = coord.x - light.x / dimensions.x;
        float dy = (coord.y - light.y / dimensions.y) * aspect;
        float dis = sqrt(dx * dx + dy * dy) + 0.00001;
        d = dy / dis;
    }

    vec3 dir = vec3(d, d, 0.0);

    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);
    noise = mix(noise, 0.0, 0.3);
    //fade vertically.
    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);
    mist.a = 1.0;
    // apply user alpha
    mist *= alpha;

    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;

}
`.replace("${perlin}",`vec3 mod289(vec3 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 mod289(vec4 x)
{
    return x - floor(x * (1.0 / 289.0)) * 289.0;
}
vec4 permute(vec4 x)
{
    return mod289(((x * 34.0) + 1.0) * x);
}
vec4 taylorInvSqrt(vec4 r)
{
    return 1.79284291400159 - 0.85373472095314 * r;
}
vec3 fade(vec3 t)
{
    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);
}
// Classic Perlin noise, periodic variant
float pnoise(vec3 P, vec3 rep)
{
    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period
    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period
    Pi0 = mod289(Pi0);
    Pi1 = mod289(Pi1);
    vec3 Pf0 = fract(P); // Fractional part for interpolation
    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0
    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);
    vec4 iy = vec4(Pi0.yy, Pi1.yy);
    vec4 iz0 = Pi0.zzzz;
    vec4 iz1 = Pi1.zzzz;
    vec4 ixy = permute(permute(ix) + iy);
    vec4 ixy0 = permute(ixy + iz0);
    vec4 ixy1 = permute(ixy + iz1);
    vec4 gx0 = ixy0 * (1.0 / 7.0);
    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;
    gx0 = fract(gx0);
    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);
    vec4 sz0 = step(gz0, vec4(0.0));
    gx0 -= sz0 * (step(0.0, gx0) - 0.5);
    gy0 -= sz0 * (step(0.0, gy0) - 0.5);
    vec4 gx1 = ixy1 * (1.0 / 7.0);
    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;
    gx1 = fract(gx1);
    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);
    vec4 sz1 = step(gz1, vec4(0.0));
    gx1 -= sz1 * (step(0.0, gx1) - 0.5);
    gy1 -= sz1 * (step(0.0, gy1) - 0.5);
    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);
    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);
    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);
    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);
    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);
    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);
    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);
    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);
    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));
    g000 *= norm0.x;
    g010 *= norm0.y;
    g100 *= norm0.z;
    g110 *= norm0.w;
    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));
    g001 *= norm1.x;
    g011 *= norm1.y;
    g101 *= norm1.z;
    g111 *= norm1.w;
    float n000 = dot(g000, Pf0);
    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));
    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));
    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));
    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));
    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));
    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));
    float n111 = dot(g111, Pf1);
    vec3 fade_xyz = fade(Pf0);
    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);
    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);
    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);
    return 2.2 * n_xyz;
}
float turb(vec3 P, vec3 rep, float lacunarity, float gain)
{
    float sum = 0.0;
    float sc = 1.0;
    float totalgain = 1.0;
    for (float i = 0.0; i < 6.0; i++)
    {
        sum += totalgain * pnoise(P * sc, rep);
        sc *= lacunarity;
        totalgain *= gain;
    }
    return abs(sum);
}
`))||this;A.parallel=!0,A.time=0,A._angle=0,A.uniforms.dimensions=new Float32Array(2);var H=Object.assign(E.defaults,g);return A._angleLight=new l.Point,A.angle=H.angle,A.gain=H.gain,A.lacunarity=H.lacunarity,A.alpha=H.alpha,A.parallel=H.parallel,A.center=H.center,A.time=H.time,A}return C(E,B),E.prototype.apply=function(g,A,H,I){var J=A.filterFrame,it=J.width,ht=J.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=it,this.uniforms.dimensions[1]=ht,this.uniforms.aspect=ht/it,this.uniforms.time=this.time,this.uniforms.alpha=this.alpha,g.applyFilter(this,A,H,I)},Object.defineProperty(E.prototype,"angle",{get:function(){return this._angle},set:function(g){this._angle=g;var A=g*l.DEG_TO_RAD;this._angleLight.x=Math.cos(A),this._angleLight.y=Math.sin(A)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"gain",{get:function(){return this.uniforms.gain},set:function(g){this.uniforms.gain=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"lacunarity",{get:function(){return this.uniforms.lacunarity},set:function(g){this.uniforms.lacunarity=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(g){this.uniforms.alpha=g},enumerable:!1,configurable:!0}),E.defaults={angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0],alpha:1},E}(o.Filter),re=function(B){function E(g,A,H){g===void 0&&(g=[0,0]),A===void 0&&(A=5),H===void 0&&(H=0);var I=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uVelocity;
uniform int uKernelSize;
uniform float uOffset;

const int MAX_KERNEL_SIZE = 2048;

// Notice:
// the perfect way:
//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);
// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.
// So use uKernelSize directly.

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    vec2 velocity = uVelocity / filterArea.xy;
    float offset = -uOffset / length(uVelocity) - 0.5;
    int k = uKernelSize - 1;

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }
        vec2 bias = velocity * (float(i) / float(k) + offset);
        color += texture2D(uSampler, vTextureCoord + bias);
    }
    gl_FragColor = color / float(uKernelSize);
}
`)||this;return I.kernelSize=5,I.uniforms.uVelocity=new Float32Array(2),I._velocity=new l.ObservablePoint(I.velocityChanged,I),I.setVelocity(g),I.kernelSize=A,I.offset=H,I}return C(E,B),E.prototype.apply=function(g,A,H,I){var J=this.velocity,it=J.x,ht=J.y;this.uniforms.uKernelSize=it!==0||ht!==0?this.kernelSize:0,g.applyFilter(this,A,H,I)},Object.defineProperty(E.prototype,"velocity",{get:function(){return this._velocity},set:function(g){this.setVelocity(g)},enumerable:!1,configurable:!0}),E.prototype.setVelocity=function(g){if(Array.isArray(g)){var A=g[0],H=g[1];this._velocity.set(A,H)}else this._velocity.copyFrom(g)},E.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y,this.padding=1+(Math.max(Math.abs(this._velocity.x),Math.abs(this._velocity.y))>>0)},Object.defineProperty(E.prototype,"offset",{get:function(){return this.uniforms.uOffset},set:function(g){this.uniforms.uOffset=g},enumerable:!1,configurable:!0}),E}(o.Filter),Ne=function(B){function E(g,A,H){A===void 0&&(A=.05),H===void 0&&(H=g.length);var I=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform float epsilon;

const int MAX_COLORS = %maxColors%;

uniform vec3 originalColors[MAX_COLORS];
uniform vec3 targetColors[MAX_COLORS];

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);

    float alpha = gl_FragColor.a;
    if (alpha < 0.0001)
    {
      return;
    }

    vec3 color = gl_FragColor.rgb / alpha;

    for(int i = 0; i < MAX_COLORS; i++)
    {
      vec3 origColor = originalColors[i];
      if (origColor.r < 0.0)
      {
        break;
      }
      vec3 colorDiff = origColor - color;
      if (length(colorDiff) < epsilon)
      {
        vec3 targetColor = targetColors[i];
        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);
        return;
      }
    }
}
`.replace(/%maxColors%/g,H.toFixed(0)))||this;return I._replacements=[],I._maxColors=0,I.epsilon=A,I._maxColors=H,I.uniforms.originalColors=new Float32Array(3*H),I.uniforms.targetColors=new Float32Array(3*H),I.replacements=g,I}return C(E,B),Object.defineProperty(E.prototype,"replacements",{get:function(){return this._replacements},set:function(g){var A=this.uniforms.originalColors,H=this.uniforms.targetColors,I=g.length;if(I>this._maxColors)throw new Error("Length of replacements ("+I+") exceeds the maximum colors length ("+this._maxColors+")");A[3*I]=-1;for(var J=0;J<I;J++){var it=g[J],ht=it[0];typeof ht=="number"?ht=f.hex2rgb(ht):it[0]=f.rgb2hex(ht),A[3*J]=ht[0],A[3*J+1]=ht[1],A[3*J+2]=ht[2];var _t=it[1];typeof _t=="number"?_t=f.hex2rgb(_t):it[1]=f.rgb2hex(_t),H[3*J]=_t[0],H[3*J+1]=_t[1],H[3*J+2]=_t[2]}this._replacements=g},enumerable:!1,configurable:!0}),E.prototype.refresh=function(){this.replacements=this._replacements},Object.defineProperty(E.prototype,"maxColors",{get:function(){return this._maxColors},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"epsilon",{get:function(){return this.uniforms.epsilon},set:function(g){this.uniforms.epsilon=g},enumerable:!1,configurable:!0}),E}(o.Filter),se=function(B){function E(g,A){A===void 0&&(A=0);var H=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 dimensions;

uniform float sepia;
uniform float noise;
uniform float noiseSize;
uniform float scratch;
uniform float scratchDensity;
uniform float scratchWidth;
uniform float vignetting;
uniform float vignettingAlpha;
uniform float vignettingBlur;
uniform float seed;

const float SQRT_2 = 1.414213;
const vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

vec3 Overlay(vec3 src, vec3 dst)
{
    // if (dst <= 0.5) then: 2 * src * dst
    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)
    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),
                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),
                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));
}


void main()
{
    gl_FragColor = texture2D(uSampler, vTextureCoord);
    vec3 color = gl_FragColor.rgb;

    if (sepia > 0.0)
    {
        float gray = (color.x + color.y + color.z) / 3.0;
        vec3 grayscale = vec3(gray);

        color = Overlay(SEPIA_RGB, grayscale);

        color = grayscale + sepia * (color - grayscale);
    }

    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;

    if (vignetting > 0.0)
    {
        float outter = SQRT_2 - vignetting * SQRT_2;
        vec2 dir = vec2(vec2(0.5, 0.5) - coord);
        dir.y *= dimensions.y / dimensions.x;
        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);
        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);
    }

    if (scratchDensity > seed && scratch != 0.0)
    {
        float phase = seed * 256.0;
        float s = mod(floor(phase), 2.0);
        float dist = 1.0 / scratchDensity;
        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));
        if (d < seed * 0.6 + 0.4)
        {
            highp float period = scratchDensity * 10.0;

            float xx = coord.x * period + phase;
            float aa = abs(mod(xx, 0.5) * 4.0);
            float bb = mod(floor(xx / 0.5), 2.0);
            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);

            float kk = 2.0 * period;
            float dw = scratchWidth / dimensions.x * (0.75 + seed);
            float dh = dw * kk;

            float tine = (yy - (2.0 - dh));

            if (tine > 0.0) {
                float _sign = sign(scratch);

                tine = s * tine / period + scratch + 0.1;
                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);

                color.rgb *= tine;
            }
        }
    }

    if (noise > 0.0 && noiseSize > 0.0)
    {
        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
        pixelCoord.x = floor(pixelCoord.x / noiseSize);
        pixelCoord.y = floor(pixelCoord.y / noiseSize);
        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);
        // float _noise = snoise(d) * 0.5;
        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;
        color += _noise * noise;
    }

    gl_FragColor.rgb = color;
}
`)||this;return H.seed=0,H.uniforms.dimensions=new Float32Array(2),typeof g=="number"?(H.seed=g,g=void 0):H.seed=A,Object.assign(H,E.defaults,g),H}return C(E,B),E.prototype.apply=function(g,A,H,I){var J,it;this.uniforms.dimensions[0]=(J=A.filterFrame)===null||J===void 0?void 0:J.width,this.uniforms.dimensions[1]=(it=A.filterFrame)===null||it===void 0?void 0:it.height,this.uniforms.seed=this.seed,g.applyFilter(this,A,H,I)},Object.defineProperty(E.prototype,"sepia",{get:function(){return this.uniforms.sepia},set:function(g){this.uniforms.sepia=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"noise",{get:function(){return this.uniforms.noise},set:function(g){this.uniforms.noise=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"noiseSize",{get:function(){return this.uniforms.noiseSize},set:function(g){this.uniforms.noiseSize=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"scratch",{get:function(){return this.uniforms.scratch},set:function(g){this.uniforms.scratch=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"scratchDensity",{get:function(){return this.uniforms.scratchDensity},set:function(g){this.uniforms.scratchDensity=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"scratchWidth",{get:function(){return this.uniforms.scratchWidth},set:function(g){this.uniforms.scratchWidth=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"vignetting",{get:function(){return this.uniforms.vignetting},set:function(g){this.uniforms.vignetting=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"vignettingAlpha",{get:function(){return this.uniforms.vignettingAlpha},set:function(g){this.uniforms.vignettingAlpha=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"vignettingBlur",{get:function(){return this.uniforms.vignettingBlur},set:function(g){this.uniforms.vignettingBlur=g},enumerable:!1,configurable:!0}),E.defaults={sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},E}(o.Filter),pe=function(B){function E(g,A,H){g===void 0&&(g=1),A===void 0&&(A=0),H===void 0&&(H=.1);var I=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec2 thickness;
uniform vec4 outlineColor;
uniform vec4 filterClamp;

const float DOUBLE_PI = 3.14159265358979323846264 * 2.;

void main(void) {
    vec4 ownColor = texture2D(uSampler, vTextureCoord);
    vec4 curColor;
    float maxAlpha = 0.;
    vec2 displaced;
    for (float angle = 0.; angle <= DOUBLE_PI; angle += \${angleStep}) {
        displaced.x = vTextureCoord.x + thickness.x * cos(angle);
        displaced.y = vTextureCoord.y + thickness.y * sin(angle);
        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));
        maxAlpha = max(maxAlpha, curColor.a);
    }
    float resultAlpha = max(maxAlpha, ownColor.a);
    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);
}
`.replace(/\$\{angleStep\}/,E.getAngleStep(H)))||this;return I._thickness=1,I.uniforms.thickness=new Float32Array([0,0]),I.uniforms.outlineColor=new Float32Array([0,0,0,1]),Object.assign(I,{thickness:g,color:A,quality:H}),I}return C(E,B),E.getAngleStep=function(g){var A=Math.max(g*E.MAX_SAMPLES,E.MIN_SAMPLES);return(2*Math.PI/A).toFixed(7)},E.prototype.apply=function(g,A,H,I){this.uniforms.thickness[0]=this._thickness/A._frame.width,this.uniforms.thickness[1]=this._thickness/A._frame.height,g.applyFilter(this,A,H,I)},Object.defineProperty(E.prototype,"color",{get:function(){return f.rgb2hex(this.uniforms.outlineColor)},set:function(g){f.hex2rgb(g,this.uniforms.outlineColor)},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"thickness",{get:function(){return this._thickness},set:function(g){this._thickness=g,this.padding=g},enumerable:!1,configurable:!0}),E.MIN_SAMPLES=1,E.MAX_SAMPLES=100,E}(o.Filter),ue=function(B){function E(g){g===void 0&&(g=10);var A=B.call(this,k,`precision mediump float;

varying vec2 vTextureCoord;

uniform vec2 size;
uniform sampler2D uSampler;

uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 pixelate(vec2 coord, vec2 size)
{
	return floor( coord / size ) * size;
}

void main(void)
{
    vec2 coord = mapCoord(vTextureCoord);

    coord = pixelate(coord, size);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord);
}
`)||this;return A.size=g,A}return C(E,B),Object.defineProperty(E.prototype,"size",{get:function(){return this.uniforms.size},set:function(g){typeof g=="number"&&(g=[g,g]),this.uniforms.size=g},enumerable:!1,configurable:!0}),E}(o.Filter),fe=function(B){function E(g,A,H,I){g===void 0&&(g=0),A===void 0&&(A=[0,0]),H===void 0&&(H=5),I===void 0&&(I=-1);var J=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform float uRadian;
uniform vec2 uCenter;
uniform float uRadius;
uniform int uKernelSize;

const int MAX_KERNEL_SIZE = 2048;

void main(void)
{
    vec4 color = texture2D(uSampler, vTextureCoord);

    if (uKernelSize == 0)
    {
        gl_FragColor = color;
        return;
    }

    float aspect = filterArea.y / filterArea.x;
    vec2 center = uCenter.xy / filterArea.xy;
    float gradient = uRadius / filterArea.x * 0.3;
    float radius = uRadius / filterArea.x - gradient * 0.5;
    int k = uKernelSize - 1;

    vec2 coord = vTextureCoord;
    vec2 dir = vec2(center - coord);
    float dist = length(vec2(dir.x, dir.y * aspect));

    float radianStep = uRadian;
    if (radius >= 0.0 && dist > radius) {
        float delta = dist - radius;
        float gap = gradient;
        float scale = 1.0 - abs(delta / gap);
        if (scale <= 0.0) {
            gl_FragColor = color;
            return;
        }
        radianStep *= scale;
    }
    radianStep /= float(k);

    float s = sin(radianStep);
    float c = cos(radianStep);
    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));

    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {
        if (i == k) {
            break;
        }

        coord -= center;
        coord.y *= aspect;
        coord = rotationMatrix * coord;
        coord.y /= aspect;
        coord += center;

        vec4 sample = texture2D(uSampler, coord);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample;
    }

    gl_FragColor = color / float(uKernelSize);
}
`)||this;return J._angle=0,J.angle=g,J.center=A,J.kernelSize=H,J.radius=I,J}return C(E,B),E.prototype.apply=function(g,A,H,I){this.uniforms.uKernelSize=this._angle!==0?this.kernelSize:0,g.applyFilter(this,A,H,I)},Object.defineProperty(E.prototype,"angle",{get:function(){return this._angle},set:function(g){this._angle=g,this.uniforms.uRadian=g*Math.PI/180},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(g){this.uniforms.uCenter=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(g){(g<0||g===1/0)&&(g=-1),this.uniforms.uRadius=g},enumerable:!1,configurable:!0}),E}(o.Filter),Ue=function(B){function E(g){var A=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;

uniform vec4 filterArea;
uniform vec4 filterClamp;
uniform vec2 dimensions;

uniform bool mirror;
uniform float boundary;
uniform vec2 amplitude;
uniform vec2 waveLength;
uniform vec2 alpha;
uniform float time;

float rand(vec2 co) {
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main(void)
{
    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;
    vec2 coord = pixelCoord / dimensions;

    if (coord.y < boundary) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    float k = (coord.y - boundary) / (1. - boundary + 0.0001);
    float areaY = boundary * dimensions.y / filterArea.y;
    float v = areaY + areaY - vTextureCoord.y;
    float y = mirror ? v : vTextureCoord.y;

    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;
    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;
    float _alpha = (alpha.y - alpha.x) * k + alpha.x;

    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;
    x = clamp(x, filterClamp.x, filterClamp.z);

    vec4 color = texture2D(uSampler, vec2(x, y));

    gl_FragColor = color * _alpha;
}
`)||this;return A.time=0,A.uniforms.amplitude=new Float32Array(2),A.uniforms.waveLength=new Float32Array(2),A.uniforms.alpha=new Float32Array(2),A.uniforms.dimensions=new Float32Array(2),Object.assign(A,E.defaults,g),A}return C(E,B),E.prototype.apply=function(g,A,H,I){var J,it;this.uniforms.dimensions[0]=(J=A.filterFrame)===null||J===void 0?void 0:J.width,this.uniforms.dimensions[1]=(it=A.filterFrame)===null||it===void 0?void 0:it.height,this.uniforms.time=this.time,g.applyFilter(this,A,H,I)},Object.defineProperty(E.prototype,"mirror",{get:function(){return this.uniforms.mirror},set:function(g){this.uniforms.mirror=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"boundary",{get:function(){return this.uniforms.boundary},set:function(g){this.uniforms.boundary=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(g){this.uniforms.amplitude[0]=g[0],this.uniforms.amplitude[1]=g[1]},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"waveLength",{get:function(){return this.uniforms.waveLength},set:function(g){this.uniforms.waveLength[0]=g[0],this.uniforms.waveLength[1]=g[1]},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"alpha",{get:function(){return this.uniforms.alpha},set:function(g){this.uniforms.alpha[0]=g[0],this.uniforms.alpha[1]=g[1]},enumerable:!1,configurable:!0}),E.defaults={mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},E}(o.Filter),ye=function(B){function E(g,A,H){g===void 0&&(g=[-10,0]),A===void 0&&(A=[0,10]),H===void 0&&(H=[0,0]);var I=B.call(this,k,`precision mediump float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec2 red;
uniform vec2 green;
uniform vec2 blue;

void main(void)
{
   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;
   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;
   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;
   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;
}
`)||this;return I.red=g,I.green=A,I.blue=H,I}return C(E,B),Object.defineProperty(E.prototype,"red",{get:function(){return this.uniforms.red},set:function(g){this.uniforms.red=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"green",{get:function(){return this.uniforms.green},set:function(g){this.uniforms.green=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"blue",{get:function(){return this.uniforms.blue},set:function(g){this.uniforms.blue=g},enumerable:!1,configurable:!0}),E}(o.Filter),_e=function(B){function E(g,A,H){g===void 0&&(g=[0,0]),H===void 0&&(H=0);var I=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;
uniform vec4 filterClamp;

uniform vec2 center;

uniform float amplitude;
uniform float wavelength;
// uniform float power;
uniform float brightness;
uniform float speed;
uniform float radius;

uniform float time;

const float PI = 3.14159;

void main()
{
    float halfWavelength = wavelength * 0.5 / filterArea.x;
    float maxRadius = radius / filterArea.x;
    float currentRadius = time * speed / filterArea.x;

    float fade = 1.0;

    if (maxRadius > 0.0) {
        if (currentRadius > maxRadius) {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);
    }

    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);
    dir.y *= filterArea.y / filterArea.x;
    float dist = length(dir);

    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {
        gl_FragColor = texture2D(uSampler, vTextureCoord);
        return;
    }

    vec2 diffUV = normalize(dir);

    float diff = (dist - currentRadius) / halfWavelength;

    float p = 1.0 - pow(abs(diff), 2.0);

    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );
    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );

    vec2 offset = diffUV * powDiff / filterArea.xy;

    // Do clamp :
    vec2 coord = vTextureCoord + offset;
    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);
    vec4 color = texture2D(uSampler, clampedCoord);
    if (coord != clampedCoord) {
        color *= max(0.0, 1.0 - length(coord - clampedCoord));
    }

    // No clamp :
    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);

    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;

    gl_FragColor = color;
}
`)||this;return I.center=g,Object.assign(I,E.defaults,A),I.time=H,I}return C(E,B),E.prototype.apply=function(g,A,H,I){this.uniforms.time=this.time,g.applyFilter(this,A,H,I)},Object.defineProperty(E.prototype,"center",{get:function(){return this.uniforms.center},set:function(g){this.uniforms.center=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"amplitude",{get:function(){return this.uniforms.amplitude},set:function(g){this.uniforms.amplitude=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"wavelength",{get:function(){return this.uniforms.wavelength},set:function(g){this.uniforms.wavelength=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"brightness",{get:function(){return this.uniforms.brightness},set:function(g){this.uniforms.brightness=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"speed",{get:function(){return this.uniforms.speed},set:function(g){this.uniforms.speed=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(g){this.uniforms.radius=g},enumerable:!1,configurable:!0}),E.defaults={amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},E}(o.Filter),Qt=function(B){function E(g,A,H){A===void 0&&(A=0),H===void 0&&(H=1);var I=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform sampler2D uLightmap;
uniform vec4 filterArea;
uniform vec2 dimensions;
uniform vec4 ambientColor;
void main() {
    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);
    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;
    vec4 light = texture2D(uLightmap, lightCoord);
    vec3 ambient = ambientColor.rgb * ambientColor.a;
    vec3 intensity = ambient + light.rgb;
    vec3 finalColor = diffuseColor.rgb * intensity;
    gl_FragColor = vec4(finalColor, diffuseColor.a);
}
`)||this;return I._color=0,I.uniforms.dimensions=new Float32Array(2),I.uniforms.ambientColor=new Float32Array([0,0,0,H]),I.texture=g,I.color=A,I}return C(E,B),E.prototype.apply=function(g,A,H,I){var J,it;this.uniforms.dimensions[0]=(J=A.filterFrame)===null||J===void 0?void 0:J.width,this.uniforms.dimensions[1]=(it=A.filterFrame)===null||it===void 0?void 0:it.height,g.applyFilter(this,A,H,I)},Object.defineProperty(E.prototype,"texture",{get:function(){return this.uniforms.uLightmap},set:function(g){this.uniforms.uLightmap=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"color",{get:function(){return this._color},set:function(g){var A=this.uniforms.ambientColor;typeof g=="number"?(f.hex2rgb(g,A),this._color=g):(A[0]=g[0],A[1]=g[1],A[2]=g[2],A[3]=g[3],this._color=f.rgb2hex(A))},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"alpha",{get:function(){return this.uniforms.ambientColor[3]},set:function(g){this.uniforms.ambientColor[3]=g},enumerable:!1,configurable:!0}),E}(o.Filter),Pe=function(B){function E(g,A,H,I){g===void 0&&(g=100),A===void 0&&(A=600);var J=B.call(this,k,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float blur;
uniform float gradientBlur;
uniform vec2 start;
uniform vec2 end;
uniform vec2 delta;
uniform vec2 texSize;

float random(vec3 scale, float seed)
{
    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);
}

void main(void)
{
    vec4 color = vec4(0.0);
    float total = 0.0;

    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);
    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));
    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;

    for (float t = -30.0; t <= 30.0; t++)
    {
        float percent = (t + offset - 0.5) / 30.0;
        float weight = 1.0 - abs(percent);
        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);
        sample.rgb *= sample.a;
        color += sample * weight;
        total += weight;
    }

    color /= total;
    color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`)||this;return J.uniforms.blur=g,J.uniforms.gradientBlur=A,J.uniforms.start=H||new l.Point(0,window.innerHeight/2),J.uniforms.end=I||new l.Point(600,window.innerHeight/2),J.uniforms.delta=new l.Point(30,30),J.uniforms.texSize=new l.Point(window.innerWidth,window.innerHeight),J.updateDelta(),J}return C(E,B),E.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},Object.defineProperty(E.prototype,"blur",{get:function(){return this.uniforms.blur},set:function(g){this.uniforms.blur=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"gradientBlur",{get:function(){return this.uniforms.gradientBlur},set:function(g){this.uniforms.gradientBlur=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"start",{get:function(){return this.uniforms.start},set:function(g){this.uniforms.start=g,this.updateDelta()},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"end",{get:function(){return this.uniforms.end},set:function(g){this.uniforms.end=g,this.updateDelta()},enumerable:!1,configurable:!0}),E}(o.Filter),nt=function(B){function E(){return B!==null&&B.apply(this,arguments)||this}return C(E,B),E.prototype.updateDelta=function(){var g=this.uniforms.end.x-this.uniforms.start.x,A=this.uniforms.end.y-this.uniforms.start.y,H=Math.sqrt(g*g+A*A);this.uniforms.delta.x=g/H,this.uniforms.delta.y=A/H},E}(Pe),et=function(B){function E(){return B!==null&&B.apply(this,arguments)||this}return C(E,B),E.prototype.updateDelta=function(){var g=this.uniforms.end.x-this.uniforms.start.x,A=this.uniforms.end.y-this.uniforms.start.y,H=Math.sqrt(g*g+A*A);this.uniforms.delta.x=-A/H,this.uniforms.delta.y=g/H},E}(Pe),ct=function(B){function E(g,A,H,I){g===void 0&&(g=100),A===void 0&&(A=600);var J=B.call(this)||this;return J.tiltShiftXFilter=new nt(g,A,H,I),J.tiltShiftYFilter=new et(g,A,H,I),J}return C(E,B),E.prototype.apply=function(g,A,H,I){var J=g.getFilterTexture();this.tiltShiftXFilter.apply(g,A,J,1),this.tiltShiftYFilter.apply(g,J,H,I),g.returnFilterTexture(J)},Object.defineProperty(E.prototype,"blur",{get:function(){return this.tiltShiftXFilter.blur},set:function(g){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"gradientBlur",{get:function(){return this.tiltShiftXFilter.gradientBlur},set:function(g){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"start",{get:function(){return this.tiltShiftXFilter.start},set:function(g){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"end",{get:function(){return this.tiltShiftXFilter.end},set:function(g){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=g},enumerable:!1,configurable:!0}),E}(o.Filter),O=function(B){function E(g){var A=B.call(this,k,`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float radius;
uniform float angle;
uniform vec2 offset;
uniform vec4 filterArea;

vec2 mapCoord( vec2 coord )
{
    coord *= filterArea.xy;
    coord += filterArea.zw;

    return coord;
}

vec2 unmapCoord( vec2 coord )
{
    coord -= filterArea.zw;
    coord /= filterArea.xy;

    return coord;
}

vec2 twist(vec2 coord)
{
    coord -= offset;

    float dist = length(coord);

    if (dist < radius)
    {
        float ratioDist = (radius - dist) / radius;
        float angleMod = ratioDist * ratioDist * angle;
        float s = sin(angleMod);
        float c = cos(angleMod);
        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);
    }

    coord += offset;

    return coord;
}

void main(void)
{

    vec2 coord = mapCoord(vTextureCoord);

    coord = twist(coord);

    coord = unmapCoord(coord);

    gl_FragColor = texture2D(uSampler, coord );

}
`)||this;return Object.assign(A,E.defaults,g),A}return C(E,B),Object.defineProperty(E.prototype,"offset",{get:function(){return this.uniforms.offset},set:function(g){this.uniforms.offset=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"radius",{get:function(){return this.uniforms.radius},set:function(g){this.uniforms.radius=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"angle",{get:function(){return this.uniforms.angle},set:function(g){this.uniforms.angle=g},enumerable:!1,configurable:!0}),E.defaults={radius:200,angle:4,padding:20,offset:new l.Point},E}(o.Filter),q=function(B){function E(g){var A,H=Object.assign(E.defaults,g),I=H.maxKernelSize,J=function(it,ht){var _t={};for(var Et in it)Object.prototype.hasOwnProperty.call(it,Et)&&ht.indexOf(Et)<0&&(_t[Et]=it[Et]);if(it!=null&&typeof Object.getOwnPropertySymbols=="function"){var kt=0;for(Et=Object.getOwnPropertySymbols(it);kt<Et.length;kt++)ht.indexOf(Et[kt])<0&&Object.prototype.propertyIsEnumerable.call(it,Et[kt])&&(_t[Et[kt]]=it[Et[kt]])}return _t}(H,["maxKernelSize"]);return A=B.call(this,k,`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform vec4 filterArea;

uniform vec2 uCenter;
uniform float uStrength;
uniform float uInnerRadius;
uniform float uRadius;

const float MAX_KERNEL_SIZE = \${maxKernelSize};

// author: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/
highp float rand(vec2 co, float seed) {
    const highp float a = 12.9898, b = 78.233, c = 43758.5453;
    highp float dt = dot(co + seed, vec2(a, b)), sn = mod(dt, 3.14159);
    return fract(sin(sn) * c + seed);
}

void main() {

    float minGradient = uInnerRadius * 0.3;
    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;

    float gradient = uRadius * 0.3;
    float radius = (uRadius - gradient * 0.5) / filterArea.x;

    float countLimit = MAX_KERNEL_SIZE;

    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);
    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));

    float strength = uStrength;

    float delta = 0.0;
    float gap;
    if (dist < innerRadius) {
        delta = innerRadius - dist;
        gap = minGradient;
    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity
        delta = dist - radius;
        gap = gradient;
    }

    if (delta > 0.0) {
        float normalCount = gap / filterArea.x;
        delta = (normalCount - delta) / normalCount;
        countLimit *= delta;
        strength *= delta;
        if (countLimit < 1.0)
        {
            gl_FragColor = texture2D(uSampler, vTextureCoord);
            return;
        }
    }

    // randomize the lookup values to hide the fixed number of samples
    float offset = rand(vTextureCoord, 0.0);

    float total = 0.0;
    vec4 color = vec4(0.0);

    dir *= strength;

    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {
        float percent = (t + offset) / MAX_KERNEL_SIZE;
        float weight = 4.0 * (percent - percent * percent);
        vec2 p = vTextureCoord + dir * percent;
        vec4 sample = texture2D(uSampler, p);

        // switch to pre-multiplied alpha to correctly blur transparent images
        // sample.rgb *= sample.a;

        color += sample * weight;
        total += weight;

        if (t > countLimit){
            break;
        }
    }

    color /= total;
    // switch back from pre-multiplied alpha
    // color.rgb /= color.a + 0.00001;

    gl_FragColor = color;
}
`.replace("${maxKernelSize}",I.toFixed(1)))||this,Object.assign(A,J),A}return C(E,B),Object.defineProperty(E.prototype,"center",{get:function(){return this.uniforms.uCenter},set:function(g){this.uniforms.uCenter=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"strength",{get:function(){return this.uniforms.uStrength},set:function(g){this.uniforms.uStrength=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"innerRadius",{get:function(){return this.uniforms.uInnerRadius},set:function(g){this.uniforms.uInnerRadius=g},enumerable:!1,configurable:!0}),Object.defineProperty(E.prototype,"radius",{get:function(){return this.uniforms.uRadius},set:function(g){(g<0||g===1/0)&&(g=-1),this.uniforms.uRadius=g},enumerable:!1,configurable:!0}),E.defaults={strength:.1,center:[0,0],innerRadius:0,radius:-1,maxKernelSize:32},E}(o.Filter);return r.AdjustmentFilter=D,r.AdvancedBloomFilter=j,r.AsciiFilter=U,r.BevelFilter=N,r.BloomFilter=Y,r.BulgePinchFilter=Z,r.CRTFilter=Bt,r.ColorMapFilter=z,r.ColorOverlayFilter=K,r.ColorReplaceFilter=G,r.ConvolutionFilter=rt,r.CrossHatchFilter=dt,r.DotFilter=Tt,r.DropShadowFilter=ie,r.EmbossFilter=Kt,r.GlitchFilter=Gt,r.GlowFilter=$t,r.GodrayFilter=Ht,r.KawaseBlurFilter=L,r.MotionBlurFilter=re,r.MultiColorReplaceFilter=Ne,r.OldFilmFilter=se,r.OutlineFilter=pe,r.PixelateFilter=ue,r.RGBSplitFilter=ye,r.RadialBlurFilter=fe,r.ReflectionFilter=Ue,r.ShockwaveFilter=_e,r.SimpleLightmapFilter=Qt,r.TiltShiftAxisFilter=Pe,r.TiltShiftFilter=ct,r.TiltShiftXFilter=nt,r.TiltShiftYFilter=et,r.TwistFilter=O,r.ZoomBlurFilter=q,Object.defineProperty(r,"__esModule",{value:!0}),r}({},Le,Le,Le,Le.utils,Le,Le.filters,Le.filters);Object.assign(Le.filters,m0);var g0=class extends Le.Sprite{constructor({container:r,width:o,height:l,app:u,initMask:f,brush:d,mouseObserver:p}){let v=new Le.utils.CanvasRenderTarget(o,l),T=Le.Texture.from(v.canvas);super(T,u),this.container=r,this.context=v.context,this.context.willReadFrequently=!0,this.context.fillStyle="#FFFFFF",this.context.fillRect(0,0,o,l),this.context.fillStyle="#000000",this.mouseObserver=p,this.brush=d,this.prevPos=null,f&&this.drawInitMask(f),this.brush.src&&this.loadBrushImg(),this.events(),this.initMaskPixels=0}events(){this.mouseObserver.addEventListener("mousemove",this.onMove.bind(this)),this.mouseObserver.addEventListener("touchstart",this.onMove.bind(this)),this.mouseObserver.addEventListener("touchmove",this.onMove.bind(this)),this.mouseObserver.addEventListener("touchend",this.onLeave.bind(this)),this.mouseObserver.addEventListener("mouseleave",this.onLeave.bind(this))}loadBrushImg(){this.brushImg=new Image,this.brushImg.src=this.brush.src,this.brushImg.crossOrigin="Anonymous",this.brushImg.onload=()=>{this.brush.loaded=!0,this.brush.width=this.brush.size;let r=(this.brush.width*100/this.brushImg.width).toPrecision(2);this.brush.height=this.brushImg.height*r/100}}drawInitMask(r){this.maskImg=new Image,this.maskImg.src=r,this.maskImg.crossOrigin="Anonymous",this.maskImg.onload=()=>{this.context.drawImage(this.maskImg,0,0),this.initMaskPixels=this.getInitialMaskPixels()}}drawBrushImg(r,o){let l=r-this.brush.width/2,u=o-this.brush.height/2;this.context.drawImage(this.brushImg,l,u,this.brush.width,this.brush.height)}drawBrush(r,o){this.context.beginPath(),this.context.arc(r,o,this.brush.size,0,2*Math.PI,!1),this.context.fill(),this.prevPos&&(this.context.beginPath(),this.context.fillStyle="#000000",this.context.lineWidth=this.brush.size*2,this.context.moveTo(this.prevPos.x,this.prevPos.y),this.context.lineTo(r,o),this.context.stroke())}onLeave(){this.prevPos=null}getMouse(r,o){let l,u,f=this.getOffset(o);return r.touches&&r.touches.length>0?(l=r.touches[0].clientX-f.left,u=r.touches[0].clientY-f.top):(l=r.pageX-f.left,u=r.pageY-f.top),{x:l,y:u}}getOffset(r){var o=r.getBoundingClientRect(),l=document.body,u=document.documentElement,f=window.pageYOffset||u.scrollTop||l.scrollTop,d=window.pageXOffset||u.scrollLeft||l.scrollLeft,p=u.clientTop||l.clientTop||0,v=u.clientLeft||l.clientLeft||0,T=o.top+f-p,C=o.left+d-v;return{top:Math.round(T),left:Math.round(C)}}onMove(r){r.preventDefault();var o=this.getMouse(r,this.container);this.brush.src?this.drawBrushImg(o.x,o.y):this.drawBrush(o.x,o.y),this.texture.update();let l=this.calcPercentComplete();this.emit("paint",this,{prev:this.prevPos,pos:o,percent:l}),this.prevPos=o}getInitialMaskPixels(){let r=this.context.getImageData(0,0,this.texture.width,this.texture.height).data,o=0;for(let l=0,u=r.length;l<u;l+=4)r[l]<255&&o++;return o}calcPercentComplete(r=this.texture.width,o=this.texture.height){let l=this.context.getImageData(0,0,r,o).data,u=0;for(let f=0,d=l.length;f<d;f+=4)l[f]<255&&u++;return u=u-this.initMaskPixels,Math.round(100*u/(r*o-this.initMaskPixels))}},_0=g0,dl=window.velocityData.paths.main+"images/",v0=class{constructor({container:r,background:o,cover:l,initMask:u,initMaskOutline:f,brush:d,brushOutline:p,onStart:v,onComplete:T,audio:C,mouseObserver:b,percent:k}){this.container=r,this.width=this.container.offsetWidth,this.height=this.container.offsetHeight,this.stageSize={width:this.width,height:this.height},this.app=new Le.Application({width:this.width,height:this.height,resolution:window.devicePixelRatio||1,autoDensity:!0,antialias:!0,backgroundAlpha:0}),this.onStart=v,this.onComplete=T,this.images={},this.textures={},this.figures={},this.app.stage.eventMode="dynamic",this.app.stage.hitArea=this.app.screen,this.background=o&&dl+o,this.cover={src:l.src?dl+l.src:!1,color:l.color||"#000000"},this.initMask=u&&dl+u,this.initMaskOutline=f?{width:f.width||2,color:f.color||"#000000"}:null,this.brush={src:d&&d.src?dl+d.src:null,size:d&&d.size||25},this.brushOutline=p&&!this.brush.src?{width:p.width||2,color:p.color||"0x000000"}:null,this.percent=k||60,this.mouseObserver=b||r,this.audio=C.enabled?{src:C.src||"",popup:C.popup||!1,popupText:C.popupText||""}:null,this.scratchMask=new _0(this),this.scratchMask.on("paint",this.onMaskPaint.bind(this)),this.init()}onMaskPaint(r,o){!this.complete&&this.brushOutline&&(this.figures.brush.position.set(o.pos.x,o.pos.y),this.app.renderer.render(this.figures.brush,{renderTexture:this.textures.brushOutline,clear:!1,skipUpdateTransform:!1}),o.prev&&(this.figures.line.clear().lineStyle({width:2*this.brush.size,color:this.brushOutline.color}).moveTo(o.prev.x,o.prev.y).lineTo(o.pos.x,o.pos.y),this.app.renderer.render(this.figures.line,{renderTexture:this.textures.brushOutline,clear:!1,skipUpdateTransform:!1}))),this.audio&&this.isAudioOn&&this.audioSource.play(),!this.complete&&o.percent>this.percent&&(this.audio&&this.audioSource.pause(),this.clear()),this.pointerOut=!1}clear(){this.complete=!0;const r=Le.Ticker.shared;let o=!0;r.add(l=>{this.coverContainer.alpha>0?this.coverContainer.alpha-=l/60/.8:(typeof this.onComplete=="function"&&o===!0&&this.onComplete(),o=!1)})}loadAssets(){let r=[];if(this.background)if(this.background.split(".").reverse()[0]==="mp4"){let l=Le.Texture.from(this.background);l.baseTexture.resource.source.loop=!0,l.baseTexture.resource.source.muted=!0,this.videoBG=new Le.Sprite(l),this.videoBG.preload="auto"}else Le.Assets.add("bg",this.background),r.push("bg");if(this.cover.src)if(this.cover.src.split(".").reverse()[0]==="mp4"){let l=Le.Texture.from(this.cover.src);l.baseTexture.resource.source.loop=!0,l.baseTexture.resource.source.muted=!0,this.videoCover=new Le.Sprite(l),this.videoCover.preload="auto"}else Le.Assets.add("cover",this.cover.src),r.push("cover");this.initMask&&(Le.Assets.add("mask",this.initMask),r.push("mask")),Le.Assets.load(r).then(this.drawScratch.bind(this))}createCoverContainer(){this.coverContainer=new Le.Container,this.coverContainer.mask=this.scratchMask;let r=new Le.Graphics;r.beginFill(this.cover.color),r.drawRect(0,0,this.width,this.height),this.coverContainer.addChild(r),this.cover.src&&(this.videoCover?this.coverContainer.addChild(this.videoCover):(this.images.cover=Object.assign(Le.Sprite.from("cover"),this.stageSize),this.coverContainer.addChild(this.images.cover))),this.initMaskOutline&&(this.images.initMaskOutline=Le.Sprite.from("mask"),this.images.initMaskOutline.filters=[new Le.filters.OutlineFilter(this.initMaskOutline.width,this.initMaskOutline.color)],this.coverContainer.addChild(this.images.initMaskOutline)),this.brushOutline&&!this.brush.src&&(this.figures.brush=new Le.Graphics().beginFill(this.brushOutline.color).drawCircle(0,0,this.brush.size),this.figures.line=new Le.Graphics,this.textures.brushOutline=Le.RenderTexture.create(this.stageSize),this.images.brushOutline=new Le.Sprite(this.textures.brushOutline),this.images.brushOutline.filters=[new Le.filters.OutlineFilter(this.brushOutline.width,this.brushOutline.color)],this.coverContainer.addChild(this.images.brushOutline))}drawScratch(){this.container.appendChild(this.app.view),this.background&&(this.videoBG?this.app.stage.addChild(this.videoBG):(this.images.background=Object.assign(Le.Sprite.from("bg"),this.stageSize),this.app.stage.addChild(this.images.background))),this.cover&&this.createCoverContainer(),this.app.stage.addChild(this.coverContainer),typeof this.onStart=="function"&&this.onStart()}getAudioType(r){let o=r.split(".").reverse()[0];return o=="mp3"&&(o="mpeg"),o}createAudio(){this.getAudioType(this.audio.src);let r=`

        <audio id="audio" preload="auto">
            <source src="${dl+this.audio.src}" type="audio/${this.getAudioType(this.audio.src)}"/>
        </audio>
        
        <audio id="fix-ios" preload="auto">
             <source src="data:audio/mpeg;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTcuODMuMTAwAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV" type="audio/mpeg"/>
        </audio>

        <div class="audio-button">
            <div class="mute icon"></div>
            <div class="unmute icon"></div>

            ${this.audio.popup?`
                <div class="popup">
                    <span>${this.audio.popupText}</span>
                </div>
            `:""}
        </div>

        `;this.container.innerHTML+=r,this.audioActions()}audioActions(){this.isAudioOn=!1,this.audioBTN=document.querySelector(".audio-button"),this.audioSource=document.querySelector("#audio");let r=document.querySelector("#fix-ios");this.audioBTN.addEventListener("click",o=>{o.preventDefault(),this.isAudioOn=!this.isAudioOn,this.audioBTN.classList.toggle("unmute"),r.play(),this.isAudioOn&&this.audioSource.pause()})}init(){this.loadAssets(),this.audio&&this.createAudio()}},y0=v0,Hp=new Es,x0=class{constructor(){this.offersArr=[],this.r=35,this.cx=150,this.cy=25,this.l=[...document.querySelectorAll(".screen:not(.tns-slide-cloned) .offer")].length,this.s,this.x,this.y,this.p=1.4,this.pp=5,this.nr=[],this.a,this.w=document.querySelector(".screen:not(.tns-slide-cloned) .offer").offsetWidth,this.h=document.querySelector(".screen:not(.tns-slide-cloned) .offer").offsetHeight,this.n=Math.PI/2,this.currentOffer,this.shownOffer,this.offerInterval=1500,this.animFinished=!1,this.animTimeout,this.rollTimeout,this.offerTimeout,this.mouseOnBanner,this.goLeft=!1,this.goRight=!1,this.ribbon,this.step,this.p2=Math.PI*2,this.minus,this.sliderScreenWidth=document.querySelector(".carousel").offsetWidth,this.screensMargin=12,this.offer=[...document.querySelectorAll(".screen:not(.tns-slide-cloned) .offer")],this.arrPrev=document.querySelector("#arrowPrev"),this.arrNext=document.querySelector("#arrowNext")}showOffer(r,o){o=o||.075,this.animFinished=!1;let l=this.a,u=this.nr[this.n];this.minus=r>this.shownOffer&&Math.abs(this.shownOffer-r)<this.l/2||this.shownOffer-r>this.l/2,!this.minus&&r-this.shownOffer>0&&(u+=this.p2),this.minus&&r-this.shownOffer<0&&(u-=this.p2);const f=()=>{this.animTimeout&&clearTimeout(this.animTimeout),this.minus?u+.001<=l?(l-=(l-u)*o,this.setOffersPosition(l),this.animTimeout=setTimeout(f,16)):(this.animFinished=!0,this.shownOffer=r,this.setOffersPosition(this.nr[r])):u-.001>=l?(l+=(u-l)*o,this.setOffersPosition(l),this.animTimeout=setTimeout(f,16)):(this.animFinished=!0,this.shownOffer=r,this.setOffersPosition(this.nr[r]))};f()}loopOffers(){X.hover||(this.rollTimeout&&clearTimeout(this.rollTimeout),this.currentOffer=this.currentOffer<this.l-1?this.currentOffer+1:0,this.showOffer(this.currentOffer)),this.nextOffer()}nextOffer(){this.offerTimeout&&clearTimeout(this.offerTimeout),this.rollTimeout&&clearTimeout(this.rollTimeout),this.animFinished&&!X.hover?this.offerTimeout=setTimeout(()=>{this.loopOffers()},this.offerInterval):this.offerTimeout=setTimeout(()=>{this.nextOffer()},200)}rollOffers(){this.offerTimeout&&clearTimeout(this.offerTimeout),X.hover&&(this.goLeft&&this.animFinished&&(this.animTimeout&&clearTimeout(this.animTimeout),this.currentOffer=this.currentOffer>0?this.currentOffer-1:this.l-1,this.showOffer(this.currentOffer,.12)),this.goRight&&this.animFinished&&(this.animTimeout&&clearTimeout(this.animTimeout),this.currentOffer=this.currentOffer<this.l-1?this.currentOffer+1:0,this.showOffer(this.currentOffer,.12)),this.rollTimeout&&clearTimeout(this.rollTimeout),this.rollTimeout=setTimeout(this.rollOffers,64))}setOffersPosition(r){this.a=r;for(var o=0;o<this.l;o++){this.x=this.cx+this.r*Math.cos(r),this.y=this.r*Math.sin(r);var l=(this.y+this.pp*this.r)/(this.r*this.pp),u=this.y/this.p+70,f=(this.x-this.cx)*(l*this.p*this.pp/2)+this.cx,d=u*l*l*this.p+this.cy,p=this.minus?this.a-this.nr[this.currentOffer]:this.nr[this.currentOffer]-this.a,v=this.minus?this.a-this.nr[this.shownOffer]:this.nr[this.shownOffer]-this.a;p<0&&(p+=this.p2),p>this.p2&&(p-=this.p2);var T=.6+(o===this.currentOffer?(1-p/this.step)*.33:o===this.shownOffer?(1+this.n/this.step)*.33:0);this.offersArr[o].style.transform="translate("+f+"px,"+d+"px) scale("+l*T+")",this.offersArr[o].style.zIndex=Math.round(this.y+2*this.r),this.offersArr[o].style.opacity=Math.pow(l,2),r+=this.step}Hp.emit("changeOffer",this.currentOffer)}init(){this.step=this.p2/this.l;for(var r=0;r<this.l;r++)this.nr.push(this.n),this.n-=this.step,this.offersArr.push(this.offer[r]),this.offersArr[r].style.marginTop=-this.w/2+"px",this.offersArr[r].style.marginLeft=-this.h/2+"px";this.currentOffer=this.shownOffer=-1,this.loopOffers(),X.settings.arrows&&(this.arrPrev.addEventListener("click",()=>{this.goLeft=!0,this.rollOffers()}),this.arrPrev.addEventListener("mouseleave",()=>{this.goLeft=!1}),this.arrNext.addEventListener("click",()=>{this.goRight=!0,this.rollOffers()}),this.arrNext.addEventListener("mouseleave",()=>{this.goRight=!1})),X.observer.subscribe("hover",o=>{o.hover||this.nextOffer()})}},ux=function(r,o){typeof exports=="object"&&typeof module<"u"?module.exports=o():typeof define=="function"&&define.amd?define(o):(r=typeof globalThis<"u"?globalThis:r||self,r.autoComplete=o())}(void 0,function(){"use strict";function r(nt,et){var ct=Object.keys(nt);if(Object.getOwnPropertySymbols){var O=Object.getOwnPropertySymbols(nt);et&&(O=O.filter(function(q){return Object.getOwnPropertyDescriptor(nt,q).enumerable})),ct.push.apply(ct,O)}return ct}function o(nt){for(var et=1;et<arguments.length;et++){var ct=arguments[et]!=null?arguments[et]:{};et%2?r(Object(ct),!0).forEach(function(O){u(nt,O,ct[O])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(ct)):r(Object(ct)).forEach(function(O){Object.defineProperty(nt,O,Object.getOwnPropertyDescriptor(ct,O))})}return nt}function l(nt){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?l=function(et){return typeof et}:l=function(et){return et&&typeof Symbol=="function"&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et},l(nt)}function u(nt,et,ct){return et in nt?Object.defineProperty(nt,et,{value:ct,enumerable:!0,configurable:!0,writable:!0}):nt[et]=ct,nt}function f(nt){return d(nt)||p(nt)||v(nt)||C()}function d(nt){if(Array.isArray(nt))return T(nt)}function p(nt){if(typeof Symbol<"u"&&nt[Symbol.iterator]!=null||nt["@@iterator"]!=null)return Array.from(nt)}function v(nt,et){if(nt){if(typeof nt=="string")return T(nt,et);var ct=Object.prototype.toString.call(nt).slice(8,-1);if(ct==="Object"&&nt.constructor&&(ct=nt.constructor.name),ct==="Map"||ct==="Set")return Array.from(nt);if(ct==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ct))return T(nt,et)}}function T(nt,et){(et==null||et>nt.length)&&(et=nt.length);for(var ct=0,O=new Array(et);ct<et;ct++)O[ct]=nt[ct];return O}function C(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function b(nt,et){var ct=typeof Symbol<"u"&&nt[Symbol.iterator]||nt["@@iterator"];if(!ct){if(Array.isArray(nt)||(ct=v(nt))||et&&nt&&typeof nt.length=="number"){ct&&(nt=ct);var O=0,q=function(){};return{s:q,n:function(){return O>=nt.length?{done:!0}:{done:!1,value:nt[O++]}},e:function(A){throw A},f:q}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var B=!0,E=!1,g;return{s:function(){ct=ct.call(nt)},n:function(){var A=ct.next();return B=A.done,A},e:function(A){E=!0,g=A},f:function(){try{!B&&ct.return!=null&&ct.return()}finally{if(E)throw g}}}}var k=function(et){return typeof et=="string"?document.querySelector(et):et()},D=function(et,ct){var O=typeof et=="string"?document.createElement(et):et;for(var q in ct){var B=ct[q];if(q==="inside")B.append(O);else if(q==="dest")k(B[0]).insertAdjacentElement(B[1],O);else if(q==="around"){var E=B;E.parentNode.insertBefore(O,E),O.append(E),E.getAttribute("autofocus")!=null&&E.focus()}else q in O?O[q]=B:O.setAttribute(q,B)}return O},P=function(et){return et instanceof HTMLInputElement||et instanceof HTMLTextAreaElement?et.value:et.innerHTML},L=function(et,ct){return et=et.toString().toLowerCase(),ct?et.normalize("NFD").replace(/[\u0300-\u036f]/g,"").normalize("NFC"):et},j=function(et,ct){var O;return function(){clearTimeout(O),O=setTimeout(function(){return et()},ct)}},U=function(et,ct,O){return ct?ct(et):et.length>=O},N=function(et,ct){return D("mark",o({innerHTML:et},typeof ct=="string"&&{class:ct})).outerHTML},Y=function(nt){var et=nt.name,ct=nt.options,O=nt.resultsList,q=nt.resultItem;for(var B in ct)if(l(ct[B])==="object"){nt[B]||(nt[B]={});for(var E in ct[B])nt[B][E]=ct[B][E]}else nt[B]=ct[B];nt.selector=nt.selector||"#"+et,O.destination=O.destination||nt.selector,O.id=O.id||et+"_list_"+nt.id,q.id=q.id||et+"_result",nt.input=k(nt.selector)},Z=function(nt,et){et.input.dispatchEvent(new CustomEvent(nt,{bubbles:!0,detail:et.feedback,cancelable:!0}))},z=function(nt,et,ct){var O=ct||{},q=O.mode,B=O.diacritics,E=O.highlight,g=L(et,B);if(et=et.toString(),nt=L(nt,B),q==="loose"){nt=nt.replace(/ /g,"");var A=nt.length,H=0,I=Array.from(et).map(function(it,ht){return H<A&&g[ht]===nt[H]&&(it=E?N(it,E):it,H++),it}).join("");if(H===A)return I}else{var J=g.indexOf(nt);if(~J)return nt=et.substring(J,J+nt.length),J=E?et.replace(nt,N(nt,E)):et,J}},K=function(et,ct){return new Promise(function(O,q){var B;return B=et.data,B.cache&&B.store?O():new Promise(function(E,g){return typeof B.src=="function"?B.src(ct).then(E,g):E(B.src)}).then(function(E){try{return et.feedback=B.store=E,Z("response",et),O()}catch(g){return q(g)}},q)})},G=function(et,ct){var O=ct.data,q=ct.searchEngine,B=[];O.store.forEach(function(g,A){var H=function(_t){var Et=_t?g[_t]:g,kt=typeof q=="function"?q(et,Et):z(et,Et,{mode:q,diacritics:ct.diacritics,highlight:ct.resultItem.highlight});if(kt){var ae={match:kt,value:g};_t&&(ae.key=_t),B.push(ae)}};if(O.keys){var I=b(O.keys),J;try{for(I.s();!(J=I.n()).done;){var it=J.value;H(it)}}catch(ht){I.e(ht)}finally{I.f()}}else H()}),O.filter&&(B=O.filter(B));var E=B.slice(0,ct.resultsList.maxResults);ct.feedback={query:et,matches:B,results:E},Z("results",ct)},rt="aria-expanded",dt="aria-activedescendant",Bt="aria-selected",Tt=function(et,ct){et.feedback.selection=o({index:ct},et.feedback.results[ct])},ie=function(et){var ct=et.resultsList,O=et.list,q=et.resultItem,B=et.feedback,E=B.matches,g=B.results;if(et.cursor=-1,O.innerHTML="",E.length||ct.noResults){var A=new DocumentFragment;g.forEach(function(H,I){var J=D(q.tag,o({id:"".concat(q.id,"_").concat(I),role:"option",innerHTML:H.match,inside:A},q.class&&{class:q.class}));q.element&&q.element(J,H)}),O.append(A),ct.element&&ct.element(O,B),Kt(et)}else Gt(et)},Kt=function(et){et.isOpen||((et.wrapper||et.input).setAttribute(rt,!0),et.list.classList.add("active"),et.list.style.pointerEvents="all",et.isOpen=!0,Z("open",et))},Gt=function(et){et.isOpen&&((et.wrapper||et.input).setAttribute(rt,!1),et.input.setAttribute(dt,""),et.list.classList.remove("active"),et.list.style.pointerEvents="none",et.isOpen=!1,Z("close",et))},$t=function(et,ct){var O=ct.resultItem,q=ct.list.getElementsByTagName(O.tag),B=O.selected?O.selected.split(" "):!1;if(ct.isOpen&&q.length){var E,g=ct.cursor;if(et>=q.length&&(et=0),et<0&&(et=q.length-1),ct.cursor=et,g>-1){var A;q[g].removeAttribute(Bt),B&&(A=q[g].classList).remove.apply(A,f(B))}q[et].setAttribute(Bt,!0),B&&(E=q[et].classList).add.apply(E,f(B)),ct.input.setAttribute(dt,q[ct.cursor].id),ct.list.scrollTop=q[et].offsetTop-ct.list.clientHeight+q[et].clientHeight+5,ct.feedback.cursor=ct.cursor,Tt(ct,et),Z("navigate",ct)}},Ht=function(et){$t(et.cursor+1,et)},re=function(et){$t(et.cursor-1,et)},Ne=function(et,ct,O){O=O>=0?O:et.cursor,!(O<0)&&(et.feedback.event=ct,Tt(et,O),Z("selection",et),Gt(et))},se=function(et,ct){var O=ct.resultItem.tag.toUpperCase(),q=Array.from(ct.list.querySelectorAll(O)),B=et.target.closest(O);B&&B.nodeName===O&&Ne(ct,et,q.indexOf(B))},pe=function(et,ct){switch(et.keyCode){case 40:case 38:et.preventDefault(),et.keyCode===40?Ht(ct):re(ct);break;case 13:ct.submit||et.preventDefault(),ct.cursor>=0&&Ne(ct,et);break;case 9:ct.resultsList.tabSelect&&ct.cursor>=0&&Ne(ct,et);break;case 27:ct.input.value="",Gt(ct);break}};function ue(nt,et){var ct=this;return new Promise(function(O,q){var B,E;if(B=et||P(nt.input),B=nt.query?nt.query(B):B,E=U(B,nt.trigger,nt.threshold),E)return K(nt,B).then(function(A){try{return nt.feedback instanceof Error?O():(G(B,nt),nt.resultsList&&ie(nt),g.call(ct))}catch(H){return q(H)}},q);return Gt(nt),g.call(ct);function g(){return O()}})}var fe=function(et,ct){for(var O in et)for(var q in et[O])ct(O,q)},Ue=function(et){var ct=et.events,O=j(function(){return ue(et)},et.debounce),q=et.events=o({input:o({},ct&&ct.input)},et.resultsList&&{list:ct?o({},ct.list):{}}),B={input:{input:function(){O()},keydown:function(g){pe(g,et)},blur:function(){Gt(et)}},list:{mousedown:function(g){g.preventDefault()},click:function(g){se(g,et)}}};fe(B,function(E,g){!et.resultsList&&g!=="input"||q[E][g]||(q[E][g]=B[E][g])}),fe(q,function(E,g){et[E].addEventListener(g,q[E][g])})},ye=function(et){fe(et.events,function(ct,O){et[ct].removeEventListener(O,et.events[ct][O])})};function _e(nt){var et=this;return new Promise(function(ct,O){var q,B,E;if(q=nt.placeHolder,B=nt.resultsList,E={role:"combobox","aria-owns":B.id,"aria-haspopup":!0,"aria-expanded":!1},D(nt.input,o(o({"aria-controls":B.id,"aria-autocomplete":"both"},q&&{placeholder:q}),!nt.wrapper&&o({},E))),nt.wrapper&&(nt.wrapper=D("div",o({around:nt.input,class:nt.name+"_wrapper"},E))),B&&(nt.list=D(B.tag,o({dest:[B.destination,B.position],id:B.id,role:"listbox",hidden:""},B.class&&{class:B.class}))),Ue(nt),nt.data.cache)return K(nt).then(function(A){try{return g.call(et)}catch(H){return O(H)}},O);function g(){return Z("init",nt),ct()}return g.call(et)})}function Qt(nt){var et=nt.prototype;et.init=function(){_e(this)},et.start=function(ct){ue(this,ct)},et.unInit=function(){if(this.wrapper){var ct=this.wrapper.parentNode;ct.insertBefore(this.input,this.wrapper),ct.removeChild(this.wrapper)}ye(this)},et.open=function(){Kt(this)},et.close=function(){Gt(this)},et.goTo=function(ct){$t(ct,this)},et.next=function(){Ht(this)},et.previous=function(){re(this)},et.select=function(ct){Ne(this,null,ct)},et.search=function(ct,O,q){return z(ct,O,q)}}function Pe(nt){this.options=nt,this.id=Pe.instances=(Pe.instances||0)+1,this.name="autoComplete",this.wrapper=1,this.threshold=1,this.debounce=0,this.resultsList={position:"afterend",tag:"ul",maxResults:5},this.resultItem={tag:"li"},Y(this),Qt.call(this,Pe),_e(this)}return Pe}),fx=Hf(Cg()),dx=function(r){var o={};function l(u){if(o[u])return o[u].exports;var f=o[u]={i:u,l:!1,exports:{}};return r[u].call(f.exports,f,f.exports,l),f.l=!0,f.exports}return l.m=r,l.c=o,l.d=function(u,f,d){l.o(u,f)||Object.defineProperty(u,f,{enumerable:!0,get:d})},l.r=function(u){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(u,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(u,"__esModule",{value:!0})},l.t=function(u,f){if(1&f&&(u=l(u)),8&f||4&f&&typeof u=="object"&&u&&u.__esModule)return u;var d=Object.create(null);if(l.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:u}),2&f&&typeof u!="string")for(var p in u)l.d(d,p,function(v){return u[v]}.bind(null,p));return d},l.n=function(u){var f=u&&u.__esModule?function(){return u.default}:function(){return u};return l.d(f,"a",f),f},l.o=function(u,f){return Object.prototype.hasOwnProperty.call(u,f)},l.p="",l(l.s=4)}([function(r,o,l){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var u=function(){function f(d,p,v){d===void 0&&(d=null),p===void 0&&(p=null),v===void 0&&(v="en-US"),this.dateInstance=typeof p=="object"&&p!==null?p.parse(d instanceof f?d.clone().toJSDate():d):typeof p=="string"?f.parseDateTime(d,p,v):d?f.parseDateTime(d):f.parseDateTime(new Date),this.lang=v}return f.parseDateTime=function(d,p,v){if(p===void 0&&(p="YYYY-MM-DD"),v===void 0&&(v="en-US"),!d)return new Date(NaN);if(d instanceof Date)return new Date(d);if(d instanceof f)return d.clone().toJSDate();if(/^-?\d{10,}$/.test(d))return f.getDateZeroTime(new Date(Number(d)));if(typeof d=="string"){for(var T=[],C=null;(C=f.regex.exec(p))!=null;)C[1]!=="\\"&&T.push(C);if(T.length){var b={year:null,month:null,shortMonth:null,longMonth:null,day:null,value:""};T[0].index>0&&(b.value+=".*?");for(var k=0,D=Object.entries(T);k<D.length;k++){var P=D[k],L=P[0],j=P[1],U=Number(L),N=f.formatPatterns(j[0],v),Y=N.group,Z=N.pattern;b[Y]=U+1,b.value+=Z,b.value+=".*?"}var z=new RegExp("^"+b.value+"$");if(z.test(d)){var K=z.exec(d),G=Number(K[b.year]),rt=null;b.month?rt=Number(K[b.month])-1:b.shortMonth?rt=f.shortMonths(v).indexOf(K[b.shortMonth]):b.longMonth&&(rt=f.longMonths(v).indexOf(K[b.longMonth]));var dt=Number(K[b.day])||1;return new Date(G,rt,dt,0,0,0,0)}}}return f.getDateZeroTime(new Date(d))},f.convertArray=function(d,p){return d.map(function(v){return v instanceof Array?v.map(function(T){return new f(T,p)}):new f(v,p)})},f.getDateZeroTime=function(d){return new Date(d.getFullYear(),d.getMonth(),d.getDate(),0,0,0,0)},f.shortMonths=function(d){return f.MONTH_JS.map(function(p){return new Date(2019,p).toLocaleString(d,{month:"short"})})},f.longMonths=function(d){return f.MONTH_JS.map(function(p){return new Date(2019,p).toLocaleString(d,{month:"long"})})},f.formatPatterns=function(d,p){switch(d){case"YY":case"YYYY":return{group:"year",pattern:"(\\d{"+d.length+"})"};case"M":return{group:"month",pattern:"(\\d{1,2})"};case"MM":return{group:"month",pattern:"(\\d{2})"};case"MMM":return{group:"shortMonth",pattern:"("+f.shortMonths(p).join("|")+")"};case"MMMM":return{group:"longMonth",pattern:"("+f.longMonths(p).join("|")+")"};case"D":return{group:"day",pattern:"(\\d{1,2})"};case"DD":return{group:"day",pattern:"(\\d{2})"}}},f.prototype.toJSDate=function(){return this.dateInstance},f.prototype.toLocaleString=function(d,p){return this.dateInstance.toLocaleString(d,p)},f.prototype.toDateString=function(){return this.dateInstance.toDateString()},f.prototype.getSeconds=function(){return this.dateInstance.getSeconds()},f.prototype.getDay=function(){return this.dateInstance.getDay()},f.prototype.getTime=function(){return this.dateInstance.getTime()},f.prototype.getDate=function(){return this.dateInstance.getDate()},f.prototype.getMonth=function(){return this.dateInstance.getMonth()},f.prototype.getFullYear=function(){return this.dateInstance.getFullYear()},f.prototype.setMonth=function(d){return this.dateInstance.setMonth(d)},f.prototype.setHours=function(d,p,v,T){d===void 0&&(d=0),p===void 0&&(p=0),v===void 0&&(v=0),T===void 0&&(T=0),this.dateInstance.setHours(d,p,v,T)},f.prototype.setSeconds=function(d){return this.dateInstance.setSeconds(d)},f.prototype.setDate=function(d){return this.dateInstance.setDate(d)},f.prototype.setFullYear=function(d){return this.dateInstance.setFullYear(d)},f.prototype.getWeek=function(d){var p=new Date(this.timestamp()),v=(this.getDay()+(7-d))%7;p.setDate(p.getDate()-v);var T=p.getTime();return p.setMonth(0,1),p.getDay()!==d&&p.setMonth(0,1+(4-p.getDay()+7)%7),1+Math.ceil((T-p.getTime())/6048e5)},f.prototype.clone=function(){return new f(this.toJSDate())},f.prototype.isBetween=function(d,p,v){switch(v===void 0&&(v="()"),v){default:case"()":return this.timestamp()>d.getTime()&&this.timestamp()<p.getTime();case"[)":return this.timestamp()>=d.getTime()&&this.timestamp()<p.getTime();case"(]":return this.timestamp()>d.getTime()&&this.timestamp()<=p.getTime();case"[]":return this.timestamp()>=d.getTime()&&this.timestamp()<=p.getTime()}},f.prototype.isBefore=function(d,p){switch(p===void 0&&(p="seconds"),p){case"second":case"seconds":return d.getTime()>this.getTime();case"day":case"days":return new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime()>new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(d.getFullYear(),d.getMonth(),1).getTime()>new Date(this.getFullYear(),this.getMonth(),1).getTime();case"year":case"years":return d.getFullYear()>this.getFullYear()}throw new Error("isBefore: Invalid unit!")},f.prototype.isSameOrBefore=function(d,p){switch(p===void 0&&(p="seconds"),p){case"second":case"seconds":return d.getTime()>=this.getTime();case"day":case"days":return new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime()>=new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime();case"month":case"months":return new Date(d.getFullYear(),d.getMonth(),1).getTime()>=new Date(this.getFullYear(),this.getMonth(),1).getTime()}throw new Error("isSameOrBefore: Invalid unit!")},f.prototype.isAfter=function(d,p){switch(p===void 0&&(p="seconds"),p){case"second":case"seconds":return this.getTime()>d.getTime();case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>new Date(d.getFullYear(),d.getMonth(),1).getTime();case"year":case"years":return this.getFullYear()>d.getFullYear()}throw new Error("isAfter: Invalid unit!")},f.prototype.isSameOrAfter=function(d,p){switch(p===void 0&&(p="seconds"),p){case"second":case"seconds":return this.getTime()>=d.getTime();case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()>=new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()>=new Date(d.getFullYear(),d.getMonth(),1).getTime()}throw new Error("isSameOrAfter: Invalid unit!")},f.prototype.isSame=function(d,p){switch(p===void 0&&(p="seconds"),p){case"second":case"seconds":return this.getTime()===d.getTime();case"day":case"days":return new Date(this.getFullYear(),this.getMonth(),this.getDate()).getTime()===new Date(d.getFullYear(),d.getMonth(),d.getDate()).getTime();case"month":case"months":return new Date(this.getFullYear(),this.getMonth(),1).getTime()===new Date(d.getFullYear(),d.getMonth(),1).getTime()}throw new Error("isSame: Invalid unit!")},f.prototype.add=function(d,p){switch(p===void 0&&(p="seconds"),p){case"second":case"seconds":this.setSeconds(this.getSeconds()+d);break;case"day":case"days":this.setDate(this.getDate()+d);break;case"month":case"months":this.setMonth(this.getMonth()+d)}return this},f.prototype.subtract=function(d,p){switch(p===void 0&&(p="seconds"),p){case"second":case"seconds":this.setSeconds(this.getSeconds()-d);break;case"day":case"days":this.setDate(this.getDate()-d);break;case"month":case"months":this.setMonth(this.getMonth()-d)}return this},f.prototype.diff=function(d,p){switch(p===void 0&&(p="seconds"),p){default:case"second":case"seconds":return this.getTime()-d.getTime();case"day":case"days":return Math.round((this.timestamp()-d.getTime())/864e5);case"month":case"months":}},f.prototype.format=function(d,p){if(p===void 0&&(p="en-US"),typeof d=="object")return d.output(this.clone().toJSDate());for(var v="",T=[],C=null;(C=f.regex.exec(d))!=null;)C[1]!=="\\"&&T.push(C);if(T.length){T[0].index>0&&(v+=d.substring(0,T[0].index));for(var b=0,k=Object.entries(T);b<k.length;b++){var D=k[b],P=D[0],L=D[1],j=Number(P);v+=this.formatTokens(L[0],p),T[j+1]&&(v+=d.substring(L.index+L[0].length,T[j+1].index)),j===T.length-1&&(v+=d.substring(L.index+L[0].length))}}return v.replace(/\\/g,"")},f.prototype.timestamp=function(){return new Date(this.getFullYear(),this.getMonth(),this.getDate(),0,0,0,0).getTime()},f.prototype.formatTokens=function(d,p){switch(d){case"YY":return String(this.getFullYear()).slice(-2);case"YYYY":return String(this.getFullYear());case"M":return String(this.getMonth()+1);case"MM":return("0"+(this.getMonth()+1)).slice(-2);case"MMM":return f.shortMonths(p)[this.getMonth()];case"MMMM":return f.longMonths(p)[this.getMonth()];case"D":return String(this.getDate());case"DD":return("0"+this.getDate()).slice(-2);default:return""}},f.regex=/(\\)?(Y{2,4}|M{1,4}|D{1,2}|d{1,4})/g,f.MONTH_JS=[0,1,2,3,4,5,6,7,8,9,10,11],f}();o.DateTime=u},function(r,o,l){"use strict";var u,f=this&&this.__extends||(u=function(k,D){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(P,L){P.__proto__=L}||function(P,L){for(var j in L)L.hasOwnProperty(j)&&(P[j]=L[j])})(k,D)},function(k,D){function P(){this.constructor=k}u(k,D),k.prototype=D===null?Object.create(D):(P.prototype=D.prototype,new P)}),d=this&&this.__spreadArrays||function(){for(var k=0,D=0,P=arguments.length;D<P;D++)k+=arguments[D].length;var L=Array(k),j=0;for(D=0;D<P;D++)for(var U=arguments[D],N=0,Y=U.length;N<Y;N++,j++)L[j]=U[N];return L};Object.defineProperty(o,"__esModule",{value:!0});var p=l(5),v=l(0),T=l(3),C=l(2),b=function(k){function D(P){var L=k.call(this,P)||this;return L.preventClick=!1,L.bindEvents(),L}return f(D,k),D.prototype.scrollToDate=function(P){if(this.options.scrollToDate){var L=this.options.startDate instanceof v.DateTime?this.options.startDate.clone():null,j=this.options.endDate instanceof v.DateTime?this.options.endDate.clone():null;!this.options.startDate||P&&P!==this.options.element?P&&this.options.endDate&&P===this.options.elementEnd&&(j.setDate(1),this.options.numberOfMonths>1&&j.isAfter(L)&&j.setMonth(j.getMonth()-(this.options.numberOfMonths-1)),this.calendars[0]=j.clone()):(L.setDate(1),this.calendars[0]=L.clone())}},D.prototype.bindEvents=function(){document.addEventListener("click",this.onClick.bind(this),!0),this.ui=document.createElement("div"),this.ui.className=T.litepicker,this.ui.style.display="none",this.ui.addEventListener("mouseenter",this.onMouseEnter.bind(this),!0),this.ui.addEventListener("mouseleave",this.onMouseLeave.bind(this),!1),this.options.autoRefresh?(this.options.element instanceof HTMLElement&&this.options.element.addEventListener("keyup",this.onInput.bind(this),!0),this.options.elementEnd instanceof HTMLElement&&this.options.elementEnd.addEventListener("keyup",this.onInput.bind(this),!0)):(this.options.element instanceof HTMLElement&&this.options.element.addEventListener("change",this.onInput.bind(this),!0),this.options.elementEnd instanceof HTMLElement&&this.options.elementEnd.addEventListener("change",this.onInput.bind(this),!0)),this.options.parentEl?this.options.parentEl instanceof HTMLElement?this.options.parentEl.appendChild(this.ui):document.querySelector(this.options.parentEl).appendChild(this.ui):this.options.inlineMode?this.options.element instanceof HTMLInputElement?this.options.element.parentNode.appendChild(this.ui):this.options.element.appendChild(this.ui):document.body.appendChild(this.ui),this.updateInput(),this.init(),typeof this.options.setup=="function"&&this.options.setup.call(this,this),this.render(),this.options.inlineMode&&this.show()},D.prototype.updateInput=function(){if(this.options.element instanceof HTMLInputElement){var P=this.options.startDate,L=this.options.endDate;if(this.options.singleMode&&P)this.options.element.value=P.format(this.options.format,this.options.lang);else if(!this.options.singleMode&&P&&L){var j=P.format(this.options.format,this.options.lang),U=L.format(this.options.format,this.options.lang);this.options.elementEnd instanceof HTMLInputElement?(this.options.element.value=j,this.options.elementEnd.value=U):this.options.element.value=""+j+this.options.delimiter+U}P||L||(this.options.element.value="",this.options.elementEnd instanceof HTMLInputElement&&(this.options.elementEnd.value=""))}},D.prototype.isSamePicker=function(P){return P.closest("."+T.litepicker)===this.ui},D.prototype.shouldShown=function(P){return!P.disabled&&(P===this.options.element||this.options.elementEnd&&P===this.options.elementEnd)},D.prototype.shouldResetDatePicked=function(){return this.options.singleMode||this.datePicked.length===2},D.prototype.shouldSwapDatePicked=function(){return this.datePicked.length===2&&this.datePicked[0].getTime()>this.datePicked[1].getTime()},D.prototype.shouldCheckLockDays=function(){return this.options.disallowLockDaysInRange&&this.datePicked.length===2},D.prototype.onClick=function(P){var L=P.target;if(L&&this.ui)if(this.shouldShown(L))this.show(L);else if(L.closest("."+T.litepicker)||!this.isShowning()){if(this.isSamePicker(L))if(this.emit("before:click",L),this.preventClick)this.preventClick=!1;else{if(L.classList.contains(T.dayItem)){if(P.preventDefault(),L.classList.contains(T.isLocked))return;if(this.shouldResetDatePicked()&&(this.datePicked.length=0),this.datePicked[this.datePicked.length]=new v.DateTime(L.dataset.time),this.shouldSwapDatePicked()){var j=this.datePicked[1].clone();this.datePicked[1]=this.datePicked[0].clone(),this.datePicked[0]=j.clone()}return this.shouldCheckLockDays()&&C.rangeIsLocked(this.datePicked,this.options)&&(this.emit("error:range",this.datePicked),this.datePicked.length=0),this.render(),this.emit.apply(this,d(["preselect"],d(this.datePicked).map(function(Z){return Z.clone()}))),void(this.options.autoApply&&(this.options.singleMode&&this.datePicked.length?(this.setDate(this.datePicked[0]),this.hide()):this.options.singleMode||this.datePicked.length!==2||(this.setDateRange(this.datePicked[0],this.datePicked[1]),this.hide())))}if(L.classList.contains(T.buttonPreviousMonth)){P.preventDefault();var U=0,N=this.options.switchingMonths||this.options.numberOfMonths;if(this.options.splitView){var Y=L.closest("."+T.monthItem);U=C.findNestedMonthItem(Y),N=1}return this.calendars[U].setMonth(this.calendars[U].getMonth()-N),this.gotoDate(this.calendars[U],U),void this.emit("change:month",this.calendars[U],U)}if(L.classList.contains(T.buttonNextMonth))return P.preventDefault(),U=0,N=this.options.switchingMonths||this.options.numberOfMonths,this.options.splitView&&(Y=L.closest("."+T.monthItem),U=C.findNestedMonthItem(Y),N=1),this.calendars[U].setMonth(this.calendars[U].getMonth()+N),this.gotoDate(this.calendars[U],U),void this.emit("change:month",this.calendars[U],U);L.classList.contains(T.buttonCancel)&&(P.preventDefault(),this.hide(),this.emit("button:cancel")),L.classList.contains(T.buttonApply)&&(P.preventDefault(),this.options.singleMode&&this.datePicked.length?this.setDate(this.datePicked[0]):this.options.singleMode||this.datePicked.length!==2||this.setDateRange(this.datePicked[0],this.datePicked[1]),this.hide(),this.emit("button:apply",this.options.startDate,this.options.endDate))}}else this.hide()},D.prototype.showTooltip=function(P,L){var j=this.ui.querySelector("."+T.containerTooltip);j.style.visibility="visible",j.innerHTML=L;var U=this.ui.getBoundingClientRect(),N=j.getBoundingClientRect(),Y=P.getBoundingClientRect(),Z=Y.top,z=Y.left;if(this.options.inlineMode&&this.options.parentEl){var K=this.ui.parentNode.getBoundingClientRect();Z-=K.top,z-=K.left}else Z-=U.top,z-=U.left;Z-=N.height,z-=N.width/2,z+=Y.width/2,j.style.top=Z+"px",j.style.left=z+"px",this.emit("tooltip",j,P)},D.prototype.hideTooltip=function(){this.ui.querySelector("."+T.containerTooltip).style.visibility="hidden"},D.prototype.shouldAllowMouseEnter=function(P){return!this.options.singleMode&&!P.classList.contains(T.isLocked)},D.prototype.shouldAllowRepick=function(){return this.options.elementEnd&&this.options.allowRepick&&this.options.startDate&&this.options.endDate},D.prototype.isDayItem=function(P){return P.classList.contains(T.dayItem)},D.prototype.onMouseEnter=function(P){var L=this,j=P.target;if(this.isDayItem(j)&&this.shouldAllowMouseEnter(j)){if(this.shouldAllowRepick()&&(this.triggerElement===this.options.element?this.datePicked[0]=this.options.endDate.clone():this.triggerElement===this.options.elementEnd&&(this.datePicked[0]=this.options.startDate.clone())),this.datePicked.length!==1)return;var U=this.ui.querySelector("."+T.dayItem+'[data-time="'+this.datePicked[0].getTime()+'"]'),N=this.datePicked[0].clone(),Y=new v.DateTime(j.dataset.time),Z=!1;if(N.getTime()>Y.getTime()){var z=N.clone();N=Y.clone(),Y=z.clone(),Z=!0}if(Array.prototype.slice.call(this.ui.querySelectorAll("."+T.dayItem)).forEach(function(ie){var Kt=new v.DateTime(ie.dataset.time),Gt=L.renderDay(Kt);Kt.isBetween(N,Y)&&Gt.classList.add(T.isInRange),ie.className=Gt.className}),j.classList.add(T.isEndDate),Z?(U&&U.classList.add(T.isFlipped),j.classList.add(T.isFlipped)):(U&&U.classList.remove(T.isFlipped),j.classList.remove(T.isFlipped)),this.options.showTooltip){var K=Y.diff(N,"day")+1;if(typeof this.options.tooltipNumber=="function"&&(K=this.options.tooltipNumber.call(this,K)),K>0){var G=this.pluralSelector(K),rt=K+" "+(this.options.tooltipText[G]?this.options.tooltipText[G]:"["+G+"]");this.showTooltip(j,rt);var dt=window.navigator.userAgent,Bt=/(iphone|ipad)/i.test(dt),Tt=/OS 1([0-2])/i.test(dt);Bt&&Tt&&j.dispatchEvent(new Event("click"))}else this.hideTooltip()}}},D.prototype.onMouseLeave=function(P){P.target,this.options.allowRepick&&(!this.options.allowRepick||this.options.startDate||this.options.endDate)&&(this.datePicked.length=0,this.render())},D.prototype.onInput=function(P){var L=this.parseInput(),j=L[0],U=L[1],N=this.options.format;if(this.options.elementEnd?j instanceof v.DateTime&&U instanceof v.DateTime&&j.format(N)===this.options.element.value&&U.format(N)===this.options.elementEnd.value:this.options.singleMode?j instanceof v.DateTime&&j.format(N)===this.options.element.value:j instanceof v.DateTime&&U instanceof v.DateTime&&""+j.format(N)+this.options.delimiter+U.format(N)===this.options.element.value){if(U&&j.getTime()>U.getTime()){var Y=j.clone();j=U.clone(),U=Y.clone()}this.options.startDate=new v.DateTime(j,this.options.format,this.options.lang),U&&(this.options.endDate=new v.DateTime(U,this.options.format,this.options.lang)),this.updateInput(),this.render();var Z=j.clone(),z=0;(this.options.elementEnd?j.format(N)===P.target.value:P.target.value.startsWith(j.format(N)))||(Z=U.clone(),z=this.options.numberOfMonths-1),this.emit("selected",this.getStartDate(),this.getEndDate()),this.gotoDate(Z,z)}},D}(p.Calendar);o.Litepicker=b},function(r,o,l){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.findNestedMonthItem=function(u){for(var f=u.parentNode.childNodes,d=0;d<f.length;d+=1)if(f.item(d)===u)return d;return 0},o.dateIsLocked=function(u,f,d){var p=!1;return f.lockDays.length&&(p=f.lockDays.filter(function(v){return v instanceof Array?u.isBetween(v[0],v[1],f.lockDaysInclusivity):v.isSame(u,"day")}).length),p||typeof f.lockDaysFilter!="function"||(p=f.lockDaysFilter.call(this,u.clone(),null,d)),p},o.rangeIsLocked=function(u,f){var d=!1;return f.lockDays.length&&(d=f.lockDays.filter(function(p){if(p instanceof Array){var v=u[0].toDateString()===p[0].toDateString()&&u[1].toDateString()===p[1].toDateString();return p[0].isBetween(u[0],u[1],f.lockDaysInclusivity)||p[1].isBetween(u[0],u[1],f.lockDaysInclusivity)||v}return p.isBetween(u[0],u[1],f.lockDaysInclusivity)}).length),d||typeof f.lockDaysFilter!="function"||(d=f.lockDaysFilter.call(this,u[0].clone(),u[1].clone(),u)),d}},function(r,o,l){var u=l(8);typeof u=="string"&&(u=[[r.i,u,""]]);var f={insert:function(d){var p=document.querySelector("head"),v=window._lastElementInsertedByStyleLoader;window.disableLitepickerStyles||(v?v.nextSibling?p.insertBefore(d,v.nextSibling):p.appendChild(d):p.insertBefore(d,p.firstChild),window._lastElementInsertedByStyleLoader=d)},singleton:!1};l(10)(u,f),u.locals&&(r.exports=u.locals)},function(r,o,l){"use strict";Object.defineProperty(o,"__esModule",{value:!0});var u=l(1);o.Litepicker=u.Litepicker,l(11),window.Litepicker=u.Litepicker,o.default=u.Litepicker},function(r,o,l){"use strict";var u,f=this&&this.__extends||(u=function(b,k){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,P){D.__proto__=P}||function(D,P){for(var L in P)P.hasOwnProperty(L)&&(D[L]=P[L])})(b,k)},function(b,k){function D(){this.constructor=b}u(b,k),b.prototype=k===null?Object.create(k):(D.prototype=k.prototype,new D)});Object.defineProperty(o,"__esModule",{value:!0});var d=l(6),p=l(0),v=l(3),T=l(2),C=function(b){function k(D){return b.call(this,D)||this}return f(k,b),k.prototype.render=function(){var D=this;this.emit("before:render",this.ui);var P=document.createElement("div");P.className=v.containerMain;var L=document.createElement("div");L.className=v.containerMonths,v["columns"+this.options.numberOfColumns]&&(L.classList.remove(v.columns2,v.columns3,v.columns4),L.classList.add(v["columns"+this.options.numberOfColumns])),this.options.splitView&&L.classList.add(v.splitView),this.options.showWeekNumbers&&L.classList.add(v.showWeekNumbers);for(var j=this.calendars[0].clone(),U=j.getMonth(),N=j.getMonth()+this.options.numberOfMonths,Y=0,Z=U;Z<N;Z+=1){var z=j.clone();z.setDate(1),z.setHours(0,0,0,0),this.options.splitView?z=this.calendars[Y].clone():z.setMonth(Z),L.appendChild(this.renderMonth(z,Y)),Y+=1}if(this.ui.innerHTML="",P.appendChild(L),this.options.resetButton){var K=void 0;typeof this.options.resetButton=="function"?K=this.options.resetButton.call(this):((K=document.createElement("button")).type="button",K.className=v.resetButton,K.innerHTML=this.options.buttonText.reset),K.addEventListener("click",function(G){G.preventDefault(),D.clearSelection()}),P.querySelector("."+v.monthItem+":last-child").querySelector("."+v.monthItemHeader).appendChild(K)}this.ui.appendChild(P),this.options.autoApply&&!this.options.footerHTML||this.ui.appendChild(this.renderFooter()),this.options.showTooltip&&this.ui.appendChild(this.renderTooltip()),this.ui.dataset.plugins=(this.options.plugins||[]).join("|"),this.emit("render",this.ui)},k.prototype.renderMonth=function(D,P){var L=this,j=D.clone(),U=32-new Date(j.getFullYear(),j.getMonth(),32).getDate(),N=document.createElement("div");N.className=v.monthItem;var Y=document.createElement("div");Y.className=v.monthItemHeader;var Z=document.createElement("div");if(this.options.dropdowns.months){var z=document.createElement("select");z.className=v.monthItemName;for(var K=0;K<12;K+=1){var G=document.createElement("option"),rt=new p.DateTime(new Date(D.getFullYear(),K,2,0,0,0)),dt=new p.DateTime(new Date(D.getFullYear(),K,1,0,0,0));G.value=String(K),G.text=rt.toLocaleString(this.options.lang,{month:"long"}),G.disabled=this.options.minDate&&dt.isBefore(new p.DateTime(this.options.minDate),"month")||this.options.maxDate&&dt.isAfter(new p.DateTime(this.options.maxDate),"month"),G.selected=dt.getMonth()===D.getMonth(),z.appendChild(G)}z.addEventListener("change",function(Qt){var Pe=Qt.target,nt=0;if(L.options.splitView){var et=Pe.closest("."+v.monthItem);nt=T.findNestedMonthItem(et)}L.calendars[nt].setMonth(Number(Pe.value)),L.render(),L.emit("change:month",L.calendars[nt],nt,Qt)}),Z.appendChild(z)}else(rt=document.createElement("strong")).className=v.monthItemName,rt.innerHTML=D.toLocaleString(this.options.lang,{month:"long"}),Z.appendChild(rt);if(this.options.dropdowns.years){var Bt=document.createElement("select");Bt.className=v.monthItemYear;var Tt=this.options.dropdowns.minYear,ie=this.options.dropdowns.maxYear?this.options.dropdowns.maxYear:new Date().getFullYear();for(D.getFullYear()>ie&&((G=document.createElement("option")).value=String(D.getFullYear()),G.text=String(D.getFullYear()),G.selected=!0,G.disabled=!0,Bt.appendChild(G)),K=ie;K>=Tt;K-=1){var G=document.createElement("option"),Kt=new p.DateTime(new Date(K,0,1,0,0,0));G.value=String(K),G.text=String(K),G.disabled=this.options.minDate&&Kt.isBefore(new p.DateTime(this.options.minDate),"year")||this.options.maxDate&&Kt.isAfter(new p.DateTime(this.options.maxDate),"year"),G.selected=D.getFullYear()===K,Bt.appendChild(G)}if(D.getFullYear()<Tt&&((G=document.createElement("option")).value=String(D.getFullYear()),G.text=String(D.getFullYear()),G.selected=!0,G.disabled=!0,Bt.appendChild(G)),this.options.dropdowns.years==="asc"){var Gt=Array.prototype.slice.call(Bt.childNodes).reverse();Bt.innerHTML="",Gt.forEach(function(Qt){Qt.innerHTML=Qt.value,Bt.appendChild(Qt)})}Bt.addEventListener("change",function(Qt){var Pe=Qt.target,nt=0;if(L.options.splitView){var et=Pe.closest("."+v.monthItem);nt=T.findNestedMonthItem(et)}L.calendars[nt].setFullYear(Number(Pe.value)),L.render(),L.emit("change:year",L.calendars[nt],nt,Qt)}),Z.appendChild(Bt)}else{var $t=document.createElement("span");$t.className=v.monthItemYear,$t.innerHTML=String(D.getFullYear()),Z.appendChild($t)}var Ht=document.createElement("button");Ht.type="button",Ht.className=v.buttonPreviousMonth,Ht.innerHTML=this.options.buttonText.previousMonth;var re=document.createElement("button");re.type="button",re.className=v.buttonNextMonth,re.innerHTML=this.options.buttonText.nextMonth,Y.appendChild(Ht),Y.appendChild(Z),Y.appendChild(re),this.options.minDate&&j.isSameOrBefore(new p.DateTime(this.options.minDate),"month")&&N.classList.add(v.noPreviousMonth),this.options.maxDate&&j.isSameOrAfter(new p.DateTime(this.options.maxDate),"month")&&N.classList.add(v.noNextMonth);var Ne=document.createElement("div");Ne.className=v.monthItemWeekdaysRow,this.options.showWeekNumbers&&(Ne.innerHTML="<div>W</div>");for(var se=1;se<=7;se+=1){var pe=3+this.options.firstDay+se,ue=document.createElement("div");ue.innerHTML=this.weekdayName(pe),ue.title=this.weekdayName(pe,"long"),Ne.appendChild(ue)}var fe=document.createElement("div");fe.className=v.containerDays;var Ue=this.calcSkipDays(j);this.options.showWeekNumbers&&Ue&&fe.appendChild(this.renderWeekNumber(j));for(var ye=0;ye<Ue;ye+=1){var _e=document.createElement("div");fe.appendChild(_e)}for(ye=1;ye<=U;ye+=1)j.setDate(ye),this.options.showWeekNumbers&&j.getDay()===this.options.firstDay&&fe.appendChild(this.renderWeekNumber(j)),fe.appendChild(this.renderDay(j));return N.appendChild(Y),N.appendChild(Ne),N.appendChild(fe),this.emit("render:month",N,D),N},k.prototype.renderDay=function(D){D.setHours();var P=document.createElement("div");if(P.className=v.dayItem,P.innerHTML=String(D.getDate()),P.dataset.time=String(D.getTime()),D.toDateString()===new Date().toDateString()&&P.classList.add(v.isToday),this.datePicked.length)this.datePicked[0].toDateString()===D.toDateString()&&(P.classList.add(v.isStartDate),this.options.singleMode&&P.classList.add(v.isEndDate)),this.datePicked.length===2&&this.datePicked[1].toDateString()===D.toDateString()&&P.classList.add(v.isEndDate),this.datePicked.length===2&&D.isBetween(this.datePicked[0],this.datePicked[1])&&P.classList.add(v.isInRange);else if(this.options.startDate){var L=this.options.startDate,j=this.options.endDate;L.toDateString()===D.toDateString()&&(P.classList.add(v.isStartDate),this.options.singleMode&&P.classList.add(v.isEndDate)),j&&j.toDateString()===D.toDateString()&&P.classList.add(v.isEndDate),L&&j&&D.isBetween(L,j)&&P.classList.add(v.isInRange)}if(this.options.minDate&&D.isBefore(new p.DateTime(this.options.minDate))&&P.classList.add(v.isLocked),this.options.maxDate&&D.isAfter(new p.DateTime(this.options.maxDate))&&P.classList.add(v.isLocked),this.options.minDays>1&&this.datePicked.length===1){var U=this.options.minDays-1,N=this.datePicked[0].clone().subtract(U,"day"),Y=this.datePicked[0].clone().add(U,"day");D.isBetween(N,this.datePicked[0],"(]")&&P.classList.add(v.isLocked),D.isBetween(this.datePicked[0],Y,"[)")&&P.classList.add(v.isLocked)}if(this.options.maxDays&&this.datePicked.length===1){var Z=this.options.maxDays;N=this.datePicked[0].clone().subtract(Z,"day"),Y=this.datePicked[0].clone().add(Z,"day"),D.isSameOrBefore(N)&&P.classList.add(v.isLocked),D.isSameOrAfter(Y)&&P.classList.add(v.isLocked)}return this.options.selectForward&&this.datePicked.length===1&&D.isBefore(this.datePicked[0])&&P.classList.add(v.isLocked),this.options.selectBackward&&this.datePicked.length===1&&D.isAfter(this.datePicked[0])&&P.classList.add(v.isLocked),T.dateIsLocked(D,this.options,this.datePicked)&&P.classList.add(v.isLocked),this.options.highlightedDays.length&&this.options.highlightedDays.filter(function(z){return z instanceof Array?D.isBetween(z[0],z[1],"[]"):z.isSame(D,"day")}).length&&P.classList.add(v.isHighlighted),P.tabIndex=P.classList.contains("is-locked")?-1:0,this.emit("render:day",P,D),P},k.prototype.renderFooter=function(){var D=document.createElement("div");if(D.className=v.containerFooter,this.options.footerHTML?D.innerHTML=this.options.footerHTML:D.innerHTML=`
      <span class="`+v.previewDateRange+`"></span>
      <button type="button" class="`+v.buttonCancel+'">'+this.options.buttonText.cancel+`</button>
      <button type="button" class="`+v.buttonApply+'">'+this.options.buttonText.apply+`</button>
      `,this.options.singleMode){if(this.datePicked.length===1){var P=this.datePicked[0].format(this.options.format,this.options.lang);D.querySelector("."+v.previewDateRange).innerHTML=P}}else if(this.datePicked.length===1&&D.querySelector("."+v.buttonApply).setAttribute("disabled",""),this.datePicked.length===2){P=this.datePicked[0].format(this.options.format,this.options.lang);var L=this.datePicked[1].format(this.options.format,this.options.lang);D.querySelector("."+v.previewDateRange).innerHTML=""+P+this.options.delimiter+L}return this.emit("render:footer",D),D},k.prototype.renderWeekNumber=function(D){var P=document.createElement("div"),L=D.getWeek(this.options.firstDay);return P.className=v.weekNumber,P.innerHTML=L===53&&D.getMonth()===0?"53 / 1":L,P},k.prototype.renderTooltip=function(){var D=document.createElement("div");return D.className=v.containerTooltip,D},k.prototype.weekdayName=function(D,P){return P===void 0&&(P="short"),new Date(1970,0,D,12,0,0,0).toLocaleString(this.options.lang,{weekday:P})},k.prototype.calcSkipDays=function(D){var P=D.getDay()-this.options.firstDay;return P<0&&(P+=7),P},k}(d.LPCore);o.Calendar=C},function(r,o,l){"use strict";var u,f=this&&this.__extends||(u=function(b,k){return(u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,P){D.__proto__=P}||function(D,P){for(var L in P)P.hasOwnProperty(L)&&(D[L]=P[L])})(b,k)},function(b,k){function D(){this.constructor=b}u(b,k),b.prototype=k===null?Object.create(k):(D.prototype=k.prototype,new D)}),d=this&&this.__assign||function(){return(d=Object.assign||function(b){for(var k,D=1,P=arguments.length;D<P;D++)for(var L in k=arguments[D])Object.prototype.hasOwnProperty.call(k,L)&&(b[L]=k[L]);return b}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var p=l(7),v=l(0),T=l(1),C=function(b){function k(D){var P=b.call(this)||this;P.datePicked=[],P.calendars=[],P.options={element:null,elementEnd:null,parentEl:null,firstDay:1,format:"YYYY-MM-DD",lang:"en-US",delimiter:" - ",numberOfMonths:1,numberOfColumns:1,startDate:null,endDate:null,zIndex:9999,position:"auto",selectForward:!1,selectBackward:!1,splitView:!1,inlineMode:!1,singleMode:!0,autoApply:!0,allowRepick:!1,showWeekNumbers:!1,showTooltip:!0,scrollToDate:!0,mobileFriendly:!0,resetButton:!1,autoRefresh:!1,lockDaysFormat:"YYYY-MM-DD",lockDays:[],disallowLockDaysInRange:!1,lockDaysInclusivity:"[]",highlightedDaysFormat:"YYYY-MM-DD",highlightedDays:[],dropdowns:{minYear:1990,maxYear:null,months:!1,years:!1},buttonText:{apply:"Apply",cancel:"Cancel",previousMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M7.919 0l2.748 2.667L5.333 8l5.334 5.333L7.919 16 0 8z" fill-rule="nonzero"/></svg>',nextMonth:'<svg width="11" height="16" xmlns="http://www.w3.org/2000/svg"><path d="M2.748 16L0 13.333 5.333 8 0 2.667 2.748 0l7.919 8z" fill-rule="nonzero"/></svg>',reset:`<svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 0 24 24" width="24">
        <path d="M0 0h24v24H0z" fill="none"/>
        <path d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"/>
      </svg>`},tooltipText:{one:"day",other:"days"}},P.options=d(d({},P.options),D.element.dataset),Object.keys(P.options).forEach(function(Tt){P.options[Tt]!=="true"&&P.options[Tt]!=="false"||(P.options[Tt]=P.options[Tt]==="true")});var L=d(d({},P.options.dropdowns),D.dropdowns),j=d(d({},P.options.buttonText),D.buttonText),U=d(d({},P.options.tooltipText),D.tooltipText);P.options=d(d({},P.options),D),P.options.dropdowns=d({},L),P.options.buttonText=d({},j),P.options.tooltipText=d({},U),P.options.elementEnd||(P.options.allowRepick=!1),P.options.lockDays.length&&(P.options.lockDays=v.DateTime.convertArray(P.options.lockDays,P.options.lockDaysFormat)),P.options.highlightedDays.length&&(P.options.highlightedDays=v.DateTime.convertArray(P.options.highlightedDays,P.options.highlightedDaysFormat));var N=P.parseInput(),Y=N[0],Z=N[1];P.options.startDate&&(P.options.singleMode||P.options.endDate)&&(Y=new v.DateTime(P.options.startDate,P.options.format,P.options.lang)),Y&&P.options.endDate&&(Z=new v.DateTime(P.options.endDate,P.options.format,P.options.lang)),Y instanceof v.DateTime&&!isNaN(Y.getTime())&&(P.options.startDate=Y),P.options.startDate&&Z instanceof v.DateTime&&!isNaN(Z.getTime())&&(P.options.endDate=Z),!P.options.singleMode||P.options.startDate instanceof v.DateTime||(P.options.startDate=null),P.options.singleMode||P.options.startDate instanceof v.DateTime&&P.options.endDate instanceof v.DateTime||(P.options.startDate=null,P.options.endDate=null);for(var z=0;z<P.options.numberOfMonths;z+=1){var K=P.options.startDate instanceof v.DateTime?P.options.startDate.clone():new v.DateTime;if(!P.options.startDate&&(z===0||P.options.splitView)){var G=P.options.maxDate?new v.DateTime(P.options.maxDate):null,rt=P.options.minDate?new v.DateTime(P.options.minDate):null,dt=P.options.numberOfMonths-1;rt&&G&&K.isAfter(G)?(K=rt.clone()).setDate(1):!rt&&G&&K.isAfter(G)&&((K=G.clone()).setDate(1),K.setMonth(K.getMonth()-dt))}K.setDate(1),K.setMonth(K.getMonth()+z),P.calendars[z]=K}if(P.options.showTooltip)if(P.options.tooltipPluralSelector)P.pluralSelector=P.options.tooltipPluralSelector;else try{var Bt=new Intl.PluralRules(P.options.lang);P.pluralSelector=Bt.select.bind(Bt)}catch{P.pluralSelector=function(ie){return Math.abs(ie)===0?"one":"other"}}return P}return f(k,b),k.add=function(D,P){T.Litepicker.prototype[D]=P},k.prototype.DateTime=function(D,P){return D?new v.DateTime(D,P):new v.DateTime},k.prototype.init=function(){var D=this;this.options.plugins&&this.options.plugins.length&&this.options.plugins.forEach(function(P){T.Litepicker.prototype.hasOwnProperty(P)?T.Litepicker.prototype[P].init.call(D,D):console.warn("Litepicker: plugin \xAB"+P+"\xBB not found.")})},k.prototype.parseInput=function(){var D=this.options.delimiter,P=new RegExp(""+D),L=this.options.element instanceof HTMLInputElement?this.options.element.value.split(D):[];if(this.options.elementEnd){if(this.options.element instanceof HTMLInputElement&&this.options.element.value.length&&this.options.elementEnd instanceof HTMLInputElement&&this.options.elementEnd.value.length)return[new v.DateTime(this.options.element.value,this.options.format),new v.DateTime(this.options.elementEnd.value,this.options.format)]}else if(this.options.singleMode){if(this.options.element instanceof HTMLInputElement&&this.options.element.value.length)return[new v.DateTime(this.options.element.value,this.options.format)]}else if(this.options.element instanceof HTMLInputElement&&P.test(this.options.element.value)&&L.length&&L.length%2==0){var j=L.slice(0,L.length/2).join(D),U=L.slice(L.length/2).join(D);return[new v.DateTime(j,this.options.format),new v.DateTime(U,this.options.format)]}return[]},k.prototype.isShowning=function(){return this.ui&&this.ui.style.display!=="none"},k.prototype.findPosition=function(D){var P=D.getBoundingClientRect(),L=this.ui.getBoundingClientRect(),j=this.options.position.split(" "),U=window.scrollX||window.pageXOffset,N=window.scrollY||window.pageYOffset,Y=0,Z=0;if(j[0]!=="auto"&&/top|bottom/.test(j[0]))Y=P[j[0]]+N,j[0]==="top"&&(Y-=L.height);else{Y=P.bottom+N;var z=P.bottom+L.height>window.innerHeight,K=P.top+N-L.height>=L.height;z&&K&&(Y=P.top+N-L.height)}if(/left|right/.test(j[0])||j[1]&&j[1]!=="auto"&&/left|right/.test(j[1]))Z=/left|right/.test(j[0])?P[j[0]]+U:P[j[1]]+U,j[0]!=="right"&&j[1]!=="right"||(Z-=L.width);else{Z=P.left+U,z=P.left+L.width>window.innerWidth;var G=P.right+U-L.width>=0;z&&G&&(Z=P.right+U-L.width)}return{left:Z,top:Y}},k}(p.EventEmitter);o.LPCore=C},function(r,o,l){"use strict";var u,f=typeof Reflect=="object"?Reflect:null,d=f&&typeof f.apply=="function"?f.apply:function(U,N,Y){return Function.prototype.apply.call(U,N,Y)};u=f&&typeof f.ownKeys=="function"?f.ownKeys:Object.getOwnPropertySymbols?function(U){return Object.getOwnPropertyNames(U).concat(Object.getOwnPropertySymbols(U))}:function(U){return Object.getOwnPropertyNames(U)};var p=Number.isNaN||function(U){return U!=U};function v(){v.init.call(this)}r.exports=v,v.EventEmitter=v,v.prototype._events=void 0,v.prototype._eventsCount=0,v.prototype._maxListeners=void 0;var T=10;function C(U){return U._maxListeners===void 0?v.defaultMaxListeners:U._maxListeners}function b(U,N,Y,Z){var z,K,G,rt;if(typeof Y!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Y);if((K=U._events)===void 0?(K=U._events=Object.create(null),U._eventsCount=0):(K.newListener!==void 0&&(U.emit("newListener",N,Y.listener?Y.listener:Y),K=U._events),G=K[N]),G===void 0)G=K[N]=Y,++U._eventsCount;else if(typeof G=="function"?G=K[N]=Z?[Y,G]:[G,Y]:Z?G.unshift(Y):G.push(Y),(z=C(U))>0&&G.length>z&&!G.warned){G.warned=!0;var dt=new Error("Possible EventEmitter memory leak detected. "+G.length+" "+String(N)+" listeners added. Use emitter.setMaxListeners() to increase limit");dt.name="MaxListenersExceededWarning",dt.emitter=U,dt.type=N,dt.count=G.length,rt=dt,console&&console.warn&&console.warn(rt)}return U}function k(){for(var U=[],N=0;N<arguments.length;N++)U.push(arguments[N]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,d(this.listener,this.target,U))}function D(U,N,Y){var Z={fired:!1,wrapFn:void 0,target:U,type:N,listener:Y},z=k.bind(Z);return z.listener=Y,Z.wrapFn=z,z}function P(U,N,Y){var Z=U._events;if(Z===void 0)return[];var z=Z[N];return z===void 0?[]:typeof z=="function"?Y?[z.listener||z]:[z]:Y?function(K){for(var G=new Array(K.length),rt=0;rt<G.length;++rt)G[rt]=K[rt].listener||K[rt];return G}(z):j(z,z.length)}function L(U){var N=this._events;if(N!==void 0){var Y=N[U];if(typeof Y=="function")return 1;if(Y!==void 0)return Y.length}return 0}function j(U,N){for(var Y=new Array(N),Z=0;Z<N;++Z)Y[Z]=U[Z];return Y}Object.defineProperty(v,"defaultMaxListeners",{enumerable:!0,get:function(){return T},set:function(U){if(typeof U!="number"||U<0||p(U))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+U+".");T=U}}),v.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},v.prototype.setMaxListeners=function(U){if(typeof U!="number"||U<0||p(U))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+U+".");return this._maxListeners=U,this},v.prototype.getMaxListeners=function(){return C(this)},v.prototype.emit=function(U){for(var N=[],Y=1;Y<arguments.length;Y++)N.push(arguments[Y]);var Z=U==="error",z=this._events;if(z!==void 0)Z=Z&&z.error===void 0;else if(!Z)return!1;if(Z){var K;if(N.length>0&&(K=N[0]),K instanceof Error)throw K;var G=new Error("Unhandled error."+(K?" ("+K.message+")":""));throw G.context=K,G}var rt=z[U];if(rt===void 0)return!1;if(typeof rt=="function")d(rt,this,N);else{var dt=rt.length,Bt=j(rt,dt);for(Y=0;Y<dt;++Y)d(Bt[Y],this,N)}return!0},v.prototype.addListener=function(U,N){return b(this,U,N,!1)},v.prototype.on=v.prototype.addListener,v.prototype.prependListener=function(U,N){return b(this,U,N,!0)},v.prototype.once=function(U,N){if(typeof N!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N);return this.on(U,D(this,U,N)),this},v.prototype.prependOnceListener=function(U,N){if(typeof N!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N);return this.prependListener(U,D(this,U,N)),this},v.prototype.removeListener=function(U,N){var Y,Z,z,K,G;if(typeof N!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof N);if((Z=this._events)===void 0)return this;if((Y=Z[U])===void 0)return this;if(Y===N||Y.listener===N)--this._eventsCount==0?this._events=Object.create(null):(delete Z[U],Z.removeListener&&this.emit("removeListener",U,Y.listener||N));else if(typeof Y!="function"){for(z=-1,K=Y.length-1;K>=0;K--)if(Y[K]===N||Y[K].listener===N){G=Y[K].listener,z=K;break}if(z<0)return this;z===0?Y.shift():function(rt,dt){for(;dt+1<rt.length;dt++)rt[dt]=rt[dt+1];rt.pop()}(Y,z),Y.length===1&&(Z[U]=Y[0]),Z.removeListener!==void 0&&this.emit("removeListener",U,G||N)}return this},v.prototype.off=v.prototype.removeListener,v.prototype.removeAllListeners=function(U){var N,Y,Z;if((Y=this._events)===void 0)return this;if(Y.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Y[U]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Y[U]),this;if(arguments.length===0){var z,K=Object.keys(Y);for(Z=0;Z<K.length;++Z)(z=K[Z])!=="removeListener"&&this.removeAllListeners(z);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(N=Y[U])=="function")this.removeListener(U,N);else if(N!==void 0)for(Z=N.length-1;Z>=0;Z--)this.removeListener(U,N[Z]);return this},v.prototype.listeners=function(U){return P(this,U,!0)},v.prototype.rawListeners=function(U){return P(this,U,!1)},v.listenerCount=function(U,N){return typeof U.listenerCount=="function"?U.listenerCount(N):L.call(U,N)},v.prototype.listenerCount=L,v.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]}},function(r,o,l){(o=l(9)(!1)).push([r.i,`:root{--litepicker-container-months-color-bg: #fff;--litepicker-container-months-box-shadow-color: #ddd;--litepicker-footer-color-bg: #fafafa;--litepicker-footer-box-shadow-color: #ddd;--litepicker-tooltip-color-bg: #fff;--litepicker-month-header-color: #333;--litepicker-button-prev-month-color: #9e9e9e;--litepicker-button-next-month-color: #9e9e9e;--litepicker-button-prev-month-color-hover: #2196f3;--litepicker-button-next-month-color-hover: #2196f3;--litepicker-month-width: calc(var(--litepicker-day-width) * 7);--litepicker-month-weekday-color: #9e9e9e;--litepicker-month-week-number-color: #9e9e9e;--litepicker-day-width: 38px;--litepicker-day-color: #333;--litepicker-day-color-hover: #2196f3;--litepicker-is-today-color: #f44336;--litepicker-is-in-range-color: #bbdefb;--litepicker-is-locked-color: #9e9e9e;--litepicker-is-start-color: #fff;--litepicker-is-start-color-bg: #2196f3;--litepicker-is-end-color: #fff;--litepicker-is-end-color-bg: #2196f3;--litepicker-button-cancel-color: #fff;--litepicker-button-cancel-color-bg: #9e9e9e;--litepicker-button-apply-color: #fff;--litepicker-button-apply-color-bg: #2196f3;--litepicker-button-reset-color: #909090;--litepicker-button-reset-color-hover: #2196f3;--litepicker-highlighted-day-color: #333;--litepicker-highlighted-day-color-bg: #ffeb3b}.show-week-numbers{--litepicker-month-width: calc(var(--litepicker-day-width) * 8)}.litepicker{font-family:-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;font-size:0.8em;display:none}.litepicker button{border:none;background:none}.litepicker .container__main{display:-webkit-box;display:-ms-flexbox;display:flex}.litepicker .container__months{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;background-color:var(--litepicker-container-months-color-bg);border-radius:5px;-webkit-box-shadow:0 0 5px var(--litepicker-container-months-box-shadow-color);box-shadow:0 0 5px var(--litepicker-container-months-box-shadow-color);width:calc(var(--litepicker-month-width) + 10px);-webkit-box-sizing:content-box;box-sizing:content-box}.litepicker .container__months.columns-2{width:calc((var(--litepicker-month-width) * 2) + 20px)}.litepicker .container__months.columns-3{width:calc((var(--litepicker-month-width) * 3) + 30px)}.litepicker .container__months.columns-4{width:calc((var(--litepicker-month-width) * 4) + 40px)}.litepicker .container__months.split-view .month-item-header .button-previous-month,.litepicker .container__months.split-view .month-item-header .button-next-month{visibility:visible}.litepicker .container__months .month-item{padding:5px;width:var(--litepicker-month-width);-webkit-box-sizing:content-box;box-sizing:content-box}.litepicker .container__months .month-item-header{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;font-weight:500;padding:10px 5px;text-align:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:var(--litepicker-month-header-color)}.litepicker .container__months .month-item-header div{-webkit-box-flex:1;-ms-flex:1;flex:1}.litepicker .container__months .month-item-header div>.month-item-name{margin-right:5px}.litepicker .container__months .month-item-header div>.month-item-year{padding:0}.litepicker .container__months .month-item-header .reset-button{color:var(--litepicker-button-reset-color)}.litepicker .container__months .month-item-header .reset-button>svg{fill:var(--litepicker-button-reset-color)}.litepicker .container__months .month-item-header .reset-button *{pointer-events:none}.litepicker .container__months .month-item-header .reset-button:hover{color:var(--litepicker-button-reset-color-hover)}.litepicker .container__months .month-item-header .reset-button:hover>svg{fill:var(--litepicker-button-reset-color-hover)}.litepicker .container__months .month-item-header .button-previous-month,.litepicker .container__months .month-item-header .button-next-month{visibility:hidden;text-decoration:none;padding:3px 5px;border-radius:3px;-webkit-transition:color 0.3s, border 0.3s;transition:color 0.3s, border 0.3s;cursor:default}.litepicker .container__months .month-item-header .button-previous-month *,.litepicker .container__months .month-item-header .button-next-month *{pointer-events:none}.litepicker .container__months .month-item-header .button-previous-month{color:var(--litepicker-button-prev-month-color)}.litepicker .container__months .month-item-header .button-previous-month>svg,.litepicker .container__months .month-item-header .button-previous-month>img{fill:var(--litepicker-button-prev-month-color)}.litepicker .container__months .month-item-header .button-previous-month:hover{color:var(--litepicker-button-prev-month-color-hover)}.litepicker .container__months .month-item-header .button-previous-month:hover>svg{fill:var(--litepicker-button-prev-month-color-hover)}.litepicker .container__months .month-item-header .button-next-month{color:var(--litepicker-button-next-month-color)}.litepicker .container__months .month-item-header .button-next-month>svg,.litepicker .container__months .month-item-header .button-next-month>img{fill:var(--litepicker-button-next-month-color)}.litepicker .container__months .month-item-header .button-next-month:hover{color:var(--litepicker-button-next-month-color-hover)}.litepicker .container__months .month-item-header .button-next-month:hover>svg{fill:var(--litepicker-button-next-month-color-hover)}.litepicker .container__months .month-item-weekdays-row{display:-webkit-box;display:-ms-flexbox;display:flex;justify-self:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;color:var(--litepicker-month-weekday-color)}.litepicker .container__months .month-item-weekdays-row>div{padding:5px 0;font-size:85%;-webkit-box-flex:1;-ms-flex:1;flex:1;width:var(--litepicker-day-width);text-align:center}.litepicker .container__months .month-item:first-child .button-previous-month{visibility:visible}.litepicker .container__months .month-item:last-child .button-next-month{visibility:visible}.litepicker .container__months .month-item.no-previous-month .button-previous-month{visibility:hidden}.litepicker .container__months .month-item.no-next-month .button-next-month{visibility:hidden}.litepicker .container__days{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;justify-self:center;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;text-align:center;-webkit-box-sizing:content-box;box-sizing:content-box}.litepicker .container__days>div,.litepicker .container__days>a{padding:5px 0;width:var(--litepicker-day-width)}.litepicker .container__days .day-item{color:var(--litepicker-day-color);text-align:center;text-decoration:none;border-radius:3px;-webkit-transition:color 0.3s, border 0.3s;transition:color 0.3s, border 0.3s;cursor:default}.litepicker .container__days .day-item:hover{color:var(--litepicker-day-color-hover);-webkit-box-shadow:inset 0 0 0 1px var(--litepicker-day-color-hover);box-shadow:inset 0 0 0 1px var(--litepicker-day-color-hover)}.litepicker .container__days .day-item.is-today{color:var(--litepicker-is-today-color)}.litepicker .container__days .day-item.is-locked{color:var(--litepicker-is-locked-color)}.litepicker .container__days .day-item.is-locked:hover{color:var(--litepicker-is-locked-color);-webkit-box-shadow:none;box-shadow:none;cursor:default}.litepicker .container__days .day-item.is-in-range{background-color:var(--litepicker-is-in-range-color);border-radius:0}.litepicker .container__days .day-item.is-start-date{color:var(--litepicker-is-start-color);background-color:var(--litepicker-is-start-color-bg);border-top-left-radius:5px;border-bottom-left-radius:5px;border-top-right-radius:0;border-bottom-right-radius:0}.litepicker .container__days .day-item.is-start-date.is-flipped{border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:5px;border-bottom-right-radius:5px}.litepicker .container__days .day-item.is-end-date{color:var(--litepicker-is-end-color);background-color:var(--litepicker-is-end-color-bg);border-top-left-radius:0;border-bottom-left-radius:0;border-top-right-radius:5px;border-bottom-right-radius:5px}.litepicker .container__days .day-item.is-end-date.is-flipped{border-top-left-radius:5px;border-bottom-left-radius:5px;border-top-right-radius:0;border-bottom-right-radius:0}.litepicker .container__days .day-item.is-start-date.is-end-date{border-top-left-radius:5px;border-bottom-left-radius:5px;border-top-right-radius:5px;border-bottom-right-radius:5px}.litepicker .container__days .day-item.is-highlighted{color:var(--litepicker-highlighted-day-color);background-color:var(--litepicker-highlighted-day-color-bg)}.litepicker .container__days .week-number{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;color:var(--litepicker-month-week-number-color);font-size:85%}.litepicker .container__footer{text-align:right;padding:10px 5px;margin:0 5px;background-color:var(--litepicker-footer-color-bg);-webkit-box-shadow:inset 0px 3px 3px 0px var(--litepicker-footer-box-shadow-color);box-shadow:inset 0px 3px 3px 0px var(--litepicker-footer-box-shadow-color);border-bottom-left-radius:5px;border-bottom-right-radius:5px}.litepicker .container__footer .preview-date-range{margin-right:10px;font-size:90%}.litepicker .container__footer .button-cancel{background-color:var(--litepicker-button-cancel-color-bg);color:var(--litepicker-button-cancel-color);border:0;padding:3px 7px 4px;border-radius:3px}.litepicker .container__footer .button-cancel *{pointer-events:none}.litepicker .container__footer .button-apply{background-color:var(--litepicker-button-apply-color-bg);color:var(--litepicker-button-apply-color);border:0;padding:3px 7px 4px;border-radius:3px;margin-left:10px;margin-right:10px}.litepicker .container__footer .button-apply:disabled{opacity:0.7}.litepicker .container__footer .button-apply *{pointer-events:none}.litepicker .container__tooltip{position:absolute;margin-top:-4px;padding:4px 8px;border-radius:4px;background-color:var(--litepicker-tooltip-color-bg);-webkit-box-shadow:0 1px 3px rgba(0,0,0,0.25);box-shadow:0 1px 3px rgba(0,0,0,0.25);white-space:nowrap;font-size:11px;pointer-events:none;visibility:hidden}.litepicker .container__tooltip:before{position:absolute;bottom:-5px;left:calc(50% - 5px);border-top:5px solid rgba(0,0,0,0.12);border-right:5px solid transparent;border-left:5px solid transparent;content:""}.litepicker .container__tooltip:after{position:absolute;bottom:-4px;left:calc(50% - 4px);border-top:4px solid var(--litepicker-tooltip-color-bg);border-right:4px solid transparent;border-left:4px solid transparent;content:""}
`,""]),o.locals={showWeekNumbers:"show-week-numbers",litepicker:"litepicker",containerMain:"container__main",containerMonths:"container__months",columns2:"columns-2",columns3:"columns-3",columns4:"columns-4",splitView:"split-view",monthItemHeader:"month-item-header",buttonPreviousMonth:"button-previous-month",buttonNextMonth:"button-next-month",monthItem:"month-item",monthItemName:"month-item-name",monthItemYear:"month-item-year",resetButton:"reset-button",monthItemWeekdaysRow:"month-item-weekdays-row",noPreviousMonth:"no-previous-month",noNextMonth:"no-next-month",containerDays:"container__days",dayItem:"day-item",isToday:"is-today",isLocked:"is-locked",isInRange:"is-in-range",isStartDate:"is-start-date",isFlipped:"is-flipped",isEndDate:"is-end-date",isHighlighted:"is-highlighted",weekNumber:"week-number",containerFooter:"container__footer",previewDateRange:"preview-date-range",buttonCancel:"button-cancel",buttonApply:"button-apply",containerTooltip:"container__tooltip"},r.exports=o},function(r,o,l){"use strict";r.exports=function(u){var f=[];return f.toString=function(){return this.map(function(d){var p=function(v,T){var C=v[1]||"",b=v[3];if(!b)return C;if(T&&typeof btoa=="function"){var k=(P=b,L=btoa(unescape(encodeURIComponent(JSON.stringify(P)))),j="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(L),"/*# ".concat(j," */")),D=b.sources.map(function(U){return"/*# sourceURL=".concat(b.sourceRoot||"").concat(U," */")});return[C].concat(D).concat([k]).join(`
`)}var P,L,j;return[C].join(`
`)}(d,u);return d[2]?"@media ".concat(d[2]," {").concat(p,"}"):p}).join("")},f.i=function(d,p,v){typeof d=="string"&&(d=[[null,d,""]]);var T={};if(v)for(var C=0;C<this.length;C++){var b=this[C][0];b!=null&&(T[b]=!0)}for(var k=0;k<d.length;k++){var D=[].concat(d[k]);v&&T[D[0]]||(p&&(D[2]?D[2]="".concat(p," and ").concat(D[2]):D[2]=p),f.push(D))}},f}},function(r,o,l){"use strict";var u,f={},d=function(){return u===void 0&&(u=Boolean(window&&document&&document.all&&!window.atob)),u},p=function(){var N={};return function(Y){if(N[Y]===void 0){var Z=document.querySelector(Y);if(window.HTMLIFrameElement&&Z instanceof window.HTMLIFrameElement)try{Z=Z.contentDocument.head}catch{Z=null}N[Y]=Z}return N[Y]}}();function v(N,Y){for(var Z=[],z={},K=0;K<N.length;K++){var G=N[K],rt=Y.base?G[0]+Y.base:G[0],dt={css:G[1],media:G[2],sourceMap:G[3]};z[rt]?z[rt].parts.push(dt):Z.push(z[rt]={id:rt,parts:[dt]})}return Z}function T(N,Y){for(var Z=0;Z<N.length;Z++){var z=N[Z],K=f[z.id],G=0;if(K){for(K.refs++;G<K.parts.length;G++)K.parts[G](z.parts[G]);for(;G<z.parts.length;G++)K.parts.push(U(z.parts[G],Y))}else{for(var rt=[];G<z.parts.length;G++)rt.push(U(z.parts[G],Y));f[z.id]={id:z.id,refs:1,parts:rt}}}}function C(N){var Y=document.createElement("style");if(N.attributes.nonce===void 0){var Z=l.nc;Z&&(N.attributes.nonce=Z)}if(Object.keys(N.attributes).forEach(function(K){Y.setAttribute(K,N.attributes[K])}),typeof N.insert=="function")N.insert(Y);else{var z=p(N.insert||"head");if(!z)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");z.appendChild(Y)}return Y}var b,k=(b=[],function(N,Y){return b[N]=Y,b.filter(Boolean).join(`
`)});function D(N,Y,Z,z){var K=Z?"":z.css;if(N.styleSheet)N.styleSheet.cssText=k(Y,K);else{var G=document.createTextNode(K),rt=N.childNodes;rt[Y]&&N.removeChild(rt[Y]),rt.length?N.insertBefore(G,rt[Y]):N.appendChild(G)}}function P(N,Y,Z){var z=Z.css,K=Z.media,G=Z.sourceMap;if(K&&N.setAttribute("media",K),G&&btoa&&(z+=`
/*# sourceMappingURL=data:application/json;base64,`.concat(btoa(unescape(encodeURIComponent(JSON.stringify(G))))," */")),N.styleSheet)N.styleSheet.cssText=z;else{for(;N.firstChild;)N.removeChild(N.firstChild);N.appendChild(document.createTextNode(z))}}var L=null,j=0;function U(N,Y){var Z,z,K;if(Y.singleton){var G=j++;Z=L||(L=C(Y)),z=D.bind(null,Z,G,!1),K=D.bind(null,Z,G,!0)}else Z=C(Y),z=P.bind(null,Z,Y),K=function(){(function(rt){if(rt.parentNode===null)return!1;rt.parentNode.removeChild(rt)})(Z)};return z(N),function(rt){if(rt){if(rt.css===N.css&&rt.media===N.media&&rt.sourceMap===N.sourceMap)return;z(N=rt)}else K()}}r.exports=function(N,Y){(Y=Y||{}).attributes=typeof Y.attributes=="object"?Y.attributes:{},Y.singleton||typeof Y.singleton=="boolean"||(Y.singleton=d());var Z=v(N,Y);return T(Z,Y),function(z){for(var K=[],G=0;G<Z.length;G++){var rt=Z[G],dt=f[rt.id];dt&&(dt.refs--,K.push(dt))}z&&T(v(z,Y),Y);for(var Bt=0;Bt<K.length;Bt++){var Tt=K[Bt];if(Tt.refs===0){for(var ie=0;ie<Tt.parts.length;ie++)Tt.parts[ie]();delete f[Tt.id]}}}}},function(r,o,l){"use strict";var u=this&&this.__assign||function(){return(u=Object.assign||function(v){for(var T,C=1,b=arguments.length;C<b;C++)for(var k in T=arguments[C])Object.prototype.hasOwnProperty.call(T,k)&&(v[k]=T[k]);return v}).apply(this,arguments)};Object.defineProperty(o,"__esModule",{value:!0});var f=l(0),d=l(1),p=l(2);d.Litepicker.prototype.show=function(v){v===void 0&&(v=null),this.emit("before:show",v);var T=v||this.options.element;if(this.triggerElement=T,!this.isShowning()){if(this.options.inlineMode)return this.ui.style.position="relative",this.ui.style.display="inline-block",this.ui.style.top=null,this.ui.style.left=null,this.ui.style.bottom=null,void(this.ui.style.right=null);this.scrollToDate(v),this.render(),this.ui.style.position="absolute",this.ui.style.display="block",this.ui.style.zIndex=this.options.zIndex;var C=this.findPosition(T);this.ui.style.top=C.top+"px",this.ui.style.left=C.left+"px",this.ui.style.right=null,this.ui.style.bottom=null,this.emit("show",v)}},d.Litepicker.prototype.hide=function(){this.isShowning()&&(this.datePicked.length=0,this.updateInput(),this.options.inlineMode?this.render():(this.ui.style.display="none",this.emit("hide")))},d.Litepicker.prototype.getDate=function(){return this.getStartDate()},d.Litepicker.prototype.getStartDate=function(){return this.options.startDate?this.options.startDate.clone():null},d.Litepicker.prototype.getEndDate=function(){return this.options.endDate?this.options.endDate.clone():null},d.Litepicker.prototype.setDate=function(v,T){T===void 0&&(T=!1);var C=new f.DateTime(v,this.options.format,this.options.lang);p.dateIsLocked(C,this.options,[C])&&!T?this.emit("error:date",C):(this.setStartDate(v),this.options.inlineMode&&this.render(),this.emit("selected",this.getDate()))},d.Litepicker.prototype.setStartDate=function(v){v&&(this.options.startDate=new f.DateTime(v,this.options.format,this.options.lang),this.updateInput())},d.Litepicker.prototype.setEndDate=function(v){v&&(this.options.endDate=new f.DateTime(v,this.options.format,this.options.lang),this.options.startDate.getTime()>this.options.endDate.getTime()&&(this.options.endDate=this.options.startDate.clone(),this.options.startDate=new f.DateTime(v,this.options.format,this.options.lang)),this.updateInput())},d.Litepicker.prototype.setDateRange=function(v,T,C){C===void 0&&(C=!1),this.triggerElement=void 0;var b=new f.DateTime(v,this.options.format,this.options.lang),k=new f.DateTime(T,this.options.format,this.options.lang);(this.options.disallowLockDaysInRange?p.rangeIsLocked([b,k],this.options):p.dateIsLocked(b,this.options,[b,k])||p.dateIsLocked(k,this.options,[b,k]))&&!C?this.emit("error:range",[b,k]):(this.setStartDate(b),this.setEndDate(k),this.options.inlineMode&&this.render(),this.updateInput(),this.emit("selected",this.getStartDate(),this.getEndDate()))},d.Litepicker.prototype.gotoDate=function(v,T){T===void 0&&(T=0);var C=new f.DateTime(v);C.setDate(1),this.calendars[T]=C.clone(),this.render()},d.Litepicker.prototype.setLockDays=function(v){this.options.lockDays=f.DateTime.convertArray(v,this.options.lockDaysFormat),this.render()},d.Litepicker.prototype.setHighlightedDays=function(v){this.options.highlightedDays=f.DateTime.convertArray(v,this.options.highlightedDaysFormat),this.render()},d.Litepicker.prototype.setOptions=function(v){delete v.element,delete v.elementEnd,delete v.parentEl,v.startDate&&(v.startDate=new f.DateTime(v.startDate,this.options.format,this.options.lang)),v.endDate&&(v.endDate=new f.DateTime(v.endDate,this.options.format,this.options.lang));var T=u(u({},this.options.dropdowns),v.dropdowns),C=u(u({},this.options.buttonText),v.buttonText),b=u(u({},this.options.tooltipText),v.tooltipText);this.options=u(u({},this.options),v),this.options.dropdowns=u({},T),this.options.buttonText=u({},C),this.options.tooltipText=u({},b),!this.options.singleMode||this.options.startDate instanceof f.DateTime||(this.options.startDate=null,this.options.endDate=null),this.options.singleMode||this.options.startDate instanceof f.DateTime&&this.options.endDate instanceof f.DateTime||(this.options.startDate=null,this.options.endDate=null);for(var k=0;k<this.options.numberOfMonths;k+=1){var D=this.options.startDate?this.options.startDate.clone():new f.DateTime;D.setDate(1),D.setMonth(D.getMonth()+k),this.calendars[k]=D}this.options.lockDays.length&&(this.options.lockDays=f.DateTime.convertArray(this.options.lockDays,this.options.lockDaysFormat)),this.options.highlightedDays.length&&(this.options.highlightedDays=f.DateTime.convertArray(this.options.highlightedDays,this.options.highlightedDaysFormat)),this.render(),this.options.inlineMode&&this.show(),this.updateInput()},d.Litepicker.prototype.clearSelection=function(){this.options.startDate=null,this.options.endDate=null,this.datePicked.length=0,this.updateInput(),this.isShowning()&&this.render(),this.emit("clear:selection")},d.Litepicker.prototype.destroy=function(){this.ui&&this.ui.parentNode&&(this.ui.parentNode.removeChild(this.ui),this.ui=null),this.emit("destroy")}}]).Litepicker,Ou=new Es,ku={setImages:(r,o)=>{r.querySelectorAll(".image").forEach((l,u)=>{const f=new _u,d=l,p=window.velocityData.offers[l.parentElement.dataset.id].images,v=f.getThumb({width:d.offsetWidth,height:d.offsetHeight},p,o);X.loadImage({url:v.url,node:d})}),Ou.emit("offerImagesLoaded")},setAltImage:(r,o)=>{r.querySelectorAll(".altimage").forEach((l,u)=>{if(velocityData.offers[u].images.length>1){const f=new _u,d=l,p=window.velocityData.offers[u].images,v=f.getThumb({width:d.offsetWidth,height:d.offsetHeight},p,o,1);X.loadImage({url:v.url,node:d})}else return}),Ou.emit("offerImagesLoaded")},setMultiImages:(r,o)=>{const l=new _u,u=[];r.querySelectorAll(".image").forEach((f,d)=>{const p=window.velocityData.offers[d].images;if(u.push(p),p.length>1){f.classList.add("multi");const v=document.createElement("div");v.classList.add("enlarged-container");const T=document.createElement("div");T.classList.add("thumbs-container"),T.style.gridTemplateColumns="repeat(auto-fill, minmax("+100/p.length+"%, 1fr))",p.forEach((C,b)=>{v.innerHTML+=`<div class="enlarged-image image ${b==0?"active":""}" data-id="${b}"></div>`,T.innerHTML+=`<div class="thumb-image image ${b==0?"active":""}" data-id="${b}"></div>`}),f.appendChild(v),f.appendChild(T),f.querySelectorAll(".thumbs-container .image").forEach((C,b)=>{const k=C,D=l.getThumb({width:k.offsetWidth,height:k.offsetHeight},u[d],o,b);X.loadImage({url:D.url,node:k})}),f.querySelectorAll(".enlarged-container .image").forEach((C,b)=>{const k=C,D=l.getThumb({width:k.offsetWidth,height:k.offsetHeight},u[d],o,b);X.loadImage({url:D.url,node:k})})}else{const v=f,T=l.getThumb({width:v.offsetWidth,height:v.offsetHeight},p,"cover");X.loadImage({url:T.url,node:v})}}),document.querySelectorAll(".multi").forEach((f,d)=>{f.querySelectorAll(".thumb-image").forEach((p,v)=>{p.addEventListener("mouseenter",()=>{f.querySelectorAll(".thumb-image").forEach((T,C)=>{T.classList.remove("active")}),p.classList.add("active"),f.querySelectorAll(".enlarged-image").forEach((T,C)=>{T.classList.remove("active")}),f.querySelectorAll(".enlarged-image")[v].classList.add("active")})})}),gu.observer.subscribe("jumpingChange",f=>{document.querySelectorAll(".multi").forEach((d,p)=>{Array.from(d.querySelectorAll(".thumb-image")).forEach((v,T)=>{v.classList.remove("active"),T==0&&v.classList.add("active")}),Array.from(d.querySelectorAll(".enlarged-image")).forEach((v,T)=>{v.classList.remove("active"),T==0&&v.classList.add("active")})})}),Ou.emit("infoImagesLoaded")},textScale:r=>{K_(r)},rollNameText:r=>{},stopRoll:()=>{},restartRoll:r=>{let o;clearTimeout(o),o=setTimeout(function(){ku.rollNameText(r)},__BANNER.ROLLTEXT.TIMEOUT__)},arrowsAction:()=>{X.settings.singleOfferChange||document.querySelectorAll(".arrow").forEach(r=>{r.addEventListener("click",()=>{X.slider.goTo(r.dataset.fun)})})},compareOffers:()=>{f0.init()},zipper:()=>{new d0("top",300,0,30,0,[],!1).init()},enlarger:()=>{new p0().init()},scratch:()=>{new y0({container:document.querySelector(".scratch-container"),background:X.settings.scratchCoverCanvasBG,cover:{src:X.settings.scratchCover,color:X.settings.scratchCoverColor},initMask:X.settings.scratchMask,initMaskOutline:X.settings.scratchMaskOutline?{width:X.settings.scratchMaskOutlineWidth,color:X.settings.scratchMaskOutlineColor}:!1,brushOutline:X.settings.scratchBrushOutline?{width:X.settings.scratchBrushOutlineWidth,color:X.settings.scratchBrushOutlineColor}:!1,percent:X.settings.scratchCoverPercentage,brush:{src:X.settings.scratchBrushImage,size:X.settings.scratchBrushSize},audio:{enabled:X.settings.scratchAudio,src:X.settings.scratchAudioSrc,popup:X.settings.scratchAudioPopup,popupText:X.settings.scratchAudioPopupText},onComplete:()=>{X.scratchComplete()}})},carousel:()=>{new x0().init()},cube:()=>{},search:()=>{}};function b0(r,o){let l;o?l={...ku,...o}:l=ku,r.forEach(u=>{u.dataset.templateFunctions&&u.dataset.templateFunctions.split(",").forEach(f=>{f=f.trim();const d=u.dataset[f.toLowerCase()];l[f]&&l[f].call(!1,u,d&&(O_(d)?JSON.parse(d):d)||!1)})})}var T0=class{constructor(r=X.settings.logos,o=velocityData.paths.main+"images/",l=velocityData.logo.url){this.logos=r,this.link=l,this.path=o}generate(){swappable.swappable_logos?swappable.swappable_keep_regular_logo=="true"?(this.logos.forEach((r,o)=>{document.querySelector(".logo").innerHTML+=`
          <a target="_blank" class="logo__link ${o==0?"logo__link--active":""} logo__link" data-offer-id="logo">
            <img src="${this.path+r}" class="logo__image logo__image-${o}">
          </a>
        `}),this.logos=swappable.swappable_logos.split("|"),this.logos.forEach((r,o)=>{document.querySelector(".logo").innerHTML+=`
          <a class="promologo logo__link" data-offer-id="logo">
            <div style='background-image:url("${r}")' class="logo__image logo__image-${o}"></div>
          </a>
        `})):(this.logos=swappable.swappable_logos.split("|"),this.logos.forEach((r,o)=>{document.querySelector(".logo").innerHTML+=`
          <a class="promologo logo__link ${o==0?"logo__link--active":""}" data-offer-id="logo">
            <div style='background-image:url("${r}")' class="logo__image logo__image-${o}"></div>
          </a>
        `})):this.logos.forEach((r,o)=>{document.querySelector(".logo").innerHTML+=`
        <a class="logo__link ${o==0?"logo__link--active":""} logo__link" data-offer-id="logo">
          <img src="${this.path+r}" class="logo__image logo__image-${o}">
        </a>
      `})}swap(){new vp({delay:2500,elems:document.querySelectorAll(".logo__link")}).start(o=>{o.current.node.classList.remove("logo__link--active"),o.next.node.classList.add("logo__link--active")})}init(){this.generate(),document.querySelectorAll(".logo__link").length>1&&this.swap()}},w0=new T0;w0.init(),Ut.ticker.lagSmoothing(0);var S0={activateOffer(r){if(r===X.currentInfoContainer&&X.settings.offersPerScreen!==1)return;Ut.killTweensOf(".offer-info .offer");const o=document.querySelectorAll(".offer-info .offer");X.settings.offersPerScreen===1?X.slider.getInfo().index>X.slider.getInfo().indexCached?(X.settings.sliderAxis==="horizontal"&&(X.settings.rollTexts.offerInfoRollText&&X.rollTexts.offerInfoRollText.stop(500).start(1e3),Ut.to(o,{x:-20,opacity:0,pointerEvents:"none",onComplete:()=>{Ut.set(o,{x:20}),Ut.to(o[X.slider.getInfo().displayIndex-1],{x:0,opacity:1,pointerEvents:"all"})}})),X.settings.sliderAxis==="vertical"&&(X.settings.rollTexts.offerInfoRollText&&X.rollTexts.offerInfoRollText.stop(500).start(1e3),Ut.to(o,{y:-20,opacity:0,pointerEvents:"none",onComplete:()=>{Ut.set(o,{y:20}),Ut.to(o[X.slider.getInfo().displayIndex-1],{y:0,opacity:1,pointerEvents:"all"})}}))):(X.settings.sliderAxis==="horizontal"&&(X.settings.rollTexts.offerInfoRollText&&X.rollTexts.offerInfoRollText.stop(500).start(1e3),Ut.to(o,{x:20,opacity:0,pointerEvents:"none",onComplete:()=>{Ut.set(o,{x:-20}),Ut.to(o[X.slider.getInfo().displayIndex-1],{x:0,opacity:1,pointerEvents:"all"})}})),X.settings.sliderAxis==="vertical"&&(X.settings.rollTexts.offerInfoRollText&&X.rollTexts.offerInfoRollText.stop(500).start(1e3),Ut.to(o,{y:20,opacity:0,pointerEvents:"none",onComplete:()=>{Ut.set(o,{y:-20}),Ut.to(o[X.slider.getInfo().displayIndex-1],{y:0,opacity:1,pointerEvents:"all"})}}))):X.settings.offersPerScreen>1?Ut.to(o,{opacity:0,scale:.9,duration:.2,pointerEvents:"none",onComplete:()=>{X.settings.rollTexts.offerInfoRollText&&X.rollTexts.offerInfoRollText.stop().start(1e3),Ut.to(o[r],{opacity:1,scale:1,duration:.5,pointerEvents:"all"})}}):Ut.to(o,{opacity:0,duration:.2,pointerEvents:"none",onComplete:()=>{X.settings.rollTexts.offerInfoRollText&&X.rollTexts.offerInfoRollText.stop().start(1e3),Ut.to(o[r],{opacity:1,duration:.2,pointerEvents:"all"})}}),X.currentInfoContainer=r},makeOffers(r){X.myOffers.forEach((o,l)=>{document.querySelector(".offer-info").innerHTML+=Fh(o,{image:!0,altimage:!1,name:!0,price:{price:!0,options:{isBlink:!1,isDiscount:!1,oldPrice:!0}},discount:!0,button:!0,stars:{enabled:!0,starsSource:"stars",image:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>",background:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><path d='M50 4.824l11.395 34.26 36.105.252L68.438 60.76l10.919 34.416L50 74.156l-29.357 21.02L31.562 60.76 2.5 39.336l36.105-.251z'/></svg>",type:"stars_only"},customProperties:{customProperties:!1,customPropertiesList:"cp1, cp2"},counter:{enabled:!1,mask:"{dd}:{hh}:{mm}:{ss}",customProperty:"end_date"}})})},init(){this.makeOffers(X.myOffers),gu.observer.subscribe("jumpingChange",r=>this.activateOffer(r.current.index)),Hp.subscribe("changeOffer",r=>{typeof r!="object"?this.activateOffer(r):this.activateOffer(0)}),Ut.set(document.querySelectorAll(".offer-info .offer"),{opacity:0,pointerEvents:"none"}),Ut.set(document.querySelectorAll(".offer-info .offer")[0],{opacity:1,pointerEvents:"all"})}};(!X.settings.noOffers||X.settings.noOffers&&X.settings.fakeFeed)&&X.offerInfo&&S0.init();var px=document.querySelector(".optout"),E0=document.querySelector(".optout__image.rtb"),mx=document.querySelector(".optout__image.adlook");E0.classList.add("active");var A0=class{constructor(r){this.swap=r,this.container=document.querySelector(".promoboard"),this.banner=document.querySelector(".banner"),this.contentWrapper=document.querySelector(".promoboard__content"),this.isVideo=this.swap.video.render,this.content=this.swap.video.render?this.swap.video.remoteVideoOB:this.swap.swappable_planche;const o=f=>{const d=JSON.parse(this.swap[f]||"{}");return{showTime:d.showTime||2e3,startDelay:d.startDelay!==void 0&&d.startDelay!==null?d.startDelay:4e3,numberOfViews:d.numberOfViews||1,boardInterval:d.boardInterval||4e3,hoverhide:d.hoverhide||!1}},l=`swappable_board_options_${this.swap.PI}_${this.swap.bannerSize}`,u=this.swap[l]?o(l):this.swap[`swappable_board_options_${this.swap.PI}`]?o(`swappable_board_options_${this.swap.PI}`):o("swappable_board_options");this.showTime=u.showTime,this.startDelay=u.startDelay,this.numberOfViews=u.numberOfViews,this.boardInterval=u.boardInterval,this.hoverhide=u.hoverhide}makeContent(r){if(r)if(this.isVideo){const o=document.createElement("video");o.classList.add("promoboard__video"),o.muted=!0,o.playsInline=!0,o.setAttribute("src",r.video),o.setAttribute("type","video/mp4"),this.contentWrapper.innerHTML="",this.contentWrapper.appendChild(o)}else this.contentWrapper.style.background=`url(${r})`}init(){this.container.dataset.offerId="board",Ut.set(this.container,{pointerEvents:"none",opacity:0}),this.makeContent(this.content);const r=Ut.timeline({paused:!0,repeat:Math.max(this.numberOfViews-1,-1),repeatDelay:Number((this.boardInterval/1e3).toFixed(1))});this.hoverhide=="true"&&(this.banner.addEventListener("mouseover",()=>{Ut.to(this.container,{pointerEvents:"none",opacity:0}),r.pause()},!1),this.banner.addEventListener("mouseleave",function(){r.play()},!1)),r.to(this.container,{pointerEvents:"all",opacity:1,onStart:()=>{if(this.isVideo){const o=this.contentWrapper.querySelector(".promoboard__video");o&&o.play()}}}).to(this.container,{pointerEvents:"none",opacity:0,delay:Number((this.showTime/1e3).toFixed(1)),onComplete:()=>{if(this.isVideo){const o=this.contentWrapper.querySelector(".promoboard__video");o&&(o.pause(),o.currentTime=0)}}}),document.querySelector(".promoboard__close").addEventListener("click",o=>{Ut.to(this.container,{pointerEvents:"none",opacity:0}),r.pause(),o.preventDefault()}),setTimeout(()=>{r.play()},this.startDelay)}};document.querySelector("#promoboard")&&new A0(swappable).init();function C0(r){let o=Array.from(document.querySelectorAll("*[data-component-script]")).map(l=>l.dataset.componentScript);o=cp(o),b0(document.querySelectorAll("*[data-template-functions]")),r&&r()}C0(),X.observer&&X.observer.subscribe("contentLoaded",r=>{}),X.scratchComplete=()=>{document.querySelector(".scratch")!=null&&document.querySelector(".scratch").remove()},X.jumpingObserver&&X.jumpingObserver.subscribe("jumpingChange",r=>{}),X.enlargerObserver&&X.enlargerObserver.subscribe("enlargerOpen",r=>{r.open}),X.zipperObserver&&X.zipperObserver.subscribe("zipperOpen",r=>{r.open}),X.videoObserver&&X.videoObserver.subscribe("videoStatus",r=>{}),X.observer.subscribe("contentLoaded",r=>{const o=document.querySelector(".timerBox"),l=document.querySelector(".banner");let u=!1;Ut.set(o,{x:"-100%"});const f=Ut.timeline({repeat:-1}).to(o,{duration:0}).to(o,{duration:.8,x:0,ease:"power1.inOut"}).to(o,{duration:4,x:0,onComplete:()=>{u=!0}}).to(o,{duration:.8,x:"-100%",ease:"power1.inOut"}).to(o,{duration:0}).to(o,{duration:4,x:"-100%",onComplete:()=>{u=!0}});l.addEventListener("mouseenter",()=>{u&&f.pause()}),l.addEventListener("mouseleave",()=>{u&&f.resume()}),f.eventCallback("onStart",()=>{u=!1})})})();/*!
 * 
 *     Litepicker polyfills ie11 v0.0.1 (https://github.com/wakirin/Litepicker-polyfills-ie11)
 *     Package: litepicker-polyfills-ie11 (https://www.npmjs.com/package/litepicker-polyfills-ie11)
 *     License: MIT (https://github.com/wakirin/Litepicker-polyfills-ie11/blob/master/LICENCE.md)
 *     Copyright 2019-2021 Rinat G.
 *     
 *     Hash: 9eade912101059ca519c
 *     Generated on: 1611142500943
 *     
 *//*! ie11CustomProperties.js v4.1.0 | MIT License | https://git.io/fjXMN *//*!
 * GSAP 3.6.0
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*//*!
 * CSSPlugin 3.6.0
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*//*!
 * matrix 3.6.0
 * https://greensock.com
 *
 * Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*//*!
 * Draggable 3.6.0
 * https://greensock.com
 *
 * @license Copyright 2008-2021, GreenSock. All rights reserved.
 * Subject to the terms at https://greensock.com/standard-license or for
 * Club GreenSock members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
 *//*!
 * pixi.js - v7.2.3
 * Compiled Fri, 24 Mar 2023 19:53:04 UTC
 *
 * pixi.js is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*! https://mths.be/punycode v1.3.2 by @mathias *//*!
 * pixi-filters - v4.2.0
 * Compiled Fri, 05 Aug 2022 19:53:35 UTC
 *
 * pixi-filters is licensed under the MIT License.
 * http://www.opensource.org/licenses/mit-license
 *//*!
 * 
 * litepicker.js
 * Litepicker v2.0.11 (https://github.com/wakirin/Litepicker)
 * Package: litepicker (https://www.npmjs.com/package/litepicker)
 * License: MIT (https://github.com/wakirin/Litepicker/blob/master/LICENCE.md)
 * Copyright 2019-2021 Rinat G.
 *     
 * Hash: 339a4d0206c05127153e
 * 
 */
